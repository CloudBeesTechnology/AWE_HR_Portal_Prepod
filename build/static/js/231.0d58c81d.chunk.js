"use strict";(self.webpackChunkcheckingproject=self.webpackChunkcheckingproject||[]).push([[231],{4706:(e,t,n)=>{n.d(t,{L:()=>p});var o=n(2600),i=n(3),s=n(3740),r=(n(3157),n(580)),a=n(7266),c=n(6016),d=n(9715),l=n(9931);async function p(e){var t;let{username:n,password:p,clientMetadata:E,config:u,tokenOrchestrator:x,authFlow:m,preferredChallenge:h}=e;const{userPoolId:g,userPoolClientId:I,userPoolEndpoint:v}=u,A=(null===g||void 0===g?void 0:g.split("_")[1])||"",S=await(0,s.H)(A),R={USERNAME:n,SRP_A:S.A.toString(16)};"USER_AUTH"===m&&h&&(R.PREFERRED_CHALLENGE=h);const y={AuthFlow:m,AuthParameters:R,ClientMetadata:E,ClientId:I,UserContextData:(0,i.d)({username:n,userPoolId:g,userPoolClientId:I})},P=(0,a.R)({endpointResolver:(0,c.o)({endpointOverride:v})}),f=await P({region:(0,d.J)(g),userAgentValue:(0,l.A)(o.BM.SignIn)},y),{ChallengeParameters:C,Session:N}=f,w=null!==(t=null===C||void 0===C?void 0:C.USERNAME)&&void 0!==t?t:n;return(0,r.d5)(w),"PASSWORD_VERIFIER"===f.ChallengeName?(0,r.iI)(r.ff,[p,C,E,N,S,u,x],w,x):f}},2530:(e,t,n)=>{n.d(t,{z:()=>i});var o=n(9379);const i=(e=>{let t=e({active:!1},{type:"RESET"});return{getState:()=>t,dispatch:n=>{t=e(t,n)}}})(((e,t)=>{switch(t.type){case"SET_USERNAME":return(0,o.A)((0,o.A)({},e),{},{username:t.value});case"SET_SESSION":return(0,o.A)((0,o.A)({},e),{},{session:t.value});case"START":return(0,o.A)((0,o.A)({},e),{},{active:!0});case"RESET":return{active:!1};default:return e}}))},3761:(e,t,n)=>{n.d(t,{ZV:()=>a,c$:()=>s,wr:()=>r});var o=n(9379);function i(){return{username:void 0,challengeName:void 0,signInSession:void 0}}const s=(e=>{let t=e({username:void 0,challengeName:void 0,signInSession:void 0},{type:"SET_INITIAL_STATE"});return{getState:()=>t,dispatch:n=>{t=e(t,n)}}})(((e,t)=>{switch(t.type){case"SET_SIGN_IN_SESSION":return(0,o.A)((0,o.A)({},e),{},{signInSession:t.value});case"SET_SIGN_IN_STATE":return(0,o.A)({},t.value);case"SET_CHALLENGE_NAME":return(0,o.A)((0,o.A)({},e),{},{challengeName:t.value});case"SET_USERNAME":return(0,o.A)((0,o.A)({},e),{},{username:t.value});case"SET_INITIAL_STATE":return i();default:return e}}));function r(e){s.dispatch({type:"SET_SIGN_IN_STATE",value:e})}function a(){s.dispatch({type:"SET_INITIAL_STATE"})}},2200:(e,t,n)=>{n.d(t,{nC:()=>r,ut:()=>i});var o=n(5119);const i={[o.P.EmptyChallengeResponse]:{message:"challengeResponse is required to confirmSignIn"},[o.P.EmptyConfirmResetPasswordUsername]:{message:"username is required to confirmResetPassword"},[o.P.EmptyConfirmSignUpCode]:{message:"code is required to confirmSignUp"},[o.P.EmptyConfirmSignUpUsername]:{message:"username is required to confirmSignUp"},[o.P.EmptyConfirmResetPasswordConfirmationCode]:{message:"confirmationCode is required to confirmResetPassword"},[o.P.EmptyConfirmResetPasswordNewPassword]:{message:"newPassword is required to confirmResetPassword"},[o.P.EmptyResendSignUpCodeUsername]:{message:"username is required to confirmSignUp"},[o.P.EmptyResetPasswordUsername]:{message:"username is required to resetPassword"},[o.P.EmptySignInPassword]:{message:"password is required to signIn"},[o.P.EmptySignInUsername]:{message:"username is required to signIn"},[o.P.EmptySignUpPassword]:{message:"password is required to signUp"},[o.P.EmptySignUpUsername]:{message:"username is required to signUp"},[o.P.CustomAuthSignInPassword]:{message:"A password is not needed when signing in with CUSTOM_WITHOUT_SRP",recoverySuggestion:"Do not include a password in your signIn call."},[o.P.IncorrectMFAMethod]:{message:"Incorrect MFA method was chosen. It should be either SMS, TOTP, or EMAIL",recoverySuggestion:"Try to pass SMS, TOTP, or EMAIL as the challengeResponse"},[o.P.EmptyVerifyTOTPSetupCode]:{message:"code is required to verifyTotpSetup"},[o.P.EmptyUpdatePassword]:{message:"oldPassword and newPassword are required to changePassword"},[o.P.EmptyConfirmUserAttributeCode]:{message:"confirmation code is required to confirmUserAttribute"}};var s,r;!function(e){e.DEFAULT_MSG="Authentication Error",e.EMPTY_EMAIL="Email cannot be empty",e.EMPTY_PHONE="Phone number cannot be empty",e.EMPTY_USERNAME="Username cannot be empty",e.INVALID_USERNAME="The username should either be a string or one of the sign in types",e.EMPTY_PASSWORD="Password cannot be empty",e.EMPTY_CODE="Confirmation code cannot be empty",e.SIGN_UP_ERROR="Error creating account",e.NO_MFA="No valid MFA method provided",e.INVALID_MFA="Invalid MFA type",e.EMPTY_CHALLENGE="Challenge response cannot be empty",e.NO_USER_SESSION="Failed to get the session because the user is empty",e.NETWORK_ERROR="Network Error",e.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",e.AUTOSIGNIN_ERROR="Please use your credentials to sign in",e.OAUTH_ERROR="Couldn't finish OAuth flow, check your User Pool HostedUI settings"}(s||(s={})),function(e){e.SignInException="SignInException",e.OAuthSignInError="OAuthSignInException"}(r||(r={}))},5119:(e,t,n)=>{var o;n.d(t,{P:()=>o}),function(e){e.EmptySignInUsername="EmptySignInUsername",e.EmptySignInPassword="EmptySignInPassword",e.CustomAuthSignInPassword="CustomAuthSignInPassword",e.EmptySignUpUsername="EmptySignUpUsername",e.EmptySignUpPassword="EmptySignUpPassword",e.EmptyConfirmSignUpUsername="EmptyConfirmSignUpUsername",e.EmptyConfirmSignUpCode="EmptyConfirmSignUpCode",e.EmptyResendSignUpCodeUsername="EmptyresendSignUpCodeUsername",e.EmptyChallengeResponse="EmptyChallengeResponse",e.EmptyConfirmResetPasswordUsername="EmptyConfirmResetPasswordUsername",e.EmptyConfirmResetPasswordNewPassword="EmptyConfirmResetPasswordNewPassword",e.EmptyConfirmResetPasswordConfirmationCode="EmptyConfirmResetPasswordConfirmationCode",e.EmptyResetPasswordUsername="EmptyResetPasswordUsername",e.EmptyVerifyTOTPSetupCode="EmptyVerifyTOTPSetupCode",e.EmptyConfirmUserAttributeCode="EmptyConfirmUserAttributeCode",e.IncorrectMFAMethod="IncorrectMFAMethod",e.EmptyUpdatePassword="EmptyUpdatePassword"}(o||(o={}))},2013:(e,t,n)=>{n.d(t,{M:()=>s});var o=n(2200),i=n(2096);function s(e,t){const{message:n,recoverySuggestion:s}=o.ut[t];if(!e)throw new i.l({name:t,message:n,recoverySuggestion:s})}},6414:(e,t,n)=>{n.d(t,{K$:()=>c,xO:()=>d});var o=n(2530),i=n(2096),s=n(7387);const r=async()=>{throw new i.l({name:s.A0,message:"The autoSignIn flow has not started, or has been cancelled/completed.",recoverySuggestion:"Please try to use the signIn API or log out before starting a new autoSignIn flow."})};let a=null;function c(e){a=e}function d(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(a=r),o.z.dispatch({type:"RESET"})}},1580:(e,t,n)=>{n.d(t,{H:()=>r});var o=n(348),i=n(2770),s=n(2242);const r=async()=>(async e=>{var t,n,o;const r=null===(t=e.getConfig().Auth)||void 0===t?void 0:t.Cognito;(0,i.$y)(r);const a=await e.Auth.getTokens({forceRefresh:!1});(0,s.H0)(a);const{"cognito:username":c,sub:d}=null!==(n=null===(o=a.idToken)||void 0===o?void 0:o.payload)&&void 0!==n?n:{},l={username:c,userId:d},p=function(e){return null===e||void 0===e?void 0:e.signInDetails}(a);return p&&(l.signInDetails=p),l})(o.H)},231:(e,t,n)=>{n.d(t,{J:()=>g});var o=n(580),i=n(9379),s=n(348),r=n(2770),a=n(5119),c=n(2013),d=n(9109),l=n(3761),p=n(6998),E=n(7546),u=n(155);var x=n(6414);async function m(e){var t,n;const{username:m,password:h}=e,g=null===(t=s.H.getConfig().Auth)||void 0===t?void 0:t.Cognito,I={loginId:m,authFlowType:"USER_SRP_AUTH"};(0,r.$y)(g);const v=null===(n=e.options)||void 0===n?void 0:n.clientMetadata;(0,c.M)(!!m,a.P.EmptySignInUsername),(0,c.M)(!!h,a.P.EmptySignInPassword);try{const{ChallengeName:e,ChallengeParameters:t,AuthenticationResult:n,Session:s}=await(0,o.Zw)(m,h,v,g,E.o),r=(0,o.ni)(m);return(0,l.wr)({signInSession:s,username:r,challengeName:e,signInDetails:I}),n?((0,l.ZV)(),await(0,p.i)((0,i.A)((0,i.A)({username:r},n),{},{NewDeviceMetadata:await(0,o.iG)({userPoolId:g.userPoolId,userPoolEndpoint:g.userPoolEndpoint,newDeviceMetadata:n.NewDeviceMetadata,accessToken:n.AccessToken}),signInDetails:I})),await(0,u.Q)(),(0,x.xO)(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):(0,o.q2)({challengeName:e,challengeParameters:t})}catch(A){(0,l.ZV)(),(0,x.xO)(),(0,d.e)(A);const e=(0,o.m$)(A.name);if(e)return e;throw A}}var h=n(9472);async function g(e){var t;(0,x.xO)(!1);const n=null===(t=e.options)||void 0===t?void 0:t.authFlowType;switch(await(0,o.AR)(),n){case"USER_SRP_AUTH":default:return m(e);case"USER_PASSWORD_AUTH":return async function(e){var t;const{username:n,password:m,options:h}=e,g=null===(t=s.H.getConfig().Auth)||void 0===t?void 0:t.Cognito,I={loginId:n,authFlowType:"USER_PASSWORD_AUTH"};(0,r.$y)(g);const v=null===h||void 0===h?void 0:h.clientMetadata;(0,c.M)(!!n,a.P.EmptySignInUsername),(0,c.M)(!!m,a.P.EmptySignInPassword);try{const{ChallengeName:e,ChallengeParameters:t,AuthenticationResult:s,Session:r}=await(0,o.iI)(o.h5,[n,m,v,g,E.o],n,E.o),a=(0,o.ni)(n);return(0,l.wr)({signInSession:r,username:a,challengeName:e,signInDetails:I}),s?((0,l.ZV)(),await(0,p.i)((0,i.A)((0,i.A)({},s),{},{username:a,NewDeviceMetadata:await(0,o.iG)({userPoolId:g.userPoolId,userPoolEndpoint:g.userPoolEndpoint,newDeviceMetadata:s.NewDeviceMetadata,accessToken:s.AccessToken}),signInDetails:I})),await(0,u.Q)(),(0,x.xO)(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):(0,o.q2)({challengeName:e,challengeParameters:t})}catch(A){(0,l.ZV)(),(0,x.xO)(),(0,d.e)(A);const e=(0,o.m$)(A.name);if(e)return e;throw A}}(e);case"CUSTOM_WITHOUT_SRP":return async function(e){var t;const n=null===(t=s.H.getConfig().Auth)||void 0===t?void 0:t.Cognito;(0,r.$y)(n);const{username:x,password:m,options:h}=e,g={loginId:x,authFlowType:"CUSTOM_WITHOUT_SRP"},I=null===h||void 0===h?void 0:h.clientMetadata;(0,c.M)(!!x,a.P.EmptySignInUsername),(0,c.M)(!m,a.P.CustomAuthSignInPassword);try{const{ChallengeName:e,ChallengeParameters:t,AuthenticationResult:s,Session:r}=await(0,o.iI)(o.ty,[x,I,n,E.o],x,E.o),a=(0,o.ni)(x);return(0,l.wr)({signInSession:r,username:a,challengeName:e,signInDetails:g}),s?((0,l.ZV)(),await(0,p.i)((0,i.A)((0,i.A)({username:a},s),{},{NewDeviceMetadata:await(0,o.iG)({userPoolId:n.userPoolId,userPoolEndpoint:n.userPoolEndpoint,newDeviceMetadata:s.NewDeviceMetadata,accessToken:s.AccessToken}),signInDetails:g})),await(0,u.Q)(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):(0,o.q2)({challengeName:e,challengeParameters:t})}catch(v){(0,l.ZV)(),(0,d.e)(v);const e=(0,o.m$)(v.name);if(e)return e;throw v}}(e);case"CUSTOM_WITH_SRP":return async function(e){var t;const{username:n,password:x,options:m}=e,h={loginId:n,authFlowType:"CUSTOM_WITH_SRP"},g=null===(t=s.H.getConfig().Auth)||void 0===t?void 0:t.Cognito;(0,r.$y)(g);const I=null===m||void 0===m?void 0:m.clientMetadata;(0,c.M)(!!n,a.P.EmptySignInUsername),(0,c.M)(!!x,a.P.EmptySignInPassword);try{const{ChallengeName:e,ChallengeParameters:t,AuthenticationResult:s,Session:r}=await(0,o.tE)(n,x,I,g,E.o),a=(0,o.ni)(n);return(0,l.wr)({signInSession:r,username:a,challengeName:e,signInDetails:h}),s?(await(0,p.i)((0,i.A)((0,i.A)({username:a},s),{},{NewDeviceMetadata:await(0,o.iG)({userPoolId:g.userPoolId,userPoolEndpoint:g.userPoolEndpoint,newDeviceMetadata:s.NewDeviceMetadata,accessToken:s.AccessToken}),signInDetails:h})),(0,l.ZV)(),await(0,u.Q)(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):(0,o.q2)({challengeName:e,challengeParameters:t})}catch(v){(0,l.ZV)(),(0,d.e)(v);const e=(0,o.m$)(v.name);if(e)return e;throw v}}(e);case"USER_AUTH":return(0,h.k)(e)}}},9472:(e,t,n)=>{n.d(t,{k:()=>y});var o=n(9379),i=n(348),s=n(2770),r=n(5119),a=n(2013),c=n(9109),d=n(580),l=n(2530),p=n(3761),E=n(6998),u=n(155),x=n(7546),m=n(2600),h=n(3),g=n(7266),I=n(6016),v=n(9715),A=n(9931),S=n(4706);var R=n(6414);async function y(e){var t;const{username:n,password:y,options:P}=e,f=null===(t=i.H.getConfig().Auth)||void 0===t?void 0:t.Cognito,C={loginId:n,authFlowType:"USER_AUTH"};(0,s.$y)(f);const N=null===P||void 0===P?void 0:P.clientMetadata,w=null===P||void 0===P?void 0:P.preferredChallenge;(0,a.M)(!!n,r.P.EmptySignInUsername);try{const e={username:n,config:f,tokenOrchestrator:x.o,clientMetadata:N,preferredChallenge:w,password:y},t=l.z.getState();t.active&&t.username===n&&(e.session=t.session);const i=await async function(e){let{username:t,clientMetadata:n,config:o,tokenOrchestrator:i,preferredChallenge:s,password:c,session:l}=e;const{userPoolId:p,userPoolClientId:E,userPoolEndpoint:u}=o,x=(0,h.d)({username:t,userPoolId:p,userPoolClientId:E}),R={USERNAME:t};if(s){if("PASSWORD_SRP"===s)return(0,a.M)(!!c,r.P.EmptySignInPassword),(0,S.L)({username:t,password:c,clientMetadata:n,config:o,tokenOrchestrator:i,authFlow:"USER_AUTH",preferredChallenge:s});"PASSWORD"===s&&((0,a.M)(!!c,r.P.EmptySignInPassword),R.PASSWORD=c),R.PREFERRED_CHALLENGE=s}const y={AuthFlow:"USER_AUTH",AuthParameters:R,ClientMetadata:n,ClientId:E,UserContextData:x};l&&(y.Session=l);const P=(0,g.R)({endpointResolver:(0,I.o)({endpointOverride:u})}),f=await P({region:(0,v.J)(p),userAgentValue:(0,A.A)(m.BM.SignIn)},y);return(0,d.d5)(t),f}(e),s=(0,d.ni)(n);return(0,p.wr)({signInSession:i.Session,username:s,challengeName:i.ChallengeName,signInDetails:C}),i.AuthenticationResult?((0,p.ZV)(),await(0,E.i)((0,o.A)((0,o.A)({username:s},i.AuthenticationResult),{},{NewDeviceMetadata:await(0,d.iG)({userPoolId:f.userPoolId,userPoolEndpoint:f.userPoolEndpoint,newDeviceMetadata:i.AuthenticationResult.NewDeviceMetadata,accessToken:i.AuthenticationResult.AccessToken}),signInDetails:C})),await(0,u.Q)(),(0,R.xO)(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):(0,d.q2)({challengeName:i.ChallengeName,challengeParameters:i.ChallengeParameters,availableChallenges:"AvailableChallenges"in i?i.AvailableChallenges:void 0})}catch(T){(0,p.ZV)(),(0,R.xO)(),(0,c.e)(T);const e=(0,d.m$)(T.name);if(e)return e;throw T}}},6998:(e,t,n)=>{n.d(t,{i:()=>r});var o=n(2770),i=n(1439),s=n(7546);async function r(e){if(!e.AccessToken)throw new i.x({message:"Invalid tokens",name:"InvalidTokens",recoverySuggestion:"Check Cognito UserPool settings"});{const t=(0,o.Cq)(e.AccessToken),n=1e3*(t.payload.iat||0),i=(new Date).getTime(),r=n>0?n-i:0;let a,c,d;e.RefreshToken&&(c=e.RefreshToken),e.IdToken&&(a=(0,o.Cq)(e.IdToken)),null!==e&&void 0!==e&&e.NewDeviceMetadata&&(d=e.NewDeviceMetadata);const l={accessToken:t,idToken:a,refreshToken:c,clockDrift:r,deviceMetadata:d,username:e.username};null!==e&&void 0!==e&&e.signInDetails&&(l.signInDetails=e.signInDetails),await s.o.setTokens({tokens:l})}}},8342:(e,t,n)=>{var o,i,s,r,a,c,d,l,p,E,u,x,m,h,g,I,v,A,S,R,y,P,f,C;n.d(t,{AU:()=>S,zh:()=>g}),function(e){e.ConcurrentModificationException="ConcurrentModificationException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException"}(o||(o={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(i||(i={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UsernameExistsException="UsernameExistsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(s||(s={})),function(e){e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyFailedAttemptsException="TooManyFailedAttemptsException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(r||(r={})),function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyFailedAttemptsException="TooManyFailedAttemptsException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"}(a||(a={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(c||(c={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(d||(d={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(l||(l={})),function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"}(p||(p={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(E||(E={})),function(e){e.ExternalServiceException="ExternalServiceException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceConflictException="ResourceConflictException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException"}(u||(u={})),function(e){e.ExternalServiceException="ExternalServiceException",e.InternalErrorException="InternalErrorException",e.InvalidIdentityPoolConfigurationException="InvalidIdentityPoolConfigurationException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceConflictException="ResourceConflictException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException"}(x||(x={})),function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(m||(m={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException"}(h||(h={})),function(e){e.PasswordResetRequiredException="PasswordResetRequiredException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(g||(g={})),function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"}(I||(I={})),function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.MFAMethodNotFoundException="MFAMethodNotFoundException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(v||(v={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(A||(A={})),function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UsernameExistsException="UsernameExistsException"}(S||(S={})),function(e){e.AliasExistsException="AliasExistsException",e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(R||(R={})),function(e){e.CodeMismatchException="CodeMismatchException",e.EnableSoftwareTokenMFAException="EnableSoftwareTokenMFAException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(y||(y={})),function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(P||(P={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(f||(f={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(C||(C={}))},155:(e,t,n)=>{n.d(t,{Q:()=>a});var o=n(8173),i=n(1580),s=n(7387),r=n(2096);const a=async()=>{try{o.YZ.dispatch("auth",{event:"signedIn",data:await(0,i.H)()},"Auth",o.U9)}catch(e){if(e.name===s.zz)throw new r.l({name:s.yA,message:"Unable to get user session following successful sign-in.",recoverySuggestion:"This most likely is due to auth tokens not being persisted. If you are using cookie store, please ensure cookies can be correctly set from your server."});throw e}}},580:(e,t,n)=>{n.d(t,{AR:()=>ve,ni:()=>ye,iG:()=>Ae,q2:()=>Ee,m$:()=>xe,ty:()=>ce,tE:()=>de,ff:()=>pe,h5:()=>re,Zw:()=>ae,iI:()=>Se,d5:()=>Re});var o=n(348),i=n(2600),s=n(2770),r=n(727),a=n(676);const c=async()=>{const{userAgentData:e}=navigator;if(!e)return navigator.userAgent;const{platform:t="",platformVersion:n="",model:o="",architecture:i="",fullVersionList:s=[]}=await e.getHighEntropyValues(["platform","platformVersion","architecture","model","fullVersionList"]);return[t,n,i,o,t,s.map((e=>"".concat(e.brand,"/").concat(e.version))).join(";")].filter((e=>e)).join(" ")};var d=n(2096),l=n(8342),p=n(2200),E=n(7387),u=n(1580),x=n(9931),m=n(7266),h=n(9379),g=n(7161),I=n(8016),v=n(5215),A=n(2190),S=n(7675);const R=e=>(0,g.A)(I.e,(0,v._)("RespondToAuthChallenge"),(0,A.T)(),(0,h.A)((0,h.A)({},S.C),e)),y=e=>(0,g.A)(I.e,(0,v._)("AssociateSoftwareToken"),(0,A.T)(),(0,h.A)((0,h.A)({},S.C),e)),P=e=>(0,g.A)(I.e,(0,v._)("ConfirmDevice"),(0,A.T)(),(0,h.A)((0,h.A)({},S.C),e));var f,C=n(6016),N=n(9715),w=n(6998),T=n(155),U=n(3761),F=n(1439),D=n(8895),M=n(4464);class _ extends F.x{constructor(e){super(e),this.constructor=_,Object.setPrototypeOf(this,_.prototype)}}!function(e){e.PasskeyNotSupported="PasskeyNotSupported",e.PasskeyAlreadyExists="PasskeyAlreadyExists",e.InvalidPasskeyRegistrationOptions="InvalidPasskeyRegistrationOptions",e.InvalidPasskeyAuthenticationOptions="InvalidPasskeyAuthenticationOptions",e.RelyingPartyMismatch="RelyingPartyMismatch",e.PasskeyRegistrationFailed="PasskeyRegistrationFailed",e.PasskeyRetrievalFailed="PasskeyRetrievalFailed",e.PasskeyRegistrationCanceled="PasskeyRegistrationCanceled",e.PasskeyAuthenticationCanceled="PasskeyAuthenticationCanceled",e.PasskeyOperationAborted="PasskeyOperationAborted"}(f||(f={}));const b="Passkeys may not be supported on this device. Ensure your application is running in a secure context (HTTPS) and Web Authentication API is supported.",O="User may have canceled the ceremony or another interruption has occurred. Check underlying error for details.",L="Ensure your user pool is configured to support the WEB_AUTHN as an authentication factor.",k={[f.PasskeyNotSupported]:{message:"Passkeys may not be supported on this device.",recoverySuggestion:b},[f.InvalidPasskeyRegistrationOptions]:{message:"Invalid passkey registration options.",recoverySuggestion:L},[f.InvalidPasskeyAuthenticationOptions]:{message:"Invalid passkey authentication options.",recoverySuggestion:L},[f.PasskeyRegistrationFailed]:{message:"Device failed to create passkey.",recoverySuggestion:b},[f.PasskeyRetrievalFailed]:{message:"Device failed to retrieve passkey.",recoverySuggestion:"Passkeys may not be available on this device. Try an alternative authentication factor like PASSWORD, EMAIL_OTP, or SMS_OTP."},[f.PasskeyAlreadyExists]:{message:"Passkey already exists in authenticator.",recoverySuggestion:"Proceed with existing passkey or try again after deleting the credential."},[f.PasskeyRegistrationCanceled]:{message:"Passkey registration ceremony has been canceled.",recoverySuggestion:O},[f.PasskeyAuthenticationCanceled]:{message:"Passkey authentication ceremony has been canceled.",recoverySuggestion:O},[f.PasskeyOperationAborted]:{message:"Passkey operation has been aborted.",recoverySuggestion:O},[f.RelyingPartyMismatch]:{message:"Relying party does not match current domain.",recoverySuggestion:"Ensure relying party identifier matches current domain."}},q=(0,D.p)(k,_),B=e=>{if(e instanceof Error){if("AbortError"===e.name){const{message:t,recoverySuggestion:n}=k[f.PasskeyOperationAborted];return new _({name:f.PasskeyOperationAborted,message:t,recoverySuggestion:n,underlyingError:e})}if("SecurityError"===e.name){const{message:t,recoverySuggestion:n}=k[f.RelyingPartyMismatch];return new _({name:f.RelyingPartyMismatch,message:t,recoverySuggestion:n,underlyingError:e})}}return new _({name:M.m.Unknown,message:"An unknown error has occurred.",underlyingError:e})};var V=n(4163);const H=e=>a.Y.convert(new Uint8Array(e),{urlSafe:!0,skipPadding:!0});var z=n(846);const W=e=>Uint8Array.from(z.m.convert(e,{urlSafe:!0}),(e=>e.charCodeAt(0))).buffer;const G=async e=>{try{const t=(0,V.B)()&&window.isSecureContext&&"credentials"in navigator&&"function"===typeof window.PublicKeyCredential;q(t,f.PasskeyNotSupported);const n=(e=>{const t=W(e.challenge),n=(e.allowCredentials||[]).map((e=>(0,h.A)((0,h.A)({},e),{},{id:W(e.id)})));return(0,h.A)((0,h.A)({},e),{},{challenge:t,allowCredentials:n})})(e),o=await navigator.credentials.get({publicKey:n});return function(e){q(e&&e instanceof PublicKeyCredential&&e.response instanceof AuthenticatorAssertionResponse,f.PasskeyRetrievalFailed)}(o),(e=>{const t={clientDataJSON:H(e.response.clientDataJSON),authenticatorData:H(e.response.authenticatorData),signature:H(e.response.signature)};e.response.userHandle&&(t.userHandle=H(e.response.userHandle));const n={id:e.id,rawId:H(e.rawId),type:e.type,clientExtensionResults:e.getClientExtensionResults(),response:t};return e.authenticatorAttachment&&(n.authenticatorAttachment=e.authenticatorAttachment),n})(o)}catch(t){throw(e=>{if(e instanceof _)return e;if(e instanceof Error&&"NotAllowedError"===e.name){const{message:t,recoverySuggestion:n}=k[f.PasskeyAuthenticationCanceled];return new _({name:f.PasskeyAuthenticationCanceled,message:t,recoverySuggestion:n,underlyingError:e})}return B(e)})(t)}};var K=n(4706),Z=n(2242),Y=n(3740),$=n(8941);const J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Q=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],j=()=>{const e=new Date,t=Q[e.getUTCDay()],n=J[e.getUTCMonth()],o=e.getUTCDate();let i=e.getUTCHours();i<10&&(i="0".concat(i));let s=e.getUTCMinutes();s<10&&(s="0".concat(s));let r=e.getUTCSeconds();r<10&&(r="0".concat(r));const a=e.getUTCFullYear();return"".concat(t," ").concat(n," ").concat(o," ").concat(i,":").concat(s,":").concat(r," UTC ").concat(a)};var X=n(3157),ee=n(7767);const te=e=>{let{userPoolName:t,username:n,challengeParameters:o,dateNow:i,hkdf:s}=e;const r=ee.U.convert(t),c=ee.U.convert(n),d=ne(o.SECRET_BLOCK),l=ee.U.convert(i),p=new Uint8Array(r.byteLength+c.byteLength+d.byteLength+l.byteLength);p.set(r,0),p.set(c,r.byteLength),p.set(d,r.byteLength+c.byteLength),p.set(l,r.byteLength+c.byteLength+d.byteLength);const E=new X.I(s);E.update(p);const u=E.digestSync();return a.Y.convert(u)},ne=e=>{const t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=z.m.convert(t),o=new Uint8Array(n.length);for(let i=0;i<n.length;++i)o[i]=n.charCodeAt(i);return o};var oe=n(5378),ie=n(3);const se="userAttributes.";async function re(e,t,n,o,s){var r,a,c,d;const{userPoolClientId:l,userPoolId:p,userPoolEndpoint:E}=o,u={USERNAME:e,PASSWORD:t},h=await s.getDeviceMetadata(e);h&&h.deviceKey&&(u.DEVICE_KEY=h.deviceKey);const g={AuthFlow:"USER_PASSWORD_AUTH",AuthParameters:u,ClientMetadata:n,ClientId:l,UserContextData:(0,ie.d)({username:e,userPoolId:p,userPoolClientId:l})},I=(0,m.R)({endpointResolver:(0,C.o)({endpointOverride:E})}),v=await I({region:(0,N.J)(p),userAgentValue:(0,x.A)(i.BM.SignIn)},g),A=null!==(r=null!==(a=null===(c=v.ChallengeParameters)||void 0===c?void 0:c.USERNAME)&&void 0!==a?a:null===(d=v.ChallengeParameters)||void 0===d?void 0:d.USER_ID_FOR_SRP)&&void 0!==r?r:e;return Re(A),"DEVICE_SRP_AUTH"===v.ChallengeName?le({username:A,config:o,clientMetadata:n,session:v.Session,tokenOrchestrator:s}):v}async function ae(e,t,n,o,i){return(0,K.L)({username:e,password:t,clientMetadata:n,config:o,tokenOrchestrator:i,authFlow:"USER_SRP_AUTH"})}async function ce(e,t,n,o){var s,r;const{userPoolClientId:a,userPoolId:c,userPoolEndpoint:d}=n,l={USERNAME:e},p=await o.getDeviceMetadata(e);p&&p.deviceKey&&(l.DEVICE_KEY=p.deviceKey);const E={AuthFlow:"CUSTOM_AUTH",AuthParameters:l,ClientMetadata:t,ClientId:a,UserContextData:(0,ie.d)({username:e,userPoolId:c,userPoolClientId:a})},u=(0,m.R)({endpointResolver:(0,C.o)({endpointOverride:d})}),h=await u({region:(0,N.J)(c),userAgentValue:(0,x.A)(i.BM.SignIn)},E),g=null!==(s=null===(r=h.ChallengeParameters)||void 0===r?void 0:r.USERNAME)&&void 0!==s?s:e;return Re(g),"DEVICE_SRP_AUTH"===h.ChallengeName?le({username:g,config:n,clientMetadata:t,session:h.Session,tokenOrchestrator:o}):h}async function de(e,t,n,o,r){var a;(0,s.$y)(o);const{userPoolId:c,userPoolClientId:d,userPoolEndpoint:l}=o,p=(null===c||void 0===c?void 0:c.split("_")[1])||"",E=await(0,Y.H)(p),u={AuthFlow:"CUSTOM_AUTH",AuthParameters:{USERNAME:e,SRP_A:E.A.toString(16),CHALLENGE_NAME:"SRP_A"},ClientMetadata:n,ClientId:d,UserContextData:(0,ie.d)({username:e,userPoolId:c,userPoolClientId:d})},h=(0,m.R)({endpointResolver:(0,C.o)({endpointOverride:l})}),{ChallengeParameters:g,Session:I}=await h({region:(0,N.J)(c),userAgentValue:(0,x.A)(i.BM.SignIn)},u),v=null!==(a=null===g||void 0===g?void 0:g.USERNAME)&&void 0!==a?a:e;return Re(v),Se(pe,[t,g,n,I,E,o,r],v,r)}async function le(e){let{username:t,config:n,clientMetadata:o,session:i,tokenOrchestrator:s}=e;const{userPoolId:r,userPoolEndpoint:a}=n,c=n.userPoolClientId,d=await(null===s||void 0===s?void 0:s.getDeviceMetadata(t));(0,Z.O_)(d);const l=await(0,Y.H)(d.deviceGroupKey),p={ChallengeName:"DEVICE_SRP_AUTH",ClientId:c,ChallengeResponses:{USERNAME:t,SRP_A:l.A.toString(16),DEVICE_KEY:d.deviceKey},ClientMetadata:o,Session:i},E=R({endpointResolver:(0,C.o)({endpointOverride:a})}),{ChallengeParameters:u,Session:x}=await E({region:(0,N.J)(r)},p);return async function(e,t,n,o,i,s,r){var a;let{userPoolId:c,userPoolClientId:d,userPoolEndpoint:l}=s;const p=await(null===r||void 0===r?void 0:r.getDeviceMetadata(e));(0,Z.O_)(p);const E=new oe.A(null===t||void 0===t?void 0:t.SRP_B,16),u=new oe.A(null===t||void 0===t?void 0:t.SALT,16),{deviceKey:x}=p,{deviceGroupKey:m}=p,h=await i.getPasswordAuthenticationKey({username:p.deviceKey,password:p.randomPassword,serverBValue:E,salt:u}),g=j(),I={USERNAME:null!==(a=null===t||void 0===t?void 0:t.USERNAME)&&void 0!==a?a:e,PASSWORD_CLAIM_SECRET_BLOCK:null===t||void 0===t?void 0:t.SECRET_BLOCK,TIMESTAMP:g,PASSWORD_CLAIM_SIGNATURE:te({username:x,userPoolName:m,challengeParameters:t,dateNow:g,hkdf:h}),DEVICE_KEY:x},v=(0,ie.d)({username:e,userPoolId:c,userPoolClientId:d}),A={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:d,ChallengeResponses:I,Session:o,ClientMetadata:n,UserContextData:v},S=R({endpointResolver:(0,C.o)({endpointOverride:l})});return S({region:(0,N.J)(c)},A)}(t,u,o,x,l,n,s)}async function pe(e,t,n,o,i,s,r){const{userPoolId:a,userPoolClientId:c,userPoolEndpoint:l}=s,p=(null===a||void 0===a?void 0:a.split("_")[1])||"",E=new oe.A(null===t||void 0===t?void 0:t.SRP_B,16),u=new oe.A(null===t||void 0===t?void 0:t.SALT,16),x=null===t||void 0===t?void 0:t.USER_ID_FOR_SRP;if(!x)throw new d.l({name:"EmptyUserIdForSRPException",message:"USER_ID_FOR_SRP was not found in challengeParameters"});const m=await i.getPasswordAuthenticationKey({username:x,password:e,serverBValue:E,salt:u}),h=j(),g={USERNAME:x,PASSWORD_CLAIM_SECRET_BLOCK:null===t||void 0===t?void 0:t.SECRET_BLOCK,TIMESTAMP:h,PASSWORD_CLAIM_SIGNATURE:te({username:x,userPoolName:p,challengeParameters:t,dateNow:h,hkdf:m})},I=await r.getDeviceMetadata(x);I&&I.deviceKey&&(g.DEVICE_KEY=I.deviceKey);const v={ChallengeName:"PASSWORD_VERIFIER",ChallengeResponses:g,ClientMetadata:n,Session:o,ClientId:c,UserContextData:(0,ie.d)({username:x,userPoolId:a,userPoolClientId:c})},A=R({endpointResolver:(0,C.o)({endpointOverride:l})}),S=await A({region:(0,N.J)(a)},v);return"DEVICE_SRP_AUTH"===S.ChallengeName?le({username:x,config:s,clientMetadata:n,session:S.Session,tokenOrchestrator:r}):S}async function Ee(e){var t;const{challengeName:n,challengeParameters:r,availableChallenges:a}=e,c=null===(t=o.H.getConfig().Auth)||void 0===t?void 0:t.Cognito;switch((0,s.$y)(c),n){case"CUSTOM_CHALLENGE":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_CUSTOM_CHALLENGE",additionalInfo:r}};case"MFA_SETUP":{const{signInSession:e,username:t}=U.c$.getState(),n=ge(Ie(r.MFAS_CAN_SETUP))||[],o=n.filter((e=>"EMAIL"===e||"TOTP"===e)),i=o.includes("TOTP"),s=o.includes("EMAIL");if(i&&s)return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_MFA_SETUP_SELECTION",allowedMFATypes:o}};if(s)return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_EMAIL_SETUP"}};if(i){const n=y({endpointResolver:(0,C.o)({endpointOverride:c.userPoolEndpoint})}),{Session:o,SecretCode:i}=await n({region:(0,N.J)(c.userPoolId)},{Session:e});return U.c$.dispatch({type:"SET_SIGN_IN_SESSION",value:o}),{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_TOTP_SETUP",totpSetupDetails:ue(i,t)}}}throw new d.l({name:p.nC.SignInException,message:"Cannot initiate MFA setup from available types: ".concat(n)})}case"NEW_PASSWORD_REQUIRED":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED",missingAttributes:me(r.requiredAttributes)}};case"SELECT_MFA_TYPE":return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_MFA_SELECTION",allowedMFATypes:ge(Ie(r.MFAS_CAN_CHOOSE))}};case"SMS_OTP":case"SMS_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_SMS_CODE",codeDeliveryDetails:{deliveryMedium:r.CODE_DELIVERY_DELIVERY_MEDIUM,destination:r.CODE_DELIVERY_DESTINATION}}};case"SOFTWARE_TOKEN_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_TOTP_CODE"}};case"EMAIL_OTP":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_EMAIL_CODE",codeDeliveryDetails:{deliveryMedium:r.CODE_DELIVERY_DELIVERY_MEDIUM,destination:r.CODE_DELIVERY_DESTINATION}}};case"WEB_AUTHN":return async function(e){var t;const n=null===(t=o.H.getConfig().Auth)||void 0===t?void 0:t.Cognito;(0,s.$y)(n);const{username:r,signInSession:a,signInDetails:c,challengeName:l}=U.c$.getState();if("WEB_AUTHN"!==l||!r)throw new d.l({name:p.nC.SignInException,message:"Unable to proceed due to invalid sign in state."});const{CREDENTIAL_REQUEST_OPTIONS:E}=e;q(!!E,f.InvalidPasskeyAuthenticationOptions);const u=await G(JSON.parse(E)),m=R({endpointResolver:(0,C.o)({endpointOverride:n.userPoolEndpoint})}),{ChallengeName:g,ChallengeParameters:I,AuthenticationResult:v,Session:A}=await m({region:(0,N.J)(n.userPoolId),userAgentValue:(0,x.A)(i.BM.ConfirmSignIn)},{ChallengeName:"WEB_AUTHN",ChallengeResponses:{USERNAME:r,CREDENTIAL:JSON.stringify(u)},ClientId:n.userPoolClientId,Session:a});if((0,U.wr)({signInSession:A,username:r,challengeName:g,signInDetails:c}),v)return await(0,w.i)((0,h.A)((0,h.A)({},v),{},{username:r,NewDeviceMetadata:await Ae({userPoolId:n.userPoolId,userPoolEndpoint:n.userPoolEndpoint,newDeviceMetadata:v.NewDeviceMetadata,accessToken:v.AccessToken}),signInDetails:c})),(0,U.ZV)(),await(0,T.Q)(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}};if("WEB_AUTHN"===g)throw new d.l({name:p.nC.SignInException,message:"Sequential WEB_AUTHN challenges returned from underlying service cannot be handled."});return Ee({challengeName:g,challengeParameters:I})}(r);case"PASSWORD":case"PASSWORD_SRP":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_PASSWORD"}};case"SELECT_CHALLENGE":return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_FIRST_FACTOR_SELECTION",availableChallenges:a}}}throw new d.l({name:p.nC.SignInException,message:"An error occurred during the sign in process. "+"".concat(n," challengeName returned by the underlying service was not addressed.")})}function ue(e,t){return{sharedSecret:e,getSetupUri:(n,o)=>{const i="otpauth://totp/".concat(n,":").concat(null!==o&&void 0!==o?o:t,"?secret=").concat(e,"&issuer=").concat(n);return new r.o(i)}}}function xe(e){return e===l.zh.PasswordResetRequiredException?{isSignedIn:!1,nextStep:{signInStep:"RESET_PASSWORD"}}:e===l.zh.UserNotConfirmedException?{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_UP"}}:void 0}function me(e){if(!e)return[];return JSON.parse(e).map((e=>e.includes(se)?e.replace(se,""):e))}function he(e){return"SMS_MFA"===e?"SMS":"SOFTWARE_TOKEN_MFA"===e?"TOTP":"EMAIL_OTP"===e?"EMAIL":void 0}function ge(e){if(e)return e.map(he).filter(Boolean)}function Ie(e){return e?JSON.parse(e):[]}async function ve(){let e;try{e=await(0,u.H)()}catch(t){}if(e&&e.userId&&e.username)throw new d.l({name:E.z0,message:"There is already a signed in user.",recoverySuggestion:"Call signOut before calling signIn again."})}async function Ae(e){let{userPoolId:t,userPoolEndpoint:n,newDeviceMetadata:o,accessToken:i}=e;if(!o)return;const s=t.split("_")[1]||"",r=await(0,Y.H)(s),d=null===o||void 0===o?void 0:o.DeviceKey,l=null===o||void 0===o?void 0:o.DeviceGroupKey;try{await r.generateHashDevice(null!==l&&void 0!==l?l:"",null!==d&&void 0!==d?d:"")}catch(u){return}const p={Salt:a.Y.convert((0,$.d)(r.getSaltToHashDevices())),PasswordVerifier:a.Y.convert((0,$.d)(r.getVerifierDevices()))},E=r.getRandomPassword();try{const e=P({endpointResolver:(0,C.o)({endpointOverride:n})});return await e({region:(0,N.J)(t)},{AccessToken:i,DeviceName:await c(),DeviceKey:null===o||void 0===o?void 0:o.DeviceKey,DeviceSecretVerifierConfig:p}),{deviceKey:d,deviceGroupKey:l,randomPassword:E}}catch(x){return}}async function Se(e,t,n,o){try{return await e(...t)}catch(i){if(i instanceof d.l&&"ResourceNotFoundException"===i.name&&i.message.includes("Device does not exist."))return await o.clearDeviceMetadata(n),e(...t);throw i}}function Re(e){const{dispatch:t}=U.c$;t({type:"SET_USERNAME",value:e})}function ye(e){var t;return null!==(t=U.c$.getState().username)&&void 0!==t?t:e}},5378:(e,t,n)=>{function o(e,t){null!=e&&this.fromString(e,t)}function i(){return new o(null,null)}let s;n.d(t,{A:()=>o});const r="undefined"!==typeof navigator;r&&"Microsoft Internet Explorer"===navigator.appName?(o.prototype.am=function(e,t,n,o,i,s){const r=32767&t,a=t>>15;for(;--s>=0;){let t=32767&this[e];const s=this[e++]>>15,c=a*t+s*r;t=r*t+((32767&c)<<15)+n[o]+(1073741823&i),i=(t>>>30)+(c>>>15)+a*s+(i>>>30),n[o++]=1073741823&t}return i},s=30):r&&"Netscape"!==navigator.appName?(o.prototype.am=function(e,t,n,o,i,s){for(;--s>=0;){const s=t*this[e++]+n[o]+i;i=Math.floor(s/67108864),n[o++]=67108863&s}return i},s=26):(o.prototype.am=function(e,t,n,o,i,s){const r=16383&t,a=t>>14;for(;--s>=0;){let t=16383&this[e];const s=this[e++]>>14,c=a*t+s*r;t=r*t+((16383&c)<<14)+n[o]+i,i=(t>>28)+(c>>14)+a*s,n[o++]=268435455&t}return i},s=28),o.prototype.DB=s,o.prototype.DM=(1<<s)-1,o.prototype.DV=1<<s;o.prototype.FV=Math.pow(2,52),o.prototype.F1=52-s,o.prototype.F2=2*s-52;const a=[];let c,d;for(c="0".charCodeAt(0),d=0;d<=9;++d)a[c++]=d;for(c="a".charCodeAt(0),d=10;d<36;++d)a[c++]=d;for(c="A".charCodeAt(0),d=10;d<36;++d)a[c++]=d;function l(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function p(e,t){const n=a[e.charCodeAt(t)];return null==n?-1:n}function E(e){const t=i();return t.fromInt(e),t}function u(e){let t,n=1;return 0!==(t=e>>>16)&&(e=t,n+=16),0!==(t=e>>8)&&(e=t,n+=8),0!==(t=e>>4)&&(e=t,n+=4),0!==(t=e>>2)&&(e=t,n+=2),0!==(t=e>>1)&&(e=t,n+=1),n}function x(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}x.prototype.convert=function(e){const t=i();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(o.ZERO)>0&&this.m.subTo(t,t),t},x.prototype.revert=function(e){const t=i();return e.copyTo(t),this.reduce(t),t},x.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(let t=0;t<this.m.t;++t){let n=32767&e[t];const o=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e[n]+=this.m.am(0,o,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},x.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},x.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},o.prototype.copyTo=function(e){for(let t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},o.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},o.prototype.fromString=function(e,t){let n;if(16===t)n=4;else if(8===t)n=3;else if(2===t)n=1;else if(32===t)n=5;else{if(4!==t)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");n=2}this.t=0,this.s=0;let i=e.length,s=!1,r=0;for(;--i>=0;){const t=p(e,i);t<0?"-"===e.charAt(i)&&(s=!0):(s=!1,0===r?this[this.t++]=t:r+n>this.DB?(this[this.t-1]|=(t&(1<<this.DB-r)-1)<<r,this[this.t++]=t>>this.DB-r):this[this.t-1]|=t<<r,r+=n,r>=this.DB&&(r-=this.DB))}this.clamp(),s&&o.ZERO.subTo(this,this)},o.prototype.clamp=function(){const e=this.s&this.DM;for(;this.t>0&&this[this.t-1]==e;)--this.t},o.prototype.dlShiftTo=function(e,t){let n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},o.prototype.drShiftTo=function(e,t){for(let n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},o.prototype.lShiftTo=function(e,t){const n=e%this.DB,o=this.DB-n,i=(1<<o)-1,s=Math.floor(e/this.DB);let r,a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t[r+s+1]=this[r]>>o|a,a=(this[r]&i)<<n;for(r=s-1;r>=0;--r)t[r]=0;t[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp()},o.prototype.rShiftTo=function(e,t){t.s=this.s;const n=Math.floor(e/this.DB);if(n>=this.t)return void(t.t=0);const o=e%this.DB,i=this.DB-o,s=(1<<o)-1;t[0]=this[n]>>o;for(let r=n+1;r<this.t;++r)t[r-n-1]|=(this[r]&s)<<i,t[r-n]=this[r]>>o;o>0&&(t[this.t-n-1]|=(this.s&s)<<i),t.t=this.t-n,t.clamp()},o.prototype.subTo=function(e,t){let n=0,o=0;const i=Math.min(e.t,this.t);for(;n<i;)o+=this[n]-e[n],t[n++]=o&this.DM,o>>=this.DB;if(e.t<this.t){for(o-=e.s;n<this.t;)o+=this[n],t[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<e.t;)o-=e[n],t[n++]=o&this.DM,o>>=this.DB;o-=e.s}t.s=o<0?-1:0,o<-1?t[n++]=this.DV+o:o>0&&(t[n++]=o),t.t=n,t.clamp()},o.prototype.multiplyTo=function(e,t){const n=this.abs(),i=e.abs();let s=n.t;for(t.t=s+i.t;--s>=0;)t[s]=0;for(s=0;s<i.t;++s)t[s+n.t]=n.am(0,i[s],t,s,0,n.t);t.s=0,t.clamp(),this.s!==e.s&&o.ZERO.subTo(t,t)},o.prototype.squareTo=function(e){const t=this.abs();let n=e.t=2*t.t;for(;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){const o=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,o,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},o.prototype.divRemTo=function(e,t,n){const s=e.abs();if(s.t<=0)return;const r=this.abs();if(r.t<s.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null===n&&(n=i());const a=i(),c=this.s,d=e.s,l=this.DB-u(s[s.t-1]);l>0?(s.lShiftTo(l,a),r.lShiftTo(l,n)):(s.copyTo(a),r.copyTo(n));const p=a.t,E=a[p-1];if(0===E)return;const x=E*(1<<this.F1)+(p>1?a[p-2]>>this.F2:0),m=this.FV/x,h=(1<<this.F1)/x,g=1<<this.F2;let I=n.t,v=I-p;const A=null===t?i():t;for(a.dlShiftTo(v,A),n.compareTo(A)>=0&&(n[n.t++]=1,n.subTo(A,n)),o.ONE.dlShiftTo(p,A),A.subTo(a,a);a.t<p;)a[a.t++]=0;for(;--v>=0;){let e=n[--I]===E?this.DM:Math.floor(n[I]*m+(n[I-1]+g)*h);if((n[I]+=a.am(0,e,n,v,0,p))<e)for(a.dlShiftTo(v,A),n.subTo(A,n);n[I]<--e;)n.subTo(A,n)}null!==t&&(n.drShiftTo(p,t),c!==d&&o.ZERO.subTo(t,t)),n.t=p,n.clamp(),l>0&&n.rShiftTo(l,n),c<0&&o.ZERO.subTo(n,n)},o.prototype.invDigit=function(){if(this.t<1)return 0;const e=this[0];if(0===(1&e))return 0;let t=3&e;return t=t*(2-(15&e)*t)&15,t=t*(2-(255&e)*t)&255,t=t*(2-((65535&e)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t},o.prototype.addTo=function(e,t){let n=0,o=0;const i=Math.min(e.t,this.t);for(;n<i;)o+=this[n]+e[n],t[n++]=o&this.DM,o>>=this.DB;if(e.t<this.t){for(o+=e.s;n<this.t;)o+=this[n],t[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<e.t;)o+=e[n],t[n++]=o&this.DM,o>>=this.DB;o+=e.s}t.s=o<0?-1:0,o>0?t[n++]=o:o<-1&&(t[n++]=this.DV+o),t.t=n,t.clamp()},o.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);let t;if(16==e)t=4;else if(8===e)t=3;else if(2===e)t=1;else if(32===e)t=5;else{if(4!==e)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");t=2}const n=(1<<t)-1;let o,i=!1,s="",r=this.t,a=this.DB-r*this.DB%t;if(r-- >0)for(a<this.DB&&(o=this[r]>>a)>0&&(i=!0,s=l(o));r>=0;)a<t?(o=(this[r]&(1<<a)-1)<<t-a,o|=this[--r]>>(a+=this.DB-t)):(o=this[r]>>(a-=t)&n,a<=0&&(a+=this.DB,--r)),o>0&&(i=!0),i&&(s+=l(o));return i?s:"0"},o.prototype.negate=function(){const e=i();return o.ZERO.subTo(this,e),e},o.prototype.abs=function(){return this.s<0?this.negate():this},o.prototype.compareTo=function(e){let t=this.s-e.s;if(0!=t)return t;let n=this.t;if(t=n-e.t,0!=t)return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},o.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+u(this[this.t-1]^this.s&this.DM)},o.prototype.mod=function(e){const t=i();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(o.ZERO)>0&&e.subTo(t,t),t},o.prototype.equals=function(e){return 0===this.compareTo(e)},o.prototype.add=function(e){const t=i();return this.addTo(e,t),t},o.prototype.subtract=function(e){const t=i();return this.subTo(e,t),t},o.prototype.multiply=function(e){const t=i();return this.multiplyTo(e,t),t},o.prototype.divide=function(e){const t=i();return this.divRemTo(e,t,null),t},o.prototype.modPow=function(e,t,n){let o,s=e.bitLength(),r=E(1);const a=new x(t);if(s<=0)return r;o=s<18?1:s<48?3:s<144?4:s<768?5:6;const c=[];let d=3;const l=o-1,p=(1<<o)-1;if(c[1]=a.convert(this),o>1){const e=i();for(a.sqrTo(c[1],e);d<=p;)c[d]=i(),a.mulTo(e,c[d-2],c[d]),d+=2}let m,h,g=e.t-1,I=!0,v=i();for(s=u(e[g])-1;g>=0;){for(s>=l?m=e[g]>>s-l&p:(m=(e[g]&(1<<s+1)-1)<<l-s,g>0&&(m|=e[g-1]>>this.DB+s-l)),d=o;0===(1&m);)m>>=1,--d;if((s-=d)<0&&(s+=this.DB,--g),I)c[m].copyTo(r),I=!1;else{for(;d>1;)a.sqrTo(r,v),a.sqrTo(v,r),d-=2;d>0?a.sqrTo(r,v):(h=r,r=v,v=h),a.mulTo(v,c[m],r)}for(;g>=0&&0===(e[g]&1<<s);)a.sqrTo(r,v),h=r,r=v,v=h,--s<0&&(s=this.DB-1,--g)}const A=a.revert(r);return n(null,A),A},o.ZERO=E(0),o.ONE=E(1)},6538:(e,t,n)=>{n.d(t,{hv:()=>s,oA:()=>o,pU:()=>i});const o="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",i={},s={};for(let r=0;r<256;r++){let e=r.toString(16).toLowerCase();1===e.length&&(e="0".concat(e)),i[r]=e,s[e]=r}},3740:(e,t,n)=>{n.d(t,{H:()=>v});var o=n(2096),i=n(7767),s=n(5378);var r=n(8941),a=n(3157),c=n(6538);const d=e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=c.pU[e[n]];return t},l=e=>{const t=new a.I;t.update(e);const n=t.digestSync(),o=d(n);return new Array(64-o.length).join("0")+o},p=e=>l((0,r.d)(e)),E=/^[89a-f]/i,u=e=>{if(!(e instanceof s.A))throw new Error("Not a BigInteger");const t=e.compareTo(s.A.ZERO)<0;let n=e.abs().toString(16);if(n=n.length%2!==0?"0".concat(n):n,n=E.test(n)?"00".concat(n):n,t){const e=n.split("").map((e=>{const t=15&~parseInt(e,16);return"0123456789ABCDEF".charAt(t)})).join("");n=new s.A(e,16).add(s.A.ONE).toString(16),n.toUpperCase().startsWith("FF8")&&(n=n.substring(2))}return n};var x=n(7886);class m{constructor(e,t){this.words=[];let n=e;n=this.words=n||[],this.sigBytes=void 0!==t?t:4*n.length}random(e){const t=[];for(let n=0;n<e;n+=4)t.push((0,x.MY)().getRandomValues(new Uint32Array(1))[0]);return new m(t,e)}toString(){return function(e){const{words:t}=e,{sigBytes:n}=e,o=[];for(let i=0;i<n;i++){const e=t[i>>>2]>>>24-i%4*8&255;o.push((e>>>4).toString(16)),o.push((15&e).toString(16))}return o.join("")}(this)}}const h=e=>{const t=(new m).random(e).toString();return(0,r.d)(t)};var g=n(676);class I{constructor(e){let{userPoolName:t,a:n,g:o,A:r,N:a}=e;this.encoder=i.U,this.userPoolName=t,this.a=n,this.g=o,this.A=r,this.N=a,this.k=new s.A(p("".concat(u(a)).concat(u(o))),16)}getRandomPassword(){if(!this.randomPassword)throw new o.l({name:"EmptyBigIntegerRandomPassword",message:"random password is empty"});return this.randomPassword}getSaltToHashDevices(){if(!this.saltToHashDevices)throw new o.l({name:"EmptyBigIntegersaltToHashDevices",message:"saltToHashDevices is empty"});return this.saltToHashDevices}getVerifierDevices(){if(!this.verifierDevices)throw new o.l({name:"EmptyBigIntegerVerifierDevices",message:"verifyDevices is empty"});return this.verifierDevices}async generateHashDevice(e,t){this.randomPassword=g.Y.convert(h(40));const n="".concat(e).concat(t,":").concat(this.randomPassword),o=l(n),i=d(h(16));return this.saltToHashDevices=u(new s.A(i,16)),new Promise(((e,t)=>{this.g.modPow(new s.A(p(this.saltToHashDevices+o),16),this.N,((n,o)=>{n?t(n):(this.verifierDevices=u(o),e())}))}))}async getPasswordAuthenticationKey(e){let{username:t,password:n,serverBValue:o,salt:i}=e;if(o.mod(this.N).equals(s.A.ZERO))throw new Error("B cannot be zero.");const c=(e=>{let{A:t,B:n}=e;const o=new s.A(p(u(t)+u(n)),16);if(o.equals(s.A.ZERO))throw new Error("U cannot be zero.");return o})({A:this.A,B:o}),d="".concat(this.userPoolName).concat(t,":").concat(n),E=l(d),x=new s.A(p(u(i)+E),16),m=await(async e=>{let{a:t,g:n,k:o,x:i,B:s,N:r,U:a}=e;return new Promise(((e,c)=>{n.modPow(i,r,((n,d)=>{n?c(n):s.subtract(o.multiply(d)).modPow(t.add(a.multiply(i)),r,((t,n)=>{t?c(t):e(n.mod(r))}))}))}))})({a:this.a,g:this.g,k:this.k,x:x,B:o,N:this.N,U:c}),h=this.encoder.convert("Caldera Derived Key"),g=this.encoder.convert(String.fromCharCode(1)),I=new Uint8Array(h.byteLength+g.byteLength);I.set(h,0),I.set(g,h.byteLength);const v=((e,t,n)=>{const o=new a.I(t);o.update(e);const i=o.digestSync(),s=new a.I(i);return s.update(n),s.digestSync().slice(0,16)})((0,r.d)(u(m)),(0,r.d)(u(c)),I);return v}}const v=async e=>{const t=new s.A(c.oA,16),n=new s.A("2",16),o=A(),i=await(async e=>{let{a:t,g:n,N:o}=e;return new Promise(((e,i)=>{n.modPow(t,o,((t,n)=>{t?i(t):n.mod(o).equals(s.A.ZERO)?i(new Error("Illegal parameter. A mod N cannot be 0.")):e(n)}))}))})({a:o,g:n,N:t});return new I({userPoolName:e,a:o,g:n,A:i,N:t})},A=()=>{const e=d(h(128));return new s.A(e,16)}},8941:(e,t,n)=>{n.d(t,{d:()=>i});var o=n(6538);const i=e=>{if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2){const i=e.slice(n,n+2).toLowerCase();if(!(i in o.hv))throw new Error("Cannot decode unrecognized sequence ".concat(i," as hexadecimal"));t[n/2]=o.hv[i]}return t}},7767:(e,t,n)=>{n.d(t,{U:()=>o});const o={convert:e=>(new TextEncoder).encode(e)}}}]);
//# sourceMappingURL=231.0d58c81d.chunk.js.map