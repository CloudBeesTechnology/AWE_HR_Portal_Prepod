(self.webpackChunkcheckingproject=self.webpackChunkcheckingproject||[]).push([[859],{9051:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Ql});var n=a(2134),r=a(5043),s=a(1444),i=a(579);const l=()=>{const{empPIData:e,IDData:t,hiringData:a}=(0,r.useContext)(s.Y),[n,l]=(0,r.useState)([]),[o,d]=(0,r.useState)(0),[c,p]=(0,r.useState)(0),[m,u]=(0,r.useState)(0),[x,h]=(0,r.useState)(0);return(0,r.useEffect)((()=>{(()=>{try{const a=[...e,...t];l(a);const n=a.filter((e=>Array.isArray(e.contractType)&&e.contractType.includes("Local"))).length;d(n);const r=a.filter((e=>Array.isArray(e.contractType)&&e.contractType.includes("LPA"))).length;u(r);const s=a.filter((e=>Array.isArray(e.contractType)&&e.contractType.includes("SAWP"))).length;h(s)}catch(a){}})()}),[]),(0,i.jsx)("div",{className:"flex justify-center h-full p-2 w-full",children:(0,i.jsxs)("div",{className:"rounded-lg shadow-md w-full ",children:[(0,i.jsx)("div",{className:" font-semibold p-3",children:(0,i.jsx)("h2",{className:" mx-2",children:"Application Received"})}),(0,i.jsxs)("div",{className:" h-full flex flex-col  items-center gap-16 mt-5 p-1",children:[(0,i.jsxs)("div",{className:"w-full flex justify-evenly items-center gap-2",children:[(0,i.jsxs)("div",{className:"rounded-lg shadow-lg flex items-center h-[140px] w-[180px] border border-lite_grey",children:[(0,i.jsx)("div",{className:"w-2 h-32  rounded-md bg-[#6E349E]"}),(0,i.jsxs)("div",{className:"w-full flex justify-center items-center flex-col m-1",children:[(0,i.jsx)("p",{className:"text-sm font-medium",children:"Marker Fitter"}),(0,i.jsx)("h1",{className:"text-3xl font-bold",children:c})]})]}),(0,i.jsxs)("div",{className:"rounded-lg shadow-lg flex items-center justify-between h-[140px] w-[180px] border border-lite_grey",children:[(0,i.jsx)("div",{className:"w-2 h-32  rounded-md bg-[#F1A924]"}),(0,i.jsxs)("div",{className:"w-full flex justify-center items-center flex-col m-1",children:[(0,i.jsx)("p",{className:"text-sm font-medium",children:"Welder"}),(0,i.jsx)("h1",{className:"text-3xl font-bold",children:m})]})]})]}),(0,i.jsxs)("div",{className:"w-full flex justify-evenly items-center gap-2 ",children:[(0,i.jsxs)("div",{className:"rounded-lg shadow-lg flex items-center h-[140px] w-[180px] border border-lite_grey",children:[(0,i.jsx)("div",{className:"w-2 h-32 rounded-md bg-[#E61A1A]"}),(0,i.jsxs)("div",{className:"w-full  flex justify-center items-center flex-col m-1",children:[(0,i.jsx)("p",{className:"text-sm font-medium",children:"Blasting/Painter"}),(0,i.jsx)("h1",{className:"text-3xl font-bold",children:c})]})]}),(0,i.jsxs)("div",{className:"rounded-lg shadow-lg flex items-center justify-between h-[140px] w-[180px] border border-lite_grey ",children:[(0,i.jsx)("div",{className:"w-2 h-32 rounded-md bg-[#17C900] "}),(0,i.jsxs)("div",{className:"w-full flex justify-center items-center flex-col m-1",children:[(0,i.jsx)("p",{className:"text-sm font-medium",children:"Trainer"}),(0,i.jsx)("h1",{className:"text-3xl font-bold",children:m})]})]})]})]})]})})};const o=a.p+"static/media/Group1.7e3f963c1fec7558650e1452ea30b610.svg";const d=a.p+"static/media/Group2.9e773acd6b67fb2676fbab43da8af704.svg";const c=a.p+"static/media/Group3.a20151449024b194746cd343debd00e5.svg";const p=a.p+"static/media/Group4.10269a09c5f1972d27c4a5925d0502dc.svg",m=()=>{const{empPIData:e,IDData:t}=(0,r.useContext)(s.Y),[a,l]=(0,r.useState)([]),[m,u]=(0,r.useState)(0),[x,h]=(0,r.useState)(0),[g,f]=(0,r.useState)(0),[v,y]=(0,r.useState)(0);return(0,r.useEffect)((()=>{(()=>{try{const a=[...e,...t];l(a);const n=a.filter((e=>Array.isArray(e.contractType)&&e.contractType.includes("Local"))).length;u(n);const r=a.filter((e=>Array.isArray(e.contractType)&&e.contractType.includes("LPA"))).length;f(r);const s=a.filter((e=>Array.isArray(e.contractType)&&e.contractType.includes("SAWP"))).length;y(s),h(n+r+s)}catch(a){}})()}),[]),(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"grid grid-cols-4 p-4 gap-5",children:[(0,i.jsxs)(n.N_,{to:"/employeeDetails",className:"p-4 bg-gradient-to-r from-[#FFAAAA] to-[#EBEBEB] rounded-lg shadow-lg flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-1 h-16 mr-4 border rounded-md bg-[#B17A7A] border-[#B17A7A]"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-3xl font-bold",children:x}),(0,i.jsx)("p",{className:"text-sm font-medium",children:"Total Employees"})]})]}),(0,i.jsx)("div",{className:"flex items-center justify-center p-2",children:(0,i.jsx)("img",{src:o,alt:"icon1"})})]}),(0,i.jsxs)("div",{className:"p-4 bg-gradient-to-r from-[#DAFFA6] to-[#EBEBEB] rounded-lg shadow-lg flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-1 h-16 mr-4 border rounded-md bg-[#91A672] border-[#91A672]"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-3xl font-bold",children:g}),(0,i.jsx)("p",{className:"text-sm font-medium",children:"LPA"})]})]}),(0,i.jsx)("div",{className:"flex items-center justify-center p-2",children:(0,i.jsx)("img",{src:d,alt:"icon2"})})]}),(0,i.jsxs)("div",{className:"p-4 bg-gradient-to-r from-[#C9DFFF] to-[#EBEBEB] rounded-lg shadow-lg flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-1 h-16 mr-4 border rounded-md bg-[#687FA4] border-[#B17A7A]"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-3xl font-bold",children:v}),(0,i.jsx)("p",{className:"text-sm font-medium",children:"SAWP"})]})]}),(0,i.jsx)("div",{className:"flex items-center justify-center p-2",children:(0,i.jsx)("img",{src:c,alt:"icon3"})})]}),(0,i.jsxs)("div",{className:"p-4 bg-gradient-to-r from-[#FFDFAB] to-[#EBEBEB] rounded-lg shadow-lg flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-1 h-16 mr-4 border rounded-md bg-[#AB8851] border-[#B17A7A]"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-3xl font-bold",children:m}),(0,i.jsxs)("p",{className:"text-sm font-medium",children:["BRUNEIAN / PR"," ",(0,i.jsx)("span",{className:"text-[#B17A7A] text-xs",children:"Citizen / PR"})]})]})]}),(0,i.jsx)("div",{className:"flex items-center justify-center p-2",children:(0,i.jsx)("img",{src:p,alt:"icon4"})})]})]})})},u=()=>{const{EmailNotifi:e}=(0,r.useContext)(s.Y),t=e.filter((e=>"Unread"===e.status)).slice(0,3),a=["bg-[#DEFFFF]","bg-[#ECF9E2]","bg-[#FFF3DC]"];return(0,i.jsx)("div",{className:"flex justify-center h-full p-2 w-full",children:(0,i.jsxs)("div",{className:"rounded-lg shadow-md w-full h-full",children:[(0,i.jsx)("div",{className:"bg-lite_grey rounded-t-2xl font-semibold p-3",children:(0,i.jsx)("h2",{className:" mx-2",children:"Recent Notifications"})}),t.map(((e,t)=>{const{createdAt:n,leaveType:r,message:s}=e,l=new Date(n),o=l.getDate(),d=l.toLocaleString("default",{month:"long"}).toUpperCase();return(0,i.jsxs)("div",{className:"flex justify-evenly mt-5 items-center m-2 ",children:[(0,i.jsx)("div",{className:"w-[150px] p-4  ",children:(0,i.jsxs)("div",{className:"p-2 text-center  rounded-md ".concat(a[t]),children:[(0,i.jsx)("small",{children:o}),(0,i.jsx)("br",{}),(0,i.jsx)("small",{children:d})]})}),(0,i.jsxs)("div",{className:"px-2 flex flex-col w-[200px] ",children:[(0,i.jsx)("small",{children:(0,i.jsx)("b",{children:r})}),(0,i.jsx)("small",{className:"text-grey mt-1",children:s})]})]},t)})),(0,i.jsx)("div",{className:" underline text-[#8bb4f1] text-center px-16 mb-3",children:(0,i.jsx)(n.N_,{to:"/notifications",children:"View More"})})]})})};var x=a(9379),h=a(2926),g=a(4598);const f=()=>{const{empPIData:e,workInfoData:t,IDData:a}=(0,r.useContext)(s.Y),[l,o]=(0,r.useState)([]),[d,c]=(0,r.useState)([]),[p,m]=(0,r.useState)([]);return(0,r.useEffect)((()=>{(async()=>{try{const n=e.map((e=>{const n=t?t.find((t=>t.empID===e.empID)):{},r=a?a.find((t=>t.empID===e.empID)):{};return(0,x.A)((0,x.A)((0,x.A)({},e),n),r)})).filter(Boolean),r=n.sort(((e,t)=>new Date(t.createdAt)-new Date(e.createdAt))).slice(0,4);o(r),c(n),m(r)}catch(n){console.error("Error fetching data:",n)}})()}),[e,t,a]),(0,r.useEffect)((()=>{p.length>0&&(async()=>{try{const e=await Promise.all(p.map((async e=>{if(e.profilePhoto){const t=await(0,h.I)({path:e.profilePhoto});return(0,x.A)((0,x.A)({},e),{},{profilePhotoUrl:t.url})}return(0,x.A)((0,x.A)({},e),{},{profilePhotoUrl:null})})));m(e)}catch(e){console.error("Error fetching profile photos:",e)}})()}),[p]),(0,i.jsxs)("div",{className:"bg-white shadow-md rounded-2xl overflow-hidden m-2",children:[(0,i.jsxs)("div",{className:"bg-lite_grey p-4 flex justify-between",children:[(0,i.jsx)("h2",{className:"text-lg font-semibold",children:"New Joinee"}),(0,i.jsx)(n.N_,{to:"/allempDetails",className:"px-10 underline text-[blue]",children:" View All"})]}),(0,i.jsxs)("table",{className:"min-w-full bg-white",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{className:"border-b",children:[(0,i.jsx)("th",{className:"py-3 px-6 text-left text-sm font-medium",children:"Employee"}),(0,i.jsx)("th",{className:"py-3 px-6 text-left text-sm font-medium",children:"Date of Join"}),(0,i.jsx)("th",{className:"py-3 px-6 text-left text-sm font-medium",children:"Nationality"}),(0,i.jsx)("th",{className:"py-3 px-6 text-left text-sm font-medium",children:"Position"}),(0,i.jsx)("th",{className:"py-3 px-6 text-left text-sm font-medium",children:"Type"})]})}),(0,i.jsx)("tbody",{children:p.map(((e,t)=>(0,i.jsxs)("tr",{className:"border-b last:border-none text-sm",children:[(0,i.jsxs)("td",{className:"py-4 px-6 flex items-center",children:[(0,i.jsx)("img",{className:"w-10 h-10 rounded-full mr-4",src:e.profilePhotoUrl||g,alt:e.name}),(0,i.jsx)("span",{className:"text-grey",children:e.name})]}),(0,i.jsx)("td",{className:"py-4 text-grey text-center",children:e.doj||"N/A"}),(0,i.jsx)("td",{className:"py-4 px-6 text-grey",children:e.nationality||"N/A"}),(0,i.jsx)("td",{className:"py-4 px-6 text-grey",children:e.position||"N/A"}),(0,i.jsx)("td",{className:"py-4 px-6 text-grey",children:e.empType||"N/A"})]},t)))})]})]})};var v=a(4790),y=a(5394),b=a(5659);const N=()=>{const{empPIData:e}=(0,r.useContext)(s.Y),[t,a]=(0,r.useState)([]),[n,l]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{if(e){const t=(e=>{const t=(0,v.GP)(new Date,"MM-dd");return e.filter((e=>{if(!e.dob)return!1;const a=new Date(e.dob);return!isNaN(a)&&(0,v.GP)(a,"MM-dd")===t}))})(e);a(t)}}),[e]),(0,i.jsxs)("div",{className:"max-w-md w-full shadow-md rounded-2xl h-full bg-white ",children:[(0,i.jsx)("div",{className:"bg-lite_grey p-4 rounded-t-2xl",children:(0,i.jsx)("h2",{className:"text-lg font-semibold",children:"Birthday Reminder"})}),(0,i.jsxs)("div",{className:"p-4",children:[(0,i.jsx)("h3",{className:"text-lg font-medium",children:"Today's Birthday"}),(0,i.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-5",children:[t.slice(0,2).map(((e,t)=>(0,i.jsxs)("div",{className:"flex items-center space-x-3 bg-[#F5F7FB] p-2 rounded-md shadow-sm",children:[(0,i.jsx)("p",{className:"w-10 h-10 text-[50px] rounded-full center",children:(0,i.jsx)(y.Mw2,{})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-[14px] font-semibold",children:e.name}),(0,i.jsx)("p",{className:"text-[10px] text-grey",children:e.message||"Happy Birthday!"}),(0,i.jsx)("p",{className:"text-[10px] text-grey",children:(0,v.GP)(new Date(e.dob),"MMMM dd")})]})]},t))),t.length>2&&(0,i.jsx)("button",{onClick:()=>l(!0),className:"text-[green] underline mt-4",children:"View More"})]})]}),n&&(0,i.jsx)("div",{className:"fixed inset-0 center z-50 bg-black bg-opacity-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full h-[550px] overflow-y-auto scrollBar ",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-5",children:[(0,i.jsx)("h2",{className:"text-lg font-semibold ",children:"All Birthdays Today"}),(0,i.jsx)("button",{onClick:()=>l(!1),className:"text-[24px] rounded ",children:(0,i.jsx)(b.RQJ,{})})]}),(0,i.jsx)("div",{className:"grid grid-cols-2 gap-5",children:t.map(((e,t)=>(0,i.jsxs)("div",{className:"flex justify-between flex-wrap items-center space-x-3 bg-[#F5F7FB] p-2 rounded-md shadow-sm mb-2 gap-5",children:[(0,i.jsx)("p",{className:"w-10 h-10 text-[50px] rounded-full center",children:(0,i.jsx)(y.Mw2,{})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-[14px] font-semibold",children:e.name}),(0,i.jsx)("p",{className:"text-[10px] text-grey",children:e.message||"Happy Birthday!"}),(0,i.jsx)("p",{className:"text-[10px] text-grey",children:(0,v.GP)(new Date(e.dob),"MMMM dd")})]})]},t)))})]})})]})},j=()=>{const{userData:e}=(0,r.useContext)(s.Y),t=e.reduce(((e,t)=>("Employee"!==t.selectType&&"Active"===t.status?e.active+=1:"Employee"!==t.selectType&&"InActive"===t.status&&(e.inactive+=1),e)),{active:0,inactive:0});return(0,i.jsxs)("div",{className:"flex justify-evenly items-center w-full gap-3 bg-white py-7 px-2 rounded-2xl shadow-lg",children:[(0,i.jsxs)("div",{className:"text-center w-full ",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold",children:"Active users"}),(0,i.jsx)("div",{className:"relative w-full h-2 bg-grey rounded-full overflow-hidden my-2",children:(0,i.jsx)("div",{className:"absolute h-full bg-[#32d432]",style:{width:"".concat(t.active,"%")}})}),(0,i.jsxs)("p",{className:"font-medium",children:[t.active," user"]})]}),(0,i.jsxs)("div",{className:"text-center  w-full",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold",children:"Inactive users"}),(0,i.jsx)("div",{className:"relative w-full h-2 bg-grey rounded-full overflow-hidden my-2",children:(0,i.jsx)("div",{className:"absolute h-full bg-yellow",style:{width:"".concat(t.inactive,"%")}})}),(0,i.jsxs)("p",{className:"font-medium",children:[t.inactive," user"]})]})]})};const D=(e,t)=>{const[a,n]=(0,r.useState)([]),{userData:i}=(0,r.useContext)(s.Y);return(0,r.useEffect)((()=>{var a;const r=null===(a=localStorage.getItem(e))||void 0===a?void 0:a.toUpperCase(),s=i.find((e=>e.empID===r));s&&Array.isArray(s.setPermissions)&&s.setPermissions.forEach((e=>{const a=function(e){var t,a,n;if(!e)return null;let r=null===e||void 0===e?void 0:e.replace(/=/g,":");r=null===(t=r)||void 0===t?void 0:t.replace(/([a-zA-Z]+):/g,'"$1":'),r=null===(a=r)||void 0===a?void 0:a.replace(/\[([^\]]+)\]/g,((e,t)=>{let a=t.split(",").map((e=>'"'.concat(e.trim(),'"')));return"[".concat(a.join(", "),"]")})),r="{".concat(null===(n=r)||void 0===n?void 0:n.slice(1,-1),"}");try{return JSON.parse(r)}catch(s){return console.error("Error parsing JSON:",s),null}}(e);a&&a[t]&&n(a[t])}))}),[e,t,i]),a},w=()=>{const e=D("userID","Dashboard");(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]);const t=(0,r.useCallback)((()=>(0,i.jsxs)(i.Fragment,{children:[e.includes("Employee count")&&(0,i.jsx)(m,{}),(0,i.jsxs)("div",{className:"flex gap-2 px-3 my-5 w-full",children:[e.includes("Recent Notifications")&&(0,i.jsx)("div",{className:"flex-1 w-full ",children:(0,i.jsx)("div",{className:"w-full h-full",children:(0,i.jsx)(u,{})})}),e.includes("Application Received")&&(0,i.jsx)("div",{className:"flex-1 w-full",children:(0,i.jsx)("div",{className:"w-full h-full",children:(0,i.jsx)(l,{})})}),(e.includes("User Action")||e.includes("Birthday Reminder"))&&(0,i.jsxs)("div",{className:"flex-1 gap-4 pb-1 flex flex-col justify-between items-end overflow-hidden px-1",children:[e.includes("User Action")&&(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(j,{})}),e.includes("Birthday Reminder")&&(0,i.jsx)("div",{className:"w-full h-full",children:(0,i.jsx)(N,{})})]})]}),e.includes("New Joinee")&&(0,i.jsx)(f,{})]})),[e]);return(0,i.jsx)("section",{className:"flex flex-col w-full pb-10 pt-5",children:t()})};const A=a.p+"static/media/icon1.a0e21c4a3cdac1ce8ac63036afedddd0.svg";const S=a.p+"static/media/icon2.2f73b29a81000b7ff98cd001a1154440.svg";const E=a.p+"static/media/icon3.631bc42c4a66ff9250f8ab2d5cb5a220.svg";const I=a.p+"static/media/icon4.1aee7c814eb0d2498cf611d522120f90.svg";const C=a.p+"static/media/icon5.92b1b0faf71117afa6ee1967ab502670.svg";const k=a.p+"static/media/icon6.440304a99f330ad76078e70046367bfa.svg";const R=a.p+"static/media/icon7.7cd162248f372a0e9bf87c7ee6b61cdf.svg",T=()=>{const e=D("userID","Employee");(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]);const t=[{id:1,to:"/allempDetails",img:A,alt:"All Employee",title:"All Employee",borderColor:"border-[#AF0A12]"},{id:2,to:"/employeeInfo",img:S,alt:"Employee Info",title:"Employee Info",borderColor:"border-[#0AAF19]"},{id:3,to:"/workInfo",img:E,alt:"Work Info",title:"Work Info",borderColor:"border-[#F9A938]"},{id:4,to:"/sawp",img:I,alt:"Work Pass",title:"Work Pass",borderColor:"border-[#0072FE]"},{id:5,to:"/labourImmigration",img:C,alt:"Medical & Dependent Info",title:"Medical & Dependent Info",borderColor:"border-[#AF0A12]"},{id:6,to:"/insuranceAdd",img:k,alt:"Insurance",title:"Insurance",borderColor:"border-[#0072FE]"},{id:7,to:"/nonLocalAcco",img:R,alt:"Non-Local",title:"Non-Local Accommodation in Brunei",borderColor:"border-[#F9A938]"}].filter((t=>e.includes(t.title)));return(0,i.jsx)("section",{className:" bg-[#F5F6F1CC] w-full p-10 min-h-screen",children:(0,i.jsx)("div",{className:"flex w-full flex-wrap justify-between gap-y-10 gap-x-2 mb-40",children:t.map((e=>(0,i.jsx)(n.N_,{to:e.to,className:"  flex flex-col justify-center items-center p-2 max-w-xs w-full bg-white rounded-lg shadow-lg  transition-shadow duration-200",children:(0,i.jsxs)("div",{className:"w-full h-full flex flex-col justify-center items-center  border-l-4 ".concat(e.borderColor),children:[(0,i.jsx)("img",{className:"w-[100px] h-[100px] p-3",src:e.img,alt:e.alt}),(0,i.jsx)("h2",{className:"text-[14px] font-semibold text-center",children:e.title})]})},e.id)))})})},P=e=>{let{img:t,text1:a,text2:r,fontSize:s,borderColor:l,bgColor:o,link:d,onClick:c}=e;return(0,i.jsxs)(n.N_,{to:d,onClick:c,className:"shadow-lg border ".concat(l," ").concat(o," text-secondary my-5 h-36 max-w-48 w-full rounded-xl flex flex-col items-center justify-center text-center gap-3 p-5"),children:[(0,i.jsx)("div",{className:"w-full max-w-[60px]",children:(0,i.jsx)("img",{className:"w-full",src:t,alt:"TimeSheet icons not found"})}),(0,i.jsxs)("p",{className:"".concat(s),children:[a," ",(0,i.jsx)("br",{}),r]})]})};const _=a.p+"static/media/icon1.5904eec4bc73374c86fbb0c90e86b0f2.svg";const O=a.p+"static/media/icon2.5d87d184d925928a0e49dbc3de6bd1f4.svg";const L=a.p+"static/media/icon3.6a9898df227c282402737584f8684101.svg";a.p;const F=()=>{(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]);const e=D("userID","Training");return(0,i.jsxs)("section",{className:"min-h-screen p-10 bg-[#F5F6F1CC] flex gap-16",children:[e.includes("HR")&&(0,i.jsx)(P,{img:_,text1:"HR",fontSize:"text_size_5 ",borderColor:"border-[#BF91FF]",bgColor:"bg-white",link:"/training/hr"}),e.includes("Training Requestor")&&(0,i.jsx)(P,{img:O,text1:"Training Requestor",fontSize:"text_size_5 ",borderColor:"border-[#7DA2F2]",bgColor:"bg-white",link:"/trainingReq"}),(0,i.jsx)(P,{img:L,text1:"BLNG",fontSize:"text_size_5 ",borderColor:"border-[#F589C1]",bgColor:"bg-white",link:"/blngCertify"}),(0,i.jsx)(P,{img:L,text1:"OME",fontSize:"text_size_5 ",borderColor:"border-[#F589C1]",bgColor:"bg-white",link:"/omgCertify"})]})};const M=a.p+"static/media/icons3.0642e4a308def55381569d9c599b0cb3.svg";const q=a.p+"static/media/icons5.2d191136f29b4bf060023d1e5128b3de.svg";const U=a.p+"static/media/icons8.c6dfb0197156191ad3e2c7a7208a2ee6.svg";const B=a.p+"static/media/icons10.7434dfa4af3cd103de581cf7443059d4.svg";const H=a.p+"static/media/icons11.1289b2d7781067b512d75ddd7f14418e.svg",W=()=>(0,i.jsx)("section",{className:"p-16 bg-[#f5f6f1cc] h-screen",children:(0,i.jsxs)("div",{className:" screen-size",children:[(0,i.jsx)("h4",{className:"text_size_4  w-fit py-2    text-dark_grey ",children:"Upload Time Sheet"}),(0,i.jsxs)("div",{className:"flex justify-start gap-20",children:[(0,i.jsx)(P,{img:q,text1:"HO",borderColor:"border-[#B70B36]",bgColor:"bg-white",link:"/timesheetHO"}),(0,i.jsx)(P,{img:q,text1:"SBW",borderColor:"border-[#B70B36]",bgColor:"bg-white",link:"/timesheetSBW"}),(0,i.jsx)(P,{img:q,text1:"ORMC",borderColor:"border-[#B70B36]",bgColor:"bg-white",link:"/timesheetORMC"}),(0,i.jsx)(P,{img:M,text1:"Offshore",borderColor:"border-[#EB9916]",bgColor:"bg-white",link:"/timesheetOffshore"})]}),(0,i.jsxs)("div",{className:"flex justify-start gap-20",children:[(0,i.jsx)(P,{img:B,text1:"BLNG",borderColor:"border-[#4E00BC]",bgColor:"bg-white",link:"/timesheetBlng"}),(0,i.jsx)(P,{img:H,text1:"View Time",text2:"sheet",borderColor:"border-[#4E00BC]",bgColor:"bg-white",link:"/viewTimesheet"}),(0,i.jsx)(P,{img:U,text1:"View",text2:"Summary",borderColor:"border-[#107B8E]",bgColor:"bg-white",link:"/viewSummary"}),(0,i.jsx)("div",{})]})]})});const Y=a.p+"static/media/rm.a5c8d3c422f7659648c6fb31f1d3df22.svg";const V=a.p+"static/media/terminate.def37d70f86ef6f8f1225da048324655.svg";const z=a.p+"static/media/probation.6f1564510be983567ee52ee158273d79.svg";const J=a.p+"static/media/contract.a5272e0bbad885f8972a9230c09af9c6.svg";const G=a.p+"static/media/passExpiry.d3de2574c8362292a10455bba96cf0ee.svg";const $=a.p+"static/media/LD.0a8b7c04b96cf1d051d8c2236e3fd7b8.svg";const K=a.p+"static/media/passport.e93e6a04f2e3c488ae0adf817ba78145.svg";const Q=a.p+"static/media/medical.44cd861befd1486181a5fa4295312a0e.svg";const Z=a.p+"static/media/req.40bc73c644d28288f8f6e03bf655bb79.svg";const X=a.p+"static/media/training.89ccaa7494711584f8d9cc5c6ffee773.svg";const ee=a.p+"static/media/LBDKPI.4bff947ed573a10d2873a27d22d0a6ed.svg";const te=a.p+"static/media/groupHS.a10ba48984b7ec0d00644ff0fce043e3.svg";const ae=a.p+"static/media/Resignation.7d5f77532b534a9f53caefe2c9eae0eb.svg";const ne=a.p+"static/media/leavePass.138ab4c7e5770c8c798f1a05fc9bc24a.svg",re=()=>{const{empPIData:e,LMIData:t,PPValidsData:a,empPDData:l,IDData:o,workInfoData:d,terminateData:c,DNData:p,EmpInsuranceData:m,WeldeInfo:u,BastingInfo:h,leaveDetailsData:g,trainingCertifi:f,AddEmpReq:v}=(0,r.useContext)(s.Y),[y,b]=(0,r.useState)([]),[N,j]=(0,r.useState)(!0),D=(0,n.Zp)(),w=[{title:"Recruitment & Mobilization",icon:Y,path:"/rm"},{title:"Resignation",icon:ae,path:"/resignation"},{title:"Termination",icon:V,path:"/termination"},{title:"Probation Review",icon:z,path:"/probationReview"},{title:"Contract Expiry Review",icon:J,path:"/contractReview"},{title:"Contract Expiry Form",icon:J,path:"/contractForms"},{title:"Employment Pass Expiry",icon:G,path:"/empPassExpiry"},{title:"LD Expiry",icon:$,path:"/ldExpiry"},{title:"Passport Expiry",icon:K,path:"/passportExpiry"},{title:"Employment Medical",icon:Q,path:"/empMedical"},{title:"New Recruitment",icon:Z,path:"/newRecruit"},{title:"Training Records",icon:X,path:"/trainingRC"},{title:"LBD KPI",icon:ee,path:"/lbdKpi"},{title:"Group H&S",icon:te,path:"/groupHS"},{title:"Leave Passage",icon:ne,path:"/leavePass"},{title:"Promotion",icon:Y,path:"/promotion"}];return(0,r.useEffect)((()=>{const n=e.map((e=>(0,x.A)((0,x.A)((0,x.A)((0,x.A)((0,x.A)((0,x.A)((0,x.A)((0,x.A)((0,x.A)((0,x.A)((0,x.A)((0,x.A)((0,x.A)({},e),o.find((t=>t.empID===e.empID))),d.find((t=>t.empID===e.empID))),c.find((t=>t.empID===e.empID))),p.find((t=>t.empID===e.empID))),a.find((t=>t.empID===e.empID))),t.find((t=>t.empID===e.empID))),m.find((t=>t.empID===e.empID))),u.find((t=>t.empID===e.empID))),h.find((t=>t.empID===e.empID))),g.find((t=>t.empID===e.empID))),f.find((t=>t.empID===e.empID))),v.find((t=>t.empID===e.empID)))));b(n),j(!1)}),[e,o,d,c,p,a,t,m,u,h,g,f,v]),N?(0,i.jsx)("p",{children:"Loading data..."}):(0,i.jsxs)("div",{className:"p-10 w-full bg-[#F5F6F1CC]",children:[(0,i.jsx)("p",{className:"text-2xl font-semibold text-dark_grey text-center uppercase ",children:"Report"}),(0,i.jsx)("div",{className:"flex justify-between items-center flex-wrap gap-5 mt-14",children:w.map(((e,t)=>(0,i.jsxs)("div",{className:"flex flex-col items-center p-6 bg-white rounded-lg shadow-md hover:shadow-lg cursor-pointer border-2 border-[#EAD892] w-[200px] h-[150px]",onClick:()=>D(e.path,{state:{allData:y,title:e.title}}),children:[(0,i.jsx)("img",{src:e.icon,alt:e.title,className:"mb-4 w-12 h-12"}),(0,i.jsx)("p",{className:"text-center font-medium text-gray-700",children:e.title})]},t)))})]})};const se=a.p+"static/media/employee-requisition.41b025adf1d775d5ccf3be283b8140f0.svg";const ie=a.p+"static/media/candidate.b8f45bdcafc47783d7843bcc9e753dfa.svg";const le=a.p+"static/media/local-cv.f6d00c778df12080f7bc80d54b41bfda.svg";const oe=a.p+"static/media/non-local-cv.de560396a9e8c4558f7c9fd722936e80.svg";const de=a.p+"static/media/status.87b997dd7fac7bf90b2c784e229b3c0f.svg";const ce=a.p+"static/media/workpass-tracking.39e64ac55e0af35002d6b7fb52854f0d.svg";const pe=a.p+"static/media/apply_employreq.5dd5127bc5e2ec5006821b6f8b466da2.svg";const me=[{bg:" shadow-[0_1px_6px_1px_rgba(0,0,0,0.2)]",bg1:"bg-[#C9C9C9]",icons:pe,title:"Apply Employee Requisition",path:"applyemployreq"},{bg:" shadow-[0_1px_4px_1px_rgba(0,0,0,0.2)]",bg1:"bg-[#9BE9FF]",icons:se,title:"Employee Requisition",path:"employreq"},{bg:" shadow-[0_1px_6px_1px_rgba(0,0,0,0.2)]",bg1:"bg-[#FFEDA5]",icons:ie,title:"Candidate",path:"candidate"},{bg:" shadow-[0_1px_6px_1px_rgba(0,0,0,0.2)]",bg1:"bg-[#F58DC3]",icons:le,title:"Local CV",path:"localcandi"},{bg:" shadow-[0_1px_6px_1px_rgba(0,0,0,0.2)]",bg1:"bg-[#B1F094]",icons:oe,title:"Non Local CV",path:"nonloccandi"},{bg:" shadow-[0_1px_6px_1px_rgba(0,0,0,0.2)]",bg1:"bg-[#BF91FF]",icons:de,title:"Status",path:"status"},{bg:" shadow-[0_1px_6px_1px_rgba(0,0,0,0.2)]",bg1:"bg-[#FBB995]",icons:ce,title:"WorkPass Tracking",path:"workpasstracking"},{bg:" shadow-[0_1px_6px_1px_rgba(0,0,0,0.2)]",bg1:"bg-[#E993FF]",icons:a.p+"static/media/HiringJob.3e8ab1aa0e357f542ee0a956825eec3d.svg",title:"Hiring Job",path:"/hiringJob"}],ue=()=>{const e=(0,n.Zp)(),t=D("userID","Recruitment"),a=me.filter((e=>t.includes(e.title)));return(0,i.jsx)("section",{className:"min-h-screen p-10 bg-[#F5F6F1]",children:(0,i.jsx)("div",{className:"screen-size flex ".concat(a.length<=2?"justify-start":"justify-evenly"," items-center flex-wrap gap-10 text-black"),children:a.map(((t,a)=>(0,i.jsxs)("div",{onClick:()=>{var a;"Apply Employee Requisition"===(a=t.title)?e("/recrutiles/applyemployreq"):"Employee Requisition"===a?e("/recrutiles/employreq"):"Candidate"===a?e("/recrutiles/candidate"):"Local CV"===a?e("/recrutiles/localcandi"):"Non Local CV"===a?e("/recrutiles/nonloccandi"):"Status"===a?e("/recrutiles/status"):"WorkPass Tracking"===a?e("/recrutiles/workpasstracking"):"Hiring Job"===a&&e("/hiringJob")},className:"".concat(t.bg," rounded-3xl w-[320px] h-50 p-4 bg-white border-4 border-white cursor-pointer transition-all duration-50 hover:border-[#faf362] hover:border-4"),children:[(0,i.jsx)("div",{className:"".concat(t.bg1," rounded-full my-8 w-24 h-24 center m-auto"),children:(0,i.jsx)("img",{className:"w-13 h-16 object-cover",src:t.icons,alt:"".concat(a," Icon not found")})}),(0,i.jsx)("h5",{className:"text-[18px] font-semibold text-center",children:t.title})]},a)))})})},xe=()=>((0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]),(0,i.jsx)("div",{children:(0,i.jsx)(ue,{})}));var he=a(7305),ge=a(8382),fe=a(3646);const ve="\n  mutation CreateTimeSheet(\n    $input: CreateTimeSheetInput!\n    $condition: ModelTimeSheetConditionInput\n  ) {\n    createTimeSheet(input: $input, condition: $condition) {\n      id\n      date\n      status\n      fileName\n      fileType\n      assignTo\n      assignBy\n      empName\n      empBadgeNo\n      empID\n      empDept\n      inTime\n      outTime\n      totalInOut\n      allDayHrs\n      totalHrs\n      remarks\n      otTime\n      netMins\n      actualWorkHrs\n      normalWorkHrs\n      fidNo\n      companyName\n      trade\n      tradeCode\n      onAM\n      offAM\n      onPM\n      offPM\n      ctr\n      rec\n      avgDailyTD\n      highlightDayTG\n      aweSDN\n      totalNT\n      totalOT\n      totalNTOT\n      empWorkInfo\n      fromDate\n      untilDate\n      location\n      mealAllow\n      verify\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",ye="\n  mutation UpdateTimeSheet(\n    $input: UpdateTimeSheetInput!\n    $condition: ModelTimeSheetConditionInput\n  ) {\n    updateTimeSheet(input: $input, condition: $condition) {\n      id\n      date\n      status\n      fileName\n      fileType\n      assignTo\n      assignBy\n      empName\n      empBadgeNo\n      empID\n      empDept\n      inTime\n      outTime\n      totalInOut\n      allDayHrs\n      totalHrs\n      remarks\n      otTime\n      netMins\n      actualWorkHrs\n      normalWorkHrs\n      fidNo\n      companyName\n      trade\n      tradeCode\n      onAM\n      offAM\n      onPM\n      offPM\n      ctr\n      rec\n      avgDailyTD\n      highlightDayTG\n      aweSDN\n      totalNT\n      totalOT\n      totalNTOT\n      empWorkInfo\n      fromDate\n      untilDate\n      location\n      mealAllow\n      verify\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",be="\n  mutation UpdateDNDetails(\n    $input: UpdateDNDetailsInput!\n    $condition: ModelDNDetailsConditionInput\n  ) {\n    updateDNDetails(input: $input, condition: $condition) {\n      id\n      empID\n      doeEmpSubmit\n      doeEmpApproval\n      doeEmpValid\n      doeEmpRefNo\n      doeEmpUpload\n      permitType\n      nlmsEmpSubmit\n      nlmsEmpSubmitRefNo\n      nlmsEmpApproval\n      nlmsRefNo\n      nlmsEmpValid\n      nlmsEmpUpload\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",Ne="\n  mutation CreateBJLDetails(\n    $input: CreateBJLDetailsInput!\n    $condition: ModelBJLDetailsConditionInput\n  ) {\n    createBJLDetails(input: $input, condition: $condition) {\n      id\n      empID\n      bankSubmit\n      bankRece\n      bankRefNo\n      bankAmt\n      bankValid\n      bankEndorse\n      bankEmpUpload\n      tbaPurchase\n      jitpaAmt\n      jpValid\n      jpEndorse\n      jpEmpUpload\n      lbrReceiptNo\n      lbrDepoAmt\n      lbrDepoSubmit\n      lbrDepoUpload\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",je="\n  mutation UpdateBJLDetails(\n    $input: UpdateBJLDetailsInput!\n    $condition: ModelBJLDetailsConditionInput\n  ) {\n    updateBJLDetails(input: $input, condition: $condition) {\n      id\n      empID\n      bankSubmit\n      bankRece\n      bankRefNo\n      bankAmt\n      bankValid\n      bankEndorse\n      bankEmpUpload\n      tbaPurchase\n      jitpaAmt\n      jpValid\n      jpEndorse\n      jpEmpUpload\n      lbrReceiptNo\n      lbrDepoAmt\n      lbrDepoSubmit\n      lbrDepoUpload\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",De="\n  mutation CreateServiceRecord(\n    $input: CreateServiceRecordInput!\n    $condition: ModelServiceRecordConditionInput\n  ) {\n    createServiceRecord(input: $input, condition: $condition) {\n      id\n      empID\n      depEmpDate\n      depEmp\n      positionRev\n      positionRevDate\n      revSalary\n      revSalaryDate\n      revLeavePass\n      revLeaveDate\n      revAnnualLeave\n      revALD\n      remarkWI\n      uploadPR\n      uploadSP\n      uploadLP\n      uploadAL\n      uploadDep\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",we="\n  mutation CreateEmpLeaveDetails(\n    $input: CreateEmpLeaveDetailsInput!\n    $condition: ModelEmpLeaveDetailsConditionInput\n  ) {\n    createEmpLeaveDetails(input: $input, condition: $condition) {\n      id\n      empID\n      annualLeave\n      annualLeaveDate\n      compasLeave\n      destinateLeavePass\n      durLeavePass\n      dateLeavePass\n      leavePass\n      materLeave\n      mrageLeave\n      paterLeave\n      sickLeave\n      sickLeaveDate\n      hospLeave\n      pervAnnualLeaveBal\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",Ae="\n  mutation UpdateEmpLeaveDetails(\n    $input: UpdateEmpLeaveDetailsInput!\n    $condition: ModelEmpLeaveDetailsConditionInput\n  ) {\n    updateEmpLeaveDetails(input: $input, condition: $condition) {\n      id\n      empID\n      annualLeave\n      annualLeaveDate\n      compasLeave\n      destinateLeavePass\n      durLeavePass\n      dateLeavePass\n      leavePass\n      materLeave\n      mrageLeave\n      paterLeave\n      sickLeave\n      sickLeaveDate\n      hospLeave\n      pervAnnualLeaveBal\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",Se="\n  mutation CreateTerminationInfo(\n    $input: CreateTerminationInfoInput!\n    $condition: ModelTerminationInfoConditionInput\n  ) {\n    createTerminationInfo(input: $input, condition: $condition) {\n      id\n      empID\n      resignDate\n      resignNotProb\n      otherResignNotProb\n      resignNotConf\n      otherResignNotConf\n      reasonResign\n      reasonTerminate\n      termiDate\n      termiNotProb\n      otherTermiNotProb\n      termiNotConf\n      otherTermiNotConf\n      WIContract\n      WIProbation\n      WIResignation\n      WITermination\n      WILeaveEntitle\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",Ee="\n  mutation CreateEmpWorkInfo(\n    $input: CreateEmpWorkInfoInput!\n    $condition: ModelEmpWorkInfoConditionInput\n  ) {\n    createEmpWorkInfo(input: $input, condition: $condition) {\n      id\n      empID\n      contractStart\n      contractEnd\n      contractPeriod\n      doj\n      department\n      hr\n      jobCat\n      jobDesc\n      manager\n      otherJobCat\n      otherDepartment\n      otherPosition\n      probationStart\n      probationEnd\n      probDuration\n      position\n      relationship\n      supervisor\n      skillPool\n      salaryType\n      sapNo\n      upgradeDate\n      upgradePosition\n      workStatus\n      workHrs\n      workWeek\n      workMonth\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",Ie="\n  mutation CreateEmpPersonalInfo(\n    $input: CreateEmpPersonalInfoInput!\n    $condition: ModelEmpPersonalInfoConditionInput\n  ) {\n    createEmpPersonalInfo(input: $input, condition: $condition) {\n      id\n      empID\n      age\n      aTQualify\n      alternateNo\n      agent\n      bankName\n      bankAccNo\n      contactNo\n      cob\n      contractType\n      ctryOfOrigin\n      chinese\n      dob\n      educLevel\n      email\n      eduDetails\n      empBadgeNo\n      empType\n      familyDetails\n      gender\n      lang\n      marital\n      name\n      officialEmail\n      oCOfOrigin\n      profilePhoto\n      permanentAddress\n      position\n      sapNo\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",Ce="\n  mutation UpdateEmpPersonalInfo(\n    $input: UpdateEmpPersonalInfoInput!\n    $condition: ModelEmpPersonalInfoConditionInput\n  ) {\n    updateEmpPersonalInfo(input: $input, condition: $condition) {\n      id\n      empID\n      age\n      aTQualify\n      alternateNo\n      agent\n      bankName\n      bankAccNo\n      contactNo\n      cob\n      contractType\n      ctryOfOrigin\n      chinese\n      dob\n      educLevel\n      email\n      eduDetails\n      empBadgeNo\n      empType\n      familyDetails\n      gender\n      lang\n      marital\n      name\n      officialEmail\n      oCOfOrigin\n      profilePhoto\n      permanentAddress\n      position\n      sapNo\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",ke="\n  mutation CreateIDDetails(\n    $input: CreateIDDetailsInput!\n    $condition: ModelIDDetailsConditionInput\n  ) {\n    createIDDetails(input: $input, condition: $condition) {\n      id\n      empID\n      applicationUpload\n      bwnIcNo\n      bwnIcColour\n      bwnIcExpiry\n      bwnUpload\n      cvCertifyUpload\n      driveLic\n      inducBrief\n      inducBriefUp\n      loiUpload\n      myIcNo\n      myIcUpload\n      nationality\n      nationalCat\n      otherNation\n      otherRace\n      otherReligion\n      ppNo\n      paafCvevUpload\n      ppIssued\n      ppExpiry\n      ppUpload\n      ppDestinate\n      preEmp\n      preEmpPeriod\n      race\n      religion\n      supportDocUpload\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",Re="\n  mutation UpdateInterviewSchedule(\n    $input: UpdateInterviewScheduleInput!\n    $condition: ModelInterviewScheduleConditionInput\n  ) {\n    updateInterviewSchedule(input: $input, condition: $condition) {\n      id\n      interDate\n      interTime\n      venue\n      interType\n      bagdeNo\n      message\n      tempID\n      manager\n      candidateStatus\n      department\n      otherDepartment\n      status\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",Te="\n  mutation UpdateUser(\n    $input: UpdateUserInput!\n    $condition: ModelUserConditionInput\n  ) {\n    updateUser(input: $input, condition: $condition) {\n      id\n      empID\n      selectType\n      setPermissions\n      password\n      status\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",Pe=(0,ge.D)(),_e=()=>{const[e,t]=(0,r.useState)({mergedData:[],ticketMerged:[],personalDetails:[]}),[a,n]=(0,r.useState)(!0),[s,i]=(0,r.useState)(null),l=(0,r.useCallback)((async()=>{n(!0);try{var e,a,r,s,l,o,d,c,p,m;const n=3e3,[i,u,x,h,g]=await Promise.all([Pe.graphql({query:fe._n,variables:{limit:n}}),Pe.graphql({query:fe.it,variables:{limit:n}}),Pe.graphql({query:fe.bJ,variables:{limit:n}}),Pe.graphql({query:fe.uh,variables:{limit:n}}),Pe.graphql({query:fe.tt,variables:{limit:n}})]),f=(null===i||void 0===i||null===(e=i.data)||void 0===e||null===(a=e.listLeaveStatuses)||void 0===a?void 0:a.items)||[],v=(null===u||void 0===u||null===(r=u.data)||void 0===r||null===(s=r.listEmpPersonalInfos)||void 0===s?void 0:s.items)||[],y=(null===x||void 0===x||null===(l=x.data)||void 0===l||null===(o=l.listEmpWorkInfos)||void 0===o?void 0:o.items)||[],b=(null===h||void 0===h||null===(d=h.data)||void 0===d||null===(c=d.listEmpLeaveDetails)||void 0===c?void 0:c.items)||[],N=(null===g||void 0===g||null===(p=g.data)||void 0===p||null===(m=p.listTicketRequests)||void 0===m?void 0:m.items)||[],j=v.reduce(((e,t)=>(e[t.empID]=t,e)),{}),D=y.reduce(((e,t)=>(e[t.empID]=t,e)),{}),w=b.reduce(((e,t)=>(e[t.empID]=t,e)),{}),A=f.map((e=>{const t=j[e.empID]||{},a=D[e.empID]||{},n=w[e.empID]||{};return{id:e.id,empID:e.empID,empName:t.name,empBadgeNo:t.empBadgeNo,gender:t.gender,empOfficialEmail:t.officialEmail,doj:a.doj,leaveStatusCreatedAt:e.createdAt,leaveDays:e.days,supervisorName:e.supervisorName,supervisorEmpID:e.supervisorEmpID,supervisorStatus:e.supervisorStatus,supervisorDate:e.supervisorDate,supervisorRemarks:e.supervisorRemarks,managerName:e.managerName,managerEmpID:e.managerEmpID,managerStatus:e.managerStatus,managerDate:e.managerDate,managerRemarks:e.managerRemarks,empStatus:e.empStatus,reason:e.reason,medicalCertificate:e.medicalCertificate,empLeaveType:e.leaveType,position:a.position||"",department:a.department||"",empLeaveStartDate:e.fromDate,empLeaveEndDate:e.toDate,empLeaveUpdatedAt:e.updatedAt,compassionateLeave:n.compasLeave||0,annualLeave:n.annualLeave||0,sickLeave:n.sickLeave||0,maternityLeave:n.materLeave||0,paternityLeave:n.paterLeave||0,hospitalLeave:n.hospLeave||0,marriageLeave:n.mrageLeave||0,empPervAnnualLeaveBal:n.pervAnnualLeaveBal||0,leaveDetailsCreatedAt:n.createdAt,leaveDetailsUpdatedAt:n.updatedAt}})),S=N.map((e=>{const t=j[e.empID]||{},a=D[e.empID]||{};return{id:e.id,empID:e.empID,empName:t.name,position:a.position||"",department:a.department||"",doj:a.doj,empBadgeNo:t.empBadgeNo,empOfficialEmail:t.officialEmail,departureDate:e.departureDate,arrivalDate:e.arrivalDate,destination:e.destination,empStatus:e.empStatus,empDate:e.empDate,empRemarks:e.empRemarks,hrStatus:e.hrStatus,hrDate:e.hrDate,hrRemarks:e.hrRemarks,hrName:e.hrName,hrEmpID:e.hrEmpID,managerEmpID:a.manager||"",createdAt:e.createdAt}}));t({mergedData:A,ticketMerged:S,personalDetails:v})}catch(u){i(u),console.error("Error fetching data:",u)}finally{n(!1)}}),[]);(0,r.useEffect)((()=>{l()}),[l]);return(0,x.A)((0,x.A)({},e),{},{loading:a,error:s,handleDeleteLeaveStatus:async e=>{n(!0);try{await Pe.graphql({query:"\n  mutation DeleteLeaveStatus(\n    $input: DeleteLeaveStatusInput!\n    $condition: ModelLeaveStatusConditionInput\n  ) {\n    deleteLeaveStatus(input: $input, condition: $condition) {\n      id\n      empID\n      leaveType\n      fromDate\n      toDate\n      days\n      applyTo\n      reason\n      medicalCertificate\n      supervisorName\n      supervisorEmpID\n      supervisorStatus\n      supervisorDate\n      supervisorRemarks\n      managerName\n      managerEmpID\n      managerStatus\n      managerDate\n      managerRemarks\n      empStatus\n      empDate\n      empRemarks\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:{id:e}}}),t((t=>(0,x.A)((0,x.A)({},t),{},{mergedData:t.mergedData.filter((t=>t.id!==e))})))}catch(a){i(a),console.error("Error deleting leave status:",a)}finally{n(!1)}},handleUpdateLeaveStatus:async(e,a)=>{n(!0);try{var r;const n=await Pe.graphql({query:"\n  mutation UpdateLeaveStatus(\n    $input: UpdateLeaveStatusInput!\n    $condition: ModelLeaveStatusConditionInput\n  ) {\n    updateLeaveStatus(input: $input, condition: $condition) {\n      id\n      empID\n      leaveType\n      fromDate\n      toDate\n      days\n      applyTo\n      reason\n      medicalCertificate\n      supervisorName\n      supervisorEmpID\n      supervisorStatus\n      supervisorDate\n      supervisorRemarks\n      managerName\n      managerEmpID\n      managerStatus\n      managerDate\n      managerRemarks\n      empStatus\n      empDate\n      empRemarks\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:(0,x.A)({id:e},a)}}).then((e=>{})).catch((e=>{console.log(e)})),s=null===n||void 0===n||null===(r=n.data)||void 0===r?void 0:r.updateLeaveStatus;t((t=>(0,x.A)((0,x.A)({},t),{},{mergedData:t.mergedData.map((t=>t.id===e?s:t))})))}catch(s){i(s),console.error("Error updating leave status:",s)}finally{n(!1)}},handleUpdateTicketRequest:async(e,a)=>{n(!0);try{const n=(await Pe.graphql({query:"\n  mutation UpdateTicketRequest(\n    $input: UpdateTicketRequestInput!\n    $condition: ModelTicketRequestConditionInput\n  ) {\n    updateTicketRequest(input: $input, condition: $condition) {\n      id\n      empID\n      empStatus\n      empDate\n      empRemarks\n      departureDate\n      arrivalDate\n      destination\n      remarks\n      hrStatus\n      hrDate\n      hrRemarks\n      hrName\n      hrEmpID\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:(0,x.A)({id:e},a)}})).data.updateTicketRequest;t((t=>(0,x.A)((0,x.A)({},t),{},{mergedData:t.mergedData.map((t=>t.id===e?n:t))})))}catch(r){i(r),console.error("Error updating leave status:",r)}finally{n(!1)}},handleUpdateEmpLeaveDetails:async(e,a)=>{n(!0);try{const n=(await Pe.graphql({query:Ae,variables:{input:(0,x.A)({empID:e},a)}})).data.updateEmpLeaveDetails;t((t=>(0,x.A)((0,x.A)({},t),{},{mergedData:t.mergedData.map((t=>t.empID===e?n:t))})))}catch(r){i(r),console.error("Error updating employee leave details:",r)}finally{n(!1)}},refreshData:l})},Oe=a.p+"static/media/logo.d552b150183f7ac370ee.png",Le=e=>{let{notification:t,text:a,path:n}=e;const[s,l]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{if(t){l(!0);const e=setTimeout((()=>{l(!1),n&&(window.location.href=n)}),3e3);return()=>clearTimeout(e)}}),[t,n]),(0,i.jsx)("section",{children:s&&(0,i.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-[70]",children:(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center",children:[(0,i.jsx)("p",{className:"text-dark_grey font-semibold",children:a}),(0,i.jsx)("img",{src:Oe,alt:"Logo",className:"mt-4 cursor-pointer w-12 h-12 mx-auto animate-spin-slow"})]})})})},Fe=(0,ge.D)(),Me=async(e,t,a,n)=>{try{const s=await fetch("https://j1wcrd0160.execute-api.ap-southeast-1.amazonaws.com/adinin-send-mail-stage/sendemail",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":"HnBNb3SSva9efDAVIQ0256ihdKMTlYBraAbr96Gu"},body:JSON.stringify({subject:e,message:t,fromid:a,toaddress:n})});console.log(s,"Response");try{const e=await s.json();console.log("Email Response:",e),"Email sent successfully"===e.message&&console.log("Email sent successfully")}catch(r){console.log("log",r)}}catch(s){console.error("Error sending email:",s)}},qe=e=>{let{handleClickForToggle:t,leaveData:a,ticketData:n,source:l,userType:o,personalInfo:d,formatDate:c}=e;const{empPIData:p}=(0,r.useContext)(s.Y),[m,u]=(0,r.useState)(""),[x,h]=(0,r.useState)(!1),[g,f]=(0,r.useState)(""),[v,y]=(0,r.useState)(""),{handleUpdateLeaveStatus:N,handleUpdateTicketRequest:j}=_e(),{createNotification:D}=(()=>{const[e,t]=(0,r.useState)(!1),[a,n]=(0,r.useState)(null),[s,i]=(0,r.useState)(null);return{createNotification:async e=>{t(!0);try{var a;const t=await Fe.graphql({query:"\n  mutation CreateEmailNotifi(\n    $input: CreateEmailNotifiInput!\n    $condition: ModelEmailNotifiConditionInput\n  ) {\n    createEmailNotifi(input: $input, condition: $condition) {\n      id\n      empID\n      leaveType\n      senderEmail\n      receipentEmail\n      receipentEmpID\n      status\n      message\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:{empID:e.empID,leaveType:e.leaveType,senderEmail:e.senderEmail,receipentEmail:e.receipentEmail,receipentEmpID:e.receipentEmpID,status:e.status,message:e.message},variables:{limit:2e4}}}),n=null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.createEmailNotifi;console.log("Created Email Notification:",n),i(n)}catch(r){n(r),console.error("Error creating email notification:",r)}finally{t(!1)}},loading:e,error:a,notification:s}})(),w=p.find((e=>(null===a||void 0===a?void 0:a.managerEmpID)===e.empID)),A=p.find((e=>(null===a||void 0===a?void 0:a.supervisorEmpID)===e.empID)),S=async e=>{const t={},r=localStorage.getItem("userType"),s=(new Date).toISOString();function i(e){const t=new Date(e),a=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();return"".concat(a,"/").concat(n,"/").concat(r)}if("Manager"===r?(t.managerStatus=e,t.managerRemarks=m,t.managerDate=s):"Supervisor"===r&&(t.supervisorStatus=e,t.supervisorRemarks=m,t.supervisorDate=s),"LM"===l){const n=a.empLeaveStartDate,l=a.empLeaveEndDate,o=i(n),c=i(l);N(a.id,t).then((()=>{if(f("Leave ".concat(e," by ").concat(d.name," on ").concat(i(s))),"Manager"!==r||null!=a.supervisorEmpID&&""!==a.supervisorEmpID||"Approved"!==e&&"Rejected"!==e)if("Supervisor"!==r||!a.supervisorEmpID||"Pending"!==(null===a||void 0===a?void 0:a.managerStatus)||"Approved"!==e&&"Rejected"!==e){if("Manager"===r&&a.managerEmpID&&"Approved"===a.supervisorStatus&&("Approved"===e||"Rejected"===e)){const t=p.filter((e=>a.supervisorEmpID.toLowerCase()===e.empID.toLowerCase()));Me("Leave Request ".concat(e),"Employee  ".concat(a.empName||"Not mention"," , applied leave request for the period ").concat(o," to ").concat(c," has been ").concat(e," by Manager ").concat(w.name||"Not mention",". View at : https://hr.adininworks.co "),"leave_no-reply@adininworks.com",t[0].officialEmail),Me("Leave Request ".concat(e),"Dear ".concat(a.empName||"Not mention"," , Your leave request for the period ").concat(o," to ").concat(c," has been ").concat(e," by Manager ").concat(w.name||"Not mention"," . View at : https://employee.adininworks.co "),"leave_no-reply@adininworks.com",a.empOfficialEmail),Me("Leave Request ".concat(e),"Employee ".concat(a.empName||"Not mention"," , Leave request for the period ").concat(o," to ").concat(c," has been ").concat(e," by Manager ").concat(w.name||"Not mention"," . View at : https://hr.adininworks.co "),"leave_no-reply@adininworks.com","Hr-notification@adininworks.com"),D({empID:a.empID,leaveType:a.empLeaveType,message:"Leave request for ".concat(a.empName," has been ").concat(e," by Manager ").concat(w.name||"Not mentioned"," ."),senderEmail:"leave_no-reply@adininworks.com",receipentEmail:a.empOfficialEmail,receipentEmpID:a.empID,status:"Unread"}),D({empID:a.empID,leaveType:a.empLeaveType,message:"Leave request for ".concat(a.empName," has been ").concat(e," by Manager ").concat(w.name||"Not mentioned","."),senderEmail:"leave_no-reply@adininworks.com",receipentEmail:t[0].officialEmail,receipentEmpID:a.supervisorEmpID,status:"Unread"}),D({empID:a.empID,leaveType:a.empLeaveType,message:"Leave request for ".concat(a.empName," has been ").concat(e," by Manager ").concat(w.name||"Not mentioned","."),senderEmail:"leave_no-reply@adininworks.com",receipentEmail:"Hr-notification@adininworks.com",status:"Unread"})}}else{const t=p.filter((e=>(null===a||void 0===a?void 0:a.managerEmpID.toLowerCase())===e.empID.toLowerCase()));"Approved"===e&&(Me("Leave Request ".concat(e),"Employee ".concat(a.empName||"Not mention"," , \n           applied leave request for the period ").concat(o," to ").concat(c," has been ").concat(e," by Supervisor ").concat(A.name||"Not mention",". View at : https://hr.adininworks.co "),"leave_no-reply@adininworks.com",t[0].officialEmail),Me("Leave Request ".concat(e),"Employee ".concat(a.empName||"Not mention"," , \n           applied leave request for the period ").concat(o," to ").concat(c," has been ").concat(e," by Supervisor ").concat(A.name||"Not mention",". View at : https://hr.adininworks.co "),"leave_no-reply@adininworks.com","Hr-notification@adininworks.com"),D({empID:a.empID,leaveType:a.empLeaveType,message:"Leave request for ".concat(a.empName," has been ").concat(e," by Supervisor ").concat(A.name),senderEmail:"leave_no-reply@adininworks.com",receipentEmail:t[0].officialEmail,receipentEmpID:a.managerEmpID,status:"Unread"}),D({empID:a.empID,leaveType:a.empLeaveType,message:"Leave request for ".concat(a.empName," has been ").concat(e," by Supervisor ").concat(A.name),senderEmail:"leave_no-reply@adininworks.com",receipentEmail:"Hr-notification@adininworks.com",status:"Unread"})),"Rejected"===e&&(Me("Leave Request ".concat(e),"Employee ".concat(a.empName||"Not mention"," , \n           applied leave request for the period ").concat(o," to ").concat(c," has been ").concat(e," by Supervisor ").concat(A.name||"Not mention",". View at : https://hr.adininworks.co "),"leave_no-reply@adininworks.com","Hr-notification@adininworks.com"),Me("Leave Request ".concat(e),"Employee ".concat(a.empName||"Not mention"," , \n             applied leave request for the period ").concat(o," to ").concat(c," has been ").concat(e," by Supervisor ").concat(A.name||"Not mention",". View at : https://hr.adininworks.co "),"leave_no-reply@adininworks.com",t[0].officialEmail),Me("Leave Request ".concat(e),"Dear ".concat(a.empName||"Not mention"," , \n             leave request for the period ").concat(o," to ").concat(c," has been ").concat(e," by Supervisor ").concat(A.name||"Not mention",". View at : https://employee.adininworks.co "),"leave_no-reply@adininworks.com",a.empOfficialEmail),D({empID:a.empID,leaveType:a.empLeaveType,message:"Leave request for ".concat(a.empName," has been ").concat(e," by Supervisor ").concat(A.name),senderEmail:"leave_no-reply@adininworks.com",receipentEmail:t[0].officialEmail,receipentEmpID:a.managerEmpID,status:"Unread"}),D({empID:a.empID,leaveType:a.empLeaveType,message:"Leave request for ".concat(a.empName," has been ").concat(e," by Supervisor ").concat(A.name),senderEmail:"leave_no-reply@adininworks.com",receipentEmail:a.empOfficialEmail,receipentEmpID:a.empID,status:"Unread"}),D({empID:a.empID,leaveType:a.empLeaveType,message:"Leave request for ".concat(a.empName," has been ").concat(e," by Supervisor ").concat(A.name),senderEmail:"leave_no-reply@adininworks.com",receipentEmail:"Hr-notification@adininworks.com",status:"Unread"}))}else console.log("checking manager"),Me("Leave Request ".concat(e),"Dear ".concat(a.empName||"Not mention",", applied leave request for the period : ").concat(o," to ").concat(c," has been ").concat(e," by Manager Name : ").concat(w.name||"Not mention",". View at : https://employee.adininworks.co "),"leave_no-reply@adininworks.com",a.empOfficialEmail),Me("Leave Request ".concat(e),"Employee ".concat(a.empName||"Not mention",", applied leave request for the period : ").concat(o," to ").concat(c," has been ").concat(e," by Manager Name : ").concat(w.name||"Not mention",". View at : https://hr.adininworks.co "),"leave_no-reply@adininworks.com","Hr-notification@adininworks.com"),D({empID:a.empID,leaveType:a.empLeaveType,message:"Leave request for ".concat(a.empName," has been ").concat(e," by Manager ").concat(w.name),senderEmail:"leave_no-reply@adininworks.com",receipentEmail:a.empOfficialEmail,receipentEmpID:a.empID,status:"Unread"}),D({empID:a.empID,leaveType:a.empLeaveType,message:"Leave request for ".concat(a.empName," has been ").concat(e," by Manager ").concat(w.name),senderEmail:"leave_no-reply@adininworks.com",receipentEmail:"Hr-notification@adininworks.com",status:"Unread"});h(!0),y("/leaveManagement")})).catch((e=>console.log(e)))}else if("Tickets"===l){t.hrStatus=e,t.hrRemarks=m,t.hrDate=s;const a=i(n.departureDate),r=i(n.arrivalDate);j(n.id,t).then((()=>{f("Ticket request ".concat(e," by ").concat(d.name," on ").concat(i(s)));const t=n.managerEmpID[n.managerEmpID.length-1],l=p.find((e=>e.empID===t));Me("Ticket Request ".concat(e),"Dear  ".concat(n.empName||"Not mention"," , Your ticket request for the period ").concat(a," to ").concat(r," has been ").concat(e," by HR ").concat(d.name||"Not mention",". View at : https://employee.adininworks.co "),"hr_no-reply@adininworks.com",n.empOfficialEmail),Me("Ticket Request ".concat(e),"Employee  ".concat(n.empName||"Not mention"," , Applied ticket request for the period ").concat(a," to ").concat(r," has been ").concat(e," by HR ").concat(d.name||"Not mention",". "),"hr_no-reply@adininworks.com",l.officialEmail),D({empID:n.empID,leaveType:"Ticket Request",message:"Ticket request for ".concat(n.empName," has been ").concat(e," by HR ").concat(d.name),senderEmail:"ticket_no-reply@adininworks.com",receipentEmail:n.empOfficialEmail,receipentEmpID:n.empID,status:"Unread"}),D({empID:n.empID,leaveType:"Ticket Request",message:"Ticket request for ".concat(n.empName," has been ").concat(e," by HR ").concat(d.name),senderEmail:"ticket_no-reply@adininworks.com",receipentEmail:l.officialEmail,receipentEmpID:n.empID,status:"Unread"}),h(!0),y("/leaveManagement/requestTickets")})).catch((e=>console.log(e)))}},E=()=>S("Approved"),I=()=>S("Rejected");return(0,i.jsx)("main",{className:"flex flex-col items-center justify-center bg-grey bg-opacity-75 inset-0 z-50 fixed",children:(0,i.jsx)("div",{className:"center min-h-screen overflow-y-auto",children:(0,i.jsxs)("header",{className:"bg-white w-full max-w-[600px] rounded-lg relative p-5 ",children:[(0,i.jsx)("button",{onClick:t,className:"absolute top-5 right-6 border rounded-full p-1",children:(0,i.jsx)(b.RQJ,{size:20})}),(0,i.jsxs)("div",{className:" justify-items-center gap-4",children:[(0,i.jsx)("img",{src:he.A,alt:"Logo",className:"max-w-[180px] w-full"}),(0,i.jsx)("h2",{className:"text-xl mt-2 font-bold underline",children:"LM"===l?"Leave Application Form":"Tickets"===l&&"Ticket Request Form"})]}),x&&(0,i.jsx)(Le,{text:g,notification:x,path:v}),"LM"===l&&(0,i.jsxs)("section",{className:"shadow-md w-[500px] p-5 bg-white",children:[(0,i.jsxs)("div",{className:"text_size_6 ",children:[[{label:"Name",value:a.empName||""},{label:"Badge No",value:a.empBadgeNo},{label:"Job Title",value:Array.isArray(a.position)&&a.position.length>0?a.position[a.position.length-1]:"N/A"},{label:"Department",value:Array.isArray(a.department)&&a.department.length>0?a.department[a.department.length-1]:"N/A"},{label:"Leave Type",value:a.empLeaveType},{label:"Applied Dates",value:" ".concat(c(a.empLeaveStartDate)," to ").concat(c(a.empLeaveEndDate)," ")},{label:"Total No of Days",value:a.leaveDays},{label:"Reason",value:a.reason}].map(((e,t)=>(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[(0,i.jsx)("strong",{className:"w-full",children:e.label}),(0,i.jsxs)("span",{className:"w-full col-span-2",children:[": \xa0",e.value]})]},t))),a.remark&&(0,i.jsxs)("div",{className:"grid grid-cols-2 py-6",children:[(0,i.jsx)("p",{children:"Comments:"}),(0,i.jsx)("p",{className:"text-start text-[16px] font-medium border border-gray-400 w-full break-words overflow-hidden h-[51px]",children:a.empRemarks||"No remarks added"})]}),"SuperAdmin"===o||"HR"===o?(0,i.jsx)("div",{className:" w-full text-center text_size_6 shadow-md pt-3",children:(0,i.jsxs)("table",{className:"w-full ",children:[(0,i.jsx)("thead",{className:" bg-[#D8D8D8]",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"py-1",children:"Role"}),(0,i.jsx)("th",{className:"py-1",children:"Status"}),(0,i.jsx)("th",{className:"py-1",children:"Remark"})]})}),(0,i.jsxs)("tbody",{children:["Rejected"!==a.supervisorStatus&&(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"py-2",children:"Manager"}),(0,i.jsxs)("td",{className:"py-2",children:[" ",(0,i.jsx)("p",{className:"w-full break-words overflow-hidden ".concat("Approved"===a.managerStatus?"text-[green]":"Rejected"===a.managerStatus?"text-[red]":"text-dark_grey"),children:"".concat(a.managerStatus)})]}),(0,i.jsx)("td",{className:"py-2",children:("Approved"===a.managerStatus||"Rejected"===a.managerStatus||"Pending"===a.managerStatus)&&(0,i.jsx)("p",{className:"w-full break-words overflow-hidden ",children:"".concat(a.managerRemarks||"no remark")})})]}),""!==a.supervisorEmpID&&(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"py-2",children:"Supervisor"}),(0,i.jsxs)("td",{className:"py-2",children:[" ",(0,i.jsx)("p",{className:"w-full break-words overflow-hidden ".concat("Approved"===a.supervisorStatus?"text-[green]":"Rejected"===a.supervisorStatus?"text-[red]":"text-dark_grey"),children:"".concat(a.supervisorStatus)})]}),(0,i.jsx)("td",{className:"py-2",children:("Approved"===a.supervisorStatus||"Rejected"===a.supervisorStatus||"Pending"===a.supervisorStatus)&&(0,i.jsx)("p",{className:"w-full break-words overflow-hidden ",children:"".concat(a.supervisorRemarks||"no remark")})})]})]})]})}):"Supervisor"===o?(0,i.jsxs)("div",{className:" text_size_6 ",children:[("Approved"===a.supervisorStatus||"Rejected"===a.supervisorStatus)&&(0,i.jsxs)("div",{className:" grid grid-cols-3 gap-4 mb-4",children:[" ",(0,i.jsx)("p",{className:" w-full break-words overflow-hidden font-semibold",children:"Remark"}),(0,i.jsx)("span",{className:"col-span-2 w-full",children:": ".concat(a.supervisorRemarks||"no remarks")})]}),"Rejected"!==a.supervisorStatus&&(0,i.jsx)("div",{className:" w-full text-center text_size_6 shadow-md pt-3",children:(0,i.jsxs)("table",{className:"w-full ",children:[(0,i.jsx)("thead",{className:" bg-[#D8D8D8]",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"py-1",children:"Role"}),(0,i.jsx)("th",{className:"py-1",children:"Status"}),(0,i.jsx)("th",{className:"py-1",children:"Remark"})]})}),(0,i.jsx)("tbody",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"py-2",children:"Manager"}),(0,i.jsx)("td",{className:"py-2",children:(0,i.jsx)("p",{className:"w-full break-words overflow-hidden ".concat("Approved"===a.managerStatus?"text-[green]":"Rejected"===a.managerStatus?"text-[red]":"text-dark_grey"),children:"".concat(a.managerStatus)})}),(0,i.jsx)("td",{className:"py-2",children:("Approved"===a.managerStatus||"Rejected"===a.managerStatus||"Pending"===a.managerStatus)&&(0,i.jsx)("p",{className:"w-full break-words overflow-hidden ",children:"".concat(a.managerRemarks||"no remark")})})]})})]})})]}):"Manager"===o?(0,i.jsxs)("div",{className:" text_size_6 ",children:[("Approved"===a.managerStatus||"Rejected"===a.managerStatus)&&(0,i.jsxs)("div",{className:" grid grid-cols-3 gap-4 mb-4",children:[" ",(0,i.jsx)("p",{className:" w-full break-words overflow-hidden font-semibold",children:"Remark"}),(0,i.jsx)("span",{className:"col-span-2 w-full",children:": ".concat(a.managerRemarks||" no remarks")})]}),""!==a.supervisorEmpID&&(0,i.jsx)("div",{className:" w-full text-center text_size_6 shadow-md pt-3",children:(0,i.jsxs)("table",{className:"w-full ",children:[(0,i.jsx)("thead",{className:" bg-[#D8D8D8]",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"py-1",children:"Role"}),(0,i.jsx)("th",{className:"py-1",children:"Status"}),(0,i.jsx)("th",{className:"py-1",children:"Remark"})]})}),(0,i.jsx)("tbody",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"py-2",children:"Supervisor"}),(0,i.jsxs)("td",{className:"py-2",children:[" ",(0,i.jsx)("p",{className:"w-full break-words overflow-hidden ".concat("Approved"===a.supervisorStatus?"text-[green]":"Rejected"===a.supervisorStatus?"text-[red]":"text-dark_grey"),children:"".concat(a.supervisorStatus)})]}),(0,i.jsx)("td",{className:"py-2",children:("Approved"===a.supervisorStatus||"Rejected"===a.supervisorStatus||"Pending"===a.supervisorStatus)&&(0,i.jsx)("p",{className:"w-full break-words overflow-hidden ",children:"".concat(a.supervisorRemarks||"no remark")})})]})})]})})]}):"","Pending"===a.managerStatus&&"Pending"===a.supervisorStatus&&"SuperAdmin"!==o&&"HR"!==o&&(0,i.jsxs)("div",{className:"grid grid-rows-2 pt-1",children:[(0,i.jsx)("label",{htmlFor:"remark",children:"Remark :"}),(0,i.jsx)("input",{type:"text",value:m,onChange:e=>u(e.target.value),className:"border border-grey w-full h-9 outline-none pl-2"})]}),"Pending"===a.managerStatus&&"Pending"!==a.supervisorStatus&&"Manager"===o&&"SuperAdmin"!==o&&"HR"!==o&&(0,i.jsxs)("div",{className:"grid grid-rows-2 pt-1",children:[(0,i.jsx)("label",{htmlFor:"remark",children:"Remark :"}),(0,i.jsx)("input",{type:"text",value:m,onChange:e=>u(e.target.value),className:"border border-grey w-full h-9 outline-none pl-2"})]})]}),(0,i.jsx)("div",{className:"flex justify-between px-5 mt-6",children:(()=>{const{supervisorStatus:e,managerStatus:t,supervisorEmpID:n}=a,r="Pending"===t,s="Approved"===e,l="SuperAdmin"!==o&&"HR"!==o;return s&&"Rejected"!==e&&r&&"Supervisor"===o&&l?(0,i.jsx)("div",{className:"center w-full",children:(0,i.jsx)("button",{className:"border border-grey p-2 px-5 rounded text-dark_grey text_size_6",onClick:I,children:"Reject"})}):"Pending"===e&&n&&l||s&&r&&l||r&&(""===n||null===n)&&l?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{className:"bg-[#FEF116] p-2 px-3 rounded text-dark_grey text_size_6",onClick:E,children:"Approve"}),(0,i.jsx)("button",{className:"border border-grey p-2 px-5 rounded text-dark_grey text_size_6",onClick:I,children:"Reject"})]}):null})()})]}),"Tickets"===l&&(0,i.jsxs)("section",{className:"shadow-md w-[500px] px-5 bg-white",children:[(0,i.jsxs)("div",{className:"text_size_6",children:[(0,i.jsx)("div",{className:"mb-5 ",children:(0,i.jsx)("p",{className:"text-center text-[24px] font-semibold",children:"Pending"===n.hrStatus?"Request Tickets":n.hrStatus})}),[{label:"Name",value:n.empName},{label:"Badge Number",value:n.empBadgeNo||"N/A"},{label:"Department",value:Array.isArray(n.department)&&n.department.length>0?n.department[n.department.length-1]:"N/A"},{label:"Position",value:Array.isArray(n.position)&&n.position.length>0?n.position[n.position.length-1]:"N/A"},{label:"Date of Join",value:c(n.doj)||"N/A"},{label:"Destination",value:n.destination},{label:"Departure Date",value:c(n.departureDate)},{label:"Arrival Date",value:c(n.arrivalDate)},{label:"Employee Remarks",value:n.empRemarks||"N/A"}].filter(Boolean).map(((e,t)=>(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[(0,i.jsx)("strong",{className:"w-full",children:e.label}),(0,i.jsxs)("span",{className:"w-full col-span-2",children:[": \xa0",e.value]})]},t))),"SuperAdmin"===o?(0,i.jsx)("div",{className:"mt-5 text-lg flex flex-col justify-between gap-2 font-semibold",children:(0,i.jsxs)("div",{className:"flex flex-col justify-between gap-2",children:[(0,i.jsx)("p",{className:"",children:"HR: ".concat(n.hrStatus)}),(0,i.jsx)("p",{className:" w-full break-words overflow-hidden",children:"HR Remark:   ".concat(n.hrRemarks||"no remarks")})]})}):"HR"===o?(0,i.jsx)("div",{className:"mt-5 text-lg space-y-2 font-semibold ",children:"Approved"===n.hrStatus&&(0,i.jsx)("p",{className:" w-full break-words overflow-hidden",children:" Remark:   ".concat(n.hrRemarks||"no remarks")})}):"","Pending"===n.hrStatus&&"SuperAdmin"!==o&&(0,i.jsxs)("div",{className:"grid grid-rows-2 pt-1",children:[(0,i.jsx)("label",{htmlFor:"remark",children:"Remark :"}),(0,i.jsx)("input",{type:"text",value:m,onChange:e=>u(e.target.value),className:"border border-grey w-full h-9 outline-none pl-2"})]})]}),(0,i.jsx)("div",{className:"flex justify-between p-5 ",children:"Pending"===n.hrStatus&&"HR"===o&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{className:"bg-[#FEF116] p-2 px-3 rounded text-dark_grey text_size_6",onClick:E,children:"Approve"}),(0,i.jsx)("button",{className:"border border-grey p-2 px-5 rounded text-dark_grey text_size_6",onClick:I,children:"Reject"})]})})]})]})})})},Ue=(0,ge.D)(),Be=e=>{const[t,a]=(0,r.useState)({empID:"",profilePhoto:"",name:"",email:"",officialEmail:"",contactNo:""}),[n,s]=(0,r.useState)({empID:"",department:"",position:""}),[i,l]=(0,r.useState)(!0),[o,d]=(0,r.useState)(null);return(0,r.useEffect)((()=>{e&&(async()=>{try{var t,n,r,i;l(!0);const o=await Ue.graphql({query:fe.it,variables:{limit:2e4}}),c=await Ue.graphql({query:fe.bJ,variables:{limit:2e4}}),p=(null===o||void 0===o||null===(t=o.data)||void 0===t||null===(n=t.listEmpPersonalInfos)||void 0===n?void 0:n.items)||[],m=(null===c||void 0===c||null===(r=c.data)||void 0===r||null===(i=r.listEmpWorkInfos)||void 0===i?void 0:i.items)||[];if(0===p.length)return d("No employee data found."),void l(!1);const u=p.find((t=>t.empID.toLowerCase()===e.toLowerCase()));u?a({empID:u.empID,profilePhoto:u.profilePhoto,name:u.name,email:u.email,officialEmail:u.officialEmail,contactNo:u.contactNo||""}):(d("No matching employee found for userID: ".concat(e)),console.log("No matching employee found for userID: ".concat(e)));const x=m.find((t=>t.empID.toLowerCase()===e.toLowerCase()));x&&s({empID:x.empID,department:x.department,position:x.position})}catch(o){d("Error fetching employee personal info."),console.error("Error fetching data:",o)}finally{l(!1)}})()}),[e]),{personalInfo:t,workInfo:n,loading:i,error:o}},He=e=>{if(!e||isNaN(new Date(e).getTime()))return"";const t=new Date(e),a=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getFullYear();return"".concat(a,"-").concat(n,"-").concat(r)},We=()=>{const[e,t]=(0,r.useState)(null),[a,s]=(0,r.useState)(!1),[l,o]=(0,r.useState)(null),[d,c]=(0,r.useState)(null),[p,m]=(0,r.useState)(""),[u,x]=(0,r.useState)(""),{mergedData:h,handleDeleteLeaveStatus:g,handleUpdateLeaveStatus:f,ticketMerged:v,statusUpdate:y,loading:b}=_e();(0,r.useEffect)((()=>{const e=localStorage.getItem("userID");x(e);const t=localStorage.getItem("userType");m(t)}),[]);const{personalInfo:N}=Be(u),j=()=>{s(!a)};return(0,i.jsxs)("section",{className:"py-20 px-10",children:[(0,i.jsx)("div",{className:"screen-size",children:(0,i.jsx)("section",{className:"center w-full ",children:(0,i.jsx)(n.sv,{context:{handleClickForToggle:j,ticketMerged:v,handleViewClick:(e,a)=>{t(a),"LM"===a?(o(e),c(null)):"Tickets"===a&&(console.log(e),c(e),o(null)),s(!0)},handleDeleteLeaveStatus:g,personalInfo:N,userType:p,userID:u,statusUpdate:y,mergedData:h,loading:b}})})}),a&&(l||d)&&(0,i.jsx)(qe,{handleClickForToggle:j,leaveData:l,ticketData:d,source:e,formatDate:He,onUpdate:async(e,t,a)=>{try{await f(e,{status:t,remark:a}),o(null),s(!1)}catch(n){console.error("Error updating leave status:",n)}},userType:p,ticketRequest:v,personalInfo:N})]})};const Ye=a.p+"static/media/employe.d4554af3635635f26902dae2b06680f2.svg";const Ve=a.p+"static/media/traning.82964b9a459bea314def5330e8e9047a.svg";const ze=a.p+"static/media/Attendance.52145dae4a7775b8084778d3dedf9b85.svg";const Je=a.p+"static/media/compensation.e309759c765c15ce416171a726ee3089.svg";const Ge=a.p+"static/media/termination.174a3bcb54bd3ff036483320ce18f0c9.svg";const $e=a.p+"static/media/consequence.fb13728a90c51841c1bf0d69ef03d1a4.svg";var Ke=a(2051),Qe=a(3237);a(2340);Ke.EA.workerSrc=new URL(a(1886),a.b).toString();const Ze=()=>{const[e,t]=(0,r.useState)(null),[a,n]=(0,r.useState)(!1),[s,l]=(0,r.useState)([]);(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]),(0,r.useEffect)((()=>{(async()=>{const e=["public/benefitsRewards/EmploymentPolicy.pdf","public/benefitsRewards/TrainingDevelopment.pdf","public/benefitsRewards/AttendanceWorkSchedule.pdf","public/benefitsRewards/CompensationBenefit.pdf","public/benefitsRewards/TerminationfromtheCompany.pdf","public/benefitsRewards/ConsequenceManagement.pdf"],t=[];for(const a of e){const e=await(0,h.I)({path:a});t.push(e.url.toString())}l(t)})()}),[]);const o=[{img:Ye,text:"Employment Policy"},{img:Ve,text:"Training & Development"},{img:ze,text:"Attendance & Work Schedule"},{img:Je,text:"Compensation & Benefits"},{img:Ge,text:"Termination from the Company"},{img:$e,text:"Consequence Management"}];return(0,i.jsxs)("section",{className:"min-h-screen bg-[#F5F6F1] p-16",children:[(0,i.jsx)("div",{className:"flex justify-start flex-wrap gap-x-20 text-black",children:o.map(((e,r)=>(0,i.jsx)(P,{img:e.img,text1:e.text,fontSize:"text_size_5",borderColor:"border-[#0AA818]",bgColor:"bg-white",onClick:()=>{var e;(e=s[r])?(t(e),n(!a)):console.error("PDF link is not available.")}},r)))}),a&&(0,i.jsx)("section",{className:"fixed top-0 left-0 w-full min-h-screen z-50 bg-grey flex justify-center",children:(0,i.jsxs)("div",{className:"w-[80%] max-h-[90vh] py-3",children:[(0,i.jsx)("p",{className:"text-xl text-dark_grey flex justify-end my-5 px-3",onClick:()=>{n(!a)},children:(0,i.jsx)("span",{className:"bg-medium_white px-3 py-1 rounded-lg font-medium cursor-pointer",children:"Close"})}),(0,i.jsx)("div",{className:"invoice-content flex justify-center  w-full h-[calc(100vh-8rem)] overflow-y-auto",children:(0,i.jsx)(Qe.Worker,{workerUrl:"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js",children:(0,i.jsx)(Qe.Viewer,{fileUrl:e||""})})})]})})]})};var Xe=a(397);const et=e=>{let{toggleFunction:t,specificNotificationDetails:a,popupData:n}=e;return console.log(a),console.log(n),(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,i.jsxs)("section",{className:"bg-[#FBFBFB] p-5 gap-2 flex flex-col item-center rounded-lg shadow-md  w-[600px]",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center border-b pb-2",children:[(0,i.jsx)(Xe.Ohx,{className:"text-2xl cursor-pointer",onClick:t}),(0,i.jsx)("p",{className:"text-dark_grey text-[14px] pl-5",children:a.date})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 mt-3",children:[(0,i.jsx)("p",{className:"text-dark_grey text_size_6",children:"Emp ID"}),(0,i.jsx)("p",{className:"text-dark_grey text-[16px] pl-5",children:a.empID})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 mt-1",children:[(0,i.jsx)("p",{className:"text-dark_grey text_size_6",children:"Subject"}),(0,i.jsx)("p",{className:"text-dark_grey text-[16px] pl-5",children:a.subject})]}),(0,i.jsxs)("div",{className:"grid mt-3",children:[(0,i.jsx)("p",{className:"text-dark_grey text_size_6",children:"Description"}),(0,i.jsx)("p",{className:"text-dark_grey text-[16px] mt-2",children:a.message})]})]})})},tt=(0,ge.D)();var at=a(3932),nt=a(64);const rt=()=>{const{empPIData:e,EmailNotifi:t,IDData:a,DNData:n,LMIData:l,workInfoData:o,PPValidsData:d}=(0,r.useContext)(s.Y),[c,p]=(0,r.useState)(null),[m,u]=(0,r.useState)([]),[h,g]=(0,r.useState)([]),[f,y]=(0,r.useState)(!1),[b,N]=(0,r.useState)(""),[j,D]=(0,r.useState)(""),[w,A]=(0,r.useState)(null),[S,E]=(0,r.useState)(null),I=(0,ge.D)(),{emailNotifications:C}=(()=>{const[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(!0),[s,i]=(0,r.useState)(null);return(0,r.useEffect)((()=>{(async()=>{n(!0);try{var e,a;const n=await tt.graphql({query:fe.dt,variables:{limit:2e4}}),r=(null===n||void 0===n||null===(e=n.data)||void 0===e||null===(a=e.listEmailNotifis)||void 0===a?void 0:a.items)||[];t(r)}catch(r){i(r),console.error("Error fetching email notifications:",r)}finally{n(!1)}})()}),[]),{emailNotifications:e,loading:a,error:s}})(),k=()=>{y(!f)};(0,r.useEffect)((()=>{const e=localStorage.getItem("userID");N(e);const t=localStorage.getItem("userType");D(t)}),[]),(0,r.useEffect)((()=>{if(b&&Array.isArray(e)){const a=e.find((e=>e.empID===b));if(a){if(p(a.officialEmail),Array.isArray(t)){const e=t.filter((e=>e.receipentEmail===a.officialEmail)).map((e=>{var t;const a=(0,v.GP)(new Date(e.createdAt),"dd MMM yyyy , hh:mm a");return{id:e.id,empID:e.empID,subject:e.leaveType||"Notification",receipentEmail:e.receipentEmail,senderEmail:e.senderEmail,reason:null===(t=e.leaveStatus)||void 0===t?void 0:t.reason,message:e.message,date:a,status:e.status||"New",read:"Readed"===e.status}}));u(e)}}else u([])}if("HR"===j){if(Array.isArray(a)){const e=new Date,t=e.getFullYear()+1,n=e.getMonth(),r=a.filter((e=>{const a=Array.isArray(e.ppExpiry)?new Date(e.ppExpiry[e.ppExpiry.length-1]):new Date(e.ppExpiry);return a.getFullYear()===t&&a.getMonth()===n}));if(r.length>0){const e=r.map((e=>{const t=(0,v.GP)(new Date(e.createdAt),"dd MMM yyyy , hh:mm a"),a=Array.isArray(e.ppExpiry)?e.ppExpiry[e.ppExpiry.length-1]:e.ppExpiry;return{id:e.id,empID:e.empID,subject:"Passport Expiry",message:"Passport for EmpID: ".concat(e.empID," is expiring soon: ").concat((0,v.GP)(new Date(a),"dd MMM yyyy"),". Please take action."),date:t,dateExp:(0,v.GP)(new Date(a),"dd MMM yyyy")}}));u((t=>[...t,...e]))}else console.log("No passport expiry notifications found for HR in the current month.")}if(Array.isArray(n)){const e=new Date,t=e.getMonth(),a=e.getFullYear(),r=new Date(a,t+3),s=r.getMonth(),i=r.getFullYear(),l=n.filter((e=>(Array.isArray(e.nlmsEmpValid)?e.nlmsEmpValid:[e.nlmsEmpValid]).some((e=>{const t=new Date(e);return!isNaN(t)&&t.getFullYear()===i&&t.getMonth()===s}))));if(l.length>0){const e=l.map((e=>{const t=(0,v.GP)(new Date(e.createdAt),"dd MMM yyyy , hh:mm a"),a=Array.isArray(e.nlmsEmpValid)?e.nlmsEmpValid[e.nlmsEmpValid.length-1]:e.nlmsEmpValid;return{id:e.id,empID:e.empID,subject:"LD Expiry",message:"Relevant data for EmpID: ".concat(e.empID," with expiry on ").concat((0,v.GP)(new Date(a),"dd MMM yyyy"),"."),date:t,dateExp:(0,v.GP)(new Date(a),"dd MMM yyyy")}}));u((t=>[...t,...e]))}else console.log("No data found for the target month.")}if(Array.isArray(o)){const e=new Date,t=e.getMonth(),a=e.getFullYear(),n=new Date(a,t+1),r=n.getMonth(),s=n.getFullYear(),i=o.filter((e=>(Array.isArray(e.probationEnd)?e.probationEnd:[e.probationEnd]).some((e=>{const t=new Date(e);return!isNaN(t)&&t.getFullYear()===s&&t.getMonth()===r}))));if(i.length>0){const e=i.map((e=>{const t=(0,v.GP)(new Date(e.createdAt),"dd MMM yyyy , hh:mm a"),a=(Array.isArray(e.probationEnd)?e.probationEnd:[e.probationEnd]).map((e=>new Date(e))).filter((e=>!isNaN(e)&&e.getFullYear()===s&&e.getMonth()===r)).pop();return{id:e.id,empID:e.empID,subject:"Probation Expiry",message:"Relevant data for EmpID: ".concat(e.empID," with expiry on ").concat((0,v.GP)(a,"dd MMM yyyy"),"."),date:t,dateExp:(0,v.GP)(a,"dd MMM yyyy")}}));u((t=>[...t,...e]))}else console.log("No data found for the target month.")}if(Array.isArray(o)){const e=new Date,t=new Date(e);t.setMonth(t.getMonth()+2);const a=t.getMonth(),n=t.getFullYear(),r=o.filter((e=>{if(!e.contractEnd||!Array.isArray(e.contractEnd))return!1;const t=e.contractEnd[e.contractEnd.length-1],r=new Date(t);return!isNaN(r)&&r.getFullYear()===n&&r.getMonth()===a}));if(r.length>0){const e=r.map((e=>{const t=(0,v.GP)(new Date(e.createdAt),"dd MMM yyyy , hh:mm a"),a=e.contractEnd[e.contractEnd.length-1];return{id:e.id,empID:e.empID,subject:"Contract Expiry",message:"Relevant data for EmpID: ".concat(e.empID," with expiry on ").concat((0,v.GP)(new Date(a),"dd MMM yyyy"),"."),date:t,dateExp:(0,v.GP)(new Date(a),"dd MMM yyyy")}}));u((t=>[...t,...e]))}else console.log("No data found for the target month.")}else console.error("workInfoData is not an array.");if(Array.isArray(d)){const e=new Date,t=new Date(e.getFullYear(),e.getMonth()+1),a=t.getMonth(),n=t.getFullYear(),r=d.filter((e=>{if(!e.empPassExp)return!1;const t=Array.isArray(e.empPassExp)?e.empPassExp:[e.empPassExp],r=new Date(t[t.length-1]);return!isNaN(r)&&r.getFullYear()===n&&r.getMonth()===a}));if(r.length>0){const e=r.map((e=>{const t=(0,v.GP)(new Date(e.createdAt),"dd MMM yyyy , hh:mm a"),a=Array.isArray(e.empPassExp)?e.empPassExp[e.empPassExp.length-1]:e.empPassExp;return{id:e.id,empID:e.empID,date:t,subject:"Pass Expiry",message:"Relevant data for EmpID: ".concat(e.empID," with expiry on ").concat((0,v.GP)(new Date(a),"dd MMM yyyy"),"."),dateExp:(0,v.GP)(new Date(a),"dd MMM yyyy")}}));u((t=>[...t,...e]))}else console.log("No data found for the target month.")}else console.error("PPValidsData is not an array.");if(Array.isArray(l)){const e=new Date,t=new Date(e.getFullYear(),e.getMonth()+3),a=t.getMonth(),n=t.getFullYear(),r=l.filter((e=>{if(!e.bruneiME)return console.warn("Missing bruneiME for item:",e),!1;const t=(Array.isArray(e.bruneiME)?e.bruneiME:[e.bruneiME]).map((e=>{const t=(0,at.qg)(e,"dd/MM/yyyy",new Date);return(0,nt.f)(t)?t:(console.warn("Invalid date format detected in bruneiME:",e),null)})).filter(Boolean);if(0===t.length)return!1;const r=t[t.length-1];return r.getFullYear()===n&&r.getMonth()===a}));if(r.length>0){const e=r.map((e=>{const t=(0,v.GP)(new Date(e.createdAt),"dd MMM yyyy , hh:mm a"),a=Array.isArray(e.bruneiME)?e.bruneiME[e.bruneiME.length-1]:e.bruneiME,n=(0,at.qg)(a,"dd/MM/yyyy",new Date);return{id:e.id,empID:e.empID,subject:"Brunei ME Expiry",message:"Relevant data for EmpID: ".concat(e.empID," with expiry on ").concat((0,v.GP)(n,"dd MMM yyyy"),"."),date:t,dateExp:(0,v.GP)(n,"dd MMM yyyy")}}));u((t=>[...t,...e]))}else console.log("No data found for the target month.")}else console.error("LMIData is not an array or is undefined.")}}),[b,e,t,j,a,n,l,o,d]),(0,r.useEffect)((()=>{(async()=>{try{var e,t;const a=await I.graphql({query:fe.dt}),n=((null===a||void 0===a||null===(e=a.data)||void 0===e||null===(t=e.listEmailNotifis)||void 0===t?void 0:t.items)||[]).filter((e=>{var t;const a=(null===(t=e.receipentEmpID)||void 0===t?void 0:t.trim().toLowerCase())||"";return a===((null===b||void 0===b?void 0:b.trim().toLowerCase())||"")&&""!==a}));console.log(n)}catch(a){console.error("Error fetching notifications:",a)}})()}),[b]);return(0,i.jsxs)("section",{className:"p-10 bg-[#F7F8F4] shadow-md rounded-lg",children:[(0,i.jsxs)("div",{className:"bg-white rounded-2xl",children:[(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("h2",{className:"text-lg font-semibold pt-5 pl-16 text-dark_grey",children:"Notification"}),(0,i.jsx)("p",{className:"border-b-2 border-[#959595] mt-4"})]}),(0,i.jsxs)("table",{className:"w-full text-sm",children:[(0,i.jsx)("thead",{className:"text-grey",children:(0,i.jsxs)("tr",{className:"uppercase bg-[#F1F1F1]",children:[(0,i.jsx)("th",{className:"p-7 text-left",children:"Date"}),(0,i.jsx)("th",{className:"p-7 text-left",children:"Subject"}),(0,i.jsx)("th",{className:"p-7 text-left",children:"Action"}),(0,i.jsx)("th",{className:"p-7 text-left",children:"Status"})]})}),(0,i.jsx)("tbody",{children:m.map(((e,t)=>(0,i.jsxs)("tr",{className:"border-b last:border-b-0",children:[(0,i.jsx)("td",{className:"p-7",children:e.date}),(0,i.jsxs)("td",{className:"p-7 text_size_6 text-dark_grey gap-5",children:[e.subject," ",(0,i.jsx)("br",{}),(0,i.jsxs)("span",{className:"text-sm text-dark_ash",children:[e.message,"..."]})]}),(0,i.jsx)("td",{className:"text-center ",children:(0,i.jsx)("span",{className:"border-b-2 py-1 cursor-pointer",onClick:()=>{k(),((e,t)=>{A(e),E(t)})(e),(async(e,t)=>{try{console.log("handleReadMore called for notification:",e),await I.graphql({query:"\n  mutation UpdateEmailNotifi(\n    $input: UpdateEmailNotifiInput!\n    $condition: ModelEmailNotifiConditionInput\n  ) {\n    updateEmailNotifi(input: $input, condition: $condition) {\n      id\n      empID\n      leaveType\n      senderEmail\n      receipentEmail\n      receipentEmpID\n      status\n      message\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:{id:e.id,status:"Readed",empID:e.empID}}}),console.log("Notification status updated in backend"),g((e=>e.map(((e,a)=>a===t?(0,x.A)((0,x.A)({},e),{},{status:"Readed",read:!0}):e)))),console.log("Notification status updated in local state")}catch(a){console.error("Failed to update notification status:",a)}})(e,t)},children:"Read More"})}),(0,i.jsx)("td",{className:"px-4 text-center",children:e.read?(0,i.jsx)("div",{className:"mt-3.5 w-[60px] label-read",children:(0,i.jsx)("span",{className:"flex justify-center items-center text-grey",children:"Readed"})}):(0,i.jsx)("div",{className:"mt-3.5 w-[60px] border label-new bg-blue-500",children:(0,i.jsx)("span",{className:"flex justify-center items-center text-white",children:"New"})})})]},t)))})]})]}),f&&(0,i.jsx)(et,{toggleFunction:k,specificNotificationDetails:w,popupData:S})]})},st=()=>(0,i.jsx)("div",{children:"Logout"});var it=a(4858),lt=a(784),ot=a(2902),dt=a(1580),ct=a(3305);const pt=async(e,t,a,n,r)=>{try{const s=await(0,dt.H)();if(console.log(n),s){const s=(await(0,ct.C)({path:"public/".concat(t,"/").concat(n,"/").concat(e.name),data:e}).result).path;console.log(s);const i=(new Date).toISOString().split("T")[0];"number"===typeof r?a((e=>{const a=(0,x.A)({},e);a[t]=a[t]||[],a[t][r]=a[t][r]||[];return a[t][r].find((e=>e.upload===s))||a[t][r].push({upload:s,date:i}),a})):"profilePhoto"===t||"inducBriefUp"===t||"uploadJobDetails"===t?a((e=>(0,x.A)((0,x.A)({},e),{},{[t]:s}))):(console.log("not index"),a((e=>(0,x.A)((0,x.A)({},e),{},{[t]:[...e[t]||[],{upload:s,date:i}]}))))}}catch(s){console.log("Error uploading ".concat(t,":"),s)}};var mt=a(3536);const ut=e=>{var t,a,n,s,l;let{label:o,name:d,type:c="text",options:p=[],register:m,value:u,errors:h,select:g,onChange:f,valueData:v,setValue:y,append:b,isArray:N,control:j,errorValue:D,arrayString:w}=e;const[A,S]=(0,r.useState)(u||(N?[]:""));(0,r.useEffect)((()=>{if(void 0!==u){const e=Array.isArray(u)?u.map((e=>e.trim().toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "))):u.trim().toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ");S(e)}}),[u,N]);const E=null===(t=(0,mt.get)(h,d))||void 0===t?void 0:t.message,I=e=>{const t=e.target.value.toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ");if(b){const a=A.includes(t)?A:[...A,t];S(a),y&&y(d,a),f&&f(e)}else S(t),y&&y(d,N?[t]:t),f&&f(e)},C=p.map((e=>(0,x.A)((0,x.A)({},e),{},{value:"string"===typeof(null===e||void 0===e?void 0:e.value)?e.value.trim().toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "):null===e||void 0===e?void 0:e.value,label:"string"===typeof(null===e||void 0===e?void 0:e.label)?e.label.trim().toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "):null===e||void 0===e?void 0:e.label})));return(0,i.jsxs)("div",{className:"form-group w-full",children:[(0,i.jsx)("label",{className:"block text_size_6",children:o}),"selectOption"===c?(0,i.jsxs)("select",(0,x.A)((0,x.A)({className:"input-field select-custom"},m(d)),{},{value:Array.isArray(A)?A[(null===A||void 0===A?void 0:A.length)-1]||"":A||"",onChange:e=>{I(e)},children:[(0,i.jsx)("option",{value:"",children:g||" "}),C.map(((e,t)=>(0,i.jsx)("option",{value:e.value,children:e.label},t)))]})):"select"===c?(0,i.jsxs)("select",(0,x.A)((0,x.A)({className:"input-field select-custom"},m(d)),{},{onChange:I,children:[(0,i.jsx)("option",{value:"".concat(v||""),children:g}),C.map(((e,t)=>(0,i.jsx)("option",{value:e.value,children:e.label},t)))]})):w&&j?(0,i.jsx)(it.xI,{name:d,control:j,render:e=>{let{field:t}=e;return(0,i.jsx)("div",{children:(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text",className:"input-field border"},t),{},{value:t.value||"",onChange:e=>{const a=e.target.value;t.onChange(N?[a]:a)}}))})}}):(0,i.jsx)("input",(0,x.A)({type:c,value:u,className:"input-field border"},m(d))),"other"===A&&(0,i.jsx)("input",(0,x.A)({type:"text",className:"input-field border mt-2",placeholder:"Please specify",value:u},m("".concat(d,"Details")))),(null===D||void 0===D||null===(a=D[d])||void 0===a||null===(n=a[0])||void 0===n?void 0:n.message)&&(0,i.jsx)("p",{className:"text-[red] text-[12px] pt-2",children:null===D||void 0===D||null===(s=D[d])||void 0===s||null===(l=s[0])||void 0===l?void 0:l.message}),E&&(0,i.jsx)("p",{className:"text-[red] text-[12px] pt-2",children:E})]})},xt=(0,r.createContext)(),ht=()=>(0,r.useContext)(xt),gt=e=>{let{children:t}=e;const[a,n]=(0,r.useState)(null),[s,l]=(0,r.useState)(null),[o,d]=(0,r.useState)(""),[c,p]=(0,r.useState)(""),[m,u]=(0,r.useState)(null),[x,h]=(0,r.useState)(!0),[g,f]=(0,r.useState)("Select Excel Sheet"),[v,y]=(0,r.useState)(null),[b,N]=(0,r.useState)(new Date),[j,D]=(0,r.useState)(new Date);return(0,i.jsx)(xt.Provider,{value:{tempID:a,setTempID:n,timeSheetFileData:s,setTimeSheetFileData:l,startDate:o,setStartDate:d,endDate:c,setEndDate:p,searchQuery:m,setSearchQuery:u,showListTimeSheet:x,setShowListTimeSheet:h,selectedLocation:v,setSelectedLocation:y,getStartDate:b,setGetStartDate:N,getEndDate:j,setGetEndDate:D,categoryFilter:g,setCategoryFilter:f},children:t})};var ft=a(6833);const vt=[{value:"Male",label:"Male"},{value:"Female",label:"Female"}],yt=[{value:"English",label:"English"},{value:"Mandarin",label:"Mandarin"},{value:"Malay",label:"Malay"},{value:"Tamil",label:"Tamil"},{value:"Other",label:"Other"}],bt=[{value:"Australian",label:"Australian"},{value:"Bangladesi",label:"Bangladesi"},{value:"Bidayuh",label:"Bidayuh"},{value:"British",label:"British"},{value:"Bisaya",label:"Bisaya"},{value:"Chinese",label:"Chinese"},{value:"Dayak",label:"Dayak"},{value:"Dusun",label:"Dusun"},{value:"Dusun Muslim",label:"Dusun Muslim"},{value:"Eurasian",label:"Eurasian"},{value:"Filipino",label:"Filipino"},{value:"Iban",label:"Iban"},{value:"Iban Chinese",label:"Iban Chinese"},{value:"Iban Dayak",label:"Iban Dayak"},{value:"Iban Muslim",label:"Iban Muslim"},{value:"Indian",label:"Indian"},{value:"Indonesia",label:"Indonesia"},{value:"Java",label:"Java"},{value:"Kadazan",label:"Kadazan"},{value:"Kayan",label:"Kayan"},{value:"Kedayan",label:"Kedayan"},{value:"Kelabit",label:"Kelabit"},{value:"Kenyah",label:"Kenyah"},{value:"Lun Bawang",label:"Lun Bawang"},{value:"Malay",label:"Malay"},{value:"Melanau",label:"Melanau"},{value:"Murut",label:"Murut"},{value:"Muslim",label:"Muslim"},{value:"Srilankan",label:"Srilankan"},{value:"Thai",label:"Thai"},{value:"Ukit",label:"Ukit"},{value:"Other",label:"Other"}],Nt=[{value:"Islam",label:"Islam"},{value:"Christian",label:"Christian"},{value:"Hinduism",label:"Hinduism"},{value:"Buddhist",label:"Buddhist"},{value:"Free Thinker",label:"Free Thinker"},{value:"Not Mentioned",label:"Not Mentioned"},{value:"Other",label:"Other"}],jt=[{value:"Local",label:"Local"},{value:"Foreigner",label:"Foreigner"}],Dt=[{value:"Single",label:"Single"},{value:"Married",label:"Married"},{value:"Widow",label:"Widow"},{value:"Divorce",label:"Divorce"}],wt=[{value:"Bruneian",label:"Bruneian"},{value:"Brunei PR",label:"Brunei PR"},{value:"Malaysian",label:"Malaysian"},{value:"Indonesian",label:"Indonesian"},{value:"Indian",label:"Indian"},{value:"Bangladeshi",label:"Bangladeshi"},{value:"Thai",label:"Thai"},{value:"Sri Lankan",label:"Sri Lankan"},{value:"Filipino",label:"Filipino"},{value:"Other",label:"Other"}],At=[{value:"Local",label:"Local"},{value:"LPA",label:"LPA"},{value:"SAWP",label:"SAWP"}],St=[{value:"Monthly",label:"Monthly"},{value:"Daily",label:"Daily"}],Et=[{value:"ONSHORE",label:"ONSHORE"},{value:"OFFSHORE",label:"OFFSHORE"}],It=[{value:"Yellow",label:"Yellow"},{value:"Red",label:"Red"},{value:"Green",label:"Green"}],Ct=[{label:"Brunei IC Loc/Non-Loc",icon:(0,i.jsx)(ft.gwN,{}),title:"bwnUpload"},{label:"Malaysia IC",icon:(0,i.jsx)(ft.gwN,{}),title:"myIcUpload"},{label:"Passport Copy",icon:(0,i.jsx)(ft.gwN,{}),title:"ppUpload"},{label:"CV & Certificates",icon:(0,i.jsx)(ft.gwN,{}),title:"cvCertifyUpload"},{label:"Application Form",icon:(0,i.jsx)(ft.gwN,{}),title:"applicationUpload"},{label:"LOI",icon:(0,i.jsx)(ft.gwN,{}),title:"loiUpload"},{label:"PAAF/CVEV Approval",icon:(0,i.jsx)(ft.gwN,{}),title:"paafCvevUpload"},{label:"Any Supporting Doc",icon:(0,i.jsx)(ft.gwN,{}),title:"supportDocUpload"}],kt=[{value:"own",label:"Own"},{value:"company",label:"Company"}],Rt=[{value:"Employee alone",label:"Employee alone"},{value:"Employee & Spouse",label:"Employee & Spouse"},{value:"Employee, Spouse & Children (max 2 pax below age 18)",label:"Employee, Spouse & Children (max 2 pax below age 18)"}],Tt=[{value:"Accounts",label:"Accounts"},{value:"BLNG",label:"BLNG"},{value:"Corporate",label:"Corporate"},{value:"CPD",label:"CPD"},{value:"E&I",label:"E&I"},{value:"SBW",label:"SBW"},{value:"Human Resource",label:"Human Resource"},{value:"LBD",label:"LBD"},{value:"Offshore",label:"Offshore"},{value:"Purchasing",label:"Purchasing"},{value:"Other",label:"Other"}],Pt=[{value:"Foreign Worker License (LPA)",label:"Foreign Worker License (LPA)"},{value:"Foreign Worker License (SAWP)",label:"Foreign Worker License (SAWP)"},{value:"Foreign Worker License Additional (LPA)",label:"Foreign Worker License Additional (LPA)"},{value:"Foreign Worker License Additional (SAWP)",label:"Foreign Worker License Additional (SAWP)"},{value:"Foreign Worker License Renewal (LPA)",label:"Foreign Worker License Renewal (LPA)"},{value:"Foreign Worker License Renewal (SAWP)",label:"Foreign Worker License Renewal (SAWP)"},{value:"Foreign Worker License Change Salary/Job Title (LPA)",label:"Foreign Worker License Change Salary/Job Title (LPA)"},{value:"Foreign Worker License Cancellation (LPA)",label:"Foreign Worker License Cancellation (LPA)"},{value:"Foreign Worker License Cancellation (SAWP)",label:"Foreign Worker License Cancellation (SAWP)"},{value:"Foreign Worker License Cancellation SAWP To LPA",label:"Foreign Worker License Cancellation SAWP To LPA"},{value:"Foreign Worker License Transfer Of Contract (LPA)",label:"Foreign Worker License Transfer Of Contract (LPA)"}],_t=[{label:"Contract",icon:(0,i.jsx)(ft.gwN,{}),title:"WIContract"},{label:"Probation",icon:(0,i.jsx)(ft.gwN,{}),title:"WIProbation"},{label:"Resignation",icon:(0,i.jsx)(ft.gwN,{}),title:"WIResignation"},{label:"Termination",icon:(0,i.jsx)(ft.gwN,{}),title:"WITermination"},{label:"Leave Entitlement",icon:(0,i.jsx)(ft.gwN,{}),title:"WILeaveEntitle"}],Ot=()=>{var e,t,a;const{empPDData:l}=(0,r.useContext)(s.Y),{tempID:o}=ht(),d=(0,n.Zp)();(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]);const{register:c,handleSubmit:p,setValue:m,watch:u,formState:{errors:f}}=(0,it.mN)({resolver:(0,lt.t)(ot.gO),defaultValues:{}}),[v,b]=(0,r.useState)({profilePhoto:null}),[N,j]=(0,r.useState)(null),[D,w]=(0,r.useState)(""),A=u("profilePhoto");(0,r.useEffect)((()=>{if(o){const e=JSON.parse(localStorage.getItem("applicantFormData"));if(console.log("Saved data:",e),e&&Object.keys(e).forEach((t=>m(t,e[t]))),l.length>0){const e=l.find((e=>e.tempID===o));e&&(console.log("Interview data found:",e),Object.keys(e).forEach((t=>{e[t]&&m(t,e[t])})),e.profilePhoto&&b((t=>(0,x.A)((0,x.A)({},t),{},{profilePhoto:e.profilePhoto}))))}v.profilePhoto&&(async e=>{const t=await(0,h.I)({path:e});w(t.url.toString())})(v.profilePhoto)}}),[l,o,m,v.profilePhoto]);return(0,i.jsx)("section",{className:"w-full",children:(0,i.jsxs)("form",{className:"",onSubmit:p((async e=>{try{console.log(e);const t=(0,x.A)((0,x.A)({},e),{},{profilePhoto:v.profilePhoto||A});localStorage.setItem("applicantFormData",JSON.stringify(t)),d("/addCandidates/personalDetails",{state:{FormData:t}}),console.log("APP DATA",t),b({profilePhoto:null})}catch(t){console.log(t)}})),children:[(0,i.jsxs)("div",{className:"flex justify-between items-center flex-wrap",children:[(0,i.jsx)("div",{className:"mt-10 mb-5 text_size_6",children:(0,i.jsx)(ut,{label:"Applying for the position of",register:c,name:"position",type:"text",errors:f})}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex justify-center items-center gap-5",children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"radio",id:"offshore"},c("empType")),{},{value:"Offshore"})),(0,i.jsx)("label",{htmlFor:"offshore",children:"Offshore"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"radio",id:"onshore"},c("empType")),{},{value:"Onshore"})),(0,i.jsx)("label",{htmlFor:"onshore",children:"Onshore"})]}),f.empType&&(0,i.jsx)("p",{className:"text-[red] text-[13px] text-center mt-3",children:f.empType.message})]}),(0,i.jsxs)("div",{className:"py-2 center flex-col max-w-[160px]",children:[(0,i.jsx)("input",{type:"file",id:"fileInput",name:"profilePhoto",accept:".jpg,.jpeg,.png",onChange:async e=>{const t=e.target.files[0];t&&(j(t),m("profilePhoto",t),await pt(t,"profilePhoto",b,"Employee"))},className:"hidden"}),(0,i.jsxs)("div",{className:"h-[120px] max-w-[120px] relative rounded-md bg-lite_skyBlue",children:[(0,i.jsx)("img",{src:D||(N?URL.createObjectURL(N):v.profilePhoto||g),id:"previewImg",alt:"profile",className:"object-cover w-full h-full",onError:e=>e.target.src=g}),(N||v.profilePhoto||D)&&(0,i.jsx)("div",{className:"absolute top-24 -right-3 bg-lite_grey p-[2px] rounded-full cursor-pointer",onClick:()=>document.getElementById("fileInput").click(),children:(0,i.jsx)(y.iog,{className:"w-6 h-6 p-1"})})]}),!N&&!v.profilePhoto&&!D&&(0,i.jsx)("div",{className:"mt-1 rounded-lg text-center",children:(0,i.jsx)("button",{type:"button",className:"text_size_6",onClick:()=>document.getElementById("fileInput").click(),children:"Choose Image"})}),f.profilePhoto&&(0,i.jsx)("p",{className:"text-[red] text-[13px] text-center",children:f.profilePhoto.message})]})]}),(0,i.jsx)("div",{className:"grid grid-cols-2 gap-x-12 gap-y-5 mb-4 text_size_6",children:[{label:"Contract Type",name:"contractType",type:"select",options:At},{label:"CV Received From",name:"agent",type:"text"},{label:"Name",name:"name",type:"text"},{label:"Chinese characters (if applicable)",name:"chinese",type:"text"},{label:"Gender",name:"gender",type:"select",options:vt},{label:"Date of Birth",name:"dob",type:"date"},{label:"Age",name:"age",type:"number",min:20,max:99},{label:"Email ID",name:"email",type:"email"},{label:"Marital Status",name:"marital",type:"select",options:Dt},{label:"Country of Birth",name:"cob",type:"text"},{label:"Nationality",name:"nationality",type:"select",options:wt},{label:"Other Nationality",name:"otherNation",type:"text",disabled:"other"!==(null===(e=u("nationality"))||void 0===e?void 0:e.toLowerCase())},{label:"Race",name:"race",type:"select",options:bt},{label:"Other Race",name:"otherRace",type:"text",disabled:"other"!==(null===(t=u("race"))||void 0===t?void 0:t.toLowerCase())},{label:"Religion",name:"religion",type:"select",options:Nt},{label:"Other Religion",name:"otherReligion",type:"text",disabled:"other"!==(null===(a=u("religion"))||void 0===a?void 0:a.toLowerCase())}].map(((e,t)=>{var a;return(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block",children:e.label}),"select"===e.type?(0,i.jsxs)("select",(0,x.A)((0,x.A)({},c(e.name)),{},{className:"mt-2 p-2.5 text_size_7 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded w-full",children:[(0,i.jsx)("option",{value:""}),(e.options||[]).map(((e,t)=>(0,i.jsx)("option",{value:e.value,children:e.label},t)))]})):(0,i.jsx)("input",(0,x.A)((0,x.A)({},c(e.name)),{},{type:e.type,disabled:e.disabled,min:e.min,max:e.max,className:"mt-2 p-2 text_size_7 bg-lite_skyBlue border border-[#dedddd] text-dark_grey   outline-none rounded w-full"})),f[e.name]&&(0,i.jsx)("p",{className:"text-[red] text-[13px]",children:null===(a=f[e.name])||void 0===a?void 0:a.message})]},t)}))}),(0,i.jsx)("div",{className:"flex justify-center my-10 gap-10",children:(0,i.jsx)("button",{type:"submit",className:"primary_btn",children:"Next"})})]})})};var Lt=a(184),Ft=a(5051);const Mt=()=>{var e,t;const{tempID:a}=ht(),{empPDData:l}=(0,r.useContext)(s.Y),o=null===(e=(0,n.zy)().state)||void 0===e?void 0:e.FormData;console.log(a),console.log("Received form data:",a),(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]);const{register:d,handleSubmit:c,control:p,setValue:m,watch:u,formState:{errors:h}}=(0,it.mN)({resolver:(0,lt.t)((0,ot.UQ)(null===o||void 0===o?void 0:o.nationality)),defaultValues:{familyDetails:{name:"",relationship:"",occupation:""},eduDetails:{university:"",fromDate:"",toDate:"",degree:""},workExperience:{company:"",position:"",from:"",to:""}}}),{fields:g,append:f,remove:v}=(0,it.jz)({control:p,name:"familyDetails"}),{fields:y,append:b,remove:N}=(0,it.jz)({control:p,name:"eduDetails"}),{fields:j,append:D,remove:w}=(0,it.jz)({control:p,name:"workExperience"}),A=(0,n.Zp)();return(0,r.useEffect)((()=>{if(a){const e=JSON.parse(localStorage.getItem("personalFormData"));if(console.log("Saved data:",e),e&&Object.keys(e).forEach((t=>m(t,e[t]))),l.length>0){const t=l.find((e=>e.tempID===a));t&&(console.log("Interview data found:",t),Object.keys(e).forEach((t=>{(Array.isArray(e[t])||e[t])&&m(t,e[t])})))}}}),[a,m]),(0,i.jsxs)("form",{onSubmit:c((e=>{const t=(0,x.A)((0,x.A)({},e),o);localStorage.setItem("personalFormData",JSON.stringify(t)),console.log(t),A("/addCandidates/educationDetails",{state:{FormData:t}}),console.log("Personal Data",t)})),className:" mx-auto py-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4 text_size_6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block mb-1",children:"Contact Number"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text"},d("contactNo")),{},{className:"mt-2 p-2.5 text_size_9 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded w-full"})),h.contactNo&&(0,i.jsx)("p",{className:"text-[red] text-[12px]",children:h.contactNo.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block mb-1",children:"Alternate Number"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text"},d("alternateNo")),{},{className:"mt-2 p-2.5 text_size_9 bg-lite_skyBlue border border-[#dedddd]  text-dark_grey outline-none rounded w-full"})),h.alternateNo&&(0,i.jsx)("p",{className:"text-[red] text-[12px]",children:h.alternateNo.message})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4 text_size_6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block mb-1",children:"Present Address"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text"},d("presentAddress")),{},{className:"mt-2 p-2.5 text_size_9 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded w-full"})),h.presentAddress&&(0,i.jsx)("p",{className:"text-[red] text-[12px]",children:h.presentAddress.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block mb-1",children:"Permanent Address"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text"},d("permanentAddress")),{},{className:"mt-2 p-2.5 text_size_9 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded w-full"})),(0,i.jsx)("p",{className:"text-[red] text-[12px]",children:null===(t=h.permanentAddress)||void 0===t?void 0:t.message})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4 text_size_6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block mb-1",children:"Driving License Class"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text"},d("driveLic")),{},{className:"mt-2 p-2.5 text_size_9 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded w-full"}))]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block mb-1",children:"Language Proficiency"}),(0,i.jsxs)("select",(0,x.A)((0,x.A)({},d("lang")),{},{className:"mt-2 p-2.5 text_size_9 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded w-full",children:[(0,i.jsx)("option",{value:""}),yt.map(((e,t)=>(0,i.jsx)("option",{value:e.value,children:e.label},t)))]})),h.lang&&(0,i.jsx)("p",{className:"text-[red] text-[12px]",children:h.lang.message})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4 text_size_6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block mb-1",children:"Brunei I/C No"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text"},d("bwnIcNo")),{},{className:"mt-2 p-2.5 text_size_9 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded w-full"})),h.bwnIcNo&&(0,i.jsx)("p",{className:"text-[red] text-[12px]",children:h.bwnIcNo.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block mb-1",children:"Brunei I/C Colour"}),(0,i.jsxs)("select",(0,x.A)((0,x.A)({},d("bwnIcColour")),{},{className:"mt-2 p-2.5 text_size_9 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded w-full",children:[(0,i.jsx)("option",{value:""}),It.map(((e,t)=>(0,i.jsx)("option",{value:e.value,children:e.label},t)))]})),h.bwnIcColour&&(0,i.jsx)("p",{className:"text-[red] text-[12px]",children:h.bwnIcColour.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block mb-1",children:"Brunei I/C Expiry"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"date"},d("bwnIcExpiry")),{},{className:"mt-2 p-2.5 text_size_9 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded w-full"})),h.bwnIcExpiry&&(0,i.jsx)("p",{className:"text-[red] text-[12px]",children:h.bwnIcExpiry.message})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-4 text_size_6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block mb-1",children:"Passport Number"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text"},d("ppNo")),{},{className:"mt-2 p-2.5 text_size_9 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded w-full"})),h.ppNo&&(0,i.jsx)("p",{className:"text-[red] text-[12px] ",children:h.ppNo.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block mb-1",children:"Passport issued date"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"date"},d("ppIssued")),{},{className:"mt-2 p-2.5 text_size_9 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded w-full"})),h.ppIssued&&(0,i.jsx)("p",{className:"text-[red] text-[12px]",children:h.ppIssued.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block mb-1",children:"Passport Expiry"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"date"},d("ppExpiry")),{},{className:"mt-2 text_size_9 p-2.5 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded w-full"})),h.ppExpiry&&(0,i.jsx)("p",{className:"text-[red] text-[12px]",children:h.ppExpiry.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block mb-1",children:"Passport issued destination"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text"},d("ppDestinate")),{},{className:"mt-2 p-2.5 text_size_9 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded w-full"})),h.ppDestinate&&(0,i.jsx)("p",{className:"text-[red] text-[12px]",children:h.ppDestinate.message})]})]}),(0,i.jsxs)("div",{className:"mb-4 relative text_size_6",children:[(0,i.jsx)("label",{className:"block mb-1",children:"Particulars of Immediate Family (Spouse, Children, Parents, Brothers & Sisters)"}),g.map(((e,t)=>(0,i.jsxs)("div",{className:"grid grid-cols-5 gap-4 mb-2",children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text"},d("familyDetails.".concat(t,".name"))),{},{placeholder:"Name",className:"mt-2 p-2.5 text_size_9 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded"})),(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text"},d("familyDetails.".concat(t,".relationship"))),{},{placeholder:"Relationship",className:"mt-2 p-2.5 text_size_9 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded"})),(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text"},d("familyDetails.".concat(t,".age"))),{},{placeholder:"Age",className:"mt-2 p-2.5 text_size_9 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded"})),(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text"},d("familyDetails.".concat(t,".occupation"))),{},{placeholder:"Occupation",className:"mt-2 p-2.5 text_size_9 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded"})),(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text"},d("familyDetails.".concat(t,".placeOfOccupation"))),{},{placeholder:"Place of Occupation",className:"mt-2 p-2.5 text_size_9 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded"})),e.isNew&&(0,i.jsxs)("button",{type:"button",onClick:()=>v(t),className:"absolute top-15 -right-7 text-medium_grey text-[18px]",children:[(0,i.jsx)(Lt.vli,{})," "]})]},e.id))),(0,i.jsx)("button",{type:"button",onClick:()=>{f({isNew:!0})},className:"absolute top-11 -right-7 text-medium_grey text-[18px]",children:(0,i.jsx)(Ft.Oh0,{})})]}),(0,i.jsxs)("div",{className:"mb-4 relative text_size_6",children:[(0,i.jsx)("label",{className:"block mb-1",children:"Education Details"}),y.map(((e,t)=>(0,i.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-2",children:[(0,i.jsx)(it.xI,{name:"eduDetails.".concat(t,".university"),control:p,render:e=>{var a,n;let{field:r}=e;return(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("textarea",(0,x.A)((0,x.A)({},r),{},{placeholder:"School / University / Professional Institute",className:"resize-none text_size_9 mt-2 p-2.5 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded"})),(null===(a=h.eduDetails)||void 0===a||null===(n=a[t])||void 0===n?void 0:n.university)&&(0,i.jsx)("p",{className:"text-[red] text-xs mt-1",children:h.eduDetails[t].university.message})]})}}),(0,i.jsx)(it.xI,{name:"eduDetails.".concat(t,".fromDate"),control:p,render:e=>{var a,n;let{field:r}=e;return(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("textarea",(0,x.A)((0,x.A)({},r),{},{type:"date",placeholder:"From Date",className:"resize-none mt-2 p-2.5 text_size_9  bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded"})),(null===(a=h.eduDetails)||void 0===a||null===(n=a[t])||void 0===n?void 0:n.fromDate)&&(0,i.jsx)("p",{className:"text-[red] text-xs mt-1",children:h.eduDetails[t].fromDate.message})]})}}),(0,i.jsx)(it.xI,{name:"eduDetails.".concat(t,".toDate"),control:p,render:e=>{var a,n;let{field:r}=e;return(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("textarea",(0,x.A)((0,x.A)({},r),{},{type:"date",placeholder:"To Date",className:"resize-none mt-2 p-2.5 text_size_9  bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded"})),(null===(a=h.eduDetails)||void 0===a||null===(n=a[t])||void 0===n?void 0:n.toDate)&&(0,i.jsx)("p",{className:"text-[red] text-xs mt-1",children:h.eduDetails[t].toDate.message})]})}}),(0,i.jsx)(it.xI,{name:"eduDetails.".concat(t,".degree"),control:p,render:e=>{var a,n;let{field:r}=e;return(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("textarea",(0,x.A)((0,x.A)({},r),{},{placeholder:"Highest Standard / Passed / Certificate / Degree / Professional Qualification",className:"resize-none mt-2 p-2.5  bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded text_size_9"})),(null===(a=h.eduDetails)||void 0===a||null===(n=a[t])||void 0===n?void 0:n.degree)&&(0,i.jsx)("p",{className:"text-[red] text-xs mt-1",children:h.eduDetails[t].degree.message})]})}}),e.isNew&&(0,i.jsxs)("button",{type:"button",onClick:()=>N(t),className:"absolute top-15 -right-7 text-medium_grey text-[18px]",children:[(0,i.jsx)(Lt.vli,{})," "]})]},e.id))),(0,i.jsx)("button",{type:"button",onClick:()=>{b({isNew:!0})},className:"absolute top-12 -right-7 text-medium_grey text-[18px]",children:(0,i.jsx)(Ft.Oh0,{})})]}),(0,i.jsxs)("div",{className:"mb-4 relative text_size_6",children:[(0,i.jsx)("label",{className:"block mb-1",children:"Previous Employment Including Temporary Work"}),j.map(((e,t)=>(0,i.jsxs)("div",{className:"grid grid-cols-6 gap-4 mb-2",children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text"},d("workExperience.".concat(t,".name"))),{},{placeholder:"Name and Address",className:"mt-2 p-2.5 text_size_9 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded"})),(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text"},d("workExperience.".concat(t,".position"))),{},{placeholder:"Position Held",className:"mt-2 p-2.5 text_size_9 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded"})),(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"date"},d("workExperience.".concat(t,".from"))),{},{placeholder:"From",className:"mt-2 p-2.5 text_size_9 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded"})),(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"date"},d("workExperience.".concat(t,".to"))),{},{placeholder:"To",className:"mt-2 p-2.5 text_size_9 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded"})),(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text"},d("workExperience.".concat(t,".salary"))),{},{placeholder:"Salary",className:"mt-2 p-2.5 text_size_9 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded"})),(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text"},d("workExperience.".concat(t,".reasonForLeaving"))),{},{placeholder:"Reason for Leaving",className:"mt-2 p-2.5 text_size_9 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded"})),e.isNew&&(0,i.jsxs)("button",{type:"button",onClick:()=>w(t),className:"absolute top-15 -right-7 text-medium_grey text-[18px]",children:[(0,i.jsx)(Lt.vli,{})," "]})]},e.id))),(0,i.jsx)("button",{type:"button",onClick:()=>{D({isNew:!0})},className:"absolute top-11 -right-7 text-medium_grey text-[18px]",children:(0,i.jsx)(Ft.Oh0,{})})]}),(0,i.jsx)("div",{className:"flex justify-center mt-12 gap-10",children:(0,i.jsx)("button",{type:"submit",className:"primary_btn",children:"Next"})})]})},qt=()=>{var e;const{tempID:t}=ht(),{educDetailsData:a}=(0,r.useContext)(s.Y),l=null===(e=(0,n.zy)().state)||void 0===e?void 0:e.FormData;(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]);const{handleSubmit:o,control:d,setValue:c,formState:{errors:p},watch:m}=(0,it.mN)({resolver:(0,lt.t)(ot.uL),defaultValues:{referees:[{name:"",address:"",telephone:"",profession:""}],relatives:[{name:"",positionHeld:"",relationship:""}],emgDetails:[{name:"",relationship:"",address:"",phoneNumber:"",bloodGroup:""}],disease:"no",liquor:"no",crime:"no",diseaseDesc:"",liquorDesc:"",crimeDesc:""}}),u=(0,n.Zp)(),{fields:h,append:g,remove:f}=(0,it.jz)({control:d,name:"emgDetails"}),{fields:v,append:y,remove:b}=(0,it.jz)({control:d,name:"referees"}),{fields:N,append:j,remove:D}=(0,it.jz)({control:d,name:"relatives"});console.log(t);return(0,r.useEffect)((()=>{if(t){const e=JSON.parse(localStorage.getItem("educationFormData"));if(console.log("Saved data:",e),e&&"object"===typeof e&&Object.keys(e).forEach((t=>{console.log("Setting value for field:",t,"Value:",e[t]),c(t,e[t])})),Array.isArray(a)&&a.length>0){const n=a.find((e=>e.tempID===t));n&&(console.log("Interview data found:",n),Object.keys(e||{}).forEach((t=>{console.log("Setting value from interview data:",t,"Value:",e[t]),(Array.isArray(e[t])||e[t])&&c(t,e[t])})))}}}),[t,c]),console.log(a),(0,i.jsxs)("form",{onSubmit:o((e=>{localStorage.setItem("educationFormData",JSON.stringify(e));const t=(0,x.A)((0,x.A)({},e),l);u("/addCandidates/otherDetails",{state:{FormData:t}})})),className:"",children:[(0,i.jsxs)("div",{className:"relative mt-10",children:[(0,i.jsxs)("label",{className:"text_size_6 mb-3",children:["Characters Referees"," ",(0,i.jsx)("span",{className:"text-[#838383]",children:"(Names of relatives should not be given)"})]}),v.map(((e,t)=>(0,i.jsxs)("div",{className:"flex gap-2 mb-7",children:[(0,i.jsx)(it.xI,{name:"referees.".concat(t,".name"),control:d,render:e=>{let{field:t}=e;return(0,i.jsx)("input",(0,x.A)((0,x.A)({},t),{},{placeholder:"Name",className:"mt-2  text_size_7 p-2.5 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded w-full"}))}}),(0,i.jsx)(it.xI,{name:"referees.".concat(t,".address"),control:d,render:e=>{let{field:t}=e;return(0,i.jsx)("input",(0,x.A)((0,x.A)({},t),{},{placeholder:"Address",className:"mt-2  text_size_7 p-2.5 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded w-full"}))}}),(0,i.jsx)(it.xI,{name:"referees.".concat(t,".telephone"),control:d,render:e=>{let{field:t}=e;return(0,i.jsx)("input",(0,x.A)((0,x.A)({},t),{},{placeholder:"Telephone",className:"mt-2 text_size_7 w-[150px] p-2.5 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded"}))}}),(0,i.jsx)(it.xI,{name:"referees.".concat(t,".profession"),control:d,render:e=>{let{field:t}=e;return(0,i.jsx)("input",(0,x.A)((0,x.A)({},t),{},{placeholder:"Profession",className:"mt-2 text_size_7 p-2.5 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded w-full"}))}}),e.isNew&&(0,i.jsx)("button",{type:"button",onClick:()=>b(t),className:"absolute top-15 -right-7 text-medium_grey text-[18px]",children:(0,i.jsx)(Lt.vli,{})})]},e.id))),(0,i.jsx)("button",{type:"button",onClick:()=>{y({name:"",address:"",telephone:"",profession:"",isNew:!0})},className:"absolute top-11 -right-7 text-medium_grey text-[18px]",children:(0,i.jsx)(Ft.Oh0,{})})]}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("label",{className:"text_size_6 mb-3",children:"Relatives Employed by the company"}),N.map(((e,t)=>(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-7",children:[(0,i.jsx)(it.xI,{name:"relatives.".concat(t,".name"),control:d,render:e=>{let{field:t}=e;return(0,i.jsx)("input",(0,x.A)((0,x.A)({},t),{},{placeholder:"Name",className:"mt-2  text_size_7 p-2.5 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded w-full"}))}}),(0,i.jsx)(it.xI,{name:"relatives.".concat(t,".positionHeld"),control:d,render:e=>{let{field:t}=e;return(0,i.jsx)("input",(0,x.A)((0,x.A)({},t),{},{placeholder:"Position Held",className:"mt-2  text_size_7 p-2.5 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded w-full"}))}}),(0,i.jsx)(it.xI,{name:"relatives.".concat(t,".relationship"),control:d,render:e=>{let{field:t}=e;return(0,i.jsx)("input",(0,x.A)((0,x.A)({},t),{},{placeholder:"Relationship",className:"mt-2  text_size_7 p-2.5 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded w-full"}))}}),e.isNew&&(0,i.jsxs)("button",{type:"button",onClick:()=>D(t),className:"absolute top-15 -right-7 text-medium_grey text-[18px]",children:[(0,i.jsx)(Lt.vli,{})," "]})]},e.id))),(0,i.jsx)("button",{type:"button",onClick:()=>{j({name:"",positionHeld:"",relationship:"",isNew:!0})},className:"absolute top-11 -right-7 text-medium_grey text-[18px]",children:(0,i.jsx)(Ft.Oh0,{})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text_size_6 mb-3",children:"Brief Description of Present Duties"}),(0,i.jsx)(it.xI,{name:"description",control:d,render:e=>{let{field:t}=e;return(0,i.jsx)("textarea",(0,x.A)((0,x.A)({},t),{},{className:"resize-none mt-2 text_size_7 p-2.5 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded w-full",rows:"3"}))}})]}),(0,i.jsxs)("div",{className:"mb-4 relative text_size_6",children:[(0,i.jsx)("label",{className:"block mb-1",children:"In Case of Accident / Emergency"}),h.map(((e,t)=>(0,i.jsxs)("div",{className:"grid grid-cols-5 gap-3 mb-2",children:[(0,i.jsx)(it.xI,{name:"emgDetails.".concat(t,".name"),control:d,render:e=>{var a,n;let{field:r}=e;return(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({},r),{},{placeholder:"Name of Person notify",className:"resize-none text_size_9 mt-2   p-2.5 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded"})),(null===(a=p.emgDetails)||void 0===a||null===(n=a[t])||void 0===n?void 0:n.name)&&(0,i.jsx)("p",{className:"text-[red] text-xs mt-1",children:p.emgDetails[t].name.message})]})}}),(0,i.jsx)(it.xI,{name:"emgDetails.".concat(t,".relationship"),control:d,render:e=>{var a,n;let{field:r}=e;return(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({},r),{},{placeholder:"Relationship",className:"mt-2 p-2.5 text_size_9  bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded"})),(null===(a=p.emgDetails)||void 0===a||null===(n=a[t])||void 0===n?void 0:n.relationship)&&(0,i.jsx)("p",{className:"text-[red] text-xs mt-1",children:p.emgDetails[t].relationship.message})]})}}),(0,i.jsx)(it.xI,{name:"emgDetails.".concat(t,".address"),control:d,render:e=>{var a,n;let{field:r}=e;return(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({},r),{},{placeholder:"Address",className:"mt-2 p-2.5 text_size_9 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded"})),(null===(a=p.emgDetails)||void 0===a||null===(n=a[t])||void 0===n?void 0:n.address)&&(0,i.jsx)("p",{className:"text-[red] text-xs mt-1",children:p.emgDetails[t].address.message})]})}}),(0,i.jsx)(it.xI,{name:"emgDetails.".concat(t,".phoneNumber"),control:d,render:e=>{var a,n;let{field:r}=e;return(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({},r),{},{placeholder:"Contant Number",className:" mt-2 p-2.5 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded text_size_9"})),(null===(a=p.emgDetails)||void 0===a||null===(n=a[t])||void 0===n?void 0:n.phoneNumber)&&(0,i.jsx)("p",{className:"text-[red] text-xs mt-1",children:p.emgDetails[t].phoneNumber.message})]})}}),(0,i.jsx)(it.xI,{name:"emgDetails.".concat(t,".bloodGroup"),control:d,render:e=>{var a,n;let{field:r}=e;return(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({},r),{},{placeholder:"Blood Group",className:" mt-2 p-2.5 text_size_9 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded"})),(null===(a=p.emgDetails)||void 0===a||null===(n=a[t])||void 0===n?void 0:n.bloodGroup)&&(0,i.jsx)("p",{className:"text-[red] text-xs mt-1",children:p.emgDetails[t].bloodGroup.message})]})}}),e.isNew&&(0,i.jsxs)("button",{type:"button",onClick:()=>f(t),className:"absolute top-15 -right-7 text-medium_grey text-[18px]",children:[(0,i.jsx)(Lt.vli,{})," "]})]},e.id))),(0,i.jsx)("button",{type:"button",onClick:()=>{g({name:"",relationship:"",address:"",phoneNumber:"",bloodGroup:"",isNew:!0})},className:"absolute top-11 -right-7 text-medium_grey text-[18px]",children:(0,i.jsx)(Ft.Oh0,{})})]}),[{field:"disease",label:"Have you ever suffered from any disease or received treatment?"},{field:"liquor",label:"Were you ever an alcoholic or substance abuser?"},{field:"crime",label:"Have you ever been convicted of a crime?"}].map(((e,t)=>{var a;return(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-4 text_size_6 mt-5",children:[(0,i.jsx)("div",{children:(0,i.jsx)("label",{htmlFor:e.field,className:"text_size_6 mb-2",children:e.label})}),(0,i.jsxs)("div",{className:"flex justify-between items-center mb-5",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("div",{className:"flex items-center gap-2",children:(0,i.jsx)(it.xI,{name:e.field,control:d,defaultValue:"no",render:t=>{let{field:a}=t;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"radio",id:"".concat(e.field,"_yes")},a),{},{value:"yes",name:"".concat(e.field),className:"border p-2.5 rounded"})),(0,i.jsx)("label",{htmlFor:"".concat(e.field,"_yes"),children:"Yes"})]})}})}),(0,i.jsx)("div",{className:"flex items-center gap-2",children:(0,i.jsx)(it.xI,{name:e.field,control:d,defaultValue:"no",render:t=>{let{field:a}=t;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"radio",id:"".concat(e.field,"_no")},a),{},{value:"no",name:"".concat(e.field),defaultChecked:!0,className:"border p-2.5 rounded"})),(0,i.jsx)("label",{htmlFor:"".concat(e.field,"_no"),children:"No"})]})}})})]}),(0,i.jsxs)("div",{className:"items-center",children:[(0,i.jsx)("label",{htmlFor:"".concat(e.field,"Desc"),className:"text_size_7 mr-5 text-[#C7C7C7]",children:"If yes, please provide details"}),(0,i.jsx)(it.xI,{name:"".concat(e.field,"Desc"),control:d,defaultValue:"",render:t=>{let{field:a}=t;return(0,i.jsx)("input",(0,x.A)((0,x.A)({id:"".concat(e.field,"Desc")},a),{},{className:"w-[450px] mt-2 text_size_7 p-2.5 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded ".concat(p["".concat(e.field,"Desc")]?"border-red-500":""),disabled:"yes"!==m(e.field)}))}}),p["".concat(e.field,"Desc")]&&(0,i.jsx)("p",{className:"text-[red] text-xs mt-4",children:null===(a=p["".concat(e.field,"Desc")])||void 0===a?void 0:a.message})]})]})]},t)})),(0,i.jsx)("div",{className:"flex justify-center my-7 gap-10",children:(0,i.jsx)("button",{type:"submit",className:"primary_btn",children:"Next"})})]})},Ut=(0,ge.D)(),Bt=()=>{var e,t,a,l,o;const{submitODFunc:d}=(()=>{const e=(0,ge.D)();return{submitODFunc:(0,r.useCallback)((async t=>{let{reqValue:a,latestTempIDData:n}=t;if(!a||!n)throw new Error("Missing required parameters");const{crime:r,crimeDesc:s,emgDetails:i,noExperience:l,empStatement:o,desc:d,disease:c,diseaseDesc:p,liquor:m,liquorDesc:u,noticePeriod:x,perIS:h,perIDesc:g,referees:f,relatives:v,salaryExpectation:y,supportInfo:b,age:N,alternateNo:j,agent:D,bwnIcNo:w,bwnIcExpiry:A,bwnIcColour:S,contactNo:E,cob:I,contractType:C,chinese:k,dob:R,driveLic:T,email:P,empType:_,eduDetails:O,familyDetails:L,gender:F,lang:M,marital:q,name:U,nationality:B,otherNation:H,otherRace:W,otherReligion:Y,ppNo:V,ppIssued:z,ppExpiry:J,ppDestinate:G,presentAddress:$,permanentAddress:K,profilePhoto:Q,position:Z,race:X,religion:ee,workExperience:te,uploadResume:ae,uploadCertificate:ne,uploadPp:re,status:se}=a,ie={tempID:n,crime:r,crimeDesc:s,emgDetails:i,noExperience:l,empStatement:o,desc:d,disease:c,diseaseDesc:p,liquor:m,liquorDesc:u,noticePeriod:x,perIS:h,perIDesc:g,referees:f,relatives:v,salaryExpectation:y,supportInfo:b,uploadResume:ae,uploadCertificate:ne,uploadPp:re},le={tempID:n,age:N,alternateNo:j,agent:D,bwnIcNo:w,bwnIcExpiry:A,bwnIcColour:S,contactNo:E,cob:I,contractType:C,chinese:k,dob:R,driveLic:T,email:P,empType:_,eduDetails:O,familyDetails:L,gender:F,lang:M,marital:q,name:U,nationality:B,otherNation:H,otherRace:W,otherReligion:Y,ppNo:V,ppIssued:z,ppExpiry:J,ppDestinate:G,presentAddress:$,permanentAddress:K,profilePhoto:Q,position:Z,race:X,religion:ee,status:se,workExperience:te};console.log(ie);try{await Promise.all([e.graphql({query:"\n  mutation CreatePersonalDetails(\n    $input: CreatePersonalDetailsInput!\n    $condition: ModelPersonalDetailsConditionInput\n  ) {\n    createPersonalDetails(input: $input, condition: $condition) {\n      id\n      tempID\n      age\n      alternateNo\n      agent\n      bwnIcNo\n      bwnIcExpiry\n      bwnIcColour\n      contactNo\n      cob\n      contractType\n      chinese\n      dob\n      driveLic\n      email\n      empType\n      eduDetails\n      familyDetails\n      gender\n      lang\n      marital\n      name\n      nationality\n      otherNation\n      otherRace\n      otherReligion\n      ppNo\n      ppIssued\n      ppExpiry\n      ppDestinate\n      presentAddress\n      permanentAddress\n      profilePhoto\n      position\n      race\n      religion\n      status\n      workExperience\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:le}}),e.graphql({query:"\n  mutation CreateEducationDetails(\n    $input: CreateEducationDetailsInput!\n    $condition: ModelEducationDetailsConditionInput\n  ) {\n    createEducationDetails(input: $input, condition: $condition) {\n      id\n      tempID\n      crime\n      crimeDesc\n      emgDetails\n      noExperience\n      empStatement\n      desc\n      disease\n      diseaseDesc\n      liquor\n      liquorDesc\n      noticePeriod\n      perIS\n      perIDesc\n      referees\n      relatives\n      salaryExpectation\n      supportInfo\n      uploadResume\n      uploadCertificate\n      uploadPp\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:ie}})])}catch(oe){throw console.error("Error executing GraphQL requests:",oe),oe}}),[])}})(),[c,p]=(0,r.useState)(!1),{candyDetails:m}=(()=>{const e=(0,ge.D)();return{candyDetails:(0,r.useCallback)((async t=>{let{reqValue:a}=t;if(!a)throw new Error("Missing required parameters");const{id:n,tempID:r,crime:s,crimeDesc:i,emgDetails:l,noExperience:o,empStatement:d,desc:c,disease:p,diseaseDesc:m,liquor:u,liquorDesc:x,noticePeriod:h,perIS:g,perIDesc:f,referees:v,relatives:y,salaryExpectation:b,supportInfo:N,age:j,alternateNo:D,agent:w,bwnIcNo:A,bwnIcExpiry:S,bwnIcColour:E,contactNo:I,cob:C,contractType:k,chinese:R,dob:T,driveLic:P,email:_,empType:O,eduDetails:L,familyDetails:F,gender:M,lang:q,marital:U,name:B,nationality:H,otherNation:W,otherRace:Y,otherReligion:V,ppNo:z,ppIssued:J,ppExpiry:G,ppDestinate:$,presentAddress:K,permanentAddress:Q,profilePhoto:Z,position:X,race:ee,religion:te,workExperience:ae,uploadResume:ne,uploadCertificate:re,uploadPp:se,status:ie}=a,le={id:n,tempID:r,crime:s,crimeDesc:i,emgDetails:l,noExperience:o,empStatement:d,desc:c,disease:p,diseaseDesc:m,liquor:u,liquorDesc:x,noticePeriod:h,perIS:g,perIDesc:f,referees:v,relatives:y,salaryExpectation:b,supportInfo:N,uploadResume:ne,uploadCertificate:re,uploadPp:se};try{const[t]=await Promise.all([e.graphql({query:"\n  mutation UpdateEducationDetails(\n    $input: UpdateEducationDetailsInput!\n    $condition: ModelEducationDetailsConditionInput\n  ) {\n    updateEducationDetails(input: $input, condition: $condition) {\n      id\n      tempID\n      crime\n      crimeDesc\n      emgDetails\n      noExperience\n      empStatement\n      desc\n      disease\n      diseaseDesc\n      liquor\n      liquorDesc\n      noticePeriod\n      perIS\n      perIDesc\n      referees\n      relatives\n      salaryExpectation\n      supportInfo\n      uploadResume\n      uploadCertificate\n      uploadPp\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:le,limit:2e4}})])}catch(oe){throw console.error("Error executing GraphQL requests:",oe),oe}}),[])}})(),u=null===(e=(0,n.zy)().state)||void 0===e?void 0:e.FormData,[h,g]=(0,r.useState)(""),[f,v]=(0,r.useState)([]),[y,b]=(0,r.useState)({uploadResume:null,uploadCertificate:null,uploadPp:null}),{tempID:N}=ht(),{empPDData:j,educDetailsData:D}=(0,r.useContext)(s.Y),[w,A]=(0,r.useState)({uploadResume:null,uploadCertificate:null,uploadPassport:null}),[S,E]=(0,r.useState)({interview:{id:"",crime:"",crimeDesc:"",emgDetails:[],noExperience:"",empStatement:"",desc:"",disease:"",diseaseDesc:"",liquor:"",liquorDesc:"",noticePeriod:"",perIS:"no",perIDesc:"",referees:[],relatives:[],salaryExpectation:"",supportInfo:"",uploadResume:[],uploadCertificate:[],uploadPp:[],age:"",alternateNo:"",agent:"",bwnIcNo:"",bwnIcExpiry:"",bwnIcColour:"",contactNo:"",cob:"",contractType:"",chinese:"",dob:"",driveLic:"",email:"",empType:"",eduDetails:[],familyDetails:[],gender:"",lang:"",marital:"",name:"",nationality:"",otherNation:"",otherRace:"",otherReligion:"",ppNo:"",ppIssued:"",ppExpiry:"",ppDestinate:"",presentAddress:"",permanentAddress:"",profilePhoto:"",position:"",race:"",religion:"",workExperience:[],status:""}}),{register:I,control:C,watch:k,handleSubmit:R,setValue:T,formState:{errors:P}}=(0,it.mN)({resolver:(0,lt.t)(ot.me),defaultValues:{perIS:"no",perIDesc:""}});(0,r.useEffect)((()=>{if(j.length>0&&D.length>0){const e=j.map((e=>{const t=D.find((t=>t.tempID===e.tempID));return(0,x.A)((0,x.A)({},e),t||{})}));v(e)}}),[j,D]),console.log(f);const _=e=>"string"===typeof e&&e?e.split("/").pop():"";console.log(N),(0,r.useEffect)((()=>{if(D.length>0&&N){const e=D.find((e=>e.tempID===N));e&&E({interview:{noExperience:e.noExperience,salaryExpectation:e.salaryExpectation,supportInfo:e.supportInfo,noticePeriod:e.noticePeriod,perIDesc:e.perIDesc,perIS:e.perIS,uploadCertificate:e.uploadCertificate,uploadPp:e.uploadPp,uploadResume:e.uploadResume}}),e&&b((t=>(0,x.A)((0,x.A)({},t),{},{uploadCertificate:_(e.uploadCertificate),uploadPp:_(e.uploadPp),uploadResume:_(e.uploadResume)})))}}),[D,N]);const O=async(e,t)=>{const a=e.target.files[0];T(t,a);const n=null===u||void 0===u?void 0:u.name;a&&("uploadResume"===t?(await pt(a,"uploadResume",A,n),b((e=>(0,x.A)((0,x.A)({},e),{},{uploadResume:a.name})))):"uploadCertificate"===t?(await pt(a,"uploadCertificate",A,n),b((e=>(0,x.A)((0,x.A)({},e),{},{uploadCertificate:a.name})))):"uploadPp"===t&&(await pt(a,"uploadPassport",A,n),b((e=>(0,x.A)((0,x.A)({},e),{},{uploadPp:a.name})))))};(0,r.useEffect)((()=>{(async()=>{const e=(e=>String(e+1))(await(async()=>{try{var e,t;const a=await Ut.graphql({query:fe.$1});return((null===a||void 0===a||null===(e=a.data)||void 0===e||null===(t=e.listPersonalDetails)||void 0===t?void 0:t.items)||[]).length}catch(a){return console.error("Error fetching total count:",a),0}})());g(e)})()}),[]);const L=(e,t)=>{E((a=>(0,x.A)((0,x.A)({},a),{},{interview:(0,x.A)((0,x.A)({},a.interview),{},{[e]:t})})))};return(0,i.jsxs)("div",{children:[(0,i.jsxs)("form",{className:"pt-5",children:[(0,i.jsxs)("div",{className:" grid grid-cols-2 gap-5",children:[(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"block text_size_6",children:"Number of Years Experience in Applied Position"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({label:"Number of Years Experience in Applied Position"},I("noExperience")),{},{className:"input-field border",name:"noExperience",type:"text",errors:P,value:S.interview.noExperience,onChange:e=>L("noExperience",e.target.value)}))]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"block text_size_6",children:"Salary Expected"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({label:"Salary Expected"},I("salaryExpectation")),{},{className:"input-field border",name:"salaryExpectation",type:"text",errors:P,value:S.interview.salaryExpectation,onChange:e=>L("salaryExpectation",e.target.value)}))]})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"block text_size_6",children:"Termination Notice for Present job (month/Date)"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({label:"Termination Notice for Present job (month/Date)"},I("noticePeriod")),{},{className:"input-field border",name:"noticePeriod",type:"text",errors:P,value:S.interview.noticePeriod,onChange:e=>L("noticePeriod",e.target.value)}))]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"text_size_6",children:"Have you been interviewed for a position at this company before?"}),(0,i.jsxs)("div",{className:"flex justify-between items-center mt-2 mb-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(it.xI,{name:"perIS",control:C,defaultValue:"no",render:e=>{let{field:t}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"radio",id:"yes"},t),{},{value:"yes",className:"mr-2 p-3"})),(0,i.jsx)("label",{htmlFor:"yes",className:"mr-4 text_size_6",children:"Yes"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"radio",id:"no"},t),{},{value:"no",className:"mr-2 p-3",defaultChecked:!0})),(0,i.jsx)("label",{htmlFor:"no",className:"text_size_6",children:"No"})]})}}),P.perIS&&(0,i.jsx)("p",{className:"text-[red] text-xs mt-1",children:P.perIS.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"w-[350px] text_size_7",children:"If yes, please give Details"}),(0,i.jsx)(it.xI,{name:"perIDesc",control:C,defaultValue:"",render:e=>{let{field:t}=e;return(0,i.jsx)("input",(0,x.A)((0,x.A)({},t),{},{disabled:"yes"!==k("perIS"),className:"mt-2 text_size_7 p-2.5 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded w-full ".concat(P.perIDesc?"border-[red]":"")}))}}),P.perIDesc&&(0,i.jsx)("p",{className:"text-[red] text-xs mt-4",children:P.perIDesc.message})]})]})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"text_size_6 mb-2",children:"Any other information you wish to provide?"}),(0,i.jsx)("textarea",(0,x.A)((0,x.A)({},I("supportInfo")),{},{className:"resize-none mt-2 text_size_7 p-2.5 bg-lite_skyBlue border border-[#dedddd] text-dark_grey outline-none rounded w-full",rows:"4",value:S.interview.supportInfo,onChange:e=>L("supportInfo",e.target.value)}))]}),(0,i.jsxs)("div",{className:"my-5 ",children:[(0,i.jsx)("label",{className:"text_size_6",children:"Choose file"}),(0,i.jsxs)("div",{className:"flex items-center justify-between mt-3 mb-10 gap-5",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"flex items-center px-3 py-2 text_size_7 p-2.5 bg-lite_skyBlue border border-[#dedddd] rounded-md cursor-pointer",children:["Upload Resume",(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"file"},I("uploadResume")),{},{onChange:e=>O(e,"uploadResume"),className:"hidden",accept:"application/pdf, application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document"})),(0,i.jsx)("span",{className:"ml-2",children:(0,i.jsx)(ft.gwN,{})})]}),y.uploadResume?(0,i.jsxs)("p",{className:"text-xs mt-1 text-grey",children:["Uploaded: ",y.uploadResume]}):(0,i.jsx)("p",{className:"text-[red] text-xs mt-1",children:null===P||void 0===P||null===(t=P.uploadResume)||void 0===t?void 0:t.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"flex items-center px-3 py-2 text_size_7 p-2.5 bg-lite_skyBlue border border-[#dedddd] rounded-md cursor-pointer",children:["Qualification Certificate",(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"file"},I("uploadCertificate")),{},{onChange:e=>O(e,"uploadCertificate"),className:"hidden",accept:"application/pdf, image/png, image/jpeg"})),(0,i.jsx)("span",{className:"ml-2",children:(0,i.jsx)(ft.gwN,{})})]}),y.uploadCertificate?(0,i.jsxs)("p",{className:"text-xs mt-1 text-grey",children:["Uploaded: ",y.uploadCertificate]}):(0,i.jsx)("p",{className:"text-[red] text-xs mt-1",children:null===P||void 0===P||null===(a=P.uploadCertificate)||void 0===a?void 0:a.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"flex items-center px-3 py-2 text_size_7 p-2.5 bg-lite_skyBlue border border-[#dedddd] rounded-md cursor-pointer",children:["Upload IC / Passport",(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"file"},I("uploadPp")),{},{onChange:e=>O(e,"uploadPp"),className:"hidden",accept:"application/pdf, image/png, image/jpeg"})),(0,i.jsx)("span",{className:"ml-2",children:(0,i.jsx)(ft.gwN,{})})]}),y.uploadPp?(0,i.jsxs)("p",{className:"text-xs mt-1 text-grey",children:["Uploaded: ",y.uploadPp]}):(0,i.jsx)("p",{className:"text-[red] text-xs mt-1",children:null===P||void 0===P||null===(l=P.uploadPp)||void 0===l?void 0:l.message})]})]})]}),(0,i.jsxs)("div",{className:"flex items-start mb-4",children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"checkbox",id:"employeeStatement"},I("empStatement",{required:"This field is required"})),{},{className:"w-5 h-5 border-medium_grey rounded"})),(0,i.jsx)("label",{htmlFor:"empStatement",className:"ml-2 text-gray-700",children:"I Hereby Declare that every statement made by me in this form is true and correct and I understand and agree that any false declaration made by me may be ground for termination of my contract of employment without notice."})]}),P.empStatement&&(0,i.jsx)("p",{className:"text-[red] text-sm",children:null===P||void 0===P||null===(o=P.empStatement)||void 0===o?void 0:o.message}),(0,i.jsx)("div",{className:"text-center my-10",children:(0,i.jsx)("button",{onclick:async e=>{e.preventDefault();try{const t=(0,x.A)((0,x.A)((0,x.A)({},e),u),{},{eduDetails:JSON.stringify(u.eduDetails),familyDetails:JSON.stringify(u.familyDetails),workExperience:JSON.stringify(u.workExperience),emgDetails:JSON.stringify(u.emgDetails),referees:JSON.stringify(u.referees),relatives:JSON.stringify(u.relatives),uploadResume:w.uploadResume,uploadCertificate:w.uploadCertificate,uploadPp:w.uploadPassport,status:"Acitve"});await d({reqValue:t,latestTempIDData:h}),console.log("Value",t),localStorage.setItem("otherFormData",JSON.stringify(t))}catch(t){console.log(t),console.error("Error submitting data to AWS:",JSON.stringify(t,null,2))}},type:"submit",className:"primary_btn",children:"Submit"})}),(0,i.jsx)("div",{className:"text-center my-10",children:(0,i.jsx)("button",{onClick:async e=>{e.preventDefault();const t=f.find((e=>e.tempID===N));if(!t)return void console.error("Candidate not found");console.log("Selected Interview Data before merge:",t);const a=t.id;console.log("Candy ID:",a);const n=(0,x.A)((0,x.A)({},t),S.interview);console.log("Updated Interview Data after merge:",n);const r={id:a,crime:n.crime,crimeDesc:n.crimeDesc,emgDetails:n.emgDetails,noExperience:n.noExperience,empStatement:n.empStatement,desc:n.desc,disease:n.disease,diseaseDesc:n.diseaseDesc,liquor:n.liquor,liquorDesc:n.liquorDesc,noticePeriod:n.noticePeriod,perIS:n.perIS,perIDesc:n.perIDesc,referees:n.referees,relatives:n.relatives,salaryExpectation:n.salaryExpectation,supportInfo:n.supportInfo,uploadResume:n.uploadResume,uploadCertificate:n.uploadCertificate,uploadPp:n.uploadPp,age:n.age,alternateNo:n.alternateNo,agent:n.agent,bwnIcNo:n.bwnIcNo,bwnIcExpiry:n.bwnIcExpiry,bwnIcColour:n.bwnIcColour,contactNo:n.contactNo,cob:n.cob,contractType:n.contractType,chinese:n.chinese,dob:n.dob,driveLic:n.driveLic,email:n.email,empType:n.empType,eduDetails:n.eduDetails,familyDetails:n.familyDetails,gender:n.gender,lang:n.lang,marital:n.marital,name:n.name,nationality:n.nationality,otherNation:n.otherNation,otherRace:n.otherRace,otherReligion:n.otherReligion,ppNo:n.ppNo,ppIssued:n.ppIssued,ppExpiry:n.ppExpiry,ppDestinate:n.ppDestinate,presentAddress:n.presentAddress,permanentAddress:n.permanentAddress,profilePhoto:n.profilePhoto,position:n.position,race:n.race,religion:n.religion,workExperience:n.workExperience,status:n.status,tempID:n.tempID};console.log("Prepared reqValue:",r);try{console.log("Data stored successfully...")}catch(s){console.error("Error submitting interview details:",s)}},type:"submit",className:"primary_btn",children:"Update"})})]}),c&&(0,i.jsx)(Le,{text:"Your Application Submitted Successfully",notification:c,path:"/recrutiles/candidate"})]})},Ht=()=>{(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]);const e=(0,n.Zp)(),t=(0,n.zy)(),[a,s]=(0,r.useState)(""),l=D("userID","Recruitment");(0,r.useEffect)((()=>{t.pathname.includes("applyemployreq")?s("Apply Employee Requisition"):t.pathname.includes("employreq")?s("Employee Requisition"):t.pathname.includes("candidate")?s("Candidate"):t.pathname.includes("localcandi")?s("Local CV"):t.pathname.includes("nonloccandi")?s("Non Local CV"):t.pathname.includes("status")?s("Status"):t.pathname.includes("workpasstracking")&&s("WorkPass Tracking")}),[t.pathname]);const o=me.filter((e=>l.includes(e.title)));return(0,i.jsxs)("section",{className:"h-full bg-[#F5F6F1]",children:[(0,i.jsx)("div",{className:"flex flex-wrap justify-center sm:justify-evenly items-center gap-4 py-10 text-black",children:o.map(((t,n)=>(0,i.jsxs)("div",{onClick:()=>{return a=t.title,n=t.path,s(a),void e(n);var a,n},className:"".concat(t.bg," rounded-3xl w-[10rem] sm:w-[11.1rem] h-40 p-4 cursor-pointer ").concat(a===t.title?"border-4 bg-white border-[#faf362]":""),children:[(0,i.jsx)("div",{className:"".concat(t.bg1," rounded-full my-4 w-16 h-16 flex justify-center items-center m-auto"),children:(0,i.jsx)("img",{className:"w-[2.2rem] h-9 object-cover",src:t.icons,alt:"".concat(n," Icon not found")})}),(0,i.jsx)("h5",{className:"text-[14px] font-semibold text-center",children:t.title})]},n)))}),(0,i.jsx)(n.sv,{})]})};const Wt=a.p+"static/media/candylist.6c1bb9f9af47827026c1f86c5b3e3561.svg";const Yt=a.p+"static/media/add-candidate.472fa9560a82e95ae4b57e094e8b2e4f.svg",Vt=()=>{const e=(0,n.Zp)();return(0,i.jsxs)("section",{className:"min-h-screen bg-[#F5F6F1]",children:[(0,i.jsxs)("div",{className:"center gap-20 m-20 text-black",children:[(0,i.jsxs)("div",{onClick:()=>e("/recrutiles/listofcandi"),className:"border-1 shadow-[0_1px_4px_1px_rgba(0,0,0,0.2)] bg-white rounded-xl w-64 h-72 p-5 cursor-pointer hover:border-4 hover:border-[#0D4B8F]",children:[(0,i.jsx)("div",{className:"bg-[#CDE4FD] rounded-full my-10 w-24 h-24 flex justify-center items-center m-auto",children:(0,i.jsx)("img",{className:"w-13 h-16 object-cover",src:Wt,alt:"Candidates List Icon"})}),(0,i.jsx)("h5",{className:"text-[18px] font-semibold text-center",children:"Candidates List"})]}),(0,i.jsxs)("div",{onClick:()=>e("/addCandidates"),className:"border-1 shadow-[0_1px_4px_1px_rgba(0,0,0,0.2)] bg-white rounded-xl w-64 h-72 p-5 cursor-pointer hover:border-4 hover:border-[#0D4B8F]",children:[(0,i.jsx)("div",{className:"bg-[#CDE4FD] rounded-full my-10 w-24 h-24 flex justify-center items-center m-auto",children:(0,i.jsx)("img",{className:"w-13 h-16 object-cover",src:Yt,alt:"Add Candidate Icon"})}),(0,i.jsx)("h5",{className:"text-[18px] font-semibold text-center",children:"Add Candidate"})]})]}),(0,i.jsx)(n.sv,{})]})},zt=(0,ge.D)(),Jt=(0,ge.D)(),Gt=()=>{const[e,t]=(0,r.useState)(!1),[a,n]=(0,r.useState)(!1),[s,i]=(0,r.useState)(null);return{localMobilization:async e=>{t(!0),n(!1),i(null);try{const t=await Jt.graphql({query:"\n  mutation CreateLocalMobilization(\n    $input: CreateLocalMobilizationInput!\n    $condition: ModelLocalMobilizationConditionInput\n  ) {\n    createLocalMobilization(input: $input, condition: $condition) {\n      id\n      tempID\n      mobSignDate\n      mobFile\n      paafApproveDate\n      paafFile\n      loiIssueDate\n      loiAcceptDate\n      loiDeclineDate\n      declineReason\n      loiFile\n      cvecApproveDate\n      cvecFile\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:e}});console.log("API Response:",t),n(!0)}catch(a){console.error("Error during API call:",a),i(a)}finally{t(!1)}},isLoading:e,notification:a,error:s}},$t=e=>{let{candidate:t,onClose:a}=e;const[n,s]=(0,r.useState)(!1),{localMobilization:l}=Gt(),{register:o,handleSubmit:d,formState:{errors:c}}=(0,it.mN)({resolver:(0,lt.t)(ot.mB)}),{createSchedule:p}=(()=>{const[e,t]=(0,r.useState)(!1),[a,n]=(0,r.useState)(!1),[s,i]=(0,r.useState)(null);return{createSchedule:async e=>{t(!0),n(!1),i(null);try{const t=await zt.graphql({query:"\n  mutation CreateInterviewSchedule(\n    $input: CreateInterviewScheduleInput!\n    $condition: ModelInterviewScheduleConditionInput\n  ) {\n    createInterviewSchedule(input: $input, condition: $condition) {\n      id\n      interDate\n      interTime\n      venue\n      interType\n      bagdeNo\n      message\n      tempID\n      manager\n      candidateStatus\n      department\n      otherDepartment\n      status\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:e}});console.log("API Response:",t),n(!0)}catch(a){console.error("Error during API call:",a),i(a)}finally{t(!1)}},isLoading:e,notification:a,error:s}})(),m=d((async e=>{const a=(0,x.A)((0,x.A)({},e),{},{interDate:new Date(e.interDate),tempID:t.tempID,candidateStatus:"pending",status:"interviewscheduled"}),n={tempID:t.tempID};s(!0),await p(a),await l(n)}));return(0,i.jsx)("section",{className:"min-h-screen bg-opacity-80 w-full center",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-[500px] overflow-y-auto ",children:[(0,i.jsxs)("div",{className:"text-xl relative text-dark_grey text-center font-semibold p-3 rounded-t-lg bg-yellow",children:[(0,i.jsx)("p",{children:" Schedule Interview"}),(0,i.jsxs)("button",{className:"border absolute right-4 top-3 rounded-full px-2 center",onClick:a,children:[" ","\xd7"]})]}),(0,i.jsxs)("div",{className:"p-5",children:[(0,i.jsxs)("div",{className:"flex flex-row justify-between space-x-8",children:[(0,i.jsx)(ut,{name:"interDate",type:"date",label:"Date",register:o,errors:c}),(0,i.jsx)(ut,{name:"interTime",type:"time",label:"Time",register:o,errors:c})]}),(0,i.jsxs)("div",{className:"mt-2",children:[(0,i.jsx)("label",{className:"text-dark_grey text-[16px] underline font-semibold",children:"Interview Type"}),(0,i.jsxs)("div",{className:"flex items-center mt-2 space-x-11 pl-4",children:[(0,i.jsxs)("label",{className:"flex items-center text-[14px] font-normal text-ash",children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"radio",name:"interType",value:"Offline"},o("interType")),{},{className:"mr-2"})),"Offline"]}),(0,i.jsxs)("label",{className:"flex items-center text-[14px] font-normal text-ash",children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"radio",name:"interType",value:"Online"},o("interType")),{},{className:"mr-2"})),"Online"]})]}),c.interType&&(0,i.jsx)("p",{className:"text-[red] text-[11px]",children:c.interType.message})]}),(0,i.jsx)(ut,{name:"venue",type:"text",label:"Venue",placeholder:"Enter Venue",register:o,errors:c}),(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsx)("label",{className:"text-dark_grey text-[16px] underline font-semibold block mb-2",children:"Assign Interviewer :"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsx)(ut,{name:"bagdeNo",type:"text",label:"Badge No",placeholder:"Enter Badge Number",register:o,errors:c}),(0,i.jsx)(ut,{name:"manager",type:"text",label:"Manager Name",placeholder:"Enter Manager Name",register:o,errors:c})]})]}),(0,i.jsx)(ut,{name:"message",type:"textarea",label:"Message",placeholder:"Enter Message",register:o,errors:c}),(0,i.jsx)("div",{className:"text-center mt-1 center",children:(0,i.jsx)("button",{className:"border-2 border-[#F7EC3D] text-dark_grey font-medium hover:bg-yellow py-1 px-2 rounded w-32",onClick:()=>{m()},children:"Send"})}),n&&(0,i.jsx)(Le,{text:"Interview scheduled notification sent to HRD & Manager successfully",notification:n,path:"/recrutiles/listofcandi"})]})]})})},Kt=(0,ge.D)(),Qt=e=>{let{candidate:t,onClose:a,showDecisionButtons:n}=e;const{IVSSDetails:l}=(0,r.useContext)(s.Y),[o,d]=(0,r.useState)(!1),[c,p]=(0,r.useState)(!1),[m,u]=(0,r.useState)(""),x=async e=>{try{if(!Array.isArray(e))throw new Error("dataCandi must be an array.");const n=e.map((e=>null===l||void 0===l?void 0:l.find((t=>e.tempID===(null===t||void 0===t?void 0:t.tempID))))).filter((e=>null===e||void 0===e?void 0:e.id));if(0===n.length)return void console.error("No matching candidates found.");for(const e of n){const a={id:e.id,candidateStatus:"Rejected"};try{await Kt.graphql({query:Re,variables:{input:a}});p(!0)}catch(t){console.error("Error updating candidate ID",e.id,":",t)}}a()}catch(t){console.error("Error in handleRejected function:",t)}};(0,r.useEffect)((()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""})),[]);const g=e=>{if(!e||isNaN(new Date(e).getTime()))return"";const t=new Date(e),a=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getFullYear();return"".concat(a,"/").concat(n,"/").concat(r)};return(0,r.useEffect)((()=>{null!==t&&void 0!==t&&t.profilePhoto&&(async e=>{const t=await(0,h.I)({path:e});u(t.url.toString())})(t.profilePhoto)}),[null===t||void 0===t?void 0:t.profilePhoto]),(0,i.jsxs)("section",{children:[(0,i.jsx)("div",{className:"fixed top-0 left-0 inset-0 bg-grey bg-opacity-80 center z-50",children:(0,i.jsxs)("div",{className:"bg-white w-full max-w-[700px] max-h-[90vh] p-6 rounded-lg relative overflow-y-auto",children:[(0,i.jsx)("button",{className:"absolute top-2 right-4 w-8 h-8 border rounded-full text-xl",onClick:a,children:"\xd7"}),(0,i.jsxs)("div",{className:"flex items-center gap-20",children:[(0,i.jsx)("img",{src:he.A,alt:"Logo",className:"max-w-[180px] w-full"}),(0,i.jsx)("h2",{className:"text-xl font-bold underline",children:"Employee Application Review"})]}),(0,i.jsxs)("div",{className:"mt-6 relative",children:[(0,i.jsx)("div",{className:"flex justify-end absolute right-0 top-0 mt-4 mr-4",children:(0,i.jsx)("img",{src:m,alt:"".concat(t.name,"'s photo"),className:"w-32 h-36 border-2 border-lite_grey shadow-[0_3px_6px_1px_rgba(0,0,0,0.2)]"})}),[{label:"Applying For",value:t.position||"N/A"},{label:"Experience",value:t.noExperience||"N/A"},{label:"Previous Company",value:t.workExperience||"N/A"},{label:"Contract",value:t.contractType||"N/A"},{label:"Type",value:t.empType||"N/A"},{label:"CV Received From",value:t.agent||"N/A"},{label:"Qualification",value:t.eduDetails||"N/A"},{label:"Name",value:t.name||"N/A"},{label:"Nationality",value:t.nationality||"N/A"},{label:"Race",value:t.race||"N/A"},{label:"Gender",value:t.gender||"N/A"},{label:"Date of Birth",value:g(t.dob)||"N/A"},{label:"Age",value:t.age||"N/A"},{label:"Marital Status",value:t.marital||"N/A"},{label:"Religion",value:t.religion||"N/A"},{label:"Country of Birth",value:t.cob||"N/A"},{label:"Language Profiency",value:t.lang||"N/A"},{label:"Home Address",value:t.permanentAddress||"N/A"},{label:"Email",value:t.email||"N/A"},{label:"Contact",value:t.contactNo||"N/A"},{label:"Brunei IC No.",value:t.bwnIcNo||"N/A"},{label:"Brunei IC Colour.",value:t.bwnIcColour||"N/A"},{label:"Brunei IC Expiry",value:g(t.bwnIcExpiry)||"N/A"},{label:"Malaysia IC No.",value:t.alternateNo||"N/A"},{label:"Passport No.",value:t.ppNo||"N/A"},{label:"Passport Issue Date",value:t.ppIssued||"N/A"},{label:"Passport Expiry Date",value:t.ppExpiry||"N/A"},{label:"Passport Issued Place",value:t.ppDestinate||"N/A"},{label:"Next of Kin Info",value:t.familyDetails||"N/A"},{label:"Emergency Contact",value:t.emgDetails||"N/A"}].map(((e,t)=>(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[(0,i.jsx)("strong",{className:"w-full",children:e.label}),(0,i.jsxs)("span",{className:"w-full col-span-2",children:[": \xa0",e.value]})]},t)))]}),(0,i.jsxs)("div",{className:"flex justify-center mt-6 gap-5",children:[void 0!==n&&(0,i.jsxs)(i.Fragment,{children:[!n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{className:"hover:bg-medium_red hover:border-medium_red border-2 border-yellow px-4 py-1 shadow-xl rounded-lg",onClick:x,children:"Reject"}),(0,i.jsx)("button",{className:"hover:bg-[#faf362] border-2 border-yellow px-4 py-1 shadow-xl rounded-lg",onClick:()=>{d(!0)},children:"Schedule Interview"})]}),n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{className:"hover:bg-medium_red hover:border-medium_red border-2 border-yellow px-4 py-1 shadow-xl rounded-lg",onClick:()=>{x([t])},children:"Rejected"}),(0,i.jsx)("button",{className:"hover:bg-[#faf362] border-2 border-yellow px-4 py-1 shadow-xl rounded-lg",onClick:()=>{(async e=>{try{if(!Array.isArray(e))throw new Error("dataCandi must be an array.");const a=e.map((e=>null===l||void 0===l?void 0:l.find((t=>e.tempID===(null===t||void 0===t?void 0:t.tempID))))).filter((e=>null===e||void 0===e?void 0:e.id));if(0===a.length)return;for(const e of a){const a={id:e.id,status:"Selected"};try{const t=await Kt.graphql({query:Re,variables:{input:a}});console.log("Update successful for candidate ID",e.id,":",t),p(!0)}catch(t){console.log(t),console.error("Error updating candidate ID",e.id,":",t)}}}catch(t){console.log(t),console.error("Error in handleSelected function:",t)}})([t]),console.log(t)},children:"Selected"})]})]}),c&&(0,i.jsx)(Le,{text:"Candidate Selected Successfully",notification:c,path:"/recrutiles/status"})]})]})}),o&&(0,i.jsx)("div",{className:"fixed top-0 left-0 inset-0 bg-black bg-opacity-50 w-full z-50",children:(0,i.jsx)($t,{candidate:t,onClose:()=>{d(!1)}})})]})};var Zt=a(7196),Xt=a(899);const ea=e=>{let{columns:t,rowClickHandler:a,selectedRows:n,onRowSelect:s,showCheckboxes:l=!0,currentPage:o,selectedTable:d,edited:c,showEditIcon:p,data:m}=e;const[u,h]=(0,r.useState)(n||[]),[g,f]=(0,r.useState)({}),[v,y]=(0,r.useState)(!1),[b,N]=(0,r.useState)(null),j=(0,r.useRef)(null),D=m.filter((e=>"Inactive"!==e.status)),w={TempID:"tempID",Name:"name",Gender:"gender",Nationality:"nationality",Position:"position",Experience:"noExperience",Email:"email",Contact:"contactNo",Contract:"contractType",Type:"empType",Interviewer:"interviewer",date:"date",Time:"time",Venue:"venue",Status:"status"};return(0,r.useEffect)((()=>{const e=e=>{j.current&&!j.current.contains(e.target)&&f({})};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]),D?0===D.length?(0,i.jsx)("div",{className:"text-center text-grey py-10",children:"No data available."}):(0,i.jsxs)("div",{className:"overflow-x-auto rounded-lg",ref:j,children:[" ",(0,i.jsxs)("table",{className:"w-full text-left",children:[(0,i.jsx)("thead",{className:"bg-[#939393] text-white",children:(0,i.jsxs)("tr",{children:[l&&(0,i.jsx)("th",{className:"pl-4 py-4",children:(0,i.jsx)("input",{className:"w-6 h-6",type:"checkbox",onClick:e=>e.stopPropagation(),onChange:e=>{if(e.target.checked){const e=m.map(((e,t)=>t));h(e),s&&s(e)}else h([]),s&&s([])},checked:u.length===D.length&&D.length>0})}),(0,i.jsx)("th",{className:"pl-4 py-4",children:"S.No"}),t.map(((e,t)=>(0,i.jsx)("th",{className:"pl-4 py-4",children:e},t))),("status"===o||"workpasstracking"===o)&&(0,i.jsx)("th",{})]})}),(0,i.jsx)("tbody",{className:"bg-white cursor-pointer",children:D.map(((e,a)=>(0,i.jsxs)("tr",{className:"shadow-[0_3px_6px_1px_rgba(0,0,0,0.2)] ".concat(l?u.includes(a)?"bg-medium_blue":"":g[d]===a?"bg-medium_blue":""),onClick:()=>((e,t,a)=>{f((e=>(0,x.A)((0,x.A)({},e),{},{[t]:(null===e||void 0===e?void 0:e[t])===a?null:a}))),N(e),y(!0)})(e,d,a),children:[l&&(0,i.jsx)("td",{className:"pl-4 py-4",children:(0,i.jsx)("input",{className:"w-5 h-6",type:"checkbox",onClick:t=>{t.stopPropagation(),c(e)},checked:u.includes(a),onChange:()=>(e=>{const t=u.includes(e)?u.filter((t=>t!==e)):[...u,e];h(t),s&&s(t)})(a)})}),(0,i.jsx)("td",{className:"pl-4 py-4",children:a+1}),t.map(((t,a)=>(0,i.jsx)("td",{className:"pl-4 py-4",children:e[w[t]]||"-"},a))),("status"===o||"workpasstracking"===o)&&p&&(0,i.jsx)("td",{className:"px-4 py-4 text-[#835c1d]",children:(0,i.jsx)(Zt.GQd,{className:"text-2xl cursor-pointer",onClick:t=>{t.stopPropagation(),c(e)}})})]},a)))})]}),v&&b&&(0,i.jsx)(Qt,{candidate:b,onClose:()=>{y(!1)},showDecisionButtons:"status"===o})]}):(0,i.jsx)("div",{children:"Loading..."})};var ta=a(6720);const aa=e=>{let{allEmpDetails:t,searchUserList:a,searchIcon1:s,searchIcon2:l,placeholder:o,border:d}=e;const[c,p]=(0,r.useState)(""),m=(0,n.zy)();(0,r.useEffect)((()=>{p("")}),[t,m]);return(0,i.jsx)("div",{className:"relative",children:(0,i.jsxs)("div",{className:"py-[9px] w-full text_size_5 bg-white border text-grey border-lite_grey ".concat(d," flex items-center px-3 gap-2"),children:[(0,i.jsx)("div",{className:"text-dark_grey text-2xl mr-1",children:s}),(0,i.jsx)("input",{type:"text",placeholder:o,className:"outline-none w-full text-sm",value:c,onChange:e=>{const n=e.target.value.toLowerCase();if(p(n),n.trim()){const e=t.filter((e=>e.empID&&"string"===typeof e.empID&&e.empID.toLowerCase().includes(n.toLowerCase())||e.name&&"string"===typeof e.name&&e.name.toLowerCase().includes(n.toLowerCase())||e.empName&&"string"===typeof e.empName&&e.empName.toLowerCase().includes(n.toLowerCase())||e.position&&"string"===typeof e.position&&e.position.toLowerCase().includes(n.toLowerCase())||e.empBadgeNo&&"string"===typeof e.empBadgeNo&&e.empBadgeNo.toLowerCase().includes(n.toLowerCase())));a(e)}else a(t)}}),l&&(0,i.jsx)("div",{className:"text-dark_grey text-2xl",children:l})]})})},na=()=>{const[e,t]=(0,r.useState)(""),[a,l]=(0,r.useState)(!0),[o,d]=(0,r.useState)(!1),[c,p]=(0,r.useState)([]),[m,u]=(0,r.useState)(null),{empPDData:x,IVSSDetails:h}=(0,r.useContext)(s.Y),g=(0,n.Zp)(),[f,v]=(0,r.useState)([]),b=x.filter((e=>"Bruneian"===e.nationality||"Brunei PR"===e.nationality)).filter((t=>t.name.toLowerCase().includes(e.toLowerCase())||t.position.toLowerCase().includes(e.toLowerCase())||t.nationality.toLowerCase().includes(e.toLowerCase()))).filter((e=>!h.some((t=>t.tempID===e.tempID))));(0,r.useEffect)((()=>{b.length>0?l(!1):(l(!1),d(!0))}),[b]);return(0,i.jsxs)("section",{className:"screen-size min-h-screen w-full my-5",children:[(0,i.jsxs)("div",{className:"mb-8 flex justify-between items-center",children:[(0,i.jsx)("div",{className:"flex-1",children:(0,i.jsx)("button",{className:"bg-[#faf362] py-2 px-3 rounded-lg text-[18px] font-semibold",children:"Local CV Candidates"})}),(0,i.jsx)("div",{className:" flex-1 flex justify-end ",children:(0,i.jsx)(aa,{newFormData:b,searchHandler:t,emptySearch:()=>console.log("Search cleared!"),searchIcon1:(0,i.jsx)(y.zfp,{}),placeholder:"Search",border:"rounded-full",shadow:"shadow-[0_1px_6px_1px_rgba(0,0,0,0.2)]"})})]}),(0,i.jsxs)("div",{className:"flex relative mb-8",children:[(0,i.jsx)("div",{className:" absolute top-1/2 right-14 transform -translate-y-1/2 text-2xl hover:text-3xl flex items-center cursor-pointer",onClick:()=>{1===c.length?g("/addCandidates",{state:{editingData:c[0]}}):c.length>1?alert("Please select only one row to edit."):alert("Please select a row before editing.")},disabled:0===c.length,children:(0,i.jsx)(Lt.uO9,{className:"mr-2"})}),(0,i.jsx)("div",{className:"absolute top-1/2 right-0 transform -translate-y-1/2 text-3xl hover:text-4xl cursor-pointer text-[#f42232cc] flex items-center",onClick:()=>{b.filter((e=>!c.includes(e.sno)));p([])},children:(0,i.jsx)(ta.b6i,{className:"mr-2"})})]}),a?(0,i.jsx)("div",{className:"text-center py-10",children:"Loading..."}):o?(0,i.jsx)("div",{className:"text-center py-10",children:"No data available."}):(0,i.jsx)(ea,{columns:["Name","Gender","Nationality","Position","Experience","Type","Email","Contact"],rowClickHandler:e=>{u(e)},data:b,selectedRows:c,onRowSelect:e=>{p(e)},edited:e=>{v(e)}})]})},ra=()=>{const[e,t]=(0,r.useState)(""),[a,l]=(0,r.useState)(!1),[o,d]=(0,r.useState)(""),[c,p]=(0,r.useState)([]),[m,u]=(0,r.useState)(null),{empPDData:x,IVSSDetails:h}=(0,r.useContext)(s.Y),g=(0,n.Zp)(),[f,v]=(0,r.useState)([]),[b,N]=(0,r.useState)(!0),[j,D]=(0,r.useState)(!1),w=x.filter((t=>{const a="Bruneian"!==t.nationality&&"Brunei PR"!==t.nationality,n=!o||"LPA"===o&&"lpa"===t.contractType.toLowerCase()||"SAWP"===o&&"sawp"===t.contractType.toLowerCase(),r=t.name.toLowerCase().includes(e.toLowerCase())||t.position.toLowerCase().includes(e.toLowerCase())||t.nationality.toLowerCase().includes(e.toLowerCase()),s=!h.some((e=>e.tempID===t.tempID));return a&&n&&r&&s}));(0,r.useEffect)((()=>{w.length>0?(N(!1),D(null)):D("No data available.")}),[w]);const A=e=>{d("Show All"===e?"":e),l(!1)};return(0,i.jsxs)("section",{className:"screen-size min-h-screen w-full my-5",children:[(0,i.jsxs)("div",{className:"mb-8 flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"relative ",children:[(0,i.jsxs)("button",{onClick:()=>{l(!a)},className:"bg-[#faf362] py-2 px-3 rounded-lg text-[18px] font-semibold flex items-center",children:["Non Local CV Candidates",a?(0,i.jsx)(Lt.Ucs,{className:"ml-2"}):(0,i.jsx)(Lt.Vr3,{className:"ml-2"})]}),a&&(0,i.jsxs)("div",{className:"absolute mt-2 bg-white border-2 border-grey rounded-lg shadow-lg",children:[(0,i.jsx)("button",{onClick:()=>A("LPA"),className:"block px-4 py-2 hover:bg-[#f8a595cc] rounded-lg text-left w-full",children:"LPA"}),(0,i.jsx)("button",{onClick:()=>A("SAWP"),className:"block px-4 py-2 hover:bg-[#f8a595cc] rounded-lg text-left w-full",children:"SAWP"}),(0,i.jsx)("button",{onClick:()=>A("Show All"),className:"block px-4 py-2 hover:bg-[#f8a595cc] rounded-lg text-left w-full",children:"Show All"})]})]}),(0,i.jsx)("div",{className:" flex-1 flex justify-end ",children:(0,i.jsx)(aa,{newFormData:w,searchHandler:t,emptySearch:()=>console.log("Search cleared!"),searchIcon1:(0,i.jsx)(y.zfp,{}),placeholder:"Search",border:"rounded-full",shadow:"shadow-[0_1px_6px_1px_rgba(0,0,0,0.2)]"})})]}),(0,i.jsxs)("div",{className:"flex relative mb-8 ",children:[(0,i.jsx)("div",{className:" absolute top-1/2 right-14 transform -translate-y-1/2 text-2xl hover:text-3xl flex items-center cursor-pointer",onClick:()=>{1===c.length?g("/addCandidates",{state:{editingData:c[0]}}):c.length>1?alert("Please select only one row to edit."):alert("Please select a row before editing.")},disabled:0===c.length,children:(0,i.jsx)(Lt.uO9,{className:"mr-2"})}),(0,i.jsx)("div",{className:"absolute top-1/2 right-0 transform -translate-y-1/2 text-3xl hover:text-4xl cursor-pointer text-[#f42232cc] flex items-center",onClick:()=>{w.filter((e=>!c.includes(e.id)));p([])},children:(0,i.jsx)(ta.b6i,{className:"mr-2"})})]}),o&&(0,i.jsx)("div",{className:"mb-3 text-[18px] w-20 py-1 text-center rounded-lg font-bold bg-medium_red",children:o}),b?(0,i.jsx)("div",{className:"text-center py-10",children:"Loading..."}):j?(0,i.jsx)("div",{className:"text-center py-10",children:j}):(0,i.jsx)(ea,{columns:["Name","Gender","Nationality","Position","Experience","Contract","Type","Email","Contact"],rowClickHandler:e=>{u(e)},data:w,selectedRows:c,onRowSelect:e=>{p(e)},edited:e=>{v(e)}})]})},sa=()=>{(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]);const[e,t]=(0,r.useState)("applicantDetails"),a=(0,n.Zp)(),s=(0,n.zy)(),{tempID:l}=s.state||{},o=(e,n)=>{t(e),a(n)};return(0,r.useEffect)((()=>{const e=s.pathname;e.includes("/personalDetails")?t("personalDetails"):e.includes("/educationDetails")?t("educationExperience"):e.includes("/otherDetails")?t("otherDetails"):t("applicantDetails")}),[s]),(0,i.jsx)("section",{className:"w-full bg-[#F5F6F1] ",children:(0,i.jsxs)("div",{className:"w-11/12 relative mx-auto p-6",children:[(0,i.jsx)("h2",{className:"text-[20px] font-bold mb-4 text-center",children:"Application Form"}),(0,i.jsxs)("div",{className:"flex justify-between border-b mb-4 text-[14px] font-semibold",children:[(0,i.jsx)("button",{className:"py-2 px-4 focus:outline-none ".concat("applicantDetails"===e?"border-b-8 border-yellow":""),onClick:()=>o("applicantDetails","/addCandidates"),children:"Applicant Details"}),(0,i.jsx)("button",{className:"py-2 px-4 focus:outline-none ".concat("personalDetails"===e?"border-b-8 border-yellow":""),onClick:()=>o("personalDetails","/addCandidates/personalDetails"),children:"Personal Details"}),(0,i.jsx)("button",{className:"py-2 px-4 focus:outline-none ".concat("educationExperience"===e?"border-b-8 border-yellow":""),onClick:()=>o("educationExperience","/addCandidates/educationDetails"),children:"Reference Details"}),(0,i.jsx)("button",{className:"py-2 px-4 focus:outline-none ".concat("otherDetails"===e?"border-b-8 border-yellow":""),onClick:()=>o("otherDetails","/addCandidates/otherDetails"),children:"Other Details"})]}),(0,i.jsx)("div",{children:(0,i.jsx)(n.sv,{context:{activeTab:e,handleNext:()=>{switch(e){case"applicantDetails":a("/addCandidates/personalDetails"),t("personalDetails");break;case"personalDetails":a("/addCandidates/educationDetails"),t("educationExperience");break;case"educationExperience":a("/addCandidates/otherDetails"),t("otherDetails")}},tempID:l}})})]})})};var ia=a(3156);const la=e=>{let{currentPage:t,totalPages:a,onPageChange:n}=e;const r=(()=>{const e=[];if(a<=4)for(let t=1;t<=a;t++)e.push(t);else{let n=Math.max(t-1,1),r=n+3;r>a&&(r=a,n=Math.max(r-3,1));for(let t=n;t<=r;t++)e.push(t)}return e})();return(0,i.jsxs)("div",{className:"flex justify-between gap-6 w-3/5 items-center",children:[(0,i.jsxs)("button",{onClick:()=>n(t-1),disabled:1===t,className:"flex items-center gap-2 border border-[#5A5858] text-sm text-dark_grey rounded-lg hover:bg-gray-200 px-5 py-2 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors duration-200",children:[(0,i.jsx)(ia.QVr,{className:"text-[16px]"}),(0,i.jsx)("span",{children:"Previous"})]}),r.map(((e,a)=>(0,i.jsx)("button",{onClick:()=>n(e),className:"w-8 h-8 p-4 flex items-center justify-center text-sm font-medium rounded-full ".concat(t===e?"bg-[indigo] shadow-md text-white":"bg-gray-200 text-dark_grey"),children:e},a))),(0,i.jsxs)("button",{onClick:()=>n(t+1),disabled:t===a,className:"flex items-center gap-2 border border-[#5A5858] text-sm text-dark_grey rounded-lg  px-5 py-2 ",children:[(0,i.jsx)("span",{children:"Next"}),(0,i.jsx)(Lt.Z0P,{className:"text-[16px]"})]})]})},oa=e=>{let{data:t,onclose:a}=e;const[n,s]=(0,r.useState)(!1),l=()=>{s(!n)};return(0,i.jsx)("section",{className:"fixed top-0 left-0 inset-0 bg-black bg-opacity-80 center w-full h-screen z-[60]",children:(0,i.jsx)("div",{className:"bg-white w-full max-w-xl max-h-[90vh]  rounded-lg relative overflow-y-auto",children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"relative center mb-8",children:[" ",(0,i.jsx)("h6",{className:"text-xl font-bold underline text-dark_grey",children:"View Form"}),(0,i.jsx)("button",{className:"absolute top-0 right-4 w-8 h-8 border rounded-full text-xl",onClick:a,children:"\xd7"})]}),[{label:"UserID",value:t.empID},{label:"Name",value:t.name},{label:"Type",value:t.selectType},{label:"Official Email",value:t.officialEmail},{label:"Password",value:n?t.password:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",isPassword:!0}].map(((e,t)=>(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[(0,i.jsx)("strong",{className:"w-full",children:e.label}),(0,i.jsxs)("span",{className:"flex items-center gap-3 col-span-2",children:[": \xa0",e.value,e.isPassword&&(0,i.jsxs)("div",{className:" center",children:[" ",(0,i.jsx)("button",{type:"button",className:" text-dark_grey underline text-xl",onClick:l,children:n?(0,i.jsx)(Lt.Ny1,{}):(0,i.jsx)(Lt.mx3,{})})]})]}),"            "]},t))),(0,i.jsx)("div",{className:"center mt-7",children:(0,i.jsx)("button",{className:"primary_btn text_size_4",onClick:a,children:"Okay"})})]})})})},da=()=>{const{empPIData:e,userData:t,workInfoData:a}=(0,r.useContext)(s.Y),{SubmitDeletedUser:l}=(()=>{const e=(0,ge.D)();return{SubmitDeletedUser:(0,r.useCallback)((async t=>{let{deleteUserData:a}=t;if(!a)throw new Error("Missing required parameters");const{id:n}=a,r={id:n,status:"InActive"};console.log(n);try{await e.graphql({query:Te,variables:{input:r,limit:2e4}}).then((e=>{window.location.href="/user"}))}catch(s){console.log("Error deleting user:",s)}}),[e])}})(),[o,d]=(0,r.useState)([]),[c,p]=(0,r.useState)([]),[m,u]=(0,r.useState)(!1),[h,g]=(0,r.useState)([]),[f,v]=(0,r.useState)([]),[b,N]=(0,r.useState)([]),[j,D]=(0,r.useState)([]),w=(0,n.Zp)(),[A,S]=(0,r.useState)(1),[E,I]=(0,r.useState)(30),[C,k]=(0,r.useState)([]);(0,r.useEffect)((()=>{const e=(A-1)*E,t=(C.length>0?C:c).sort(((e,t)=>{const a=/\d+$/,n=e.empID.match(a)?e.empID.match(a)[0].padStart(5,"0"):"",r=t.empID.match(a)?t.empID.match(a)[0].padStart(5,"0"):"",s=e.empID.replace(a,"").toLowerCase(),i=t.empID.replace(a,"").toLowerCase();return s!==i?s.localeCompare(i):n.localeCompare(r)})).slice(e,e+E);N(t)}),[A,E,c,C]);const R=Math.ceil((C.length>0?C.length:c.length)/E),T=()=>{u(!m)};(0,r.useEffect)((()=>{(async()=>{try{const n=t.map((t=>{const n=e.find((e=>e.empID===t.empID)),r=a?a.find((e=>e.empID===t.empID)):{};return n?(0,x.A)((0,x.A)((0,x.A)({},t),n),r):null})).filter(Boolean).filter((e=>"Active"===e.status));d(n),p(n)}catch(n){console.log(n)}})()}),[t,e]);const P=(A-1)*E;return(0,i.jsxs)("section",{className:" flex justify-center px-10 py-20 bg-[#F8F8F8] min-h-screen relative",onClick:()=>{D([])},children:[(0,i.jsxs)("div",{className:"bg-white flex flex-col gap-10 rounded-b-lg shadow-lg max-w-[99%] w-full",children:[(0,i.jsx)("article",{className:"bg-[#E1E1E2] py-3 shadow-md rounded-t-lg text-center",children:(0,i.jsx)("h1",{className:"text-dark_grey text-2xl font-semibold",children:"User List"})}),(0,i.jsx)("section",{children:(0,i.jsxs)("div",{className:"flex items-center justify-between  px-14",children:[(0,i.jsxs)("div",{className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2",onClick:()=>{w("/addNewForm",{state:{addUserData:{userValue:t,employeeValue:e,workValue:a}}})},children:[" ",(0,i.jsx)("span",{className:"text-2xl",children:"+"})," Add"]}),(0,i.jsx)(aa,{allEmpDetails:c,searchUserList:e=>{k(e),S(1)},searchIcon2:(0,i.jsx)(y.zfp,{}),placeholder:"Employee ID",border:"rounded-lg",filteredEmployees:j,setFilteredEmployees:D})]})}),(0,i.jsxs)("div",{className:"flex flex-col flex-grow",children:[(0,i.jsx)("div",{className:"leaveManagementTable h-[70vh] max-h-[calc(70vh-7rem)] w-full overflow-y-auto  px-5",children:b&&b.length>0?(0,i.jsxs)("table",{className:"w-full mx-auto bg-white pt-10",children:[(0,i.jsx)("thead",{className:"px-5 bg-[#939393] text-white sticky top-0 left-0",children:(0,i.jsxs)("tr",{className:"text_size_5  px-5",children:[(0,i.jsx)("th",{className:"px-5 text-start py-3",children:"S.No"}),(0,i.jsx)("th",{className:"px-5 text-start py-3",children:"EMP ID"}),(0,i.jsx)("th",{className:"px-5 text-start  py-3",children:"Name"}),(0,i.jsx)("th",{className:"px-5 text-start py-3",children:"Type"}),(0,i.jsx)("th",{className:"px-5 text-start py-3",children:"Official Email Id"}),(0,i.jsx)("th",{className:"px-5 text-start py-3",children:"Password"}),(0,i.jsx)("th",{className:"px-5 text-center py-3",children:"ViewForm"}),(0,i.jsx)("th",{className:"px-5 text-start py-3",children:"Actions"})]})}),(0,i.jsx)("tbody",{children:b&&b.length>0?b.map(((n,r)=>{const s=P+r+1;return(0,i.jsxs)("tr",{className:"shadow-lg ",children:[(0,i.jsx)("td",{className:"px-5 py-3 ",children:s}),(0,i.jsx)("td",{className:"px-5 py-3 ",children:n.empID}),(0,i.jsx)("td",{className:"px-5 py-3 break-words overflow-hidden ",children:n.name}),(0,i.jsx)("td",{className:"px-5 py-3 ",children:n.selectType}),(0,i.jsx)("td",{className:"px-5 py-3 break-words overflow-hidden ",children:n.officialEmail}),(0,i.jsx)("td",{className:"py-3 text-center break-words overflow-hidden",children:(0,i.jsx)("input",{type:"password",className:"outline-none w-full text-center  ",value:n.password,readOnly:!0})}),(0,i.jsx)("td",{className:" py-3",children:(0,i.jsx)("span",{className:" text-[blue] underline flex justify-center",onClick:()=>{T(),g(n)},children:"View"})}),(0,i.jsx)("td",{className:"px-5 py-2",children:(0,i.jsxs)("div",{className:"flex gap-5",children:[(0,i.jsx)("span",{onClick:()=>{(async n=>{w("/addNewForm",{state:{editUserData:{storedValue:{data:n,title:"Edit User"},userValue:t,employeeValue:e,workValue:a}}})})(n)},children:(0,i.jsx)(Zt.Ics,{})}),(0,i.jsx)("span",{onClick:()=>{(e=>{const a=t.find((t=>t.empID===e.empID));l({deleteUserData:a})})(n)},children:(0,i.jsx)(Zt.Ku6,{})})]})})]},r)})):(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"6",className:"px-6 py-6 text-center text-dark_ash text_size_5",children:"No User List Available Here"})})})]}):(0,i.jsx)("p",{className:"px-6 py-6 text-center text-dark_ash text_size_5",children:"Loading Data..."})}),(0,i.jsx)("div",{className:"flex justify-center mt-auto",children:b&&b.length>0&&(0,i.jsx)("div",{className:"ml-[650px] flex justify-between px-10 py-8",children:(0,i.jsx)(la,{currentPage:A,totalPages:R,onPageChange:e=>{e>=1&&e<=R&&S(e)}})})})]})]}),m&&(0,i.jsx)(oa,{data:h,onclose:T})]})},ca=async e=>{let{requestId:t,newStatus:a,newRemark:n}=e;if(!t)throw new Error("Missing required parameter: requestId");if(void 0===a&&void 0===n)throw new Error("At least one of newStatus or newRemark must be provided.");const r=(0,ge.D)(),s=(0,x.A)((0,x.A)({id:t},void 0!==a&&{status:a}),void 0!==n&&{remarkReq:n});try{return await r.graphql({query:"\n  mutation UpdateEmpRequisition(\n    $input: UpdateEmpRequisitionInput!\n    $condition: ModelEmpRequisitionConditionInput\n  ) {\n    updateEmpRequisition(input: $input, condition: $condition) {\n      id\n      department\n      justification\n      project\n      position\n      quantity\n      qualification\n      reasonForReq\n      replacementFor\n      tentativeDate\n      status\n      remarkReq\n      reqName\n      requestorID\n      approverID\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:s,limit:2e4}})}catch(i){throw console.error("Error updating requisition data:",i),i}},pa=(0,ge.D)(),ma=e=>{let{isVisible:t,onClose:a,isGmView:n=!1,selectedRequest:s,onStatusChange:l}=e;const[o,d]=(0,r.useState)([]),[c,p]=(0,r.useState)(null),[m,u]=(0,r.useState)(!1),[x,h]=(0,r.useState)(""),g=localStorage.getItem("userType"),f={reqName:"",department:"",position:"",project:"",quantity:"",reasonForReq:"",justification:"",replacementFor:"",qualification:"",tentativeDate:new Date},y=s||f;(0,r.useEffect)((()=>{if(t){(async()=>{try{var e,t;const a=await pa.graphql({query:fe.Kc}),n=null===a||void 0===a||null===(e=a.data)||void 0===e||null===(t=e.listEmpRequisitions)||void 0===t?void 0:t.items.map((e=>({id:e.id,requestorID:e.requestorID,approverID:e.approverID,reqName:e.reqName,department:e.department,position:e.position,project:e.project,quantity:e.quantity,reasonForReq:e.reasonForReq,justification:e.justification,replacementFor:e.replacementFor||"N/A",qualification:e.qualification,tentativeDate:e.tentativeDate,status:e.status,remarkReq:e.remarkReq,date:e.createdAt})));d(n)}catch(a){console.error("Error fetching requisition data:",a),p("Error fetching requisition data")}})()}}),[t]);const N=async e=>{try{const t=await ca({requestId:s.id,newStatus:e});u(!0),h("Form Status Updated Successfully"),console.log("Status updated successfully:",t),l&&l({id:s.id,status:e});const{reqName:n,position:r,project:i,requestorEmail:o,humanResourceManagerEmail:d}=y;o?await Me("Your Requisition Request Has Been ".concat(y.status),"Dear ".concat(n,", \n  \n          Your requisition request for the position of ").concat(r," under the project ").concat(i," has been ").concat(y.status," by the General Manager.\n  \n          View the details at: https://hr.adininworks.co"),"hr_no-reply@adininworks.com",o):console.error("Requestor email not found."),d?await Me("Requisition ".concat(y.status),"Dear HR Team,\n  \n          The requisition request for the position of ".concat(r," under the project ").concat(i,", submitted by ").concat(n,", has been ").concat(y.status," by the General Manager.\n  \n          Please proceed with the necessary actions.\n  \n          View the details at: https://hr.adininworks.co\n  \n          Regards, \n          GM"),"hr_no-reply@adininworks.com",d):console.error("HR email not found."),setTimeout((()=>a()),4e3)}catch(t){console.error("Error updating status",t)}},j=e=>"Rejected"===e?"text-[red]":"Approved"===e?"text-[#339933]":"text-[#ff8b3d]";return(0,i.jsx)("div",{className:"fixed inset-0 ".concat(t?"flex":"hidden"," bg-grey bg-opacity-75 flex items-center justify-center z-50"),children:(0,i.jsxs)("div",{className:"bg-white w-full max-w-[600px] rounded-lg relative ",children:[(0,i.jsxs)("div",{className:"text-center p-2",children:[(0,i.jsx)("img",{src:he.A,alt:"Logo",className:"max-w-[250px] w-full mx-40 mb-3"}),(0,i.jsx)("h2",{className:"text-xl font-bold underline my-6",children:"Employee Requisition Form"}),(0,i.jsx)("button",{onClick:a,className:"absolute top-5 right-6 border rounded-full p-1",children:(0,i.jsx)(b.RQJ,{size:20})})]}),(0,i.jsxs)("form",{className:"max-h-[500px] overflow-y-auto px-10",children:[[{label:"Requested Manager",value:y.reqName},{label:"Department",value:y.department},{label:"Position",value:y.position},{label:"Project",value:y.project},{label:"Quantity",value:y.quantity},{label:"Reason for Request",value:y.reasonForReq},{label:"Justification",value:y.justification},{label:"Replacement For",value:y.replacementFor||"N/A"},{label:"Qualification",value:y.qualification},{label:"Tentative Date To Mobilize",value:(0,v.GP)(new Date(y.tentativeDate),"dd-MM-yyyy")}].map(((e,t)=>(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[(0,i.jsx)("strong",{className:"w-full",children:e.label}),(0,i.jsxs)("span",{className:"w-full col-span-2",children:[": \xa0",e.value]})]},t))),"GM"===g&&n&&(0,i.jsx)(i.Fragment,{children:"Approved"!==y.status&&"Rejected"!==y.status?(0,i.jsxs)("div",{className:"flex justify-center gap-10 mb-10",children:[(0,i.jsx)("button",{className:"hover:bg-medium_red hover:border-medium_red border-2 border-yellow px-4 py-1 shadow-xl rounded-lg",onClick:()=>N("Rejected"),children:"Reject"}),(0,i.jsx)("button",{className:"hover:bg-[#faf362] border-2 border-yellow px-4 py-1 shadow-xl rounded-lg",onClick:()=>N("Approved"),children:"Approve"})]}):(0,i.jsxs)("div",{className:"mx-10 mb-5 center gap-3 rounded-lg bg-gradient-to-r from-[#f5ee6ad7] via-[#faf362] to-[#f5ee6ad7] shadow-[0_4px_6px_rgba(255,250,150,0.5)]",children:[(0,i.jsx)("h3",{className:"text-lg text-[#615d5d] p-1.5 font-bold",children:"Requisition Status :"}),(0,i.jsx)("p",{className:"text-xl font-semibold ".concat(j(y.status)),children:y.status||"Pending"})]})}),!("GM"===g&&n)&&(0,i.jsxs)("div",{className:"mx-10 mb-5 center gap-3 rounded-lg [background:linear-gradient(to_right,_#f5ee6ad7,_#faf362,_#ffe89d,_#f5ee6ad7)] shadow-[0_4px_6px_rgba(255,250,150,0.5)]",children:[(0,i.jsx)("h3",{className:"text-lg text-[#615d5d] p-1.5 font-bold",children:"Requisition Status :"}),(0,i.jsx)("p",{className:"text-xl font-semibold ".concat(j(y.status)),children:y.status||"Pending"})]}),m&&(0,i.jsx)(Le,{text:x,notification:m,path:"/recrutiles/employreq"})]})]})})},ua=e=>{let{isOpen:t,onClose:a,requestId:n,initialRemarks:s,onRemarkUpdated:l}=e;const[o,d]=(0,r.useState)(""),[c,p]=(0,r.useState)(!1);(0,r.useEffect)((()=>{t&&d(s||"")}),[t,s]);return t?(0,i.jsx)("div",{className:"fixed inset-0 bg-grey bg-opacity-75 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-sm w-full",children:[(0,i.jsx)("h3",{className:"mb-4 text-xl font-semibold",children:"Remarks"}),(0,i.jsx)("textarea",{value:o,onChange:e=>d(e.target.value),rows:"4",className:"w-full p-2 border rounded-md resize-y",placeholder:"Enter your remarks here...","aria-label":"Remarks"}),(0,i.jsxs)("div",{className:"mt-4 flex justify-center",children:[(0,i.jsx)("button",{className:"hover:bg-grey border-2 border-grey hover:text-white px-4 py-1 mr-2 rounded-lg",onClick:()=>{d(""),a()},children:"Cancel"}),(0,i.jsx)("button",{className:"hover:bg-[#faf362] border-2 border-yellow px-4 py-1 rounded-lg ".concat(c?"opacity-50 cursor-not-allowed":""),onClick:async()=>{p(!0);try{const e=await ca({requestId:n,newRemark:o});console.log("Remark updated successfully:",e),l&&l(n,o)}catch(e){console.error("Error updating remark:",e)}finally{p(!1),d(""),a()}},disabled:c,children:c?"Saving...":"Save"})]})]})}):null},xa=(0,ge.D)(),ha=e=>{let{}=e;const[t,a]=(0,r.useState)([]),[n,s]=(0,r.useState)(!1),[l,o]=(0,r.useState)(null),[d,c]=(0,r.useState)(null),[p,m]=(0,r.useState)(null),[u,h]=(0,r.useState)([]),[g,f]=(0,r.useState)({});(0,r.useEffect)((()=>{(async()=>{try{var e,t;const n=await xa.graphql({query:fe.Kc}),r=(null===n||void 0===n||null===(e=n.data)||void 0===e||null===(t=e.listEmpRequisitions)||void 0===t?void 0:t.items)||[];a(r),o(null)}catch(n){console.error("Error fetching requisition data:",n),o("Failed to fetch requisition data"),a([])}})()}),[]);return(0,r.useEffect)((()=>(document.body.style.overflow=n?"hidden":"auto",()=>{document.body.style.overflow="auto"})),[n]),(0,i.jsxs)("section",{className:"screen-size w-full mt-5 mb-1",children:[(0,i.jsxs)("div",{className:"mb-8 flex justify-between items-center",children:[(0,i.jsx)("button",{className:"bg-[#faf362] py-2 px-3 rounded-lg text-[18px] font-semibold",children:"Employee Requisition Review"}),(0,i.jsx)(aa,{allEmpDetails:t,searchUserList:h,searchIcon1:(0,i.jsx)(y.zfp,{}),placeholder:"Search by Name or Position"})]}),l&&(0,i.jsx)("div",{className:"text-[red] text-center mb-4",children:l}),t.length>0?(0,i.jsx)("div",{className:"h-[70vh] max-h-[calc(70vh-7rem)] w-full overflow-y-auto rounded-lg",children:(0,i.jsxs)("table",{className:"w-full",children:[(0,i.jsx)("thead",{className:"bg-[#939393] text-white sticky top-0 rounded-lg",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"pl-4 py-4",children:"Manager"}),(0,i.jsx)("th",{className:"py-4",children:"Position"}),(0,i.jsx)("th",{className:"py-4",children:"Quantity"}),(0,i.jsx)("th",{className:"py-4",children:"Received Date"}),(0,i.jsx)("th",{className:"py-4",children:"Form"}),(0,i.jsx)("th",{className:"py-4",children:"Status"}),(0,i.jsx)("th",{className:"py-4",children:"Remarks"})]})}),(0,i.jsx)("tbody",{className:"bg-white text-center",children:(u.length>0?u:t).sort(((e,t)=>new Date(t.createdAt)-new Date(e.createdAt))).map((e=>{return(0,i.jsxs)("tr",{className:"shadow-[0_3px_6px_1px_rgba(0,0,0,0.2)] hover:bg-medium_blue",children:[(0,i.jsx)("td",{className:"py-4 pl-4 max-w-[200px] text-ellipsis overflow-hidden",children:e.reqName}),(0,i.jsx)("td",{className:"py-4 max-w-[200px] text-ellipsis overflow-hidden",children:e.position}),(0,i.jsx)("td",{className:"py-4",children:e.quantity}),(0,i.jsx)("td",{className:"py-4",children:(0,v.GP)(new Date(e.createdAt),"dd-MM-yyyy")}),(0,i.jsx)("td",{className:"py-4 px-2",children:(0,i.jsx)("a",{href:"#",className:"text-[blue] font-semibold border-b-2 cursor-pointer",onClick:()=>(m(e),void s(!0)),children:"View"})}),(0,i.jsx)("td",{className:"py-4 font-semibold ".concat((t=e.status,"Rejected"===t?"text-[red]":"Approved"===t?"text-[#339933]":"Pending"===t?"text-dark_grey":"text-[#E8A317]")),children:e.status?e.status:"Pending"}),(0,i.jsxs)("td",{className:"py-4 center gap-2",children:[(0,i.jsx)("span",{className:"max-w-[200px] text-ellipsis overflow-hidden",children:e.remarkReq}),(0,i.jsx)("div",{className:"w-6 h-6 flex justify-center items-center",children:"GM"===localStorage.getItem("userType")&&!e.remarkReq&&(0,i.jsx)(Lt.Mbp,{className:"text-[brown] cursor-pointer",onClick:()=>c(e)})})]})]},e.id);var t}))})]})}):(0,i.jsx)("div",{className:"text-center py-4",children:"No Requisitions Found"}),(0,i.jsx)(ma,{isVisible:n,onClose:()=>{m(null),s(!1)},isGmView:"GM"===localStorage.getItem("userType"),selectedRequest:p,onStatusChange:e=>{a((t=>t.map((t=>t.id===e.id?(0,x.A)((0,x.A)({},t),{},{status:e.status}):t))))}}),(0,i.jsx)(ua,{isOpen:!!d,onClose:()=>{c(null)},requestId:null===d||void 0===d?void 0:d.id,initialRemarks:(null===d||void 0===d?void 0:d.remarkReq)||"",onRemarkUpdated:async(e,t)=>{a((a=>a.map((a=>a.id===e?(0,x.A)((0,x.A)({},a),{},{remarkReq:t}):a)))),f((t=>{const a=(0,x.A)((0,x.A)({},t),{},{[e]:!0});return localStorage.setItem("remarksSubmitted",JSON.stringify(a)),a}))}})]})};var ga=a(9698),fa=a(1462);const va=()=>{const e=(0,ge.D)();return{interviewDetails:(0,r.useCallback)((async t=>{let{InterviewValue:a}=t;if(!a)throw new Error("Missing required parameters or empID");try{const{interDate:t,interTime:n,venue:r,interType:s,bagdeNo:i,message:l,manager:o,candidateStatus:d,status:c,department:p,otherDepartment:m,id:u}=a,x={id:u,interDate:t,interTime:n,venue:r,interType:s,bagdeNo:i,message:l,manager:o,candidateStatus:d,status:c,department:p,otherDepartment:m};await e.graphql({query:Re,variables:{input:x,limit:2e4}})}catch(n){throw console.error("Error updating data:",n),n}}),[])}},ya=e=>{let{candidate:t}=e;const{IVSSDetails:a}=(0,r.useContext)(s.Y),{interviewDetails:n}=va(),[l,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)({interview:{date:"",time:"",venue:"",interviewType:"",interviewer:"",message:""}});console.log(t),(0,r.useEffect)((()=>{if(a.length>0&&null!==t&&void 0!==t&&t.tempID){const e=a.find((e=>e.tempID===t.tempID));e&&c({interview:{date:e.interDate.split("T")[0],time:e.interTime,venue:e.venue,interviewType:e.interType,interviewer:e.manager,message:e.message}})}}),[a,null===t||void 0===t?void 0:t.tempID]);const p=(e,t)=>{c((a=>(0,x.A)((0,x.A)({},a),{},{interview:(0,x.A)((0,x.A)({},a.interview),{},{[e]:t})})))};return(0,i.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const r=a.find((e=>e.tempID===(null===t||void 0===t?void 0:t.tempID)));if(!r)return console.error("No interview data found for the selected candidate."),void alert("No interview data found for the selected candidate.");const s=null===r||void 0===r?void 0:r.id;if(!s)return console.error("Interview schedule ID not found."),void alert("Interview schedule ID not found.");try{await n({InterviewValue:{id:s,interDate:d.interview.date,interTime:d.interview.time,venue:d.interview.venue,interType:d.interview.interviewType,message:d.interview.message,manager:d.interview.interviewer}}),console.log("Data stored successfully..."),o(!0)}catch(i){console.error("Error submitting interview details:",i),alert("Failed to update interview details. Please try again.")}},children:[(0,i.jsx)("div",{className:"p-4 grid grid-cols-2 gap-5",children:[{field:"date",label:"Date",type:"date"},{field:"time",label:"Time",type:"time"},{field:"venue",label:"Venue",type:"text"},{field:"interviewType",label:"Interview Type",type:"text"},{field:"interviewer",label:"Interviewer",type:"text"},{field:"message",label:"Message",type:"textarea"}].map((e=>{var t;return(0,i.jsxs)("label",{className:"block mb-4",children:[e.label,":","file"!==e.type&&"textarea"!==e.type?(0,i.jsx)("input",{type:e.type,className:"w-full border p-2 rounded mt-1",value:d.interview[e.field],onChange:t=>p(e.field,t.target.value)}):"textarea"===e.type?(0,i.jsx)("textarea",{className:"w-full border p-2 rounded mt-1",value:d.interview[e.field],onChange:t=>p(e.field,t.target.value)}):(0,i.jsxs)("div",{className:"flex items-center mt-1",children:[(0,i.jsx)("input",{type:"file",className:"hidden",id:e.field,onChange:t=>{return a=e.field,n=t.target.files[0],void c((e=>(0,x.A)((0,x.A)({},e),{},{interview:(0,x.A)((0,x.A)({},e.interview),{},{[a]:n})})));var a,n}}),(0,i.jsxs)("label",{htmlFor:e.field,className:"flex items-center cursor-pointer text-grey",children:[(0,i.jsx)(fa.Kh2,{className:"mr-2 text-lg text-[#ab1234]"}),(null===(t=d.interview[e.field])||void 0===t?void 0:t.name)||"Upload PDF"]})]})]},e.field)}))}),(0,i.jsx)("div",{className:"center",children:(0,i.jsx)("button",{type:"submit",className:"py-1 px-5 rounded-xl shadow-lg border-2 border-yellow hover:bg-yellow",children:"Submit"})}),l&&(0,i.jsx)(Le,{text:"Candidate Selected Successfully",notification:l,path:"/recrutiles/status"})]})},ba=(0,ge.D)(),Na=()=>{const[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)([]),[s,i]=(0,r.useState)(!0),[l,o]=(0,r.useState)(null);return(0,r.useEffect)((()=>{(async()=>{i(!0);try{var e,a,r,s,l,d;const[i,o,c]=await Promise.all([ba.graphql({query:fe.c2,variables:{limit:2e4}}),ba.graphql({query:fe.$1,variables:{limit:2e4}}),ba.graphql({query:fe.g,variables:{limit:2e4}})]),p=(null===i||void 0===i||null===(e=i.data)||void 0===e||null===(a=e.listInterviewSchedules)||void 0===a?void 0:a.items)||[],m=(null===o||void 0===o||null===(r=o.data)||void 0===r||null===(s=r.listPersonalDetails)||void 0===s?void 0:s.items)||[],u=(null===c||void 0===c||null===(l=c.data)||void 0===l||null===(d=l.listLocalMobilizations)||void 0===d?void 0:d.items)||[];n(p);const h=p.reduce(((e,t)=>(e[t.tempID]=t,e)),{}),g=u.reduce(((e,t)=>(e[t.tempID]=t,e)),{}),f=m.map((e=>(0,x.A)((0,x.A)({},e),{},{interviewSchedules:h[e.tempID]||{},localMobilization:g[e.tempID]||{}})));t(f)}catch(c){o(c),console.error("Error fetching data:",c)}finally{i(!1)}})()}),[]),{mergedInterviewData:e,interviewSchedules:a,loading:s,error:l}},ja=e=>{let{candidate:t}=e;const{mergedInterviewData:a}=Na(),{interviewDetails:n}=va(),{IVSSDetails:l}=(0,r.useContext)(s.Y),[o,d]=(0,r.useState)(!1),[c,p]=(0,r.useState)({interview:{position:"",department:"",otherDepartment:""}}),{register:m,formState:{errors:u},watch:h}=(0,it.mN)({resolver:(0,lt.t)(Xt.Ik().shape({position:Xt.Yj().required("Position is required"),department:Xt.Yj().required("Department is required"),otherDepartment:Xt.Yj().when("department",{is:"Other",then:Xt.Yj().required("Please specify the department")})})),defaultValues:{position:"",department:"",otherDepartment:""}});(0,r.useEffect)((()=>{if(a.length>0&&null!==t&&void 0!==t&&t.tempID){const r=a.find((e=>e.tempID===t.tempID));var e,n;if(r)p({interview:{position:r.position,department:null===(e=r.interviewSchedules)||void 0===e?void 0:e.department,otherDepartment:null===(n=r.interviewSchedules)||void 0===n?void 0:n.otherDepartment}})}}),[a,null===t||void 0===t?void 0:t.tempID]);const g=(e,t)=>{p((a=>(0,x.A)((0,x.A)({},a),{},{interview:(0,x.A)((0,x.A)({},a.interview),{},{[e]:t})})))};return(0,i.jsxs)("form",{onSubmit:async e=>{var r;e.preventDefault();const s=a.find((e=>e.tempID===(null===t||void 0===t?void 0:t.tempID)));if(!s)return console.error("No interview data found for the selected candidate."),void alert("No interview data found for the selected candidate.");const i=null===s||void 0===s||null===(r=s.interviewSchedules)||void 0===r?void 0:r.id;if(!i)return console.error("Interview schedule ID not found."),void alert("Interview schedule ID not found.");try{await n({InterviewValue:{id:i,department:c.interview.department,otherDepartment:c.interview.otherDepartment}}),console.log("Data stored successfully..."),d(!0)}catch(l){console.error("Error submitting interview details:",l),alert("Failed to update interview details. Please try again.")}},className:"p-4",children:[(0,i.jsx)("div",{className:"mb-4 max-w-[400px]",children:(0,i.jsxs)("label",{className:"block mb-2",children:["Selected Position",(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text"},m("position")),{},{className:"w-full p-2 border rounded mt-1",value:c.interview.position,onChange:e=>g("position",e.target.value)})),u.position&&(0,i.jsx)("p",{className:"text-[red]",children:u.position.message})]})}),(0,i.jsx)("div",{className:"mb-4 max-w-[400px]",children:(0,i.jsxs)("label",{className:"block mb-2",children:["Selected Department:",(0,i.jsxs)("select",(0,x.A)((0,x.A)({},m("department")),{},{className:"w-full p-2 border rounded mt-1",value:c.interview.department,onChange:e=>g("department",e.target.value),children:[(0,i.jsx)("option",{value:""}),Tt.map(((e,t)=>(0,i.jsx)("option",{value:e.value,children:e.label},t)))]})),u.department&&(0,i.jsx)("p",{className:"text-[red]",children:u.department.message})]})}),"Other"===h("department")&&(0,i.jsx)("div",{className:"mb-4 max-w-[400px]",children:(0,i.jsxs)("label",{className:"block mb-2",children:["Other Department:",(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text"},m("otherDepartment")),{},{className:"w-full p-2 border rounded mt-1",placeholder:"Enter the department name",value:c.interview.otherDepartment,onChange:e=>g("otherDepartment",e.target.value)})),u.otherDepartment&&(0,i.jsx)("p",{className:"text-[red]",children:u.otherDepartment.message})]})}),(0,i.jsx)("div",{className:"center mt-10",children:(0,i.jsx)("button",{type:"submit",className:"py-1 px-5 rounded-xl shadow-lg border-2 border-yellow hover:bg-yellow",children:"Submit"})})]})},Da=e=>{let{label:t,register:a,onChangeFunc:n,name:r,error:s,fileName:l}=e;return(0,i.jsxs)("div",{className:"flex flex-col",children:[t&&(0,i.jsx)("label",{className:"text_size_5",children:t}),(0,i.jsxs)("label",{className:"w-full mt-2 max-w-[300px] flex items-center px-3 py-3 text_size_7 bg-lite_skyBlue border border-[#dedddd] rounded cursor-pointer",children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"file",className:"hidden"},a),{},{onChange:n,accept:".pdf"})),(0,i.jsxs)("span",{className:"ml-2 text-grey font-normal flex justify-between items-center gap-20 text-sm",children:[(0,i.jsx)(ft.gwN,{className:"text-lg"})," PDF Only"]})]}),(0,i.jsx)("p",{className:"text-grey text-sm my-1",children:l||""}),s&&(0,i.jsx)("p",{className:"text-[red] text-[12px] mt-1",children:s.message})]})},wa=e=>{var t;let{field:a,register:n,handleFileChange:r,uploadedFileNames:s,errors:l}=e;return(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{className:"mb-1 text_size_6",children:a.label}),"text"===a.type||"date"===a.type?(0,i.jsx)("input",(0,x.A)((0,x.A)({type:a.type},n(a.name)),{},{className:"input-field"})):"file"===a.type?(0,i.jsxs)("label",{className:"w-full mt-2  flex items-center px-3 py-3 text_size_7 bg-lite_skyBlue border border-[#dedddd] rounded cursor-pointer",children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"file",className:"hidden",accept:".pdf"},n(a.name)),{},{onChange:e=>r(e,a.name)})),(0,i.jsxs)("span",{className:"ml-2 text-grey font-normal flex justify-between items-center gap-20",children:[(0,i.jsx)(ft.gwN,{})," PDF Only"]})]}):null,s[a.name]&&(0,i.jsx)("p",{className:"text-grey text-sm my-1",children:s[a.name]}),!s[a.name]&&l[a.name]&&(0,i.jsx)("p",{className:"text-[red] text-[12px] pt-2",children:null===(t=l[a.name])||void 0===t?void 0:t.message})]})},Aa=()=>{const e=(0,ge.D)();return{loiDetails:(0,r.useCallback)((async t=>{let{LoiValue:a}=t;if(!a)throw new Error("Missing required parameters or empID");try{const{mobSignDate:t,mobFile:n,paafApproveDate:r,paafFile:s,loiIssueDate:i,loiAcceptDate:l,loiDeclineDate:o,declineReason:d,loiFile:c,cvecApproveDate:p,cvecFile:m,id:u}=a,x={id:u,mobSignDate:t,mobFile:n,paafApproveDate:r,paafFile:s,loiIssueDate:i,loiAcceptDate:l,loiDeclineDate:o,declineReason:d,loiFile:c,cvecApproveDate:p,cvecFile:m};await e.graphql({query:"\n  mutation UpdateLocalMobilization(\n    $input: UpdateLocalMobilizationInput!\n    $condition: ModelLocalMobilizationConditionInput\n  ) {\n    updateLocalMobilization(input: $input, condition: $condition) {\n      id\n      tempID\n      mobSignDate\n      mobFile\n      paafApproveDate\n      paafFile\n      loiIssueDate\n      loiAcceptDate\n      loiDeclineDate\n      declineReason\n      loiFile\n      cvecApproveDate\n      cvecFile\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:x,limit:2e4}})}catch(n){throw console.error("Error updating data:",n),n}}),[])}},Sa=["LOI","CVEC","PAAF","MOBILIZATION","SAWP","SAWP","DOE","NLMS","Bank Guarantee","JITPA","Labour Deposit","Immigration","Air Ticket","NonLocal Mobilization"],Ea=e=>{let{candidate:t}=e;const{localMobilization:a,isLoading:n,notification:s,error:l}=Gt(),{loiDetails:o}=Aa(),{interviewDetails:d}=va(),{mergedInterviewData:c}=Na(),[p,m]=(0,r.useState)({loiFile:null}),[u,h]=(0,r.useState)({loiFile:null}),{register:g,handleSubmit:f,watch:v,setValue:y,formState:{errors:b}}=(0,it.mN)(),[N,j]=(0,r.useState)({interview:{loiIssueDate:"",loiAcceptDate:"",loiDeclineDate:"",declineReason:"",loiFile:"",tempID:"",status:""}}),D=v("loiFile",""),w=e=>"string"===typeof e&&e?e.split("/").pop():"";(0,r.useEffect)((()=>{if(c.length>0){const e=c.find((e=>e.tempID===t.tempID));e&&(j({interview:{loiIssueDate:e.localMobilization.loiIssueDate,loiAcceptDate:e.localMobilization.loiAcceptDate,loiDeclineDate:e.localMobilization.loiDeclineDate,declineReason:e.localMobilization.declineReason,loiFile:e.localMobilization.loiFile,status:e.interviewSchedules.status,tempID:e.tempID}}),e.localMobilization.loiFile&&m((t=>(0,x.A)((0,x.A)({},t),{},{loiFile:w(e.localMobilization.loiFile)}))))}}),[c,t.tempID]);const A=(e,t)=>{j((a=>(0,x.A)((0,x.A)({},a),{},{interview:(0,x.A)((0,x.A)({},a.interview),{},{[e]:t})})))};return(0,i.jsxs)("form",{children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-5 mt-5",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"loiIssueDate",children:"Date of Issue"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"date",id:"loiIssueDate"},g("loiIssueDate",{required:"Date of Issue is required"})),{},{value:N.interview.loiIssueDate,onChange:e=>A("loiIssueDate",e.target.value)})),b.loiIssueDate&&(0,i.jsx)("p",{className:"text-[red] text-xs",children:b.loiIssueDate.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"loiAcceptDate",children:"Date of Acceptance"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"date",id:"loiAcceptDate"},g("loiAcceptDate")),{},{value:N.interview.loiAcceptDate,onChange:e=>A("loiAcceptDate",e.target.value)})),b.loiAcceptDate&&(0,i.jsx)("p",{className:"text-[red] text-xs",children:b.loiAcceptDate.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"loiDeclineDate",children:"Date of Decline"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"date",id:"loiDeclineDate"},g("loiDeclineDate")),{},{value:N.interview.loiDeclineDate,onChange:e=>A("loiDeclineDate",e.target.value)})),b.loiDeclineDate&&(0,i.jsx)("p",{className:"text-[red] text-xs",children:b.loiDeclineDate.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"declineReason",children:"Decline Reason"}),(0,i.jsx)("textarea",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",id:"declineReason",rows:"2"},g("declineReason")),{},{value:N.interview.declineReason,onChange:e=>A("declineReason",e.target.value)})),b.declineReason&&(0,i.jsx)("p",{className:"text-[red] text-xs",children:b.declineReason.message})]}),(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"flex items-center justify-between mt-3 mb-5 gap-5",children:(0,i.jsx)("div",{children:(0,i.jsx)(Da,(0,x.A)((0,x.A)({label:"Upload File",onChangeFunc:e=>(async(e,t)=>{const a=e.target.files[0];y(t,a),a&&"loiFile"===t&&(await pt(a,"loiFile",h,"personName"),m((e=>(0,x.A)((0,x.A)({},e),{},{loiFile:a.name}))))})(e,"loiFile")},g("loiFile")),{},{accept:"application/pdf",className:"hidden",fileName:p.loiFile||w(D),value:N.interview.loiFile}))})})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"status",children:"Status"}),(0,i.jsx)("select",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",id:"status"},g("status")),{},{value:N.interview.status,onChange:e=>A("status",e.target.value),children:Sa.map(((e,t)=>(0,i.jsx)("option",{value:e,children:e},t)))}))]})]}),(0,i.jsxs)("div",{className:"center mt-5",children:[(0,i.jsx)("button",{type:"submit",className:"py-1 px-5 rounded-xl shadow-lg border-2 border-yellow hover:bg-yellow",disabled:n,onClick:async e=>{const n=c.find((e=>e.tempID===(null===t||void 0===t?void 0:t.tempID))),r=(null===n||void 0===n||n.id,{loiIssueDate:e.loiIssueDate,loiAcceptDate:e.loiAcceptDate,loiDeclineDate:e.loiDeclineDate,declineReason:e.declineReason,loiFile:u.loiFile,tempID:t.tempID});try{await a(r)}catch(s){console.error("LOI creation failed:",s)}},children:n?"Submitting...":"Submit"}),(0,i.jsx)("button",{type:"submit",className:"py-1 px-5 rounded-xl shadow-lg border-2 border-yellow hover:bg-yellow",disabled:n,onClick:async e=>{e.preventDefault();const a=c.find((e=>e.tempID===(null===t||void 0===t?void 0:t.tempID))),n=a.localMobilization.id,r=a.interviewSchedules.id,s={id:n,loiIssueDate:N.interview.loiIssueDate,loiAcceptDate:N.interview.loiAcceptDate,loiDeclineDate:N.interview.loiDeclineDate,declineReason:N.interview.declineReason,loiFile:u.loiFile||N.interview.loiFile,tempID:t.tempID},i={id:r,department:N.interview.department,otherDepartment:N.interview.otherDepartment,status:N.interview.status};try{await o({LoiValue:s}),await d({InterviewValue:i}),console.log("status",i),console.log("Data updated successfully...")}catch(l){console.error("Error updating LOI:",l),alert("Failed to update LOI. Please try again.")}},children:n?"Updating...":"Update"}),s&&(0,i.jsx)("p",{className:"text-green-500",children:"LOI created successfully!"}),l&&(0,i.jsx)("p",{className:"text-red-500",children:l.message})]})]})},Ia=Xt.Ik().shape({cvecApproveDate:Xt.p6().notRequired(),cvecFile:Xt.gl().nullable().required("File is required").test("fileType","Only PDF files are allowed",(e=>!!e&&"application/pdf"===e.type))}),Ca=e=>{let{candidate:t}=e;const{mergedInterviewData:a}=Na(),{loiDetails:n}=Aa(),{interviewDetails:s}=va(),[l,o]=(0,r.useState)({interview:{id:"",cvecApproveDate:"",cvecFile:[],status:""}}),[d,c]=(0,r.useState)({cvecFile:null}),[p,m]=(0,r.useState)({cvecFile:null}),{register:u,watch:h,formState:{errors:g},setValue:f}=(0,it.mN)({resolver:(0,lt.t)(Ia)}),v=h("cvecFile","");(0,r.useEffect)((()=>{if(a.length>0&&null!==t&&void 0!==t&&t.tempID){const e=a.find((e=>e.tempID===t.tempID));e&&o({interview:{cvecApproveDate:e.localMobilization.cvecApproveDate,cvecFile:e.localMobilization.cvecFile,status:e.interviewSchedules.status}}),e.localMobilization.cvecFile&&c((t=>(0,x.A)((0,x.A)({},t),{},{cvecFile:y(e.localMobilization.cvecFile)})))}}),[a,null===t||void 0===t?void 0:t.tempID]);const y=e=>"string"===typeof e&&e?e.split("/").pop():"",b=(e,t)=>{o((a=>(0,x.A)((0,x.A)({},a),{},{interview:(0,x.A)((0,x.A)({},a.interview),{},{[e]:t})})))};return(0,i.jsxs)("form",{onSubmit:async e=>{var r;e.preventDefault();const i=a.find((e=>e.tempID===(null===t||void 0===t?void 0:t.tempID)));if(!i)return console.error("No interview data found for the selected candidate."),void alert("No interview data found for the selected candidate.");const o=null===i||void 0===i||null===(r=i.localMobilization)||void 0===r?void 0:r.id,d=i.interviewSchedules.id;if(!o)return console.error("Interview schedule ID not found."),void alert("Interview schedule ID not found.");try{await n({LoiValue:{id:o,cvecApproveDate:l.interview.cvecApproveDate,cvecFile:p.cvecFile||l.cvecFile}}),await s({InterviewValue:{id:d,status:l.interview.status}}),console.log("Data stored successfully...")}catch(c){console.error("Error submitting interview details:",c),alert("Failed to update interview details. Please try again.")}},className:"p-5",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-5 mt-5",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"cvecApproveDate",children:"Approval Date"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"date",id:"cvecApproveDate"},u("cvecApproveDate")),{},{value:l.interview.cvecApproveDate,onChange:e=>b("cvecApproveDate",e.target.value)}))]}),(0,i.jsx)("div",{className:"",children:(0,i.jsx)("div",{className:"flex items-center gap-5 mt-1",children:(0,i.jsx)(Da,{label:"Upload File",className:"p-4",onChangeFunc:e=>(async(e,t)=>{const a=e.target.files[0];f(t,a),a&&"cvecFile"===t&&(await pt(a,"cvecFile",m,"personName"),c((e=>(0,x.A)((0,x.A)({},e),{},{cvecFile:a.name}))))})(e,"cvecFile"),accept:"application/pdf",register:u,fileName:d.cvecFile||y(v),value:l.interview.cvecFile})})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"status",children:"Status"}),(0,i.jsx)("select",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",id:"status"},u("status")),{},{value:l.interview.status,onChange:e=>b("status",e.target.value),children:Sa.map(((e,t)=>(0,i.jsx)("option",{value:e,children:e},t)))}))]})]}),(0,i.jsx)("div",{className:"mt-5 flex justify-center",children:(0,i.jsx)("button",{type:"submit",className:"py-1 px-5 rounded-xl shadow-lg border-2 border-yellow hover:bg-yellow",children:"Submit"})})]})},ka=Xt.Ik().shape({paafApproveDate:Xt.p6().notRequired(),paafFile:Xt.gl().nullable().required("File is required").test("fileType","Only PDF files are allowed",(e=>!!e&&"application/pdf"===e.type))}),Ra=e=>{let{candidate:t}=e;const{loiDetails:a}=Aa(),{mergedInterviewData:n}=Na(),{interviewDetails:s}=va(),[l,o]=(0,r.useState)({interview:{id:"",paafApproveDate:"",paafFile:"",status:""}}),[d,c]=(0,r.useState)({paafFile:null}),[p,m]=(0,r.useState)({paafFile:null}),{register:u,formState:{errors:h},setValue:g,watch:f}=(0,it.mN)({resolver:(0,lt.t)(ka)}),v=f("paafFile","");(0,r.useEffect)((()=>{if(n.length>0){const e=n.find((e=>e.tempID===t.tempID));e&&(o({interview:{paafApproveDate:e.localMobilization.paafApproveDate,paafFile:e.localMobilization.paafFile,status:e.interviewSchedules.status}}),e.localMobilization.paafFile&&c((t=>(0,x.A)((0,x.A)({},t),{},{paafFile:y(e.localMobilization.paafFile)}))))}}),[n,t.tempID]);const y=e=>"string"===typeof e&&e?e.split("/").pop():"",b=(e,t)=>{o((a=>(0,x.A)((0,x.A)({},a),{},{interview:(0,x.A)((0,x.A)({},a.interview),{},{[e]:t})})))};return(0,i.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const r=n.find((e=>e.tempID===(null===t||void 0===t?void 0:t.tempID)));if(!r||!r.localMobilization)return void alert("Candidate or LOI data not found.");const i=r.localMobilization.id,o=r.interviewSchedules.id;try{await a({LoiValue:{id:i,paafApproveDate:l.interview.paafApproveDate,paafFile:p.paafFile||l.paafFile}}),await s({InterviewValue:{id:o,status:l.interview.status}}),console.log("Data stored successfully...")}catch(d){console.error("Error submitting interview details:",d),alert("Failed to update interview details. Please try again.")}},className:"p-5",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-5 mt-5",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"paafApproveDate",children:"Approval Date"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"date",id:"paafApproveDate"},u("paafApproveDate")),{},{value:l.interview.paafApproveDate,onChange:e=>b("paafApproveDate",e.target.value)}))]}),(0,i.jsx)("div",{className:"",children:(0,i.jsx)("div",{className:"flex items-center gap-5 mt-1",children:(0,i.jsx)(Da,{label:"Upload File",className:"p-4",onChangeFunc:e=>(async(e,t)=>{const a=e.target.files[0];g(t,a),a&&"paafFile"===t&&(await pt(a,"paafFile",m,"personName"),c((e=>(0,x.A)((0,x.A)({},e),{},{paafFile:a.name}))))})(e,"paafFile"),accept:"application/pdf",register:u,fileName:d.paafFile||y(v)||l.interview.paafFile,value:l.interview.paafFile})})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"status",children:"Status"}),(0,i.jsx)("select",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",id:"status"},u("status")),{},{value:l.interview.status,onChange:e=>b("status",e.target.value),children:Sa.map(((e,t)=>(0,i.jsx)("option",{value:e,children:e},t)))}))]})]}),(0,i.jsx)("div",{className:"mt-5 flex justify-center",children:(0,i.jsx)("button",{type:"submit",className:"py-1 px-5 rounded-xl shadow-lg border-2 border-yellow hover:bg-yellow",children:"Submit"})})]})},Ta=Xt.Ik().shape({mobSignDate:Xt.p6().notRequired(),mobFile:Xt.gl().nullable().required("File is required").test("fileType","Only PDF files are allowed",(e=>!!e&&"application/pdf"===e.type))}),Pa=e=>{let{candidate:t}=e;const{loiDetails:a}=Aa(),{mergedInterviewData:n}=Na(),{interviewDetails:s}=va(),[l,o]=(0,r.useState)({interview:{id:"",mobSignDate:"",mobFile:"",status:""}}),[d,c]=(0,r.useState)({mobFile:null}),[p,m]=(0,r.useState)({mobFile:null}),{register:u,handleSubmit:h,watch:g,formState:{errors:f},setValue:v}=(0,it.mN)({resolver:(0,lt.t)(Ta)}),y=g("mobFile","");(0,r.useEffect)((()=>{if(n.length>0){const e=n.find((e=>e.tempID===t.tempID));e&&(o({interview:{mobSignDate:e.localMobilization.mobSignDate,mobFile:e.localMobilization.mobFile,status:e.interviewSchedules.status}}),e.localMobilization.mobFile&&c((t=>(0,x.A)((0,x.A)({},t),{},{mobFile:b(e.localMobilization.mobFile)}))))}}),[n,t.tempID]);const b=e=>"string"===typeof e&&e?e.split("/").pop():"",N=(e,t)=>{o((a=>(0,x.A)((0,x.A)({},a),{},{interview:(0,x.A)((0,x.A)({},a.interview),{},{[e]:t})})))};return(0,i.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const r=n.find((e=>e.tempID===(null===t||void 0===t?void 0:t.tempID)));if(!r||!r.localMobilization)return void alert("Candidate or LOI data not found.");const i=r.localMobilization.id,o=r.interviewSchedules.id;try{await a({LoiValue:{id:i,mobSignDate:l.interview.mobSignDate,mobFile:p.mobFile||l.mobfFile}}),await s({InterviewValue:{id:o,status:l.interview.status}}),console.log("Data stored successfully...")}catch(d){console.error("Error submitting interview details:",d),alert("Failed to update interview details. Please try again.")}},className:"p-5",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-5 mt-5",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"mobSignDate",children:"Date of Mobilize"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"date",id:"mobSignDate"},u("mobSignDate")),{},{value:l.interview.mobSignDate,onChange:e=>N("mobSignDate",e.target.value)}))]}),(0,i.jsx)("div",{className:"",children:(0,i.jsx)("div",{className:"flex items-center gap-5 mt-1",children:(0,i.jsx)(Da,{label:"Upload File",onChangeFunc:e=>(async(e,t)=>{const a=e.target.files[0];v(t,a),a&&"mobFile"===t&&(await pt(a,"mobFile",m,"personName"),c((e=>(0,x.A)((0,x.A)({},e),{},{mobFile:a.name}))))})(e,"mobFile"),className:"hidden",accept:"application/pdf",register:u,fileName:d.mobFile||b(y)||l.interview.mobFile,value:l.interview.mobFile})})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"status",children:"Status"}),(0,i.jsx)("select",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",id:"status"},u("status")),{},{value:l.interview.status,onChange:e=>N("status",e.target.value),children:Sa.map(((e,t)=>(0,i.jsx)("option",{value:e,children:e},t)))}))]})]}),(0,i.jsx)("div",{className:"mt-5 flex justify-center",children:(0,i.jsx)("button",{type:"submit",className:"py-1 px-5 rounded-xl shadow-lg border-2 border-yellow hover:bg-yellow",children:"Submit"})})]})},_a=e=>{let{candidate:t,onClose:a,onSave:n}=e;const[s,l]=(0,r.useState)(0);return(0,i.jsx)("div",{className:"fixed inset-0 bg-grey bg-opacity-80 z-50 center",children:(0,i.jsxs)("div",{className:"bg-white p-10 rounded-lg w-full max-w-[700px] overflow-hidden relative",children:[(0,i.jsx)("button",{onClick:a,className:" absolute top-2 right-2 border rounded-full p-1",children:(0,i.jsx)(b.RQJ,{size:20})}),(0,i.jsx)("div",{className:"p-4 rounded-md bg-[#f7f183ea]",children:(0,i.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-4 text-xs font-semibold",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-semibold",children:"TempID:"})," ",null===t||void 0===t?void 0:t.tempID]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-semibold",children:"Name:"})," ",null===t||void 0===t?void 0:t.name]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-semibold",children:"Contract Type:"})," ",null===t||void 0===t?void 0:t.contractType]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-semibold",children:"Employee Type:"})," ",null===t||void 0===t?void 0:t.empType]})]})}),(0,i.jsxs)("article",{className:"flex-1 flex gap-5 text-black mt-5",children:[(0,i.jsx)("h1",{className:"  px-3 py-1 rounded-lg whitespace-nowrap  ".concat(0===s?"border-2 border-[#FEF116] bg-[#FFFEF4]":"bg-[#DDDDDD]"),onClick:()=>l(0),children:"Interview"}),(0,i.jsx)("h2",{className:"  px-3 py-1 rounded-lg whitespace-nowrap  ".concat(1===s?"border-2 border-[#FEF116] bg-[#FFFEF4]":"bg-[#DDDDDD]"),onClick:()=>l(1),children:"Candidate"}),(0,i.jsx)("h3",{className:"  px-3 py-1 rounded-lg whitespace-nowrap  ".concat(2===s?"border-2 border-[#FEF116] bg-[#FFFEF4]":"bg-[#DDDDDD]"),onClick:()=>l(2),children:"LOI"}),(0,i.jsx)("h4",{className:" px-3 py-1 rounded-lg whitespace-nowrap  ".concat(3===s?"border-2 border-[#FEF116] bg-[#FFFEF4]":"bg-[#DDDDDD]"),onClick:()=>l(3),children:"CVEV"}),(0,i.jsx)("h5",{className:"  px-3 py-1 rounded-lg whitespace-nowrap  ".concat(4===s?"border-2 border-[#FEF116] bg-[#FFFEF4]":"bg-[#DDDDDD]"),onClick:()=>l(4),children:"PAAF"}),"Local"===(null===t||void 0===t?void 0:t.contractType)&&(0,i.jsx)("h6",{className:"  px-3 py-1 rounded-lg whitespace-nowrap  ".concat(5===s?"border-2 border-[#FEF116] bg-[#FFFEF4]":"bg-[#DDDDDD]"),onClick:()=>l(5),children:"Mobilization"})]}),0===s&&(0,i.jsx)(ya,{candidate:t}),1===s&&(0,i.jsx)(ja,{candidate:t}),2===s&&(0,i.jsx)(Ea,{candidate:t}),3===s&&(0,i.jsx)(Ca,{candidate:t}),4===s&&(0,i.jsx)(Ra,{candidate:t}),"Local"===(null===t||void 0===t?void 0:t.contractType)&&5===s&&(0,i.jsx)(Pa,{candidate:t})]})})},Oa=e=>{let{data:t,formatDate:a}=e;const[n,s]=(0,r.useState)(!1),[l,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)([]),p=e=>{c(e),s(!n)},m=e=>{c(e),o(!l)};return(0,i.jsxs)("div",{children:[t&&t.length>0?(0,i.jsxs)("table",{className:" w-full",children:[(0,i.jsx)("thead",{className:"bg-[#939393] text-white",children:(0,i.jsx)("tr",{children:["TempID","Name","Nationality","Interview Date","Time","Venue","Interviewer","Form","Edit Form"].map(((e,t)=>(0,i.jsx)("th",{className:"py-4 text-[15px] text-white",children:e},t)))})}),(0,i.jsx)("tbody",{children:t&&t.length>0?t.map(((e,t)=>(0,i.jsxs)("tr",{className:"text-center text-[16px] shadow-[0_3px_6px_1px_rgba(0,0,0,0.2)] hover:bg-medium_blue",children:[(0,i.jsx)("td",{className:"py-3",children:e.tempID}),(0,i.jsx)("td",{className:"py-3",children:e.name||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:e.nationality||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:a(e.interviewDetails_interDate)||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:e.interviewDetails_interTime||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:e.interviewDetails_venue||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:e.interviewDetails_manager||"N/A"}),(0,i.jsx)("td",{className:"py-3 text-center",onClick:()=>m(e),children:"View"}),(0,i.jsx)("td",{className:"text-2xl cursor-pointer py-3 center",onClick:()=>p(e),children:(0,i.jsx)(Zt.GQd,{})})]},t))):(0,i.jsx)("tr",{})})]}):(0,i.jsx)("div",{className:"text-center mt-6 py-20",children:(0,i.jsx)("p",{className:"text-lg text-dark_grey mt-2",children:"No Data Available"})}),l&&(0,i.jsx)(Qt,{candidate:d,onClose:m,showDecisionButtons:!0}),n&&(0,i.jsx)(_a,{candidate:d,onClose:p})]})},La=e=>{let{data:t}=e;const[a,n]=(0,r.useState)(!1),[s,l]=(0,r.useState)(!1),[o,d]=(0,r.useState)([]);(0,r.useEffect)((()=>{}),[t]);const c=e=>{d(e),n(!a)},p=e=>{d(e),l(!s)};return(0,i.jsxs)("div",{children:[t&&t.length>0?(0,i.jsxs)("table",{className:" w-full",children:[(0,i.jsx)("thead",{className:"bg-[#939393] text-white",children:(0,i.jsx)("tr",{children:["TempID","Name","Nationality","Position","Selected Department","Form","Edit Form"].map(((e,t)=>(0,i.jsx)("th",{className:"py-4 text-[15px] text-white",children:e},t)))})}),(0,i.jsx)("tbody",{children:t&&t.length>0?t.map(((e,t)=>(0,i.jsxs)("tr",{className:"text-center text-[16px] shadow-[0_3px_6px_1px_rgba(0,0,0,0.2)] hover:bg-medium_blue",children:[(0,i.jsx)("td",{className:"py-3",children:e.tempID}),(0,i.jsx)("td",{className:"py-3",children:e.name||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:e.nationality||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:e.position||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:e.interviewDetails_department||"N/A"}),(0,i.jsx)("td",{className:"py-3 text-center",onClick:()=>p(e),children:"View"}),(0,i.jsx)("td",{className:"text-2xl cursor-pointer py-3 center",onClick:()=>c(e),children:(0,i.jsx)(Zt.GQd,{})})]},t))):(0,i.jsx)("tr",{})})]}):(0,i.jsxs)("div",{className:"text-center mt-6 py-20",children:[" ",(0,i.jsx)("p",{className:"text-lg text-dark_grey mt-2",children:"No Data Available"})]}),s&&(0,i.jsx)(Qt,{candidate:o,onClose:p}),a&&(0,i.jsx)(_a,{candidate:o,onClose:c})]})},Fa=e=>{let{data:t,formatDate:a,fileUpload:n,urlValue:s}=e;const[l,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(!1),[p,m]=(0,r.useState)([]),u=e=>{m(e),o(!l)},x=e=>{m(e),c(!d)};return(0,i.jsxs)("div",{children:[t&&t.length>0?(0,i.jsxs)("table",{className:" w-full",children:[(0,i.jsx)("thead",{className:"bg-[#939393] text-white",children:(0,i.jsx)("tr",{children:["TempID","Name","Nationality","Issue Date","Accept Date","LOI PDF","Decline Date","Decline Reason","Status Update","Form","Edit Form"].map(((e,t)=>(0,i.jsx)("th",{className:"py-4 text-[15px] text-white",children:e},t)))})}),(0,i.jsx)("tbody",{children:t&&t.length>0?t.map(((e,t)=>(0,i.jsxs)("tr",{className:"text-center text-[16px] shadow-[0_3px_6px_1px_rgba(0,0,0,0.2)] hover:bg-medium_blue",children:[(0,i.jsx)("td",{className:"py-3",children:e.tempID}),(0,i.jsx)("td",{className:"py-3",children:e.name||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:e.nationality||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:a(e.mobilizationDetails_loiIssueDate)||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:a(e.mobilizationDetails_loiAcceptDate)||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:e.mobilizationDetails_loiFile?(0,i.jsx)("a",{href:s,onClick:t=>{e.mobilizationDetails_loiFile?n(e.mobilizationDetails_loiFile):t.preventDefault()},download:!0,className:e.mobilizationDetails_loiFile?"border-b-2 border-[orange] text-[orange]":"",children:e.mobilizationDetails_loiFile?"Download":"N/A"}):(0,i.jsx)("p",{children:"N/A"})}),(0,i.jsx)("td",{className:"py-3",children:e.mobilizationDetails_loiDeclineDate||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:e.mobilizationDetails_declineReason||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:e.interviewDetails_status||"N/A"}),(0,i.jsx)("td",{className:"py-3 text-center",onClick:()=>x(e),children:"View"}),(0,i.jsx)("td",{className:"text-2xl cursor-pointer py-3 center",onClick:()=>u(e),children:(0,i.jsx)(Zt.GQd,{})})]},t))):(0,i.jsx)("tr",{className:"text-center py-4 text-dark_grey",children:"No Data Available"})})]}):(0,i.jsxs)("div",{className:"text-center mt-6 py-20",children:[" ",(0,i.jsx)("p",{className:"text-lg text-dark_grey mt-2",children:"No Data Available"})]}),d&&(0,i.jsx)(Qt,{candidate:p,onClose:x}),l&&(0,i.jsx)(_a,{candidate:p,onClose:u})]})},Ma=e=>{let{data:t,formatDate:a,fileUpload:n,urlValue:s}=e;const[l,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(!1),[p,m]=(0,r.useState)([]),u=e=>{m(e),o(!l)},x=e=>{m(e),c(!d)};return(0,i.jsxs)("div",{children:[t&&t.length>0?(0,i.jsxs)("table",{className:" w-full",children:[(0,i.jsx)("thead",{className:"bg-[#939393] text-white",children:(0,i.jsx)("tr",{children:["TempID","Name","Nationality","Position","Approved Date","CVEV PDF","Status Update","Form","Edit Form"].map(((e,t)=>(0,i.jsx)("th",{className:"py-4 text-[15px] text-white",children:e},t)))})}),(0,i.jsx)("tbody",{children:t&&t.length>0?t.map(((e,t)=>(0,i.jsxs)("tr",{className:"text-center text-[16px] shadow-[0_3px_6px_1px_rgba(0,0,0,0.2)] hover:bg-medium_blue",children:[(0,i.jsx)("td",{className:"py-3",children:e.tempID}),(0,i.jsx)("td",{className:"py-3",children:e.name||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:e.nationality||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:e.position||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:a(e.mobilizationDetails_cvecApproveDate)||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:e.mobilizationDetails_cvecFile?(0,i.jsx)("a",{href:s,onClick:t=>{e.mobilizationDetails_cvecFile?n(e.mobilizationDetails_cvecFile):t.preventDefault()},download:!0,className:e.mobilizationDetails_cvecFile?"border-b-2 border-[orange] text-[orange]":"",children:e.mobilizationDetails_cvecFile?"Download":"N/A"}):(0,i.jsx)("p",{children:"N/A"})}),(0,i.jsx)("td",{className:"py-3",children:e.interviewDetails_status||"N/A"}),(0,i.jsx)("td",{className:"py-3 text-center",onClick:()=>x(e),children:"View"}),(0,i.jsx)("td",{className:"text-2xl cursor-pointer py-3 center",onClick:()=>u(e),children:(0,i.jsx)(Zt.GQd,{})})]},t))):(0,i.jsx)("tr",{})})]}):(0,i.jsxs)("div",{className:"text-center mt-6 py-20",children:[" ",(0,i.jsx)("p",{className:"text-lg text-dark_grey mt-2",children:"No Data Available"})]}),d&&(0,i.jsx)(Qt,{candidate:p,onClose:x}),l&&(0,i.jsx)(_a,{candidate:p,onClose:u})]})},qa=e=>{let{data:t,formatDate:a,fileUpload:n,urlValue:s}=e;const[l,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(!1),[p,m]=(0,r.useState)([]),u=e=>{m(e),o(!l)},x=e=>{m(e),c(!d)};return(0,i.jsxs)("div",{children:[t&&t.length>0?(0,i.jsxs)("table",{className:" w-full",children:[(0,i.jsx)("thead",{className:"bg-[#939393] text-white",children:(0,i.jsx)("tr",{children:["TempID","Name","Nationality","Position","Approved Date","PAAF PDF","Status Update","Form","Edit Form"].map(((e,t)=>(0,i.jsx)("th",{className:"py-4 text-[15px] text-white",children:e},t)))})}),(0,i.jsx)("tbody",{children:t&&t.length>0?t.map(((e,t)=>(0,i.jsxs)("tr",{className:"text-center text-[16px] shadow-[0_3px_6px_1px_rgba(0,0,0,0.2)] hover:bg-medium_blue",children:[(0,i.jsx)("td",{className:"py-3",children:e.tempID}),(0,i.jsx)("td",{className:"py-3",children:e.name||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:e.nationality||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:e.position||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:a(e.mobilizationDetails_paafApproveDate)||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:e.mobilizationDetails_paafFile?(0,i.jsx)("a",{href:s,onClick:t=>{e.mobilizationDetails_paafFile?n(e.mobilizationDetails_paafFile):t.preventDefault()},download:!0,className:e.mobilizationDetails_paafFile?"border-b-2 border-[orange] text-[orange]":"",children:e.mobilizationDetails_paafFile?"Download":"N/A"}):(0,i.jsx)("p",{children:"N/A"})}),(0,i.jsx)("td",{className:"py-3",children:e.interviewDetails_status||"N/A"}),(0,i.jsx)("td",{className:"py-3 text-center",onClick:()=>x(e),children:"View"}),(0,i.jsx)("td",{className:"text-2xl cursor-pointer py-3 center",onClick:()=>u(e),children:(0,i.jsx)(Zt.GQd,{})})]},t))):(0,i.jsx)("tr",{})})]}):(0,i.jsxs)("div",{className:"text-center mt-6 py-20",children:[" ",(0,i.jsx)("p",{className:"text-lg text-dark_grey mt-2",children:"No Data Available"})]}),d&&(0,i.jsx)(Qt,{candidate:p,onClose:x}),l&&(0,i.jsx)(_a,{candidate:p,onClose:u})]})},Ua=(0,ge.D)(),Ba=e=>{let{data:t,formatDate:a,fileUpload:n,urlValue:s}=e;const{SumbitCandiToEmp:l}=(()=>{const e=(0,ge.D)();return{SumbitCandiToEmp:(0,r.useCallback)((async t=>{let{storedData:a}=t;const n={empID:a.empID,age:a.age,agent:[a.agent],alternateNo:a.alternateNo,chinese:a.chinese,cob:a.cob,contactNo:[a.contactNo],contractType:[a.contractType],dob:a.dob,educLevel:a.eduDetails,email:a.email,empType:[a.empType],familyDetails:a.familyDetails,gender:a.gender,lang:a.lang,marital:a.marital,name:a.name,profilePhoto:a.profilePhoto,permanentAddress:[a.permanentAddress],position:[a.position]},r={empID:a.empID,bwnIcColour:a.bwnIcColour,bwnIcExpiry:[a.bwnIcExpiry],bwnIcNo:a.bwnIcNo,cvCertifyUpload:JSON.stringify(a.uploadResume),driveLic:a.driveLic,nationality:a.nationality,otherNation:a.otherNation,otherRace:a.otherRace,otherReligion:a.otherReligion,ppDestinate:[a.ppDestinate],ppExpiry:[a.ppExpiry],ppIssued:[a.ppIssued],ppNo:[a.ppNo],ppUpload:JSON.stringify(a.uploadPp),race:a.race,religion:a.religion},s={empID:a.empID,crime:a.crime,crimeDesc:a.crimeDesc,emgDetails:a.emgDetails,empStatement:a.empStatement,noExperience:a.noExperience,desc:a.desc,disease:a.disease,diseaseDesc:a.diseaseDesc,liquor:a.liquor,liquorDesc:a.liquorDesc,perID:a.perIDesc,perIS:a.perIS,referees:a.referees,relatives:a.relatives,salaryExpectation:a.salaryExpectation,supportInfo:a.supportInfo,workExperience:a.workExperience,mobFile:a.mobilizationDetails_mobFile,mobSignDate:a.mobilizationDetails_mobSignDate,paafApproveDate:a.mobilizationDetails_paafApproveDate,paafFile:a.mobilizationDetails_paafFile,cvecApproveDate:a.mobilizationDetails_cvecApproveDate,cvecFile:a.mobilizationDetails_cvecFile,declineReason:a.mobilizationDetails_declineReason,loiAcceptDate:a.mobilizationDetails_loiAcceptDate,loiDeclineDate:a.mobilizationDetails_loiDeclineDate,loiFile:a.mobilizationDetails_loiFile,loiIssueDate:a.mobilizationDetails_loiIssueDate,uploadCertificate:JSON.stringify(a.uploadCertificate),pcNoticePeriod:a.noticePeriod,venue:a.interviewDetails_venue,message:a.interviewDetails_message,managerBadgeNo:a.interviewDetails_bagdeNo,interDate:a.interviewDetails_interDate,interTime:a.interviewDetails_interTime,interType:a.interviewDetails_interType},i={empID:a.empID,department:[a.interviewDetails_department],otherDepartment:[a.interviewDetails_otherDepartment],position:[a.position]};try{const[t,l,o,d]=await Promise.all([e.graphql({query:Ie,variables:{input:n}}),e.graphql({query:ke,variables:{input:r}}),e.graphql({query:"\n  mutation CreateCandIToEMP(\n    $input: CreateCandIToEMPInput!\n    $condition: ModelCandIToEMPConditionInput\n  ) {\n    createCandIToEMP(input: $input, condition: $condition) {\n      id\n      empID\n      crime\n      crimeDesc\n      emgDetails\n      noExperience\n      empStatement\n      desc\n      disease\n      diseaseDesc\n      liquor\n      liquorDesc\n      perIS\n      perID\n      referees\n      relatives\n      salaryExpectation\n      supportInfo\n      workExperience\n      mobSignDate\n      mobFile\n      paafApproveDate\n      paafFile\n      loiIssueDate\n      loiAcceptDate\n      loiDeclineDate\n      declineReason\n      loiFile\n      cvecApproveDate\n      cvecFile\n      uploadCertificate\n      pcNoticePeriod\n      venue\n      managerBadgeNo\n      message\n      interType\n      interTime\n      interDate\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:s}}),e.graphql({query:Ee,variables:{input:i}})]);await e.graphql({query:Re,variables:{input:{id:a.interviewDetails_id,status:"Employee"}}}).then((e=>{console.log(e)})).catch((e=>{console.log(e)}))}catch(l){console.log(l)}}),[e])}})(),[o,d]=(0,r.useState)(!1),[c,p]=(0,r.useState)(!1),[m,u]=(0,r.useState)([]),[h,g]=(0,r.useState)(""),[f,v]=(0,r.useState)(""),[y,b]=(0,r.useState)(!1),N=e=>{u(e),d(!o)},j=e=>{u(e),p(!c)};console.log("hello world");(0,r.useEffect)((()=>{(async()=>{const e=(e=>String(e+1))(await(async()=>{try{var e,t;const a=await Ua.graphql({query:fe.it});return((null===a||void 0===a||null===(e=a.data)||void 0===e||null===(t=e.listEmpPersonalInfos)||void 0===t?void 0:t.items)||[]).length}catch(a){return console.error("Error fetching total count:",a),0}})());g(e)})()}),[]);return(0,i.jsxs)("div",{children:[t&&t.length>0?(0,i.jsxs)("table",{className:" w-full",children:[(0,i.jsx)("thead",{className:"bg-[#939393] text-white",children:(0,i.jsx)("tr",{children:["TempID","Name","Nationality","Position","Signed Date","Contract PDF","Status Update","Form","Edit Form","Status"].map(((e,t)=>(0,i.jsx)("th",{className:"py-4 text-[15px] text-white",children:e},t)))})}),(0,i.jsx)("tbody",{children:t&&t.length>0?t.map(((e,t)=>(0,i.jsxs)("tr",{className:"text-center text-[16px] shadow-[0_3px_6px_1px_rgba(0,0,0,0.2)] hover:bg-medium_blue",children:[(0,i.jsx)("td",{className:"py-3",children:e.tempID}),(0,i.jsx)("td",{className:"py-3",children:e.name||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:e.nationality||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:e.position||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:a(e.mobilizationDetails_mobSignDate)||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:e.mobilizationDetails_mobFile?(0,i.jsx)("a",{href:s,onClick:t=>{e.mobilizationDetails_mobFile?n(e.mobilizationDetails_mobFile):t.preventDefault()},download:!0,className:e.mobilizationDetails_mobFile?"border-b-2 border-[orange] text-[orange]":"",children:e.mobilizationDetails_mobFile?"Download":"N/A"}):(0,i.jsx)("p",{children:"N/A"})}),(0,i.jsx)("td",{className:"py-3",children:e.interviewDetails_status||"N/A"}),(0,i.jsx)("td",{className:"py-3 text-center",onClick:()=>j(e),children:"View"}),(0,i.jsx)("td",{className:"text-2xl cursor-pointer py-3 center",onClick:()=>N(e),children:(0,i.jsx)(Zt.GQd,{})}),(0,i.jsx)("td",{className:"text-sm cursor-pointer py-3 ",onClick:()=>(async e=>{const t=(0,x.A)((0,x.A)({},e),{},{empID:h});await l({storedData:t}),v("Candidate conversion to employee has been completed successfully."),b(!0)})(e),children:"Convert Employee"})]},t))):(0,i.jsx)("tr",{})})]}):(0,i.jsxs)("div",{className:"text-center mt-6 py-20",children:[" ",(0,i.jsx)("p",{className:"text-lg text-dark_grey mt-2",children:"No Data Available"})]}),c&&(0,i.jsx)(Qt,{candidate:m,onClose:j}),o&&(0,i.jsx)(_a,{candidate:m,onClose:N}),y&&(0,i.jsx)(Le,{text:f,notification:y,path:"/recrutiles/status"})]})},Ha=(0,ge.D)(),Wa=["Interview Scheduled","Selected Candidate","LOI","CVEV_OffShore","PAAF_OnShore","Mobilization"],Ya=()=>{const[e,t]=(0,r.useState)(null),[a,n]=(0,r.useState)(!0),[l,o]=(0,r.useState)(null),[d,c]=(0,r.useState)(!1),[p,m]=(0,r.useState)([]),[u,g]=(0,r.useState)([]),[f,v]=(0,r.useState)(!1),[y,b]=(0,r.useState)(null),[N,j]=(0,r.useState)(!1),[D,w]=(0,r.useState)([]),[A,S]=(0,r.useState)("Interview Scheduled"),[E,I]=(0,r.useState)("Interview Scheduled"),C=(0,r.useRef)(null),[k,R]=(0,r.useState)([]),[T,P]=(0,r.useState)([]),[_,O]=(0,r.useState)(""),[L,F]=(0,r.useState)(),{empPDData:M,educDetailsData:q,IVSSDetails:U}=(0,r.useContext)(s.Y),B=e=>{const t=(0,x.A)({},e);return console.log(e,"D"),t.interviewDetails&&(Object.entries(t.interviewDetails).forEach((e=>{let[a,n]=e;t["interviewDetails_".concat(a)]=n})),delete t.interviewDetails),t.mobilizationDetails&&(Object.entries(t.mobilizationDetails).forEach((e=>{let[a,n]=e;t["mobilizationDetails_".concat(a)]=n})),delete t.mobilizationDetails),t};(0,r.useEffect)((()=>{(async()=>{try{var e,t,a,r;const[s,i]=await Promise.all([Ha.graphql({query:fe.c2,variables:{limit:2e4}}),Ha.graphql({query:fe.g,variables:{limit:2e4}})]),l=(null===s||void 0===s||null===(e=s.data)||void 0===e||null===(t=e.listInterviewSchedules)||void 0===t?void 0:t.items)||[],o=(null===i||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.listLocalMobilizations)||void 0===r?void 0:r.items)||[];if(M&&q&&U){const e=((e,t)=>e.map((e=>{const a=t.find((t=>t.tempID===e.tempID))||{};return(0,x.A)((0,x.A)({},e),a)})))(M.filter((e=>U.some((t=>t.tempID===e.tempID)))),q),t=l.reduce(((e,t)=>(e[t.tempID]=t,e)),{}),a=o.reduce(((e,t)=>(e[t.tempID]=t,e)),{}),r=e.map((e=>{const n=t[e.tempID]||{},r=a[e.tempID]||{};return(0,x.A)((0,x.A)({},e),{},{interviewDetails:n,mobilizationDetails:r})})),s=r.map(B);P(s);const i=s.filter((e=>{var t;return"interviewscheduled"===(null===e||void 0===e||null===(t=e.interviewDetails_status)||void 0===t?void 0:t.toLowerCase())}));w(i),F(i),n(!1)}}catch(s){o(s.message),n(!1)}})()}),[M,q,U]);const H=()=>{let e=L;p.includes("LOCAL")&&(e=e.filter((e=>"Local"===e.contractType))),p.includes("NON LOCAL")&&(e=e.filter((e=>"Non Local"===e.contractType))),p.includes("ONSHORE")&&(e=e.filter((e=>"Onshore"===e.empType))),p.includes("OFFSHORE")&&(e=e.filter((e=>"Offshore"===e.empType))),p.includes("LPA")&&(e=e.filter((e=>"LPA"===e.contractType))),p.includes("SAWP")&&(e=e.filter((e=>"SAWP"===e.contractType))),w(e)},W=e=>p.includes("LOCAL")?"NON LOCAL"===e||"LPA"===e||"SAWP"===e:!!p.includes("NON LOCAL")&&"LOCAL"===e;(0,r.useEffect)((()=>{const e=e=>{!e.target.closest(".cvTypeDropdown")&&d&&c(!1),C.current&&!C.current.contains(e.target)&&N&&j(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[d,N]);const Y=e=>{const t=e.target.value;if(S(t),I(t),!T)return;let a=[];switch(t){case"Interview Scheduled":a=T.filter((e=>{var t;return"interviewscheduled"===(null===e||void 0===e||null===(t=e.interviewDetails_status)||void 0===t?void 0:t.toLowerCase())}));break;case"Selected Candidate":a=T.filter((e=>"Selected"===(null===e||void 0===e?void 0:e.interviewDetails_status)));break;case"LOI":a=T.filter((e=>{var t;return"LOI"===(null===e||void 0===e||null===(t=e.interviewDetails_status)||void 0===t?void 0:t.toUpperCase())}));break;case"CVEV_OffShore":a=T.filter((e=>{var t;return"CVEV"===(null===e||void 0===e||null===(t=e.interviewDetails_status)||void 0===t?void 0:t.toUpperCase())&&"Offshore"===(null===e||void 0===e?void 0:e.empType)}));break;case"PAAF_OnShore":a=T.filter((e=>{var t;return"PAAF"===(null===e||void 0===e||null===(t=e.interviewDetails_status)||void 0===t?void 0:t.toUpperCase())&&"Onshore"===(null===e||void 0===e?void 0:e.empType)}));break;case"Mobilization":a=T.filter((e=>{var t;return"Local"===(null===e||void 0===e?void 0:e.contractType)&&"mobilization"===(null===e||void 0===e||null===(t=e.interviewDetails_status)||void 0===t?void 0:t.toLowerCase())}));break;default:a=T.filter((e=>{var t;return"pending"===(null===e||void 0===e||null===(t=e.interviewDetails_status)||void 0===t?void 0:t.toLowerCase())}))}w(a),j(!1)},V=e=>{if(!e||isNaN(new Date(e).getTime()))return"";const t=new Date(e),a=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getFullYear();return"".concat(a,"-").concat(n,"-").concat(r)},z=async e=>{try{if("string"===typeof e){let t=e.replace(/=/g,":").replace(/([{,])(\s*[a-zA-Z0-9_]+)(?=\s*:)/g,'$1"$2"').replace(/:\s*([^",}\]]+)/g,': "$1"').replace(/"\s*[^"]+"\s*$/g,(e=>e.trim())).replace(/(\w)(,|})/g,"$1$2");const a=JSON.parse(t),n=a[a.length-1].upload,r=await(0,h.I)({path:n});return O(r.url.toString())}return console.error("Input must be a string."),null}catch(l){return console.error("Error parsing files:",l.message),null}};return(0,i.jsxs)("section",{className:"screen-size min-h-screen mb-4",children:[(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsxs)("button",{className:"font-semibold py-2 px-6 mb-6 rounded-lg flex items-center ".concat(p.length>0?"bg-[#faf362]":"bg-[#8d8f9036]"," cvTypeDropdown"),onClick:()=>c(!d),children:[p.length>0?p.join(" + "):"CV TYPE",d?(0,i.jsx)(Lt.Ucs,{className:"ml-10"}):(0,i.jsx)(Lt.Vr3,{className:"ml-10"})]}),d&&(0,i.jsx)("div",{className:"absolute bg-white border shadow-lg rounded-lg z-20 cvTypeDropdown",children:["LOCAL","NON LOCAL","LPA","SAWP","ONSHORE","OFFSHORE"].map((e=>(0,i.jsxs)("label",{className:"block w-full text-left px-4 py-2",children:[(0,i.jsx)("input",{type:"checkbox",className:"mr-2",checked:p.includes(e),onChange:()=>(e=>{m((t=>t.includes(e)?t.filter((t=>t!==e)):"LOCAL"===e?["LOCAL",...t.filter((e=>"NON LOCAL"!==e&&"LPA"!==e&&"SAWP"!==e))]:"NON LOCAL"===e?["NON LOCAL",...t.filter((e=>"LOCAL"!==e))]:"ONSHORE"===e||"OFFSHORE"===e?[e,...t.filter((e=>"ONSHORE"!==e&&"OFFSHORE"!==e))]:"LPA"===e||"SAWP"===e?[e,...t.filter((e=>"LPA"!==e&&"SAWP"!==e))]:[...t,e])),H()})(e),disabled:W(e)}),e]},e)))}),(0,i.jsxs)("button",{onClick:e=>{null===e||void 0===e||e.stopPropagation(),j((e=>!e))},className:"absolute top-0 right-0 px-6 py-2 font-semibold rounded-lg flex items-center ".concat(A.length?"bg-[#faf362]":"bg-[#8d8f9036]"),children:[(0,i.jsx)(ga.y_E,{className:"mr-5"}),(0,i.jsx)("span",{children:E})]}),N&&(0,i.jsx)("div",{ref:C,className:"absolute top-12 right-0 mt-2 bg-white shadow-lg rounded-lg p-4 z-50 flex flex-col space-y-2",children:Wa.map((e=>(0,i.jsxs)("label",{className:"flex items-center font-semibold  space-x-2 hover:font-bold hover:text-[#c7bd03] p-2 rounded-md ".concat(A===e?"text-[#faf362]":"text-lite_grey"),children:[(0,i.jsx)("input",{type:"radio",className:"w-5 h-6",name:"status",value:e,checked:A===e,onChange:Y}),(0,i.jsx)("span",{children:e})]},e)))})]}),a?(0,i.jsx)("p",{children:"Loading..."}):l?(0,i.jsx)("p",{children:l}):(0,i.jsxs)(i.Fragment,{children:[(()=>{switch(A){case"Interview Scheduled":return(0,i.jsx)(Oa,{data:D,formatDate:V,fileUpload:z,urlValue:_});case"Selected Candidate":return(0,i.jsx)(La,{data:D,formatDate:V,fileUpload:z,urlValue:_});case"LOI":return(0,i.jsx)(Fa,{data:D,formatDate:V,fileUpload:z,urlValue:_});case"CVEV_OffShore":return(0,i.jsx)(Ma,{data:D,formatDate:V,fileUpload:z,urlValue:_});case"PAAF_OnShore":return(0,i.jsx)(qa,{data:D,formatDate:V,fileUpload:z,urlValue:_});case"Mobilization":return(0,i.jsx)(Ba,{data:D,formatDate:V,fileUpload:z,urlValue:_});default:return(0,i.jsx)(Oa,{data:D,formatDate:V,fileUpload:z})}})(),f&&(0,i.jsx)(_a,{candidate:y,onSave:e=>{const t=t=>t.map((t=>t.tempID===e.tempID?(0,x.A)((0,x.A)({},t),e):t));P((e=>t(e))),w((e=>t(e))),v(!1)},onClose:()=>{v(!1),b(null)}})]})]})},Va=(0,ge.D)(),za=()=>{const[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(!0),[s,i]=(0,r.useState)(null);return(0,r.useEffect)((()=>{(async()=>{n(!0);try{var e,a,r,s;const[n,i]=await Promise.all([Va.graphql({query:fe.op,variables:{limit:2e4}}),Va.graphql({query:fe.c2,variables:{limit:2e4}})]),l=(null===n||void 0===n||null===(e=n.data)||void 0===e||null===(a=e.listWPTrackings)||void 0===a?void 0:a.items)||[],o=(null===i||void 0===i||null===(r=i.data)||void 0===r||null===(s=r.listInterviewSchedules)||void 0===s?void 0:s.items)||[];t(l);l.reduce(((e,t)=>(e[t.tempID]=t,e)),{});const d=o.reduce(((e,t)=>(e[t.tempID]=t,e)),{}),c=l.map((e=>(0,x.A)((0,x.A)({},e),{},{IDDetails:d[e.tempID]||{}})));t(c)}catch(l){i(l),console.error("Error fetching data:",l)}finally{n(!1)}})()}),[]),{interviewSchedules:e,loading:a,error:s}},Ja=()=>{const e=(0,ge.D)();return{wpTrackingDetails:(0,r.useCallback)((async t=>{let{WPTrackingValue:a}=t;if(!a)throw new Error("Missing required parameters or WPTrackingValue");try{const{id:t,tempID:n,sawpDate:r,sawpRecivedDate:s,sawpFile:i,remarkNLMob:l,supportletterReqDate:o,supportletterReceiveDate:d,letterfile:c,doesubmitdate:p,doerefno:m,doeapprovedate:u,doeexpirydate:x,doefile:h,nlmssubmitdate:g,submissionrefrenceno:f,nlmsapprovedate:v,ldreferenceno:y,nlmsexpirydate:b,nlmsfile:N,bgsubmitdate:j,bgreceivedate:D,referenceno:w,bgamount:A,bgexpirydate:S,bgfile:E,tbapurchasedate:I,jitpaamount:C,jitpaexpirydate:k,receiptno:R,depositamount:T,submitdateendorsement:P,jitpafile:_,immbdno:O,docsubmitdate:L,visaapprovedate:F,visareferenceno:M,visaFile:q,departuredate:U,arrivaldate:B,cityname:H,airfare:W,airticketfile:Y,agentname:V,mobSignDate:z,mobFile:J,lbrDepoNum:G,lbrEndroseDate:$,lbrDepoAmount:K,lbrFile:Q}=a,Z={id:t,tempID:n,sawpDate:r,sawpRecivedDate:s,sawpFile:i,remarkNLMob:l,supportletterReqDate:o,supportletterReceiveDate:d,letterfile:c,doerefno:m,doesubmitdate:p,doeapprovedate:u,doeexpirydate:x,doefile:h,nlmssubmitdate:g,submissionrefrenceno:f,nlmsapprovedate:v,ldreferenceno:y,nlmsexpirydate:b,nlmsfile:N,bgsubmitdate:j,bgreceivedate:D,referenceno:w,bgamount:A,bgexpirydate:S,bgfile:E,tbapurchasedate:I,jitpaamount:C,jitpaexpirydate:k,receiptno:R,depositamount:T,submitdateendorsement:P,jitpafile:_,immbdno:O,docsubmitdate:L,visaapprovedate:F,visareferenceno:M,visaFile:q,departuredate:U,arrivaldate:B,cityname:H,airfare:W,airticketfile:Y,agentname:V,mobSignDate:z,mobFile:J,lbrDepoNum:G,lbrEndroseDate:$,lbrDepoAmount:K,lbrFile:Q},X=await e.graphql({query:"\n  mutation UpdateWPTracking(\n    $input: UpdateWPTrackingInput!\n    $condition: ModelWPTrackingConditionInput\n  ) {\n    updateWPTracking(input: $input, condition: $condition) {\n      id\n      tempID\n      supportletterReqDate\n      supportletterReceiveDate\n      letterfile\n      doesubmitdate\n      doeapprovedate\n      doeexpirydate\n      doefile\n      nlmssubmitdate\n      submissionrefrenceno\n      nlmsapprovedate\n      ldreferenceno\n      nlmsexpirydate\n      nlmsfile\n      bgsubmitdate\n      bgreceivedate\n      referenceno\n      bgamount\n      bgexpirydate\n      bgfile\n      tbapurchasedate\n      jitpaamount\n      jitpaexpirydate\n      receiptno\n      depositamount\n      submitdateendorsement\n      jitpafile\n      immbdno\n      docsubmitdate\n      visaapprovedate\n      visareferenceno\n      visaFile\n      departuredate\n      arrivaldate\n      cityname\n      airfare\n      airticketfile\n      agentname\n      mobSignDate\n      mobFile\n      doerefno\n      sawpDate\n      sawpRecivedDate\n      sawpFile\n      lbrDepoNum\n      lbrEndroseDate\n      lbrDepoAmount\n      lbrFile\n      remarkNLMob\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:Z,limit:2e4}});console.log("WPTracking data successfully updated:",X)}catch(n){console.error("Error updating WPTracking data:",n)}}),[])}},Ga=e=>{let{candidate:t}=e;const{interviewSchedules:a}=za(),{wpTrackingDetails:n}=Ja(),{interviewDetails:s}=va(),{createWPTrackingHandler:l}=(()=>{const e=(0,ge.D)();return{createWPTrackingHandler:(0,r.useCallback)((async t=>{let{reqValue:a}=t;if(!a)throw new Error("Missing required parameters");const{tempID:n,sawpDate:r,sawpRecivedDate:s,sawpFile:i,doerefno:l,supportletterReqDate:o,lbrDepoNum:d,lbrEndroseDate:c,lbrDepoAmount:p,lbrFile:m,supportletterReceiveDate:u,letterfile:x,doesubmitdate:h,doeapprovedate:g,doeexpirydate:f,doefile:v,nlmssubmitdate:y,submissionrefrenceno:b,nlmsapprovedate:N,ldreferenceno:j,nlmsexpirydate:D,nlmsfile:w,bgsubmitdate:A,bgreceivedate:S,referenceno:E,bgamount:I,bgexpirydate:C,bgfile:k,tbapurchasedate:R,jitpaamount:T,jitpaexpirydate:P,receiptno:_,depositamount:O,submitdateendorsement:L,jitpafile:F,immbdno:M,docsubmitdate:q,visaapprovedate:U,visareferenceno:B,visaFile:H,departuredate:W,arrivaldate:Y,cityname:V,airfare:z,airticketfile:J,agentname:G,mobSignDate:$,mobFile:K}=a,Q={tempID:n,sawpDate:r,sawpRecivedDate:s,sawpFile:i,doerefno:l,supportletterReqDate:o,lbrDepoNum:d,lbrEndroseDate:c,lbrDepoAmount:p,lbrFile:m,supportletterReceiveDate:u,letterfile:x,doesubmitdate:h,doeapprovedate:g,doeexpirydate:f,doefile:v,nlmssubmitdate:y,submissionrefrenceno:b,nlmsapprovedate:N,ldreferenceno:j,nlmsexpirydate:D,nlmsfile:w,bgsubmitdate:A,bgreceivedate:S,referenceno:E,bgamount:I,bgexpirydate:C,bgfile:k,tbapurchasedate:R,jitpaamount:T,jitpaexpirydate:P,receiptno:_,depositamount:O,submitdateendorsement:L,jitpafile:F,immbdno:M,docsubmitdate:q,visaapprovedate:U,visareferenceno:B,visaFile:H,departuredate:W,arrivaldate:Y,cityname:V,airfare:z,airticketfile:J,agentname:G,mobSignDate:$,mobFile:K};console.log(Q);try{const t=await Promise.all([e.graphql({query:"\n  mutation CreateWPTracking(\n    $input: CreateWPTrackingInput!\n    $condition: ModelWPTrackingConditionInput\n  ) {\n    createWPTracking(input: $input, condition: $condition) {\n      id\n      tempID\n      supportletterReqDate\n      supportletterReceiveDate\n      letterfile\n      doesubmitdate\n      doeapprovedate\n      doeexpirydate\n      doefile\n      nlmssubmitdate\n      submissionrefrenceno\n      nlmsapprovedate\n      ldreferenceno\n      nlmsexpirydate\n      nlmsfile\n      bgsubmitdate\n      bgreceivedate\n      referenceno\n      bgamount\n      bgexpirydate\n      bgfile\n      tbapurchasedate\n      jitpaamount\n      jitpaexpirydate\n      receiptno\n      depositamount\n      submitdateendorsement\n      jitpafile\n      immbdno\n      docsubmitdate\n      visaapprovedate\n      visareferenceno\n      visaFile\n      departuredate\n      arrivaldate\n      cityname\n      airfare\n      airticketfile\n      agentname\n      mobSignDate\n      mobFile\n      doerefno\n      sawpDate\n      sawpRecivedDate\n      sawpFile\n      lbrDepoNum\n      lbrEndroseDate\n      lbrDepoAmount\n      lbrFile\n      remarkNLMob\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:Q}})]);console.log("Response",t)}catch(Z){throw console.error("Error executing GraphQL requests:",Z),Z}}),[])}})(),[o,d]=(0,r.useState)(!1),[c,p]=(0,r.useState)({interview:{id:"",tempID:"",sawpDate:"",sawpRecivedDate:"",sawpFile:"",status:""}});console.log(a,"DATA");const[m,u]=(0,r.useState)({sawpFile:null}),[h,g]=(0,r.useState)({sawpFile:null}),{register:f,handleSubmit:v,watch:y,formState:{errors:b},setValue:N}=(0,it.mN)({resolver:(0,lt.t)(ot.Fh)}),j=y("sawpFile");(0,r.useEffect)((()=>{if(a.length>0){const e=a.find((e=>e.tempID===t.tempID));if(e){if(p({interview:{sawpDate:e.sawpDate,sawpRecivedDate:e.sawpRecivedDate,sawpFile:e.sawpFile,status:e.IDDetails.status}}),e.sawpFile){const t=D(e.sawpFile);u((e=>(0,x.A)((0,x.A)({},e),{},{sawpFile:t})))}}else console.log("No interviewData found for candidate:",t.tempID)}else console.log("No interview schedules available.")}),[a,t.tempID]);const D=e=>"string"===typeof e&&e?e.split("/").pop():"",w=(e,t)=>{p((a=>(0,x.A)((0,x.A)({},a),{},{interview:(0,x.A)((0,x.A)({},a.interview),{},{[e]:t})})))};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const r=a.find((e=>e.tempID===t.tempID)),i={reqValue:(0,x.A)((0,x.A)({},c.interview),{},{sawpFile:h.sawpFile||c.interview.sawpFile,sawpDate:c.interview.sawpDate,sawpRecivedDate:c.interview.sawpRecivedDate,tempID:t.tempID})};try{if(r){await n({WPTrackingValue:{id:r.id,sawpDate:c.interview.sawpDate,sawpRecivedDate:c.interview.sawpRecivedDate,sawpFile:h.sawpFile||c.interview.sawpFile,tempID:t.tempID}});const e={id:r.IDDetails.id,status:c.interview.status};await s({InterviewValue:e}),console.log("Update call")}else await l(i),console.log("Create call",i);d(!0),console.log("Form submitted successfully!")}catch(o){console.error("Error submitting form",o)}},className:"p-5",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-5 mt-5",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"sawpDate",children:"Sawp Request Date"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"date",id:"sawpDate"},f("sawpDate")),{},{value:c.interview.sawpDate,onChange:e=>w("sawpDate",e.target.value)}))]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"sawpRecivedDate",children:"Sawp Recieved Date"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"date",id:"sawpRecivedDate"},f("sawpRecivedDate")),{},{value:c.interview.sawpRecivedDate,onChange:e=>w("sawpRecivedDate",e.target.value)}))]}),(0,i.jsx)("div",{className:"",children:(0,i.jsx)("div",{className:"flex items-center gap-5 mt-1",children:(0,i.jsx)(Da,{label:"Upload File",className:"p-4",onChangeFunc:e=>(async(e,t)=>{const a=e.target.files[0];N(t,a),a&&"sawpFile"===t&&(await pt(a,"sawpFile",g,"personName"),u((e=>(0,x.A)((0,x.A)({},e),{},{sawpFile:a.name}))))})(e,"sawpFile"),accept:"application/pdf",fileName:m.sawpFile||D(j),value:c.interview.sawpFile})})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"status",children:"Status"}),(0,i.jsx)("select",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",id:"status"},f("status")),{},{value:c.interview.status,onChange:e=>w("status",e.target.value),children:Sa.map(((e,t)=>(0,i.jsx)("option",{value:e,children:e},t)))}))]})]}),(0,i.jsx)("div",{className:"mt-5 flex justify-center",children:(0,i.jsx)("button",{type:"submit",className:"py-1 px-5 rounded-xl shadow-lg border-2 border-yellow hover:bg-yellow",children:"Submit"})})]}),o&&(0,i.jsx)(Le,{text:"Candidate details updated successfully",notification:o,path:"/recrutiles/workpasstracking"})]})},$a=e=>{let{candidate:t}=e;const{interviewSchedules:a}=za(),{interviewDetails:n}=va(),{wpTrackingDetails:s}=Ja(),[l,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)({interview:{id:"",doesubmitdate:"",doerefno:"",doeapprovedate:"",doeexpirydate:"",doefile:"",status:""}});console.log("CANDY TO EMP",a);const[p,m]=(0,r.useState)({doeFile:null}),[u,h]=(0,r.useState)({doeFile:null}),{register:g,handleSubmit:f,watch:v,formState:{errors:y},setValue:b}=(0,it.mN)({resolver:(0,lt.t)(ot.CF)}),N=v("doeFile","");(0,r.useEffect)((()=>{if(a.length>0){const e=a.find((e=>e.tempID===t.tempID));if(e){if(c({interview:{doesubmitdate:e.doesubmitdate,doerefno:e.doerefno,doeapprovedate:e.doeapprovedate,doeexpirydate:e.doeexpirydate,doefile:e.doefile,status:e.IDDetails.status}}),console.log("Form data set:",{status:e.IDDetails.status}),e.doefile){const t=j(e.doefile);m((e=>(0,x.A)((0,x.A)({},e),{},{doeFile:t})))}}else console.log("No interviewData found for candidate:",t.tempID)}else console.log("No interview schedules available.")}),[a,t.tempID]);const j=e=>"string"===typeof e&&e?e.split("/").pop():"",D=(e,t)=>{c((a=>(0,x.A)((0,x.A)({},a),{},{interview:(0,x.A)((0,x.A)({},a.interview),{},{[e]:t})})))};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("form",{className:"p-5",onSubmit:async e=>{var r,i;e.preventDefault();const l=a.find((e=>e.tempID===(null===t||void 0===t?void 0:t.tempID))),c=a.find((e=>e.IDDetails.tempID===(null===t||void 0===t?void 0:t.tempID))),p=null===l||void 0===l?void 0:l.id,m=null===(r=c.IDDetails)||void 0===r?void 0:r.id;if(console.log(c),null!==d&&void 0!==d&&d.interview)if(null!==d&&void 0!==d&&null!==(i=d.interview)&&void 0!==i&&i.status)try{const e=await s({WPTrackingValue:{id:p,doesubmitdate:d.interview.doesubmitdate,doerefno:d.interview.doerefno,doeapprovedate:d.interview.doeapprovedate,doeexpirydate:d.interview.doeexpirydate,doefile:u.doeFile?u.doeFile:d.interview.doefile}});console.log("WPTracking response:",e);const t={id:m,status:d.interview.status};o(!0),console.log("Submitting interview details with status:",t),await n({InterviewValue:t}),console.log("Interview status updated:",t)}catch(g){var x,h;null!==g&&void 0!==g&&null!==(x=g.response)&&void 0!==x&&null!==(h=x.data)&&void 0!==h&&h.errors?console.error("API Errors:",g.response.data.errors):console.error("Unexpected error:",g)}else console.error("Missing interview status in formData.");else console.error("Error: formData.interview is undefined.")},children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-5 mt-5",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"doesubmitdate",children:"Date of Submission"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"date",id:"doesubmitdate"},g("doesubmitdate")),{},{value:d.interview.doesubmitdate,onChange:e=>D("doesubmitdate",e.target.value)})),y.doesubmitdate&&(0,i.jsx)("span",{children:y.doesubmitdate.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"doeapprovedate",children:"Date of Approval"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"date",id:"doeapprovedate"},g("doeapprovedate")),{},{value:d.interview.doeapprovedate,onChange:e=>D("doeapprovedate",e.target.value)})),y.doeapprovedate&&(0,i.jsx)("span",{children:y.doeapprovedate.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"doeexpirydate",children:"Valid Until"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"date",id:"doeexpirydate"},g("doeexpirydate")),{},{value:d.interview.doeexpirydate,onChange:e=>D("doeexpirydate",e.target.value)})),y.doeexpirydate&&(0,i.jsx)("span",{children:y.doeexpirydate.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"doerefno",children:"DOE Reference Number"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"text",id:"doerefno"},g("doerefno")),{},{value:d.interview.doerefno,onChange:e=>D("doerefno",e.target.value)})),y.doerefno&&(0,i.jsx)("span",{children:y.doerefno.message})]}),(0,i.jsx)("div",{className:"",children:(0,i.jsxs)("div",{className:"flex items-center gap-5 mt-1",children:[(0,i.jsx)(Da,{label:"Upload File",className:"p-4",onChangeFunc:e=>(async(e,t)=>{const a=e.target.files[0];b(t,a),a&&"doeFile"===t&&(await pt(a,"doeFile",h,"personName"),m((e=>(0,x.A)((0,x.A)({},e),{},{doeFile:a.name}))))})(e,"doeFile"),accept:"application/pdf",register:g,fileName:p.doeFile||j(N),value:d.interview.doefile}),y.doeFile&&(0,i.jsx)("span",{children:y.doeFile.message})]})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"status",children:"Status"}),(0,i.jsx)("select",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",id:"status"},g("status")),{},{value:d.interview.status,onChange:e=>D("status",e.target.value),children:Sa.map(((e,t)=>(0,i.jsx)("option",{value:e,children:e},t)))}))]})]}),(0,i.jsx)("div",{className:"mt-5 flex justify-center",children:(0,i.jsx)("button",{type:"submit",className:"py-1 px-5 rounded-xl shadow-lg border-2 border-yellow hover:bg-yellow",children:"Submit"})})]}),l&&(0,i.jsx)(Le,{text:"Candidate details updated successfully",notification:l,path:"/recrutiles/workpasstracking"})]})},Ka=e=>{let{candidate:t}=e;const{interviewSchedules:a}=za(),{interviewDetails:n}=va(),{wpTrackingDetails:s,isLoading:l,error:o}=Ja(),[d,c]=(0,r.useState)(!1),[p,m]=(0,r.useState)({interview:{id:"",nlmssubmitdate:"",submissionrefrenceno:"",nlmsapprovedate:"",nlmsexpirydate:"",ldreferenceno:"",nlmsfile:"",status:""}}),[u,h]=(0,r.useState)({nlmsFile:null}),[g,f]=(0,r.useState)({nlmsFile:null}),{register:v,handleSubmit:y,watch:b,formState:{errors:N},setValue:j}=(0,it.mN)({resolver:(0,lt.t)(ot.s8)}),D=b("nlmsFile");(0,r.useEffect)((()=>{if(a.length>0){const e=a.find((e=>e.tempID===t.tempID));if(e){if(m({interview:{nlmssubmitdate:e.nlmssubmitdate,submissionrefrenceno:e.submissionrefrenceno,nlmsapprovedate:e.nlmsapprovedate,nlmsexpirydate:e.nlmsexpirydate,ldreferenceno:e.ldreferenceno,nlmsfile:e.nlmsfile,status:e.IDDetails.status}}),e.nlmsfile){const t=w(e.nlmsfile);h((e=>(0,x.A)((0,x.A)({},e),{},{nlmsFile:t}))),console.log("Uploaded file name set:",t)}}else console.log("No interviewData found for candidate:",t.tempID)}else console.log("No interview schedules available.")}),[a,t.tempID]);const w=e=>"string"===typeof e&&e?e.split("/").pop():"",A=(e,t)=>{console.log("Input changed:",e,t),m((a=>(0,x.A)((0,x.A)({},a),{},{interview:(0,x.A)((0,x.A)({},a.interview),{},{[e]:t})})))};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("form",{onSubmit:async e=>{var r;e.preventDefault();const i=a.find((e=>e.tempID===(null===t||void 0===t?void 0:t.tempID))),l=a.find((e=>e.IDDetails.tempID===(null===t||void 0===t?void 0:t.tempID))),o=null===i||void 0===i?void 0:i.id,d=null===(r=l.IDDetails)||void 0===r?void 0:r.id;if(console.log("Selected Interview Data:",i),console.log("Interview Schedule ID:",o),console.log("Form Data before submission:",p),console.log("Uploaded Nlms File:",g.nlmsFile),null!==p&&void 0!==p&&p.interview)try{await s({WPTrackingValue:{id:o,nlmssubmitdate:p.interview.nlmssubmitdate,submissionrefrenceno:p.interview.submissionrefrenceno,nlmsapprovedate:p.interview.nlmsapprovedate,nlmsexpirydate:p.interview.nlmsexpirydate,ldreferenceno:p.interview.ldreferenceno,nlmsfile:g.nlmsFile?g.nlmsFile:p.interview.nlmsfile}});const e={id:d,status:p.interview.status};c(!0),console.log("Submitting interview details with status:",e),await n({InterviewValue:e}),console.log("Interview status updated:",e)}catch(m){console.error("Error submitting interview details:",m)}else console.error("Error: formData.interview is undefined.")},className:"p-5",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-5 mt-5",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"nlmssubmitdate",children:"Date of Submission"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"date",id:"nlmssubmitdate"},v("nlmssubmitdate")),{},{value:p.interview.nlmssubmitdate,onChange:e=>A("nlmssubmitdate",e.target.value)}))]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"submissionrefrenceno",children:"Submission Reference Number"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"text",id:"submissionrefrenceno"},v("submissionrefrenceno")),{},{value:p.interview.submissionrefrenceno,onChange:e=>A("submissionrefrenceno",e.target.value)}))]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"nlmsapprovedate",children:"Date of Approval"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"date",id:"nlmsapprovedate"},v("nlmsapprovedate")),{},{value:p.interview.nlmsapprovedate,onChange:e=>A("nlmsapprovedate",e.target.value)}))]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"nlmsexpirydate",children:"Valid Until"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"date",id:"nlmsexpirydate"},v("nlmsexpirydate")),{},{value:p.interview.nlmsexpirydate,onChange:e=>A("nlmsexpirydate",e.target.value)}))]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"ldreferenceno",children:"LD Reference Number"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"text",id:"ldreferenceno"},v("ldreferenceno")),{},{value:p.interview.ldreferenceno,onChange:e=>A("ldreferenceno",e.target.value)}))]}),(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"flex items-center gap-5 mt-1",children:(0,i.jsx)(Da,{label:"Upload File",className:"p-4",onChangeFunc:e=>(async(e,t)=>{const a=e.target.files[0];j(t,a),a&&(console.log("File selected:",a.name),"nlmsFile"===t&&(await pt(a,"nlmsFile",f,"personName"),h((e=>(0,x.A)((0,x.A)({},e),{},{nlmsFile:a.name}))),console.log("Uploaded file name:",a.name)))})(e,"nlmsFile"),accept:"application/pdf",register:v,fileName:u.nlmsFile||w(D),value:p.interview.nlmsfile})})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"status",children:"Status"}),(0,i.jsx)("select",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",id:"status"},v("status")),{},{value:p.interview.status,onChange:e=>A("status",e.target.value),children:Sa.map(((e,t)=>(0,i.jsx)("option",{value:e,children:e},t)))}))]})]}),l&&(0,i.jsx)("div",{children:"Loading..."}),d&&(0,i.jsx)("div",{children:"Data updated successfully!"}),o&&(0,i.jsxs)("div",{children:["Error: ",o.message]}),(0,i.jsx)("div",{className:"mt-5 flex justify-center",children:(0,i.jsx)("button",{type:"submit",className:"py-1 px-5 rounded-xl shadow-lg border-2 border-yellow hover:bg-yellow",children:"Submit"})})]}),d&&(0,i.jsx)(Le,{text:"Candidate details updated successfully",notification:d,path:"/recrutiles/workpasstracking"})]})},Qa=e=>{let{candidate:t}=e;const{interviewSchedules:a}=za(),{wpTrackingDetails:n}=Ja(),{interviewDetails:s}=va(),[l,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)({interview:{id:"",bgsubmitdate:"",bgreceivedate:"",bgexpirydate:"",referenceno:"",bgamount:"",bgfile:"",status:""}}),[p,m]=(0,r.useState)({bgFile:null}),[u,h]=(0,r.useState)({bgFile:null}),{register:g,handleSubmit:f,watch:v,formState:{errors:y},setValue:b}=(0,it.mN)({resolver:(0,lt.t)(ot._j)}),N=v("bgFile","");(0,r.useEffect)((()=>{if(a.length>0){const e=a.find((e=>e.tempID===t.tempID));if(e){if(c({interview:{bgsubmitdate:e.bgsubmitdate,bgreceivedate:e.bgreceivedate,bgexpirydate:e.bgexpirydate,referenceno:e.referenceno,bgamount:e.bgamount,bgfile:e.bgfile,status:e.IDDetails.status}}),e.bgfile){const t=j(e.bgfile);m((e=>(0,x.A)((0,x.A)({},e),{},{bgFile:t})))}}else console.log("No interviewData found for candidate:",t.tempID)}else console.log("No interview schedules available.")}),[a,t.tempID]);const j=e=>"string"===typeof e&&e?e.split("/").pop():"",D=(e,t)=>{c((a=>(0,x.A)((0,x.A)({},a),{},{interview:(0,x.A)((0,x.A)({},a.interview),{},{[e]:t})})))};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("form",{onSubmit:async e=>{var r;e.preventDefault();const i=a.find((e=>e.tempID===(null===t||void 0===t?void 0:t.tempID))),l=a.find((e=>e.IDDetails.tempID===(null===t||void 0===t?void 0:t.tempID))),c=null===i||void 0===i?void 0:i.id,p=null===(r=l.IDDetails)||void 0===r?void 0:r.id;if(null!==d&&void 0!==d&&d.interview)if(c)try{const e=await n({WPTrackingValue:{id:c,bgsubmitdate:d.interview.bgsubmitdate,bgreceivedate:d.interview.bgreceivedate,bgexpirydate:d.interview.bgexpirydate,referenceno:d.interview.referenceno,bgamount:d.interview.bgamount,bgfile:u.bgFile?u.bgFile:d.interview.bgfile}}),t={id:p,status:d.interview.status};o(!0),console.log("Submitting interview details with status:",t),await s({InterviewValue:t}),console.log("Interview status updated:",t),e.errors&&e.errors.length>0&&console.error("Response errors:",e.errors)}catch(m){console.error("Error submitting interview details:",m)}else console.error("Error: No interview schedule found for this candidate.");else console.error("Error: formData.interview is undefined.")},className:"p-5",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-5 mt-5",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"bgsubmitdate",children:"Date of Submission"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"date",id:"bgsubmitdate"},g("bgsubmitdate")),{},{value:d.interview.bgsubmitdate,onChange:e=>D("bgsubmitdate",e.target.value)}))]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"bgreceivedate",children:"Date Received"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"date",id:"bgreceivedate"},g("bgreceivedate")),{},{value:d.interview.bgreceivedate,onChange:e=>D("bgreceivedate",e.target.value)}))]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"bgexpirydate",children:"Valid Until"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"date",id:"bgexpirydate"},g("bgexpirydate")),{},{value:d.interview.bgexpirydate,onChange:e=>D("bgexpirydate",e.target.value)}))]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"bgamount",children:"Bank Guarantee Amount"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"text",id:"bgamount"},g("bgamount")),{},{value:d.interview.bgamount,onChange:e=>D("bgamount",e.target.value)}))]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{htmlFor:"referenceno",children:[" ","Bank Guarantee Reference Number"]}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"text",id:"referenceno"},g("referenceno")),{},{value:d.interview.referenceno,onChange:e=>D("referenceno",e.target.value)}))]}),(0,i.jsx)("div",{className:"",children:(0,i.jsx)("div",{className:"flex items-center gap-5 mt-1",children:(0,i.jsx)(Da,{label:"Upload File",className:"p-4",onChangeFunc:e=>(async(e,t)=>{const a=e.target.files[0];b(t,a),a&&"bgFile"===t&&(await pt(a,"bgFile",h,"personName"),m((e=>(0,x.A)((0,x.A)({},e),{},{bgFile:a.name}))))})(e,"bgFile"),accept:"application/pdf",register:g,fileName:p.bgFile||j(N),value:d.interview.bgfile})})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"status",children:"Status"}),(0,i.jsx)("select",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",id:"status"},g("status")),{},{value:d.interview.status,onChange:e=>D("status",e.target.value),children:Sa.map(((e,t)=>(0,i.jsx)("option",{value:e,children:e},t)))}))]})]}),(0,i.jsx)("div",{className:"mt-5 flex justify-center",children:(0,i.jsx)("button",{type:"submit",className:"py-1 px-5 rounded-xl shadow-lg border-2 border-yellow hover:bg-yellow",children:"Submit"})})]}),l&&(0,i.jsx)(Le,{text:"Candidate details updated successfully",notification:l,path:"/recrutiles/workpasstracking"})]})},Za=e=>{let{candidate:t}=e;const{interviewSchedules:a}=za(),{interviewDetails:n}=va(),{wpTrackingDetails:s}=Ja(),[l,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)({interview:{id:"",tbapurchasedate:"",submitdateendorsement:"",jitpaexpirydate:"",jitpaamount:"",jitpafile:"",status:""}}),[p,m]=(0,r.useState)({jitpaFile:null}),[u,h]=(0,r.useState)({jitpaFile:null}),{register:g,handleSubmit:f,watch:v,formState:{errors:y},setValue:b}=(0,it.mN)({resolver:(0,lt.t)(ot.gm)}),N=v("jitpaFile","");(0,r.useEffect)((()=>{if(a.length>0){const e=a.find((e=>e.tempID===t.tempID));if(e){if(c({interview:{tbapurchasedate:e.tbapurchasedate,submitdateendorsement:e.submitdateendorsement,jitpaexpirydate:e.jitpaexpirydate,jitpaamount:e.jitpaamount,jitpafile:e.jitpafile,status:e.IDDetails.status}}),e.jitpafile){const t=j(e.jitpafile);m((e=>(0,x.A)((0,x.A)({},e),{},{jitpaFile:t}))),console.log("Uploaded file name set:",t)}}else console.log("No interviewData found for candidate:",t.tempID)}else console.log("No interview schedules available.")}),[a,t.tempID]);const j=e=>"string"===typeof e&&e?e.split("/").pop():"",D=(e,t)=>{c((a=>(0,x.A)((0,x.A)({},a),{},{interview:(0,x.A)((0,x.A)({},a.interview),{},{[e]:t})})))};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("form",{onSubmit:async e=>{var r;e.preventDefault();const i=a.find((e=>e.tempID===(null===t||void 0===t?void 0:t.tempID))),l=a.find((e=>e.IDDetails.tempID===(null===t||void 0===t?void 0:t.tempID))),c=null===i||void 0===i?void 0:i.id,p=null===(r=l.IDDetails)||void 0===r?void 0:r.id;if(null!==d&&void 0!==d&&d.interview)if(c)try{const e=await s({WPTrackingValue:{id:c,tbapurchasedate:d.interview.tbapurchasedate,submitdateendorsement:d.interview.submitdateendorsement,jitpaexpirydate:d.interview.jitpaexpirydate,jitpaamount:d.interview.jitpaamount,jitpafile:u.jitpaFile?u.jitpaFile:d.interview.jitpafile}}),t={id:p,status:d.interview.status};o(!0),console.log("Submitting interview details with status:",t),await n({InterviewValue:t}),console.log("Interview status updated:",t),e.errors&&e.errors.length>0&&console.error("Response errors:",e.errors)}catch(m){console.error("Error submitting interview details:",m)}else console.error("Error: No interview schedule found for this candidate.");else console.error("Error: formData.interview is undefined.")},className:"p-5",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-5 mt-5",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"tbapurchasedate",children:"Date of Purchase"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"date",id:"tbapurchasedate"},g("tbapurchasedate")),{},{value:d.interview.tbapurchasedate,onChange:e=>D("tbapurchasedate",e.target.value)}))]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"submitdateendorsement",children:"Date of Endrosement"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"date",id:"submitdateendorsement"},g("submitdateendorsement")),{},{value:d.interview.submitdateendorsement,onChange:e=>D("submitdateendorsement",e.target.value)}))]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"jitpaexpirydate",children:"Valid Until"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"date",id:"jitpaexpirydate"},g("jitpaexpirydate")),{},{value:d.interview.jitpaexpirydate,onChange:e=>D("jitpaexpirydate",e.target.value)}))]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"jitpaamount",children:"JITPA Amount"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"text",id:"jitpaamount"},g("jitpaamount")),{},{value:d.interview.jitpaamount,onChange:e=>D("jitpaamount",e.target.value)}))]}),(0,i.jsx)("div",{className:"",children:(0,i.jsx)("div",{className:"flex items-center gap-5 mt-1",children:(0,i.jsx)(Da,{label:"Upload File",className:"p-4",onChangeFunc:e=>(async(e,t)=>{const a=e.target.files[0];b(t,a),a&&"jitpaFile"===t&&(await pt(a,"jitpaFile",h,"personName"),m((e=>(0,x.A)((0,x.A)({},e),{},{jitpaFile:a.name}))))})(e,"jitpaFile"),accept:"application/pdf",register:g,fileName:p.jitpaFile||j(N),value:d.interview.jitpafile})})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"status",children:"Status"}),(0,i.jsx)("select",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",id:"status"},g("status")),{},{value:d.interview.status,onChange:e=>D("status",e.target.value),children:Sa.map(((e,t)=>(0,i.jsx)("option",{value:e,children:e},t)))}))]})]}),(0,i.jsx)("div",{className:"mt-5 flex justify-center",children:(0,i.jsx)("button",{type:"submit",className:"py-1 px-5 rounded-xl shadow-lg border-2 border-yellow hover:bg-yellow",children:"Submit"})})]}),l&&(0,i.jsx)(Le,{text:"Candidate details updated successfully",notification:l,path:"/recrutiles/workpasstracking"})]})},Xa=e=>{let{candidate:t}=e;const{interviewSchedules:a}=za(),{interviewDetails:n}=va(),{wpTrackingDetails:s}=Ja(),[l,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)({interview:{id:"",lbrDepoNum:"",lbrEndroseDate:"",lbrDepoAmount:"",lbrFile:"",status:""}}),[p,m]=(0,r.useState)({lbrFile:null}),[u,h]=(0,r.useState)({lbrFile:null}),{register:g,handleSubmit:f,watch:v,formState:{errors:y},setValue:b}=(0,it.mN)({resolver:(0,lt.t)(ot.iR)}),N=v("lbrFile");(0,r.useEffect)((()=>{if(a.length>0){const e=a.find((e=>e.tempID===t.tempID));if(e){if(c({interview:{lbrDepoNum:e.lbrDepoNum,lbrEndroseDate:e.lbrEndroseDate,lbrDepoAmount:e.lbrDepoAmount,lbrFile:e.lbrFile,status:e.status,status:e.IDDetails.status}}),e.lbrFile){const t=j(e.lbrFile);m((e=>(0,x.A)((0,x.A)({},e),{},{lbrFile:t}))),console.log("Uploaded file name set:",t)}}else console.log("No interviewData found for candidate:",t.tempID)}else console.log("No interview schedules available.")}),[a,t.tempID]);const j=e=>"string"===typeof e&&e?e.split("/").pop():"",D=(e,t)=>{c((a=>(0,x.A)((0,x.A)({},a),{},{interview:(0,x.A)((0,x.A)({},a.interview),{},{[e]:t})})))};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("form",{onSubmit:async e=>{var r;e.preventDefault();const i=a.find((e=>e.tempID===(null===t||void 0===t?void 0:t.tempID))),l=a.find((e=>e.IDDetails.tempID===(null===t||void 0===t?void 0:t.tempID))),c=null===i||void 0===i?void 0:i.id,p=null===(r=l.IDDetails)||void 0===r?void 0:r.id;if(null!==d&&void 0!==d&&d.interview)if(c)try{const e=await s({WPTrackingValue:{id:c,lbrDepoNum:d.interview.lbrDepoNum,lbrEndroseDate:d.interview.lbrEndroseDate,lbrDepoAmount:d.interview.lbrDepoAmount,lbrFile:u.lbrFile?u.lbrFile:d.interview.lbrFile}}),t={id:p,status:d.interview.status};o(!0),console.log("Submitting interview details with status:",t),await n({InterviewValue:t}),console.log("Interview status updated:",t),e.errors&&e.errors.length>0&&console.error("Response errors:",e.errors)}catch(m){console.error("Error submitting interview details:",m)}else console.error("Error: No interview schedule found for this candidate.");else console.error("Error: formData.interview is undefined.")},className:"p-5",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-5 mt-5",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"lbrDepoNum",children:"Labour Deposit Receipt Number"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"text",id:"lbrDepoNum"},g("lbrDepoNum")),{},{value:d.interview.lbrDepoNum,onChange:e=>D("lbrDepoNum",e.target.value)}))]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"lbrEndroseDate",children:"Date Endrosement Of Labour Deposit"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"date",id:"lbrEndroseDate"},g("lbrEndroseDate")),{},{value:d.interview.lbrEndroseDate,onChange:e=>D("lbrEndroseDate",e.target.value)}))]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"lbrDepoAmount",children:"Deposit Amount"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"text",id:"lbrDepoAmount"},g("lbrDepoAmount")),{},{value:d.interview.lbrDepoAmount,onChange:e=>D("lbrDepoAmount",e.target.value)}))]}),(0,i.jsx)("div",{className:"",children:(0,i.jsx)("div",{className:"flex items-center gap-5 mt-1",children:(0,i.jsx)(Da,{label:"Upload File",className:"p-4",onChangeFunc:e=>(async(e,t)=>{const a=e.target.files[0];b(t,a),a&&"lbrFile"===t&&(await pt(a,"lbrFile",h,"personName"),m((e=>(0,x.A)((0,x.A)({},e),{},{lbrFile:a.name}))))})(e,"lbrFile"),accept:"application/pdf",register:g,fileName:p.lbrFile||j(N),value:d.interview.lbrFile})})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"status",children:"Status"}),(0,i.jsx)("select",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",id:"status"},g("status")),{},{value:d.interview.status,onChange:e=>D("status",e.target.value),children:Sa.map(((e,t)=>(0,i.jsx)("option",{value:e,children:e},t)))}))]})]}),(0,i.jsx)("div",{className:"mt-5 flex justify-center",children:(0,i.jsx)("button",{type:"submit",className:"py-1 px-5 rounded-xl shadow-lg border-2 border-yellow hover:bg-yellow",children:"Submit"})})]}),l&&(0,i.jsx)(Le,{text:"Candidate details updated successfully",notification:l,path:"/recrutiles/workpasstracking"})]})},en=e=>{let{candidate:t}=e;const{interviewSchedules:a}=za(),{wpTrackingDetails:n}=Ja(),{interviewDetails:s}=va(),[l,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)({interview:{id:"",immbdno:"",docsubmitdate:"",visaapprovedate:"",visareferenceno:"",visaFile:"",status:""}}),[p,m]=(0,r.useState)({visaFile:null}),[u,h]=(0,r.useState)({visaFile:null}),{register:g,handleSubmit:f,watch:v,formState:{errors:y},setValue:b}=(0,it.mN)({resolver:(0,lt.t)(ot.UB)}),N=v("visaFile");(0,r.useEffect)((()=>{if(a.length>0){const e=a.find((e=>e.tempID===t.tempID));if(e){if(c({interview:{immbdno:e.immbdno,docsubmitdate:e.docsubmitdate,visaapprovedate:e.visaapprovedate,visareferenceno:e.visareferenceno,visaFile:e.visaFile,status:e.status,status:e.IDDetails.status}}),e.visaFile){const t=j(e.visaFile);m((e=>(0,x.A)((0,x.A)({},e),{},{visaFile:t}))),console.log("Uploaded file name set:",t)}}else console.log("No interviewData found for candidate:",t.tempID)}else console.log("No interview schedules available.")}),[a,t.tempID]);const j=e=>"string"===typeof e&&e?e.split("/").pop():"",D=(e,t)=>{c((a=>(0,x.A)((0,x.A)({},a),{},{interview:(0,x.A)((0,x.A)({},a.interview),{},{[e]:t})})))};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("form",{onSubmit:async e=>{var r;e.preventDefault();const i=a.find((e=>e.tempID===(null===t||void 0===t?void 0:t.tempID))),l=a.find((e=>e.IDDetails.tempID===(null===t||void 0===t?void 0:t.tempID))),c=null===i||void 0===i?void 0:i.id,p=null===(r=l.IDDetails)||void 0===r?void 0:r.id;if(null!==d&&void 0!==d&&d.interview)if(c)try{const e=await n({WPTrackingValue:{id:c,immbdno:d.interview.immbdno,docsubmitdate:d.interview.docsubmitdate,visaapprovedate:d.interview.visaapprovedate,visareferenceno:d.interview.visareferenceno,visaFile:u.visaFile?u.visaFile:d.interview.visaFile}}),t={id:p,status:d.interview.status};o(!0),console.log("Submitting interview details with status:",t),await s({InterviewValue:t}),console.log("Interview status updated:",t),e.errors&&e.errors.length>0&&console.error("Response errors:",e.errors)}catch(m){console.error("Error submitting interview details:",m)}else console.error("Error: No interview schedule found for this candidate.");else console.error("Error: formData.interview is undefined.")},className:"p-5",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-5 mt-5",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"docsubmitdate",children:"Date of Submission"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"date",id:"docsubmitdate"},g("docsubmitdate")),{},{value:d.interview.docsubmitdate,onChange:e=>D("docsubmitdate",e.target.value)}))]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"immbdno",children:"Immigration Reference Number"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"text",id:"immbdno"},g("immbdno")),{},{value:d.interview.immbdno,onChange:e=>D("immbdno",e.target.value)}))]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"visaapprovedate",children:"Date of Approval"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"date",id:" visaapprovedate"},g(" visaapprovedate")),{},{value:d.interview.visaapprovedate,onChange:e=>D("visaapprovedate",e.target.value)}))]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"visareferenceno",children:"Visa Reference Number"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"text",id:"visareferenceno"},g("visareferenceno")),{},{value:d.interview.visareferenceno,onChange:e=>D("visareferenceno",e.target.value)}))]}),(0,i.jsx)("div",{className:"",children:(0,i.jsx)("div",{className:"flex items-center gap-5 mt-1",children:(0,i.jsx)(Da,{label:"Upload File",className:"p-4",onChangeFunc:e=>(async(e,t)=>{const a=e.target.files[0];b(t,a),a&&"visaFile"===t&&(await pt(a,"visaFile",h,"personName"),m((e=>(0,x.A)((0,x.A)({},e),{},{visaFile:a.name}))))})(e,"visaFile"),accept:"application/pdf",register:g,fileName:p.visaFile||j(N),value:d.interview.visaFile})})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"status",children:"Status"}),(0,i.jsx)("select",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",id:"status"},g("status")),{},{value:d.interview.status,onChange:e=>D("status",e.target.value),children:Sa.map(((e,t)=>(0,i.jsx)("option",{value:e,children:e},t)))}))]})]}),(0,i.jsx)("div",{className:"mt-5 flex justify-center",children:(0,i.jsx)("button",{type:"submit",className:"py-1 px-5 rounded-xl shadow-lg border-2 border-yellow hover:bg-yellow",children:"Submit"})})]}),l&&(0,i.jsx)(Le,{text:"Candidate details updated successfully",notification:l,path:"/recrutiles/workpasstracking"})]})},tn=e=>{let{candidate:t}=e;const{interviewSchedules:a}=za(),{wpTrackingDetails:n}=Ja(),{interviewDetails:s}=va(),[l,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)({interview:{id:"",departuredate:"",arrivaldate:"",cityname:"",airfare:"",airticketfile:"",status:""}}),[p,m]=(0,r.useState)({airTktFile:null}),[u,h]=(0,r.useState)({airTktFile:null}),{register:g,handleSubmit:f,watch:v,formState:{errors:y},setValue:b}=(0,it.mN)({resolver:(0,lt.t)(ot.Rr)}),N=v("airTktFile","");console.log(a),(0,r.useEffect)((()=>{if(a.length>0){const e=a.find((e=>e.tempID===t.tempID));if(e){if(c({interview:{departuredate:e.departuredate,arrivaldate:e.arrivaldate,cityname:e.cityname,airfare:e.airfare,airticketfile:e.airticketfile,status:e.IDDetails.status}}),e.airticketfile){const t=j(e.airticketfile);m((e=>(0,x.A)((0,x.A)({},e),{},{airTktFile:t}))),console.log("Uploaded file name set:",t)}}else console.log("No interviewData found for candidate:",t.tempID)}else console.log("No interview schedules available.")}),[a,t.tempID]);const j=e=>"string"===typeof e&&e?e.split("/").pop():"",D=(e,t)=>{c((a=>(0,x.A)((0,x.A)({},a),{},{interview:(0,x.A)((0,x.A)({},a.interview),{},{[e]:t})})))};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("form",{onSubmit:async e=>{var r;e.preventDefault();const i=a.find((e=>e.tempID===(null===t||void 0===t?void 0:t.tempID))),l=a.find((e=>e.IDDetails.tempID===(null===t||void 0===t?void 0:t.tempID))),c=null===i||void 0===i?void 0:i.id,p=null===(r=l.IDDetails)||void 0===r?void 0:r.id;if(null!==d&&void 0!==d&&d.interview)if(c)try{const e=await n({WPTrackingValue:{id:c,departuredate:d.interview.departuredate,arrivaldate:d.interview.arrivaldate,cityname:d.interview.cityname,airfare:d.interview.airfare,airticketfile:u.airTktFile?u.airTktFile:d.interview.airticketfile}}),t={id:p,status:d.interview.status};o(!0),console.log("Submitting interview details with status:",t),await s({InterviewValue:t}),console.log("Interview status updated:",t),e.errors&&e.errors.length>0&&console.error("Response errors:",e.errors)}catch(m){console.error("Error submitting interview details:",m)}else console.error("Error: No interview schedule found for this candidate.");else console.error("Error: formData.interview is undefined.")},className:"p-5",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-5 mt-5",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"departuredate",children:"Date of Departure"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"date",id:"departuredate"},g("departuredate")),{},{value:d.interview.departuredate,onChange:e=>D("departuredate",e.target.value)}))]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"arrivaldate",children:"Date of Arrival"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"date",id:"arrivaldate"},g("arrivaldate")),{},{value:d.interview.arrivaldate,onChange:e=>D("arrivaldate",e.target.value)}))]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"cityname",children:"City of Departure"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"text",id:"cityname"},g("cityname")),{},{value:d.interview.cityname,onChange:e=>D("cityname",e.target.value)}))]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"airfare",children:"AirFare"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"text",id:"airfare"},g("airfare")),{},{value:d.interview.airfare,onChange:e=>D("airfare",e.target.value)}))]}),(0,i.jsx)("div",{className:"",children:(0,i.jsx)("div",{className:"flex items-center gap-5 mt-1",children:(0,i.jsx)(Da,{label:"Upload File",className:"p-4",onChangeFunc:e=>(async(e,t)=>{const a=e.target.files[0];b(t,a),a&&"airTktFile"===t&&(await pt(a,"airTktFile",h,"personName"),m((e=>(0,x.A)((0,x.A)({},e),{},{airTktFile:a.name}))))})(e,"airTktFile"),accept:"application/pdf",register:g,fileName:p.airTktFile||j(N),value:d.interview.airfare})})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"status",children:"Status"}),(0,i.jsx)("select",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",id:"status"},g("status")),{},{value:d.interview.status,onChange:e=>D("status",e.target.value),children:Sa.map(((e,t)=>(0,i.jsx)("option",{value:e,children:e},t)))}))]})]}),(0,i.jsx)("div",{className:"mt-5 flex justify-center",children:(0,i.jsx)("button",{type:"submit",className:"py-1 px-5 rounded-xl shadow-lg border-2 border-yellow hover:bg-yellow",children:"Submit"})})]}),l&&(0,i.jsx)(Le,{text:"Candidate details updated successfully",notification:l,path:"/recrutiles/workpasstracking"})]})},an=e=>{let{candidate:t}=e;const{interviewSchedules:a}=za(),{wpTrackingDetails:n}=Ja(),{interviewDetails:s}=va(),[l,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)({interview:{id:"",mobSignDate:"",agentname:"",remarkNLMob:"",mobFile:"",status:""}}),[p,m]=(0,r.useState)({mobFile:null}),[u,h]=(0,r.useState)({mobFile:null}),{register:g,handleSubmit:f,watch:v,formState:{errors:y},setValue:b}=(0,it.mN)({resolver:(0,lt.t)(ot.Io)}),N=v("mobFile","");(0,r.useEffect)((()=>{if(a.length>0){const e=a.find((e=>e.tempID===t.tempID));if(e){if(c({interview:{mobSignDate:e.mobSignDate,agentname:e.agentname,remarkNLMob:e.remarkNLMob,mobFile:e.mobFile,status:e.IDDetails.status}}),e.mobFile){const t=j(e.mobFile);m((e=>(0,x.A)((0,x.A)({},e),{},{mobFile:t}))),console.log("Uploaded file name set:",t)}}else console.log("No interviewData found for candidate:",t.tempID)}else console.log("No interview schedules available.")}),[a,t.tempID]);const j=e=>"string"===typeof e&&e?e.split("/").pop():"",D=(e,t)=>{c((a=>(0,x.A)((0,x.A)({},a),{},{interview:(0,x.A)((0,x.A)({},a.interview),{},{[e]:t})})))};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("form",{onSubmit:async e=>{var r;e.preventDefault();const i=a.find((e=>e.tempID===(null===t||void 0===t?void 0:t.tempID))),l=a.find((e=>e.IDDetails.tempID===(null===t||void 0===t?void 0:t.tempID))),c=null===i||void 0===i?void 0:i.id,p=null===(r=l.IDDetails)||void 0===r?void 0:r.id;if(null!==d&&void 0!==d&&d.interview)if(c)try{const e=await n({WPTrackingValue:{id:c,mobSignDate:d.interview.mobSignDate,agentname:d.interview.agentname,remarkNLMob:d.interview.remarkNLMob,mobFile:u.mobFile?u.mobFile:d.interview.mobFile}}),t={id:p,status:d.interview.status};o(!0),console.log("Submitting interview details with status:",t),await s({InterviewValue:t}),console.log("Interview status updated:",t),e.errors&&e.errors.length>0&&console.error("Response errors:",e.errors)}catch(m){console.error("Error submitting interview details:",m)}else console.error("Error: No interview schedule found for this candidate.");else console.error("Error: formData.interview is undefined.")},className:"p-5",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-5 mt-5",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"mobSignDate",children:"Date of Mobilization"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"date",id:"mobSignDate"},g("mobSignDate")),{},{value:d.interview.mobSignDate,onChange:e=>D("mobSignDate",e.target.value)}))]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"agentname",children:"Agent Name"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"text",id:"agentname"},g("agentname")),{},{value:d.interview.agentname,onChange:e=>D("agentname",e.target.value)}))]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"remarkNLMob",children:"Recruitment Remarks"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",type:"text",id:"remarkNLMob"},g("remarkNLMob")),{},{value:d.interview.remarkNLMob,onChange:e=>D("remarkNLMob",e.target.value)}))]}),(0,i.jsx)("div",{className:"",children:(0,i.jsx)("div",{className:"flex items-center gap-5 mt-1",children:(0,i.jsx)(Da,{label:"Upload File",className:"p-4",onChangeFunc:e=>(async(e,t)=>{const a=e.target.files[0];b(t,a),a&&"mobFile"===t&&(await pt(a,"mobFile",h,"personName"),m((e=>(0,x.A)((0,x.A)({},e),{},{mobFile:a.name}))))})(e,"mobFile"),accept:"application/pdf",register:g,fileName:p.mobFile||j(N),value:d.interview.mobFile})})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"status",children:"Status"}),(0,i.jsx)("select",(0,x.A)((0,x.A)({className:"w-full border p-2 rounded mt-1",id:"status"},g("status")),{},{value:d.interview.status,onChange:e=>D("status",e.target.value),children:Sa.map(((e,t)=>(0,i.jsx)("option",{value:e,children:e},t)))}))]})]}),(0,i.jsx)("div",{className:"mt-5 flex justify-center",children:(0,i.jsx)("button",{type:"submit",className:"py-1 px-5 rounded-xl shadow-lg border-2 border-yellow hover:bg-yellow",children:"Submit"})})]}),l&&(0,i.jsx)(Le,{text:"Candidate details updated successfully",notification:l,path:"/recrutiles/workpasstracking"})]})},nn=e=>{let{candidate:t,onClose:a,onSave:n}=e;const[s,l]=(0,r.useState)(0);return(0,i.jsx)("div",{className:"fixed inset-0 bg-grey bg-opacity-80 z-50 center",children:(0,i.jsxs)("div",{className:"bg-white p-10 rounded-lg w-full max-w-[700px] overflow-hidden relative",children:[(0,i.jsx)("button",{onClick:a,className:"absolute top-2 right-2 border rounded-full p-1",children:(0,i.jsx)(b.RQJ,{size:20})}),(0,i.jsxs)("h2",{className:"text-xl font-bold mb-4 p-2 rounded-md bg-[#f7f183ea]",children:["TempID: ",null===t||void 0===t?void 0:t.tempID," \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 Name: ",null===t||void 0===t?void 0:t.name]}),(0,i.jsx)("article",{className:"flex gap-5 text-black mt-5 overflow-x-auto leaveManagementTable",children:["SAWP","DOE","NLMS","Bank Guarantee","JITPA","Labour Deposit","Immigration","Air Ticket","Non Local Mobilization"].map(((e,t)=>(0,i.jsx)("h1",{className:"px-3 py-1 rounded-lg whitespace-nowrap ".concat(s===t?"border-2 border-[#FEF116] bg-[#FFFEF4]":"bg-[#DDDDDD]"),onClick:()=>(e=>{l(e)})(t),children:e},t)))}),0===s&&(0,i.jsx)(Ga,{candidate:t}),1===s&&(0,i.jsx)($a,{candidate:t}),2===s&&(0,i.jsx)(Ka,{candidate:t}),3===s&&(0,i.jsx)(Qa,{candidate:t}),4===s&&(0,i.jsx)(Za,{candidate:t}),5===s&&(0,i.jsx)(Xa,{candidate:t}),6===s&&(0,i.jsx)(en,{candidate:t}),7===s&&(0,i.jsx)(tn,{candidate:t}),8===s&&(0,i.jsx)(an,{candidate:t})]})})},rn=e=>{let{data:t,fileUpload:a,urlValue:n}=e;const[s,l]=(0,r.useState)(!1),[o,d]=(0,r.useState)(!1),[c,p]=(0,r.useState)([]);console.log(t);const m=e=>{p(e),l(!s)},u=e=>{p(e),d(!o)};return(0,i.jsxs)("div",{children:[t&&t.length>0?(0,i.jsxs)("table",{className:" w-full",children:[(0,i.jsx)("thead",{className:"bg-[#939393] text-white",children:(0,i.jsx)("tr",{children:["TempID","Name","Nationality","Position","SAWP Request Date","Sawp Recieved Date","SAWP PDF","Form","Edit Form"].map(((e,t)=>(0,i.jsx)("th",{className:"py-4 text-[15px] text-white",children:e},t)))})}),(0,i.jsx)("tbody",{children:t&&t.length>0?t.map(((e,t)=>(0,i.jsxs)("tr",{className:"text-center text-[16px] shadow-[0_3px_6px_1px_rgba(0,0,0,0.2)] hover:bg-medium_blue",children:[(0,i.jsx)("td",{className:"py-3",children:e.tempID}),(0,i.jsx)("td",{className:"py-3",children:e.name||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:e.nationality||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:e.position||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:He(e.WPTrackDetails_sawpDate)||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:He(e.WPTrackDetails_sawpRecivedDate)||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:e.WPTrackDetails_sawpFile?(0,i.jsx)("a",{href:n,onClick:t=>{e.WPTrackDetails_sawpFile?a(e.WPTrackDetails_sawpFile):t.preventDefault()},download:!0,className:e.WPTrackDetails_sawpFile?"border-b-2 border-[orange] text-[orange]":"",children:e.WPTrackDetails_sawpFile?"Download":"N/A"}):(0,i.jsx)("p",{children:"N/A"})}),(0,i.jsx)("td",{className:"py-3 text-center",onClick:()=>u(e),children:"View"}),(0,i.jsx)("td",{className:"text-2xl cursor-pointer py-3 center",onClick:()=>m(e),children:(0,i.jsx)(Zt.GQd,{})})]},t))):(0,i.jsx)("tr",{})})]}):(0,i.jsx)("div",{className:"text-center mt-6 py-20",children:(0,i.jsx)("p",{className:"text-lg text-dark_grey mt-2",children:"No candidate Available"})}),o&&(0,i.jsx)(Qt,{candidate:c,onClose:u}),s&&(0,i.jsx)(nn,{candidate:c,onClose:m})]})},sn=()=>{const[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(!0),[l,o]=(0,r.useState)(null),[d,c]=(0,r.useState)(!1),[p,m]=(0,r.useState)(null),[u,g]=(0,r.useState)(!1),[f,v]=(0,r.useState)([]),y=(0,r.useRef)(null),[b,N]=(0,r.useState)("SAWP"),[j,D]=(0,r.useState)("SAWP"),[w,A]=(0,r.useState)([]),[S,E]=(0,r.useState)(!1),[I,C]=(0,r.useState)(""),{WPTrackings:k,empPDData:R,IVSSDetails:T}=(0,r.useContext)(s.Y);(0,r.useEffect)((()=>{const e=R.reduce(((e,t)=>(e[t.tempID]=t,e)),{}),a=T.reduce(((e,t)=>(e[t.tempID]=t,e)),{}),n=k.reduce(((e,t)=>(e[t.tempID]=t,e)),{}),r=Object.values(e).filter((e=>a[e.tempID]&&n[e.tempID])).map((e=>{const t=n[e.tempID]||{},r=a[e.tempID]||{};return(0,x.A)((0,x.A)({},e),{},{interviewDetails:r,WPTrackDetails:t})})).map((e=>{const t=(0,x.A)({},e);return console.log(e,"D"),t.interviewDetails&&(Object.entries(t.interviewDetails).forEach((e=>{let[a,n]=e;t["interviewDetails_".concat(a)]=n})),delete t.interviewDetails),t.WPTrackDetails&&(Object.entries(t.WPTrackDetails).forEach((e=>{let[a,n]=e;t["WPTrackDetails_".concat(a)]=n})),delete t.WPTrackDetails),t}));if(r&&r.length>0){const e=r.filter((e=>{var t;return"SAWP"===(null===e||void 0===e||null===(t=e.interviewDetails_status)||void 0===t?void 0:t.toUpperCase())}));v(e),t(r)}else t([])}),[k,R,T]);const P=t=>{const a=t.target.value;if(D(a),N(a),!e)return;let n=_(a,e);w.length>0&&(n=n.filter((e=>w.some((t=>"SAWP"===t?"SAWP"===e.contractType:"LPA"===t?"LPA"===e.contractType&&("OnShore"===e.empType||"OffShore"===e.empType):"OnShore"===t?"OnShore"===e.empType&&"SAWP"!==e.contractType:"OffShore"!==t||"OffShore"===e.empType&&"SAWP"!==e.contractType))))),v(n),g(!1)},_=(e,t)=>{let a=[];switch(e){case"SAWP":a=t.filter((e=>{var t;return"SAWP"===(null===e||void 0===e||null===(t=e.interviewDetails_status)||void 0===t?void 0:t.toUpperCase())}));break;case"DOE":a=t.filter((e=>{var t;return"DOE"===(null===e||void 0===e||null===(t=e.interviewDetails_status)||void 0===t?void 0:t.toUpperCase())}));break;case"NLMS":a=t.filter((e=>{var t;return"NLMS"===(null===e||void 0===e||null===(t=e.interviewDetails_status)||void 0===t?void 0:t.toUpperCase())}));break;case"Bank Guarantee":a=t.filter((e=>"Bank Guarantee"===(null===e||void 0===e?void 0:e.interviewDetails_status)));break;case"JITPA":a=t.filter((e=>{var t;return"JITPA"===(null===e||void 0===e||null===(t=e.interviewDetails_status)||void 0===t?void 0:t.toUpperCase())}));break;case"Labour Deposit":a=t.filter((e=>"Labour Deposit"===(null===e||void 0===e?void 0:e.interviewDetails_status)));break;case"Immigration":a=t.filter((e=>{var t;return"immigration"===(null===e||void 0===e||null===(t=e.interviewDetails_status)||void 0===t?void 0:t.toLowerCase())}));break;case"Air Ticket":a=t.filter((e=>"Air Ticket"===(null===e||void 0===e?void 0:e.interviewDetails_status)));break;case"NonLocal Mobilization":a=t.filter((e=>"NonLocal Mobilization"===(null===e||void 0===e?void 0:e.interviewDetails_status)));break;default:a=t}return a};(0,r.useEffect)((()=>{const e=e=>{y.current&&!y.current.contains(e.target)&&g(!1),e.target.closest(".candidateTypeDropdown")||E(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);return(0,i.jsx)("section",{className:"screen-size min-h-screen mb-4 ",children:(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsxs)("button",{className:"font-semibold py-2 px-6 mb-6 rounded-lg flex items-center ".concat(w.length>0?"bg-[#faf362]":"bg-[#8d8f9036]"," candidateTypeDropdown"),onClick:()=>E(!S),children:[w.length>0?w.join(" + "):"CANDIDATE TYPE",S?(0,i.jsx)(Lt.Ucs,{className:"ml-10"}):(0,i.jsx)(Lt.Vr3,{className:"ml-10"})]}),S&&(0,i.jsx)("div",{className:"absolute bg-white border shadow-lg rounded-lg z-20 candidateTypeDropdown",children:["SAWP","LPA","OnShore","OffShore"].map((t=>(0,i.jsxs)("label",{className:"block w-full text-left px-4 py-2",children:[(0,i.jsx)("input",{type:"checkbox",className:"mr-2",checked:w.includes(t),onChange:()=>(t=>{let a=[...w];"SAWP"!==t||a.includes("SAWP")?"LPA"!==t||a.includes("LPA")?"OnShore"===t||"OffShore"===t?(a.includes("OnShore")&&"OffShore"===t?a=a.filter((e=>"OnShore"!==e)):a.includes("OffShore")&&"OnShore"===t&&(a=a.filter((e=>"OffShore"!==e))),a.includes(t)||a.push(t)):a.includes(t)?a=a.filter((e=>e!==t)):a.push(t):(a.includes("SAWP")&&(a=a.filter((e=>"SAWP"!==e))),a.push("LPA")):(a.includes("LPA")&&(a=a.filter((e=>"LPA"!==e))),a.push("SAWP")),A(a);let n=e;a.length>0&&(n=e.filter((e=>a.some((t=>"SAWP"===t?"SAWP"===e.contractType:"LPA"===t?"LPA"===e.contractType&&("OnShore"===e.empType||"OffShore"===e.empType):"OnShore"===t?"OnShore"===e.empType&&"SAWP"!==e.contractType:"OffShore"!==t||"OffShore"===e.empType&&"SAWP"!==e.contractType))))),j&&(n=_(j,n)),v(n)})(t)}),t]},t)))}),(0,i.jsxs)("button",{onClick:e=>{null===e||void 0===e||e.stopPropagation(),g((e=>!e))},className:"absolute top-0 right-10 px-6 py-2 font-semibold rounded-lg flex items-center ".concat(j.length?"bg-[#faf362]":"bg-[#8d8f9036]"),children:[(0,i.jsx)(ga.y_E,{className:"mr-5"}),(0,i.jsx)("span",{children:b})]}),u&&(0,i.jsx)("div",{ref:y,className:"absolute top-12 right-0 mt-2 bg-white shadow-lg rounded-lg p-4 z-50 flex flex-col space-y-2",children:["SAWP","DOE","NLMS","Bank Guarantee","JITPA","Labour Deposit","Immigration","Air Ticket","NonLocal Mobilization"].map((e=>(0,i.jsxs)("label",{className:"flex items-center font-semibold space-x-2 hover:font-bold hover:text-[#c7bd03] p-2 rounded-md ".concat(j===e?"text-[#faf362]":"text-lite_grey"),children:[(0,i.jsx)("input",{type:"radio",className:"w-5 h-6",name:"workpasstracking",value:e,checked:j===e,onChange:P}),(0,i.jsx)("span",{children:e})]},e)))}),a&&!l?f.length>0?(0,i.jsx)(rn,{data:f,formatDate:He,fileUpload:async e=>{try{if("string"===typeof e){let t=e.replace(/=/g,":").replace(/([{,])(\s*[a-zA-Z0-9_]+)(?=\s*:)/g,'$1"$2"').replace(/:\s*([^",}\]]+)/g,': "$1"').replace(/"\s*[^"]+"\s*$/g,(e=>e.trim())).replace(/(\w)(,|})/g,"$1$2");const a=JSON.parse(t),n=a[a.length-1].upload,r=await(0,h.I)({path:n});return C(r.url.toString())}return console.error("Input must be a string."),null}catch(l){return console.error("Error parsing files:",l.message),null}},urlValue:I}):(0,i.jsx)("div",{className:"text-center text-grey py-10",children:"No data found"}):(0,i.jsx)("div",{children:a?"Loading...":"Error fetching data. Check your Internet connection."}),d&&p&&(0,i.jsx)(nn,{candidate:p,onClose:()=>c(!1),onSave:t=>{const a=e.map((e=>e.tempid===p.tempid?(0,x.A)((0,x.A)({},e),t):e));v(a),c(!1)}})]})})};const ln=a.p+"static/media/search.cf5234b9511a09757f6ac5c5eb166232.svg",on=e=>{let{activeTab:t,handleTabClick:a}=e;const n=["Personal Details","Family Details","Work Info","Work Pass","Medical Details","Insurance Details","Non-Local Accommodation Details"];return(0,i.jsx)("div",{className:"sticky top-11 bg-white flex justify-between items-center  z-40",children:(0,i.jsx)("p",{className:"text_size_5 font-semibold ",children:n.map(((e,r)=>(0,i.jsxs)("span",{className:"relative after:absolute after:-bottom-2 after:left-0 after:w-[80%] after:h-1 cursor-pointer ".concat(t===r&&"after:bg-primary"),onClick:()=>a(r),children:[e," ",r<n.length-1&&" -> "]},r)))})})};var dn=a(3141);const cn=a.p+"static/media/defaultAvatar.32980c0bea502f187727.jpg";Ke.EA.workerSrc=new URL(a(1886),a.b).toString();const pn=e=>{let{personalDetails:t,educationalDetails:a,profilePhoto:n,pageNumber:s,numPages:l,setPageNumber:o,applicationUpload:d,bwnUpload:c,cvCertifyUpload:p,loiUpload:m,myIcUpload:u,paafCvevUpload:x,ppUpload:g,supportDocUpload:f,inducBriefUp:v,invoiceRef:y,formatDate:b,mainRef:N}=e;const[j,D]=(0,r.useState)(null),[w,A]=(0,r.useState)(""),[S,E]=(0,r.useState)(""),[I,C]=(0,r.useState)(!1),k=(0,r.useRef)();(async e=>{if(!e)return;const t=await(0,h.I)({path:e});E(t.url.toString())})(n);const R=()=>{D(null)},T=(0,dn.useReactToPrint)({content:()=>k.current,onBeforePrint:()=>console.log("Preparing to print PDF..."),onAfterPrint:()=>console.log("Print complete"),pageStyle:"\n        @page {    \n          height:  714px;\n          padding: 22px, 0px, 22px, 0px;    \n        }\n      "}),P=e=>(0,i.jsx)(i.Fragment,{children:e.map(((e,t)=>(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4 border border-gray-200",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("span",{className:"uppercase font-semibold text-sm",children:["Uploaded on: ",b(e.date)]}),(0,i.jsx)("button",{onClick:()=>(async e=>{if(e)try{const t=await(0,h.I)({path:e});A(t.url.href),D(e),C(!1)}catch(t){C(!1)}})(e.upload),className:"text-dark_grey font-semibold text-sm",children:"View Document"})]}),j===e.upload&&e.upload.endsWith(".pdf")&&(0,i.jsx)("div",{className:"py-6 fixed inset-0 bg-grey bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"relative bg-white rounded-lg shadow-lg w-[40vw] max-h-full flex flex-col",children:[(0,i.jsx)("div",{ref:k,className:"flex-grow overflow-y-auto",children:(0,i.jsx)(Qe.Worker,{workerUrl:"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js",children:(0,i.jsx)(Qe.Viewer,{fileUrl:w||""})})}),(0,i.jsx)("div",{className:"absolute top-2 right-2",children:(0,i.jsx)("button",{onClick:R,className:"bg-red-600 text-black px-3 py-1 rounded-full text-sm hover:bg-red-800",children:(0,i.jsx)(Lt.QCr,{})})}),(0,i.jsxs)("div",{className:"flex items-center justify-center gap-6 py-4",children:[(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:[(0,i.jsx)("a",{href:w,download:!0,children:"Download"}),(0,i.jsx)(Lt.WCW,{className:"ml-2 mt-1"})]})}),(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{onClick:T,className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:["Print",(0,i.jsx)(Lt.n4o,{className:"ml-2 mt-1"})]})})]})]})}),j===e.upload&&!e.upload.endsWith(".pdf")&&(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsxs)("div",{className:"relative invoice-content bg-white max-w-3xl mx-auto p-6 rounded-lg shadow-lg",children:[(0,i.jsx)("div",{ref:y,className:"pdfViewerflex justify-center border h-auto",children:(0,i.jsx)(Qe.Worker,{workerUrl:"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js",children:(0,i.jsx)(Qe.Viewer,{fileUrl:w||""})})}),(0,i.jsx)("div",{className:"absolute top-2 right-2",children:(0,i.jsx)("button",{onClick:()=>D(null),className:"bg-red-600 text-black px-3 py-1 rounded-full text-sm hover:bg-red-800",children:(0,i.jsx)(Lt.QCr,{})})})]}),(0,i.jsxs)("div",{className:"flex items-center justify-center gap-6 py-4",children:[(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:[(0,i.jsx)("a",{href:w,download:!0,children:"Download"}),(0,i.jsx)(Lt.WCW,{className:"ml-2 mt-1"})]})}),(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{onClick:T,className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:["Print",(0,i.jsx)(Lt.n4o,{className:"ml-2 mt-1"})]})})]})]})]},t)))}),_=(e,t)=>{let a=[];return e&&e.length>0&&(a="Induction Briefing"===t?"string"===typeof e?[{upload:e}]:[{upload:e[0]}]:(e=>{try{const t=JSON.parse(e);return Array.isArray(t)?t.map((e=>(e.upload&&(e.fileName=e.upload.split("/").pop()),e))):[]}catch(t){return[]}})(e[0])),(0,i.jsxs)("div",{className:"py-4",children:[(0,i.jsx)("h6",{className:"uppercase text_size_5 my-3",children:t}),a.length>0?P(a):(0,i.jsx)("p",{className:"text-dark_grey font-semibold text-sm",children:"No documents available"})]})},O=e=>(0,i.jsx)("div",{className:"grid grid-cols-3 gap-y-4 items-center font-semibold text-sm",children:Object.entries(e).map(((e,t)=>{let[a,n]=e;return(0,i.jsxs)(r.Fragment,{children:[(0,i.jsx)("span",{className:"text-dark_grey",children:a}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:Array.isArray(n)?n.some((e=>null!==e))?n.filter((e=>null!==e)).slice(-1).concat(n.slice(0,-1)).map(((e,t,a)=>(0,i.jsxs)("span",{children:[(0,i.jsx)("span",{className:"".concat(a.length>1&&0===t?"rounded-md text-primary":""),children:e}),t<n.length-1&&(0,i.jsx)("span",{children:",\xa0"})]},t))):"N/A":null!==n&&void 0!==n&&""!==n?n:"N/A"})]},t)}))});return(0,i.jsxs)("section",{ref:N,className:"page py-8 px-10 bg-gray-50 rounded-lg",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h6",{className:"uppercase text_size_5 my-3",children:"Personal Details:"}),(0,i.jsxs)("div",{className:"flex flex-col md:flex-row items-start justify-between gap-8",children:[(0,i.jsx)("div",{className:"flex-1",children:O(t)}),(0,i.jsx)("div",{className:"w-[138px] h-[177px] rounded-lg overflow-hidden border border-gray-200 shadow-md",children:(0,i.jsx)("img",{src:S||cn,alt:"Profile",className:"object-cover w-full h-full"})})]}),(0,i.jsxs)("section",{className:"py-8 bg-gray-50 rounded-lg",children:[(0,i.jsx)("h6",{className:"uppercase text_size_5  my-3",children:"Education Details:"}),(0,i.jsxs)("div",{className:"flex flex-col md:flex-row items-start justify-between gap-8",children:[(0,i.jsx)("div",{className:"flex-1",children:O(a)}),(0,i.jsx)("div",{className:"w-[138px] rounded-lg overflow-hidden ",children:" "})]})]})]}),(0,i.jsxs)("div",{className:"mt-8",children:[(0,i.jsx)("h6",{className:"uppercase text_size_5  my-3",children:"Uploaded Documents:"}),_(v,"Induction Briefing")]}),(0,i.jsxs)("div",{className:"mt-8",children:[(0,i.jsx)("h6",{className:"uppercase text_size_5  my-3",children:"Uploaded Documents:"}),_([u],"Brunei IC"),_([c],"Malaysian IC"),_([g],"Passport Copy"),_([p],"CV & Certificates"),_([d],"Application Form"),_([m],"LOI"),_([x],"PAAF/CVEV Approval"),_([f],"Supporting Documents")]})]})},mn=e=>{let{familyDetails:t,mainRef:a}=e,n=[];return Array.isArray(t)&&"string"===typeof t[0]&&(n=(e=>{try{let t=e.replace(/\\/g,"");t=t.replace(/'/g,'"'),t=t.replace(/([{,])(\s*)([a-zA-Z0-9_]+)(\s*):/g,'$1"$3":'),t=t.replace(/:([a-zA-Z0-9_/.\s]+)(?=\s|,|\})/g,':"$1"'),t.startsWith('"')&&t.endsWith('"')&&(t=t.slice(1,-1));const a=JSON.parse(t);return Array.isArray(a)?a:[]}catch(t){return[]}})(t[0])),(0,i.jsxs)("section",{ref:a,className:"py-8 px-10 bg-gray-50 rounded-lg",children:[(0,i.jsx)("h6",{className:"uppercase text_size_5 mb-6",children:"Family Details:"}),(0,i.jsx)("div",{className:"space-y-6",children:n.length>0?n.map(((e,t)=>(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200",children:[(0,i.jsxs)("h6",{className:"font-semibold uppercase text_size_5 my-3 mb-4",children:["Family Member ",t+1]}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-y-2 items-center font-semibold text-sm",children:[(0,i.jsx)("span",{className:"text-dark_grey",children:"Name"}),(0,i.jsx)("span",{className:"text-gray-500 text-center",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:(null===e||void 0===e?void 0:e.name)||"N/A"}),(0,i.jsx)("span",{className:"text-dark_grey pr-2",children:"Relationship"}),(0,i.jsx)("span",{className:"text-gray-500 text-center",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:(null===e||void 0===e?void 0:e.relationship)||"N/A"}),(0,i.jsx)("span",{className:"text-dark_grey pr-2",children:"Contact"}),(0,i.jsx)("span",{className:"text-gray-500 text-center",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:(null===e||void 0===e?void 0:e.contact)||"N/A"}),(0,i.jsx)("span",{className:"text-dark_grey pr-2",children:"Address"}),(0,i.jsx)("span",{className:"text-gray-500 text-center",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:(null===e||void 0===e?void 0:e.address)||"N/A"})]})]},t))):(0,i.jsx)("p",{className:"text-gray-500",children:"No family details available."})})]})};Ke.EA.workerSrc=new URL(a(1886),a.b).toString();const un=e=>{let{medicalInfo:t,uploadFitness:a,uploadBwn:n,uploadRegis:s,invoiceRef:l,dependPass:o,handlePrint:d,formatDate:c,mainRef:p}=e;const[m,u]=(0,r.useState)(!1),[x,g]=(0,r.useState)(null),[f,v]=(0,r.useState)(1),[y,b]=(0,r.useState)(1),[N,j]=(0,r.useState)(""),[D,w]=(0,r.useState)(!1),A=((0,r.useRef)(),()=>{u(!1),g(null)}),S=e=>{try{return"string"===typeof e&&(e=JSON.parse(e)),Array.isArray(e)?e.map((e=>(e.upload&&(e.fileName=e.upload.split("/").pop()),e))):[]}catch(t){return console.error("Error parsing document data:",t),[]}};let E=[];if(Array.isArray(o)&&o.length>0)if("string"===typeof o[0])try{const e=JSON.parse(o[0]);E=JSON.parse(e)}catch(_){console.error("Error parsing dependPass:",_)}else E=o[0];if(!Array.isArray(E))return(0,i.jsx)("p",{children:"There was an error processing the dependent data."});const I=S(a),C=S(n),k=S(s),R=()=>{g(null)};console.log(t);const T=(e,t)=>(0,i.jsx)(i.Fragment,{children:e.map(((e,t)=>(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4 border border-gray-200",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("span",{className:"uppercase font-semibold text-sm",children:["Uploaded on: ",c(e.date)]}),(0,i.jsx)("button",{onClick:()=>(async e=>{try{const t=await(0,h.I)({path:e});j(t.url.href),g(e),w(!1)}catch(_){console.error("Error fetching the file URL:",_),w(!1)}})(e.upload),className:" text-dark_grey font-semibold text-sm",children:"View Document"})]}),x===e.upload&&e.upload.endsWith(".pdf")&&(0,i.jsx)("div",{className:"py-6 fixed inset-0 bg-grey bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"relative bg-white rounded-lg shadow-lg w-[40vw] max-h-full flex flex-col",children:[(0,i.jsx)("div",{ref:l,className:"flex-grow overflow-y-auto",children:(0,i.jsx)(Qe.Worker,{workerUrl:"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js",children:(0,i.jsx)(Qe.Viewer,{fileUrl:N||""})})}),(0,i.jsx)("div",{className:"absolute top-2 right-2",children:(0,i.jsx)("button",{onClick:R,className:"bg-red-600 text-black px-3 py-1 rounded-full text-sm hover:bg-red-800",children:(0,i.jsx)(Lt.QCr,{})})}),(0,i.jsxs)("div",{className:"flex items-center justify-center gap-6 py-4",children:[(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:[(0,i.jsx)("a",{href:N,download:!0,children:"Download"}),(0,i.jsx)(Lt.WCW,{className:"ml-2 mt-1"})]})}),(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{onClick:d,className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:["Print",(0,i.jsx)(Lt.n4o,{className:"ml-2 mt-1"})]})})]})]})}),x===e.upload&&!e.upload.endsWith(".pdf")&&(0,i.jsxs)("div",{className:"relative mt-4",children:[(0,i.jsx)("div",{ref:l,children:(0,i.jsx)("img",{src:N,alt:"Document Preview",className:"w-full h-auto"})}),(0,i.jsx)("div",{className:"absolute top-2 right-2",children:(0,i.jsx)("button",{onClick:A,className:"bg-red-600 text-black px-3 py-1 rounded-full text-sm hover:bg-red-800",children:(0,i.jsx)(Lt.QCr,{})})}),(0,i.jsxs)("div",{className:"flex items-center justify-center gap-6 py-4",children:[(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:[(0,i.jsx)("a",{href:N,download:!0,children:"Download"}),(0,i.jsx)(Lt.WCW,{className:"ml-2 mt-1"})]})}),(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{onClick:d,className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:["Print",(0,i.jsx)(Lt.n4o,{className:"ml-2 mt-1"})]})})]})]})]},t)))}),P=(e,t)=>{const a=e.length>0?S(e[0]):[],n=Array.isArray(a)&&a.length>0;return(0,i.jsxs)("div",{className:"py-4",children:[(0,i.jsx)("h6",{className:"uppercase text_size_5 my-3",children:t}),n?T(a):(0,i.jsx)("p",{className:"text-dark_grey font-semibold text-sm",children:"No documents and images available"})]})};return(0,i.jsxs)("section",{ref:p,className:"py-8 px-10 bg-gray-50 rounded-lg",children:[(0,i.jsx)("h6",{className:"uppercase text_size_5 my-3 mb-6",children:"Medical Info"}),(0,i.jsx)("div",{className:"flex flex-col md:flex-row items-start justify-between gap-8",children:(0,i.jsx)("div",{className:"flex-1",children:(0,i.jsx)("div",{className:"flex-1",children:(0,i.jsx)("div",{className:"grid grid-cols-3 gap-y-4 items-center font-semibold text-sm",children:Object.entries(t).map(((e,t)=>{let[a,n]=e;return(0,i.jsxs)(r.Fragment,{children:[(0,i.jsx)("span",{className:"text-dark_grey",children:a}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:Array.isArray(n)?n.some((e=>null!==e))?n.filter((e=>null!==e)).slice(-1).concat(n.slice(0,-1)).map(((e,t,a)=>(0,i.jsxs)("span",{children:[(0,i.jsx)("span",{className:"".concat(a.length>1&&0===t?"rounded-md text-primary":""),children:e}),t<n.length-1&&(0,i.jsx)("span",{children:",\xa0"})]},t))):"N/A":null!==n&&void 0!==n&&""!==n?n:"N/A"})]},t)}))})})})}),(0,i.jsxs)("div",{className:"mt-8",children:[P(I,"Overseas Medical Fitness"),P(k,"Registration"),P(C,"Brunei Medical Fitness")]}),(0,i.jsxs)("section",{className:"py-8 bg-gray-50 rounded-lg",children:[(0,i.jsx)("h6",{className:"uppercase text_size_5 my-3",children:"Dependent Pass info:"}),0===E.length?(0,i.jsx)("p",{children:"No dependent data available."}):E.map(((e,t)=>(0,i.jsxs)("div",{className:"depend-detail mb-6 p-4 border rounded-lg shadow-md bg-white",children:[(0,i.jsxs)("h3",{className:"uppercase text_size_5  my-3",children:[" ","Dependent ",t+1]}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-y-4 items-center font-semibold text-sm capitalize",children:[(0,i.jsx)("span",{className:"text-dark_grey",children:"Dependent Name"}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:e.dependName||"N/A"}),(0,i.jsx)("span",{className:"text-dark_grey",children:"Passport Number"}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:e.dependPpNo||"N/A"}),(0,i.jsx)("span",{className:"text-dark_grey",children:"Date of birth"}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:c(e.dependPpE)||"N/A"}),(0,i.jsx)("span",{className:"text-dark_grey",children:"Relation"}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:e.relation||"N/A"}),(0,i.jsx)("span",{className:"text-dark_grey",children:"Labour Deposit By"}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:e.labourDPBy||"N/A"}),(0,i.jsx)("span",{className:"text-dark_grey",children:"Labour deposit received No"}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:e.labourDRNo||"N/A"}),(0,i.jsx)("span",{className:"text-dark_grey",children:"Labour Deposit Amount"}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:e.labourDAmount||"N/A"})]}),(0,i.jsxs)("div",{className:"uploads mt-6",children:[(0,i.jsx)("h4",{className:"uppercase text_size_5  my-3",children:"Dependent pass:"}),e.uploadDp&&e.uploadDp.length>0?T(e.uploadDp):(0,i.jsx)("p",{className:"text-dark_grey font-semibold text-sm",children:"No documents and images available"})]}),(0,i.jsxs)("div",{className:"uploads mt-6",children:[(0,i.jsx)("h4",{className:"uppercase text_size_5  my-3",children:"Dependent passport:"}),e.uploadDr&&e.uploadDr.length>0?T(e.uploadDr):(0,i.jsx)("p",{className:"text-dark_grey font-semibold text-sm",children:"No documents and images available"})]})]},t)))]})]})},xn=e=>{let{accommodationInfo:t,mainRef:a}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("section",{ref:a,className:"py-8 px-10 bg-gray-50 rounded-lg",children:[(0,i.jsx)("h6",{className:"uppercase text_size_5 my-3",children:"Accommodation Details:"}),(0,i.jsx)("div",{className:"space-y-6",children:(0,i.jsx)("div",{className:"grid grid-cols-3 gap-y-4 items-center font-semibold text-sm",children:Object.entries(t).map(((e,t)=>{let[a,n]=e;return(0,i.jsxs)(r.Fragment,{children:[(0,i.jsx)("span",{className:"text-dark_grey",children:a}),(0,i.jsx)("span",{className:"text-gray-500 text-center",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:n||"N/A"})]},t)}))})})]})})};Ke.EA.workerSrc=new URL(a(1886),a.b).toString();const hn=e=>{let{insuranceInfo:t,depInsurance:a,invoiceRef:n,formatDate:s,empInsUpload:l,mainRef:o,InsuranceClaim:d}=e;const[c,p]=(0,r.useState)(null),[m,u]=(0,r.useState)(1),[x,g]=(0,r.useState)(null),[f,v]=(0,r.useState)([]),[y,b]=(0,r.useState)([]),[N,j]=(0,r.useState)(""),[D,w]=(0,r.useState)(!1),A=(0,r.useRef)();(0,r.useEffect)((()=>{if(Array.isArray(a)&&a.length>0)if("string"===typeof a[0])try{const e=JSON.parse(a[0]);v(e)}catch(e){console.error("Error parsing depInsurance:",e)}else v(a)}),[a]),(0,r.useEffect)((()=>{if(Array.isArray(d)&&d.length>0)if("string"===typeof d[0])try{const e=JSON.parse(d[0]);b(e)}catch(e){console.error("Error parsing depInsurance:",e)}else b(d)}),[d]);const S=e=>{e.preventDefault(),p(null)},E=()=>{p(null)},I=(0,dn.useReactToPrint)({content:()=>A.current,onBeforePrint:()=>console.log("Preparing to print PDF..."),onAfterPrint:()=>console.log("Print complete"),pageStyle:"\n          @page {    \n            height:  714px;\n            padding: 22px, 0px, 22px, 0px;    \n          }\n        "}),C=e=>Array.isArray(e)?(0,i.jsx)(i.Fragment,{children:e.map(((e,t)=>(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4 border border-gray-200",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("span",{className:"uppercase font-semibold text-sm",children:["Uploaded on: ",s(e.date)]}),(0,i.jsx)("button",{onClick:()=>(async e=>{try{const t=await(0,h.I)({path:e});j(t.url.href),p(e),w(!1)}catch(t){console.error("Error fetching the file URL:",t),w(!1)}})(e.upload),className:"text-dark_grey font-semibold text-sm",children:"View Document"})]}),c===e.upload&&e.upload.endsWith(".pdf")&&(0,i.jsx)("div",{className:"py-6 fixed inset-0 bg-grey bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"relative bg-white rounded-lg shadow-lg w-[40vw] max-h-full flex flex-col",children:[(0,i.jsx)("div",{ref:A,className:"flex-grow overflow-y-auto",children:(0,i.jsx)(Qe.Worker,{workerUrl:"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js",children:(0,i.jsx)(Qe.Viewer,{fileUrl:N||""})})}),(0,i.jsx)("div",{className:"absolute top-2 right-2",children:(0,i.jsx)("button",{onClick:E,className:"bg-red-600 text-black px-3 py-1 rounded-full text-sm hover:bg-red-800",children:(0,i.jsx)(Lt.QCr,{})})}),(0,i.jsxs)("div",{className:"flex items-center justify-center gap-6 py-4",children:[(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:[(0,i.jsx)("a",{href:N,download:!0,children:"Download"}),(0,i.jsx)(Lt.WCW,{className:"ml-2 mt-1"})]})}),(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{onClick:I,className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:["Print",(0,i.jsx)(Lt.n4o,{className:"ml-2 mt-1"})]})})]})]})}),c===e.upload&&!e.upload.endsWith(".pdf")&&(0,i.jsxs)("div",{className:"relative mt-4",children:[(0,i.jsx)("div",{ref:n,children:(0,i.jsx)("img",{src:N,alt:"Document Preview",className:"w-full h-auto"})}),(0,i.jsx)("div",{className:"absolute top-2 right-2",children:(0,i.jsx)("button",{onClick:S,className:"bg-red-600 text-black px-3 py-1 rounded-full text-sm hover:bg-red-800",children:(0,i.jsx)(Lt.QCr,{})})}),(0,i.jsxs)("div",{className:"flex items-center justify-center gap-6 py-4",children:[(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:[(0,i.jsx)("a",{href:N,download:!0,children:"Download"}),(0,i.jsx)(Lt.WCW,{className:"ml-2 mt-1"})]})}),(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{onClick:I,className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:["Print",(0,i.jsx)(Lt.n4o,{className:"ml-2 mt-1"})]})})]})]})]},t)))}):(0,i.jsx)("p",{className:"text-dark_grey font-semibold text-sm",children:"No documents available."});return(0,i.jsxs)("section",{ref:o,className:"py-3 px-10",children:[(0,i.jsx)("h6",{className:"uppercase text_size_5 my-3",children:"Insurance Details:"}),(0,i.jsx)("div",{className:"flex flex-col md:flex-row items-start justify-between gap-8",children:(0,i.jsx)("div",{className:"flex-1",children:(0,i.jsx)("div",{className:"flex-1",children:(0,i.jsx)("div",{className:"grid grid-cols-3 gap-y-4 items-center font-semibold text-sm",children:Object.entries(t).map(((e,t)=>{let[a,n]=e;return(0,i.jsxs)(r.Fragment,{children:[(0,i.jsx)("span",{className:"text-dark_grey",children:a}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:Array.isArray(n)?n.some((e=>null!==e))?n.filter((e=>null!==e)).slice(-1).concat(n.slice(0,-1)).map(((e,t,a)=>(0,i.jsxs)("span",{children:[(0,i.jsx)("span",{className:"".concat(a.length>1&&0===t?"rounded-md text-primary":""),children:e}),t<n.length-1&&(0,i.jsx)("span",{children:",\xa0"})]},t))):"N/A":null!==n&&void 0!==n&&""!==n?n:"N/A"})]},t)}))})})})}),(0,i.jsxs)("div",{className:"mt-8",children:[(0,i.jsx)("h6",{className:"uppercase text_size_5  my-3",children:"Uploaded Documents:"}),((e,t)=>{const a=e&&e.length>0?(e=>{try{const t=JSON.parse(e);return Array.isArray(t)?t.map((e=>(e.upload&&(e.fileName=e.upload.split("/").pop()),e))):[]}catch(t){return console.error("Error parsing document data:",t),[]}})(e[0]):[];return(0,i.jsxs)("div",{className:"py-4",children:[(0,i.jsx)("h6",{className:"uppercase text-xl font-semibold text-dark_grey ",children:t}),a.length>0?C(a):(0,i.jsx)("p",{className:"text-dark_grey font-semibold text-sm",children:"No documents available"})]})})(l,"Employee Insurance Details")]}),(0,i.jsx)("div",{className:"flex flex-col gap-8 mt-6",children:f.map(((e,t)=>(0,i.jsxs)("div",{className:"depend-detail mb-6 p-4 border rounded-lg shadow-md bg-white mt-4",children:[(0,i.jsxs)("h3",{className:"uppercase text_size_5  my-3",children:["Dependent ",t+1]}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-y-4 items-center font-semibold text-sm",children:[(0,i.jsx)("span",{className:"text-dark_grey",children:"Insurance Type"}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:e.depenInsType||"N/A"}),(0,i.jsx)("span",{className:"text-dark_grey",children:"Dependent Name"}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:e.depenName||"N/A"}),(0,i.jsx)("span",{className:"text-dark_grey",children:"Relation"}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:e.depenRelation||"N/A"}),(0,i.jsx)("span",{className:"text-dark_grey",children:"Gender"}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:e.depenGender||"N/A"}),(0,i.jsx)("span",{className:"text-dark_grey",children:"Date of Birth"}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:s(e.depenDob)||"N/A"}),(0,i.jsx)("span",{className:"text-dark_grey",children:"Nationality"}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:e.depenNation||"N/A"}),(0,i.jsx)("span",{className:"text-dark_grey",children:"Other Nation"}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:e.depenotherNation||"N/A"}),(0,i.jsx)("span",{className:"text-dark_grey",children:"Birth Certificate No"}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:e.depenBcNo||"N/A"}),(0,i.jsx)("span",{className:"text-dark_grey",children:"Brunei I/C Number"}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:e.depenIcNumber||"N/A"}),(0,i.jsx)("span",{className:"text-dark_grey",children:"Passport Number for Non-Local"}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:e.depenPpNo||"N/A"}),(0,i.jsx)("span",{className:"text-dark_grey",children:"Group Insurance Effective Date"}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:s(e.depenGroupInsEffect)||"N/A"}),(0,i.jsx)("span",{className:"text-dark_grey",children:"Group Insurance End Date"}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:s(e.depenGroupInsEnd)||"N/A"}),(0,i.jsx)("span",{className:"text-dark_grey",children:"Travel Insurance Effective Date"}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:s(e.depenTravelInsEffect)||"N/A"}),(0,i.jsx)("span",{className:"text-dark_grey",children:"Travel Insurance End Date"}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:s(e.depenTravelInsEnd)||"N/A"}),(0,i.jsx)("span",{className:"text-dark_grey",children:"Person Insurance Effective Date"}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:s(e.depenPersonInsEffect)||"N/A"}),(0,i.jsx)("span",{className:"text-dark_grey",children:"Person Insurance End Date"}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:s(e.depenPersonInsEnd)||"N/A"})]}),(0,i.jsxs)("div",{className:"uploads mt-6",children:[(0,i.jsx)("h4",{className:"uppercase text_size_5  my-3",children:"Uploaded Documents:"}),e.depenInfUpload&&e.depenInfUpload.length>0?C(JSON.parse(e.depenInfUpload)):(0,i.jsx)("p",{children:"No documents uploaded."})]})]},t)))}),(0,i.jsx)("div",{className:"flex flex-col gap-8 mt-6",children:y.map(((e,t)=>(0,i.jsxs)("div",{className:"depend-detail mb-6 p-4 border rounded-lg shadow-md bg-white mt-4",children:[(0,i.jsxs)("h3",{className:"uppercase text_size_5  my-3",children:["Insurance claim ",t+1]}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-y-4 items-center font-semibold text-sm",children:[(0,i.jsx)("span",{className:"text-dark_grey",children:"Type of Insurance Claim"}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:e.claimType||"N/A"}),(0,i.jsx)("span",{className:"text-dark_grey",children:"Insurance Claim For"}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:e.claimInfo||"N/A"}),(0,i.jsx)("span",{className:"text-dark_grey",children:"Clainmant Name"}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:e.claimantName||"N/A"}),(0,i.jsx)("span",{className:"text-dark_grey",children:"Date Reported to Insurance Company"}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:s(e.dateReported)||"N/A"}),(0,i.jsx)("span",{className:"text-dark_grey",children:"Date of Payment Received"}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:s(e.datePaid)||"N/A"}),(0,i.jsx)("span",{className:"text-dark_grey",children:"Date Paid to Employee"}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:s(e.paymentReceived)||"N/A"})]}),(0,i.jsxs)("div",{className:"uploads mt-6",children:[(0,i.jsx)("h4",{className:"uppercase text_size_5  my-3",children:"Uploaded Documents:"}),e.claimUpload&&e.claimUpload.length>0?C(JSON.parse(e.claimUpload)):(0,i.jsx)("p",{children:"No documents uploaded."})]})]},t)))})]})};Ke.EA.workerSrc=new URL(a(1886),a.b).toString();const gn=e=>{let{workInfo:t,isPdfOpen:a,pageNumber:n,numPages:s,handleViewDocument:l,onDocumentLoadSuccess:o,setPageNumber:d,WIContract:c,WILeaveEntitle:p,WIProbation:m,WIResignation:u,WITermination:x,uploadAL:g,uploadDep:f,uploadLP:v,uploadPR:y,uploadSP:b,invoiceRef:N,formatDate:j,mainRef:D}=e;const[w,A]=(0,r.useState)(null),[S,E]=(0,r.useState)(""),[I,C]=(0,r.useState)(!1),k=(0,r.useRef)(),R=e=>{e.preventDefault(),A(null)},T=()=>{A(null)},P=(0,dn.useReactToPrint)({content:()=>k.current,onBeforePrint:()=>console.log("Preparing to print PDF..."),onAfterPrint:()=>console.log("Print complete"),pageStyle:"\n        @page {    \n          height:  714px;\n          padding: 22px, 0px, 22px, 0px;    \n        }\n      "}),_=(e,t)=>(0,i.jsx)(i.Fragment,{children:e.map(((e,t)=>(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4 border border-gray-200",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("span",{className:"uppercase font-semibold text-sm",children:["Uploaded on: ",j(e.date)]}),(0,i.jsx)("button",{onClick:()=>(async e=>{try{const t=await(0,h.I)({path:e});E(t.url.href),A(e),C(!1)}catch(t){console.error("Error fetching the file URL:",t),C(!1)}})(e.upload),className:"text-dark_grey font-semibold text-sm",children:"View Document"})]}),w===e.upload&&e.upload.endsWith(".pdf")&&(0,i.jsx)("div",{className:"py-6 fixed inset-0 bg-grey bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"relative bg-white rounded-lg shadow-lg w-[40vw] max-h-full flex flex-col",children:[(0,i.jsx)("div",{ref:k,className:"flex-grow overflow-y-auto",children:(0,i.jsx)(Qe.Worker,{workerUrl:"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js",children:(0,i.jsx)(Qe.Viewer,{fileUrl:S||""})})}),(0,i.jsx)("div",{className:"absolute top-2 right-2",children:(0,i.jsx)("button",{onClick:T,className:"bg-red-600 text-black px-3 py-1 rounded-full text-sm hover:bg-red-800",children:(0,i.jsx)(Lt.QCr,{})})}),(0,i.jsxs)("div",{className:"flex items-center justify-center gap-6 py-4",children:[(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:[(0,i.jsx)("a",{href:S,download:!0,children:"Download"}),(0,i.jsx)(Lt.WCW,{className:"ml-2 mt-1"})]})}),(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{onClick:P,className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:["Print",(0,i.jsx)(Lt.n4o,{className:"ml-2 mt-1"})]})})]})]})}),w===e.upload&&!e.upload.endsWith(".pdf")&&(0,i.jsxs)("div",{className:"relative mt-4",children:[(0,i.jsx)("div",{ref:N,children:(0,i.jsx)("img",{src:S,alt:"Document Preview",className:"w-full h-auto"})}),(0,i.jsx)("div",{className:"absolute top-2 right-2",children:(0,i.jsxs)("button",{onClick:R,className:"bg-red-600 text-black px-3 py-1 rounded-full text-sm hover:bg-red-800",children:[(0,i.jsx)(Lt.QCr,{})," "]})}),(0,i.jsxs)("div",{className:"flex items-center justify-center gap-6 py-4",children:[(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:[(0,i.jsx)("a",{href:S,download:!0,children:"Download"}),(0,i.jsx)(Lt.WCW,{className:"ml-2 mt-1"})]})}),(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{onClick:P,className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:["Print",(0,i.jsx)(Lt.n4o,{className:"ml-2 mt-1"})]})})]})]})]},t)))}),O=(e,t)=>{const a=e&&e.length>0?(e=>{try{const t=JSON.parse(e);return Array.isArray(t)?t.map((e=>(e.upload&&(e.fileName=e.upload.split("/").pop()),e))):[]}catch(t){return console.error("Error parsing document data:",t),[]}})(e[0]):[];return(0,i.jsxs)("div",{className:"py-4",children:[(0,i.jsx)("h6",{className:"uppercase text_size_5 my-3 ",children:t}),a.length>0?_(a):(0,i.jsx)("p",{className:"text-dark_grey font-semibold text-sm",children:"No documents available"})]})},L=e=>(0,i.jsx)("div",{className:"grid grid-cols-3 gap-y-4 items-center font-semibold text-sm",children:Object.entries(e).map(((e,t)=>{let[a,n]=e;return(0,i.jsxs)(r.Fragment,{children:[(0,i.jsx)("span",{className:"text-dark_grey",children:a}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:Array.isArray(n)?n.some((e=>null!==e))?n.filter((e=>null!==e)).slice(-1).concat(n.slice(0,-1)).map(((e,t,a)=>(0,i.jsxs)("span",{children:[(0,i.jsx)("span",{className:"".concat(a.length>1&&0===t?"rounded-md text-primary":""),children:e}),t<n.length-1&&(0,i.jsx)("span",{children:",\xa0"})]},t))):"N/A":null!==n&&void 0!==n&&""!==n?n:"N/A"})]},t)}))});return(0,i.jsxs)("section",{children:[(0,i.jsxs)("div",{ref:D,className:"py-8 px-10 bg-gray-50 rounded-lg",children:[(0,i.jsx)("h6",{className:"uppercase text_size_5 mb-6",children:"Work Info Details:"}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsx)("h6",{className:"uppercase text_size_5 my-3",children:"Employee Info"}),(0,i.jsx)("div",{className:"space-y-6",children:(0,i.jsx)("div",{classname:"flex-1",children:L(t.employeeDetails)})})]}),(0,i.jsxs)("div",{className:"mt-8",children:[(0,i.jsx)("h6",{className:"uppercase text_size_5 my-3",children:"Employee Leave Info"}),(0,i.jsx)("div",{className:"space-y-6",children:(0,i.jsx)("div",{classname:"flex-1",children:L(t.LeaveDetails)})})]}),(0,i.jsxs)("div",{className:"mt-8",children:[(0,i.jsx)("h6",{className:"uppercase text_size_5 my-3",children:"Employee Exit Info"}),(0,i.jsx)("div",{className:"space-y-6",children:(0,i.jsx)("div",{classname:"flex-1",children:L(t.TerminateDetails)})})]}),(0,i.jsxs)("div",{className:"mt-8",children:[(0,i.jsx)("h6",{className:"uppercase text_size_5  my-3",children:"Employee Service Record"}),(0,i.jsx)("div",{className:"space-y-6",children:(0,i.jsx)("div",{classname:"flex-1",children:L(t.ServiceRoad)})})]})]}),(0,i.jsxs)("div",{className:"mt-8 px-10",children:[(0,i.jsx)("h6",{className:"uppercase text_size_5  my-3",children:"Employee Exit Info Documents"}),O(c,"Contract"),O(p,"Probation"),O(u,"Resignation"),O(x,"Termination"),O(m,"Leave Entitlement")]}),(0,i.jsxs)("div",{className:"mt-8 px-10",children:[(0,i.jsx)("h6",{className:"uppercase text_size_5 my-3",children:"Service Record Documents"}),O(y,"Position Revision"),O(b,"Salary Package Revision"),O(v,"Leave Passage Revision"),O(g,"Annual Revision"),O(f,"Change of Department")]})]})};Ke.EA.workerSrc=new URL(a(1886),a.b).toString();const fn=e=>{let{workPass:t,doeEmpUpload:a,lbrDepoUpload:n,sawpEmpUpload:s,nlmsEmpUpload:l,bankEmpUpload:o,jpEmpUpload:d,isPdfOpen:c,pageNumber:p,numPages:m,handleViewDocument:u,handleCloseViewer:x,onDocumentLoadSuccess:g,setPageNumber:f,invoiceRef:v,formatDate:y,arrivStampUpload:b,immigEmpUpload:N,reEntryUpload:j,mainRef:D}=e;const[w,A]=(0,r.useState)(null),[S,E]=(0,r.useState)(""),[I,C]=(0,r.useState)(!1),k=(0,r.useRef)(),R=[{name:"SAWP",data:t.swap},{name:"Doe",data:t.doe},{name:"NLMS",data:t.national},{name:"Bank Guarantee",data:t.bank},{name:"JITPA",data:t.jitpa},{name:"Labour Deposit",data:t.labourDeposit},{name:"Immigration",data:t.immigration}],T=()=>{A(null)},P=(0,dn.useReactToPrint)({content:()=>k.current,onBeforePrint:()=>console.log("Preparing to print PDF..."),onAfterPrint:()=>console.log("Print complete"),pageStyle:"\n          @page {    \n            height:  714px;\n            padding: 22px, 0px, 22px, 0px;    \n          }\n        "}),_=e=>(0,i.jsx)(i.Fragment,{children:e.map(((e,t)=>(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4 border border-gray-200",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("span",{className:"uppercase font-semibold text-sm",children:["Uploaded on: ",y(e.date)]}),(0,i.jsx)("button",{onClick:()=>(async e=>{try{const t=await(0,h.I)({path:e});E(t.url.href),A(e),C(!1)}catch(t){console.error("Error fetching the file URL:",t),C(!1)}})(e.upload),className:"text-dark_grey font-semibold text-sm",children:"View Document"})]}),w===e.upload&&e.upload.endsWith(".pdf")&&(0,i.jsx)("div",{className:"py-6 fixed inset-0 bg-grey bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"relative bg-white rounded-lg shadow-lg w-[40vw] max-h-full flex flex-col",children:[(0,i.jsx)("div",{ref:k,className:"flex-grow overflow-y-auto",children:(0,i.jsx)(Qe.Worker,{workerUrl:"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js",children:(0,i.jsx)(Qe.Viewer,{fileUrl:S||""})})}),(0,i.jsx)("div",{className:"absolute top-2 right-2",children:(0,i.jsx)("button",{onClick:T,className:"bg-red-600 text-black px-3 py-1 rounded-full text-sm hover:bg-red-800",children:(0,i.jsx)(Lt.QCr,{})})}),(0,i.jsxs)("div",{className:"flex items-center justify-center gap-6 py-4",children:[(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:[(0,i.jsx)("a",{href:S,download:!0,children:"Download"}),(0,i.jsx)(Lt.WCW,{className:"ml-2 mt-1"})]})}),(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{onClick:P,className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:["Print",(0,i.jsx)(Lt.n4o,{className:"ml-2 mt-1"})]})})]})]})}),w===e.upload&&!e.upload.endsWith(".pdf")&&(0,i.jsxs)("div",{className:"relative mt-4",children:[(0,i.jsx)("div",{ref:k,children:(0,i.jsx)("img",{src:S,alt:"Document Preview",className:"w-full h-auto"})}),(0,i.jsx)("div",{className:"absolute top-2 right-2",children:(0,i.jsx)("button",{onClick:x,className:"bg-red-600 text-black px-3 py-1 rounded-full text-sm hover:bg-red-800",children:(0,i.jsx)(Lt.QCr,{})})}),(0,i.jsxs)("div",{className:"flex items-center justify-center gap-6 py-4",children:[(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:[(0,i.jsx)("a",{href:S,download:!0,children:"Download"}),(0,i.jsx)(Lt.WCW,{className:"ml-2 mt-1"})]})}),(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{onClick:P,className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:["Print",(0,i.jsx)(Lt.n4o,{className:"ml-2 mt-1"})]})})]})]})]},t)))}),O=(e,t)=>{const a=e&&e.length>0?(e=>{try{const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(t){return console.error("Error parsing document data:",t),[]}})(e[0]):[];return(0,i.jsxs)("div",{className:"py-4",children:[(0,i.jsx)("h6",{className:"uppercase text_size_5 my-3",children:t}),a.length>0?_(a):(0,i.jsx)("p",{className:"text-dark_grey font-semibold text-sm",children:"No documents available"})]})};return(0,i.jsxs)("section",{children:[(0,i.jsxs)("div",{ref:D,className:"py-8 px-10 bg-gray-50 rounded-lg",children:[(0,i.jsx)("h6",{className:"uppercase text_size_5 mb-6",children:"WorkPass Details:"}),(0,i.jsx)("div",{className:"space-y-6",children:R.map(((e,t)=>{let{name:a,data:n,upload:s}=e;return(0,i.jsxs)("div",{children:[(0,i.jsx)("h6",{className:"uppercase text_size_5 my-3",children:a}),(0,i.jsx)("div",{classname:"",children:(l=n,(0,i.jsx)("div",{className:"grid grid-cols-3 gap-y-4 items-center font-semibold text-sm",children:Object.entries(l).map(((e,t)=>{let[a,n]=e;return(0,i.jsxs)(r.Fragment,{children:[(0,i.jsx)("span",{className:"text-dark_grey",children:a}),(0,i.jsx)("span",{className:"text-center text-gray-700",children:":"}),(0,i.jsx)("span",{className:"text-dark_grey",children:Array.isArray(n)?n.some((e=>null!==e))?n.filter((e=>null!==e)).slice(-1).concat(n.slice(0,-1)).map(((e,t,a)=>(0,i.jsxs)("span",{children:[(0,i.jsx)("span",{className:"".concat(a.length>1&&0===t?"rounded-md text-primary":""),children:e}),t<n.length-1&&(0,i.jsx)("span",{children:",\xa0"})]},t))):"N/A":null!==n&&void 0!==n&&""!==n?n:"N/A"})]},t)}))}))})]},t);var l}))})]}),(0,i.jsxs)("div",{className:"mt-8 px-10",children:[(0,i.jsx)("h6",{className:"uppercase text_size_5  my-3",children:"Uploaded Documents:"}),O(s,"SAWP"),O(a,"DOE"),O(l,"NLMS"),O(o,"Bank Guarantee"),O(d,"JITPA"),O(n,"Labour Deposit Upload"),O(b,"Immigration Arrival"),O(N,"Immigration Approval"),O(j,"Immigration Re-Entry Visa")]})]})},vn=e=>{let{passingValue:t,handleFormShow:a}=e;const[n,s]=(0,r.useState)(0),[l,o]=(0,r.useState)(1),[d,c]=(0,r.useState)(!0),[p,m]=(0,r.useState)(null),[u,x]=(0,r.useState)(!1),[h,g]=(0,r.useState)(null),[f,v]=(0,r.useState)(1),y=(0,r.useRef)(),b=(0,r.useRef)(),N=(0,dn.useReactToPrint)({content:()=>y.current,onBeforePrint:()=>console.log("Preparing to print PDF..."),onAfterPrint:()=>console.log("Print complete"),pageStyle:"\n      @page {       \n        height:  874px;\n        padding: 22px, 0px, 22px, 0px;     \n      }\n    "}),j=(0,dn.useReactToPrint)({content:()=>b.current,onBeforePrint:()=>console.log("Preparing print for Item 2..."),onAfterPrint:()=>console.log("Print complete for Item 2"),pageStyle:"\n      @page {\n        margin: 500mm;\n      }\n      body {\n        \n      }\n      .page {\n        page-break-after: always;\n      }\n    "}),D=e=>{if(!e||!Array.isArray(e)||"string"!==typeof e[0])return{};let t=e[0];t.startsWith("{")&&t.endsWith("}")&&(t=t.slice(1,-1));return t.split(",").map((e=>e.trim())).reduce(((e,t)=>{const[a,n]=t.split("=").map((e=>e.trim()));return a&&n&&(e[a]=decodeURIComponent(n)),e}),{})},w=e=>{m(e),x(!0),v(1)},A=()=>{x(!1),m(null)},S=e=>{let{numPages:t}=e;g(t)},E=e=>{if(null===e||void 0===e)return"N/A";if(Array.isArray(e))return e.map((e=>{if(null===e||void 0===e)return"N/A";const t=new Date(e);if(isNaN(t.getTime()))return"N/A";const a=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getFullYear();return"".concat(a,"/").concat(n,"/").concat(r)}));const t=new Date(e);if(isNaN(t.getTime()))return"N/A";const a=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getFullYear();return"".concat(a,"/").concat(n,"/").concat(r)},{empStatusType:I,workmenCompNo:C,bankAccNo:k,bankName:R,insuranceClaims:T,age:P,email:_,aTQualify:O,address:L,agent:F,alternateNo:M,accidentIns:q,accommodation:U,accommodationAddress:B,bankAmt:H,bankEmpUpload:W,bankEndorse:Y,bankRece:V,bankRefNo:z,bankSubmit:J,bankValid:G,bruhimsRD:$,bruhimsRNo:K,bruneiMAD:Q,bruneiME:Z,bwnIcColour:X,bwnIcExpiry:ee,bwnIcNo:te,chinese:ae,cob:ne,contactNo:re,contractType:se,ctryOfOrigin:ie,dependPass:le,dob:oe,doeEmpApproval:de,doeEmpRefNo:ce,doeEmpSubmit:pe,doeEmpUpload:me,doeEmpValid:ue,driveLic:xe,eduDetails:ge,educLevel:fe,empBadgeNo:ve,empID:ye,empType:be,empUpDocs:Ne,familyDetails:je,gender:De,inducBrief:we,inducBriefUp:Ae,jitpaAmt:Se,jpEmpUpload:Ee,jpEndorse:Ie,jpValid:Ce,lang:ke,lbrDepoAmt:Re,lbrDepoSubmit:Te,lbrDepoUpload:Pe,lbrReceiptNo:_e,marital:Oe,myIcNo:Le,name:Fe,nationalCat:Me,nationality:qe,nlmsEmpApproval:Ue,nlmsEmpSubmit:Be,nlmsEmpSubmitRefNo:He,nlmsEmpUpload:We,nlmsEmpValid:Ye,nlmsRefNo:Ve,oCOfOrigin:ze,officialEmail:Je,otherNation:Ge,otherRace:$e,otherReligion:Ke,overMD:Qe,overME:Ze,permanentAddress:Xe,permitType:et,ppDestinate:tt,ppExpiry:at,ppIssued:nt,ppNo:rt,preEmp:st,preEmpPeriod:it,profilePhoto:lt,race:ot,religion:dt,sawpEmpLtrReci:ct,sawpEmpLtrReq:pt,sawpEmpUpload:mt,tbaPurchase:ut,uploadBwn:xt,uploadFitness:ht,uploadRegis:gt,contractEnd:ft,contractPeriod:vt,contractStart:yt,department:bt,doj:Nt,hr:jt,jobCat:Dt,jobDesc:wt,manager:At,otherDepartment:St,otherJobCat:Et,otherPosition:It,position:Ct,probationEnd:kt,probationStart:Rt,relationship:Tt,salaryType:Pt,sapNo:_t,skillPool:Ot,supervisor:Ft,upgradeDate:Mt,upgradePosition:qt,workHrs:Ut,workMonth:Bt,workStatus:Ht,workWeek:Wt,annualLeave:Yt,annualLeaveDate:Vt,compasLeave:zt,compasLeaveDate:Jt,dateLeavePass:Gt,destinateLeavePass:$t,durLeavePass:Kt,leavePass:Qt,materLeave:Zt,mrageLeave:Xt,paterLeave:ea,sickLeave:ta,sickLeaveDate:aa,otherResignNotConf:na,otherResignNotProb:ra,otherTermiNotConf:sa,otherTermiNotProb:ia,reasonResign:la,reasonTerminate:oa,resignDate:da,resignNotConf:ca,resignNotProb:pa,termiDate:ma,termiNotConf:ua,termiNotProb:xa,workInfoUploads:ha,depEmp:ga,depEmpDate:fa,positionRev:va,positionRevDate:ya,remarkWI:ba,revALD:Na,revAnnualLeave:ja,revLeaveDate:Da,revLeavePass:wa,revSalary:Aa,revSalaryDate:Sa,uploadAL:Ea,uploadDep:Ia,uploadLP:Ca,uploadPR:ka,uploadSP:Ra,applicationUpload:Ta,bwnUpload:Pa,cvCertifyUpload:_a,loiUpload:Oa,myIcUpload:La,paafCvevUpload:Fa,ppUpload:Ma,supportDocUpload:qa,WIContract:Ua,WILeaveEntitle:Ba,WIProbation:Ha,WIResignation:Wa,WITermination:Ya,groupIns:Va,groupInsEffectDate:za,groupInsEndDate:Ja,travelIns:Ga,workmePolicyNo:$a,workmenComp:Ka,empInsUpload:Qa,depInsurance:Za,airTktStatus:Xa,reEntryVisa:en,immigApproval:tn,reEntryVisaExp:an,remarkImmig:nn,ppLocation:rn,arrivStampExp:sn,immigRefNo:ln,ppSubmit:cn,empPassExp:vn,empPassStatus:yn,arrivStampUpload:bn,immigEmpUpload:Nn,reEntryUpload:jn,probDuration:Dn,hospLeave:wn,pervAnnualLeaveBal:An}=t,Sn={Name:Fe,"Chinese character":ae,"Employee ID":ye,"Employee Badge Number":ve,"Sap Number":_t,"Contract Type":se,"Employee Type":be,Position:Array.isArray(Ct)&&Ct.length>0?Ct[0]:"Position not available","Date Of Birth":E(oe),Age:P,Gender:De,"Marital Status":Oe,"Country of birth":ne,"Country of Origin":ie,"Other country of origin":ze,"National Category":Me,Nationality:qe,"Other Nationality":Ge,Religion:dt,"Other Religion":Ke,Race:ot,"Other Race":$e,"Brunei IC Number":te,"Brunei IC Colour":X,"Brunei IC Expiry":E(ee),"Malaysian IC Number":Le,"Passport number":rt,"Passport Issue Date":E(nt),"Passport Expiry":E(at),"Passport issued destination":tt,Email:_,"Official Email":Je,Address:Xe,"Contact No":re,"Alternate Number":M,Language:ke,"Driving License":xe,"Agent Name":F,"Company Name of Previous Employment":st,"Previous Employment Period":it,"Date of Induction Briefing":E(we),"Bank name":R,"Bank account number":k},En={"Education Level":fe,"Education Details":ge,"Academic / Technical qualification":O},In={"Overseas Medical Fitness issued date":E(Qe),"Overseas Medical Fitness Expiry":E(Ze),"Date submitted of BruHims Registration":E($),"BruHims Registration Number":K,"Brunei Medical Appointment Date":E(Q),"Brunei Medical Fitness Expiry":E(Z)},Cn={DependPass:le},kn={Accommodation:U,"Accommodation Address":B},Rn={"Group H&S Insurance":Va,"Group H&S Insurance Enrollment Effective Date":E(za),"Group H&S Insurance Enrollment End Date":E(Ja),"Workmen Compensation Insurance":I,"Workmen compensation insurance policy\xa0number":C,"Personal Accident Insurance":q,"Travelling Insurance":Ga},Tn={"Dependent Insurance":Za},Pn={employeeDetails:{Department:bt,"Other Department":St,Position:Ct,"Other Position":It,"Job Category":Dt,"Other Job Category":Et,"Date of Joining":E(Nt),"Job Description":wt,"Skill Pool":Ot,HR:jt,Manager:At,Supervisor:Ft,"Employee Status":Tt,"Upgrade Position":qt,"Position Upgrade Effective date":E(Mt),"Contract Period Status":vt,"Contract Start Date":E(yt),"Contract End Date":E(ft),"Probation Start Date":E(Rt),"Probation End Date":E(kt),"Probation Duration":Dn,"Normal Working Hours Per Day":Ut,"Normal Working Day per Week":Wt,"Normal Working Day per Month":Bt,"Employment Work Status":Ht,"Type of Salary Pay":Pt},LeaveDetails:{"Leave Passage Entitlement for Non-Local":Qt,"Date of Leave Passage Entitlement After Contract":E(Gt),"Duration Period of Leave Passage Entitlement":Kt,"Destination of Leave Passage Entitlement":$t,"Annual Leave Entitlement":Yt,"Annual Leave Effective Date":E(Vt),"Sick Leave Entitlement":ta,"Sick Leave Effective Date":E(aa),"Maternity Leave Entitlement":Zt,"Paternity Leave Entitlement":ea,"Marriage Leave Entitlement":Xt,"Hospitalisation Leave Entitlement":wn,"Previous Year Annual Leave Balance":An},TerminateDetails:{"Date of Resignation":E(da),"Resignation Notice during Probation":pa,"Other Resignation Notice Probation":ra,"Resignation Notice after Confirmation":ca,"Other Resignation Notice Confirmation":na,"Reason of Resignation":la,"Date of Termination":E(ma),"Termination Notice during Probation":xa,"Other Termination Not Probation":ia,"Termination Notice after Confirmation":ua,"Other Termination Not Confirmed":sa,"Reason of Termination":oa},ServiceRoad:{"Position Revision":va,"Position Revision Effective Date":E(ya),"Salary Package Revision":Aa,"Salary Package Revision Effective Date":E(Sa),"Leave Passage Revision":wa,"Leave Passage Revision Effective Date":E(Da),"Annual Leave Revison":ja,"Annual Leave Revison Effective Date":E(Na),"Change of Department":ga,"Change of Department Effective Date":E(fa),"Remarks for Work Info":ba}},_n={doe:{"Date Of Submission":E(pe),"Date Of Approval":E(de),"Valid Until":E(ue),"DOE Reference Number":ce},labourDeposit:{"Labour Deposit Receipt Number":_e,"Deposit Amount":Re,"Date Endorsement Of Labour Deposit":E(Te)},swap:{"Client Support Letter Requested Date":E(pt),"Client Support Letter Received Date":E(ct)},national:{"Type of Work Permit Application":et,"Date Of Submission":E(Be),"Submission Reference Number":He,"Date Of Approval":E(Ue),"LD Reference Number":Ve,"Valid Until":E(Ye)},bank:{"Date Of Submission":E(J),"Date Received":E(V),"BG Reference Number":z,"Bank Guarantee Amount":H,"Bank Guarantee Valid Until":E(G),"Date Endorsement Of BG":E(Y)},jitpa:{"TBA Purchase Date":E(ut),"JITPA Amount":Se,"Valid Until":E(Ce),"Date Endorsement Of JITPA":E(Ie)},immigration:{"Original Passport Location":rn,"Date Of Arrival Stamping Expiry":E(sn),"Immigration Reference Number":ln,"Passport Submit Date To Immigration Dept":E(cn),"Employment Pass Expiry":E(vn),"Employment Pass Status":yn,"Air Ticket Status":Xa,"Re-entry Visa Application":en,"Date Approved by Immigration Dept":E(tn),"Re-Entry Visa Expiry":E(an),"Remarks for Immigration":nn}},On=D(t.uploadBwn),Ln=D(t.workInfoUploads);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("section",{className:"bg-white flex flex-col fixed top-0 left-0 bg-grey w-full h-full z-[9999] center",children:(0,i.jsx)("div",{className:"bg-white py-10 px-10 h-screen w-[85%]",children:(0,i.jsxs)("div",{className:"empScroll border bg-white px-10 overflow-y-auto h-[90vh] space-y-5 rounded-lg w-full",children:[(0,i.jsxs)("div",{className:"bg-white mt-6 sticky top-0 flex justify-between items-center z-40",children:[(0,i.jsx)("div",{className:"max-w-[200px] w-full",children:(0,i.jsx)("img",{src:he.A,alt:"Logo not found"})}),(0,i.jsx)("h6",{className:"text-center text-2xl font-medium text-dark_grey",children:"Employee Details"}),(0,i.jsx)("p",{onClick:a,className:"text-2xl text-dark_grey",children:(0,i.jsx)(Lt.yyx,{})})]}),(0,i.jsxs)("div",{className:"",children:[(0,i.jsx)(on,{activeTab:n,handleTabClick:e=>{s(e),o(1)}}),(0,i.jsxs)("div",{className:"mt-5",children:[0===n&&(0,i.jsx)(pn,{personalDetails:Sn,profilePhoto:lt,isPdfOpen:u,viewingDocument:p,pageNumber:f,numPages:h,handleViewDocument:w,handleCloseViewer:A,onDocumentLoadSuccess:S,setPageNumber:v,inducBriefUp:Ae,applicationUpload:Ta,bwnUpload:Pa,cvCertifyUpload:_a,loiUpload:Oa,myIcUpload:La,paafCvevUpload:Fa,ppUpload:Ma,supportDocUpload:qa,handlePrint:N,invoiceRef:y,educationalDetails:En,formatDate:E,mainRef:b}),1===n&&(0,i.jsx)(mn,{familyDetails:je,handlePrint:N,invoiceRef:y,formatDate:E,mainRef:b}),2===n&&(0,i.jsx)(gn,{workInfo:Pn,documentThree:Ln,isPdfOpen:u,viewingDocument:p,setViewingDocument:m,pageNumber:f,numPages:h,handleViewDocument:w,handleCloseViewer:A,onDocumentLoadSuccess:S,setPageNumber:v,uploadAL:Ea,uploadDep:Ia,uploadLP:Ca,uploadPR:ka,uploadSP:Ra,handlePrint:N,invoiceRef:y,WIContract:Ua,WILeaveEntitle:Ba,WIProbation:Ha,WIResignation:Wa,WITermination:Ya,formatDate:E,mainRef:b}),3===n&&(0,i.jsx)(fn,{workPass:_n,doeEmpUpload:me,lbrDepoUpload:Pe,sawpEmpUpload:mt,nlmsEmpUpload:We,bankEmpUpload:W,jpEmpUpload:Ee,isPdfOpen:u,viewingDocument:p,pageNumber:f,numPages:h,handleViewDocument:w,handleCloseViewer:A,onDocumentLoadSuccess:S,setPageNumber:v,inducBriefUp:Ae,handlePrint:N,invoiceRef:y,formatDate:E,arrivStampUpload:bn,immigEmpUpload:Nn,reEntryUpload:jn,mainRef:b}),4===n&&(0,i.jsx)(un,{medicalInfo:In,dependenPass:Cn,uploadFitness:ht,uploadBwn:xt,documentsTwo:On,uploadRegis:gt,handlePrint:N,invoiceRef:y,dependPass:le,formatDate:E,mainRef:b}),5===n&&(0,i.jsx)(hn,{insuranceInfo:Rn,DependentInsurance:Tn,InsuranceClaim:T,handlePrint:N,invoiceRef:y,depInsurance:Za,empInsUpload:Qa,formatDate:E,mainRef:b}),6===n&&(0,i.jsx)(xn,{accommodationInfo:kn,handlePrint:N,invoiceRef:y,mainRef:b})]}),(0,i.jsx)("div",{className:"flex justify-center py-6",children:(0,i.jsxs)("button",{onClick:j,className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2 ",children:["Print",(0,i.jsx)(Lt.n4o,{className:"ml-2 mt-1"})]})})]})]})})})})},yn=((0,ge.D)(),()=>{const{userData:e,empLeaveStatusData:t,educDetailsData:a,empPDData:n,empPIData:l,IDData:o,workInfoData:d,terminateData:c,leaveDetailsData:p,SRData:m,DNData:u,BJLData:h,PPValidsData:g,LMIData:f,EmpInsuranceData:v,depInsuranceData:y,NLAData:b,SawpDetails:N,insuranceClaimsData:j}=(0,r.useContext)(s.Y),[D,w]=(0,r.useState)(""),[A,S]=(0,r.useState)([]),[E,I]=(0,r.useState)([]),[C,k]=(0,r.useState)(!0),[R,T]=(0,r.useState)(null),[P,_]=(0,r.useState)(!1),[O,L]=(0,r.useState)([]),[F,M]=(0,r.useState)(A),[q,U]=(0,r.useState)(1),[B,H]=(0,r.useState)(30),[W,Y]=(0,r.useState)([]),[V,z]=(0,r.useState)([]),J=e=>Array.isArray(e)?e[e.length-1]:e;(0,r.useEffect)((()=>{if(e&&t&&a&&n&&l&&o&&d&&c&&p&&m&&u&&h&&g&&f&&v&&y&&b&&N&&j){const r=l.map((r=>{const s=o.find((e=>e.empID===r.empID))||{},i=n.find((e=>e.empID===r.empID))||{},l=u.find((e=>e.empID===r.empID))||{},D=h.find((e=>e.empID===r.empID))||{},w=g.find((e=>e.empID===r.empID))||{},A=f.find((e=>e.empID===r.empID))||{},S=v.find((e=>e.empID===r.empID))||{},E=y.find((e=>e.empID===r.empID))||{},I=b.find((e=>e.empID===r.empID))||{},C=c.find((e=>e.empID===r.empID))||{},k=p.find((e=>e.empID===r.empID))||{},R=m.find((e=>e.empID===r.empID))||{},T=t.find((e=>e.empID===r.empID))||{},P=a.find((e=>e.empID===r.empID))||{},_=d.find((e=>e.empID===r.empID))||{},O=e.find((e=>e.empID===r.empID))||{},L=N.find((e=>e.empID===r.empID))||{},F=j.find((e=>e.empID===r.empID))||{};return(0,x.A)((0,x.A)((0,x.A)((0,x.A)((0,x.A)((0,x.A)((0,x.A)((0,x.A)((0,x.A)((0,x.A)((0,x.A)((0,x.A)((0,x.A)((0,x.A)((0,x.A)((0,x.A)((0,x.A)((0,x.A)((0,x.A)((0,x.A)({},r),s),i),l),D),w),A),S),E),I),C),k),R),T),P),_),O),L),F),{},{sapNo:r.sapNo})})).filter((e=>null===e||void 0===e?void 0:e.empID)).reduce(((e,t)=>(e.some((e=>e.empID===t.empID))||e.push(t),e)),[]).sort(((e,t)=>e.empID.localeCompare(t.empID)));S(r),I(r),r.length>0?(k(!1),T(null)):k(!0)}else T("No data found.")}),[e,t,a,n,l,o,d,c,p,m,u,h,g,f,v,y,b,N,j]);if((0,r.useEffect)((()=>{const e=(q-1)*B,t=E.slice(e,e+B);Y(t)}),[E,q,B]),R)return(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"flex items-center justify-center h-[82vh]",children:(0,i.jsx)("p",{className:"text-sm font-semibold",children:R})})});const G=e=>{_(!P),L(e)},$=e=>{const t=new Date(e),a=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getFullYear();return"".concat(a,"/").concat(n,"/").concat(r)};return(0,i.jsxs)("section",{className:"bg-[#F5F6F1CC] w-full flex items-center flex-col h-screen pt-14",children:[(0,i.jsxs)("div",{className:"w-full px-10 flex justify-between items-center mb-10",children:[(0,i.jsx)("div",{className:"bg-[#faf362] py-2 px-3 rounded-lg text-[18px] font-semibold",children:"All Employee Details"}),(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(aa,{type:"text",placeholder:"Search by Name or Emp ID",allEmpDetails:A,searchUserList:I,className:"py-2 px-4 "}),(0,i.jsx)("img",{src:ln,alt:"Search Icon",className:"absolute top-1/2 right-2 transform -translate-y-1/2 w-4 h-4"})]}),(0,i.jsxs)("select",{className:"py-[7px] px-2 border border-lite_grey focus:outline-none focus:ring-0",onChange:e=>{const t=e.target.value.toLowerCase();if("all"===t)I(A);else{const e=A.filter((e=>{var a,n,r,s;const i=null===(a=J(e.contractType))||void 0===a?void 0:a.toLowerCase(),l=null===(n=J(e.empType))||void 0===n?void 0:n.toLowerCase(),o=null===(r=J(e.workStatus))||void 0===r?void 0:r.toLowerCase(),d=null===(s=J(e.nationality))||void 0===s?void 0:s.toLowerCase();switch(t){case"local":return["bruneian","brunei pr"].includes(d);case"foreigner":return d&&!["bruneian","brunei pr"].includes(d);case"lpa":return"lpa"===i;case"sawp":return"sawp"===i;case"onshore":return"onshore"===l;case"offshore":return"offshore"===l;case"active":case"probationary":case"resignation":case"termination":return o===t;default:return!1}}));I(e)}},children:[(0,i.jsx)("option",{value:"All",children:"All"}),(0,i.jsx)("option",{value:"Local",children:"Local"}),(0,i.jsx)("option",{value:"Foreigner",children:"Foreigner"}),(0,i.jsx)("option",{value:"LPA",children:"LPA"}),(0,i.jsx)("option",{value:"SAWP",children:"SAWP"}),(0,i.jsx)("option",{value:"OnShore",children:"OnShore"}),(0,i.jsx)("option",{value:"OffShore",children:"OffShore"}),(0,i.jsx)("option",{value:"Active",children:"Active"}),(0,i.jsx)("option",{value:"Probationary",children:"Probationary"}),(0,i.jsx)("option",{value:"Resignation",children:"Resignation"}),(0,i.jsx)("option",{value:"Termination",children:"Termination"})]})]})]}),(0,i.jsx)("div",{className:" overflow-x-auto  mt-8 w-[100%] ml-4 rounded-xl",children:(0,i.jsx)("div",{className:"w-full px-4 max-h-[calc(70vh-7rem)] overflow-y-auto",children:(0,i.jsxs)("table",{className:"w-full rounded-xl table-auto",children:[(0,i.jsx)("thead",{className:"bg-[#939393] text-center text-white sticky top-0",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:" py-4 px-2 rounded-tl-xl",children:"Employee ID"}),(0,i.jsx)("th",{className:"py-4 px-2 ",children:"Badge No"}),(0,i.jsx)("th",{className:"py-4 px-2",children:"Name"}),(0,i.jsx)("th",{className:"py-4 px-2 ",children:"DOB"}),(0,i.jsx)("th",{className:"py-4 px-2",children:"Nationality"}),(0,i.jsx)("th",{className:"py-4 px-2",children:"Contract"}),(0,i.jsx)("th",{className:"py-4 px-2",children:"Type"}),(0,i.jsx)("th",{className:"py-4 px-2 ",children:"Email"}),(0,i.jsx)("th",{className:"py-4 px-2 ",children:"Contact No"}),(0,i.jsx)("th",{className:"py-4 px-2 rounded-tr-xl",children:"Status"})]})}),(0,i.jsx)("tbody",{className:"bg-white text-center text-sm font-semibold text-dark_grey cursor-pointer",children:W.length>0?W.map(((e,t)=>{var a,n,r,s,l;return(0,i.jsxs)("tr",{className:"shadow-[0_3px_6px_1px_rgba(0,0,0,0.2)] hover:bg-medium_blue",onClick:()=>{G(e)},children:[(0,i.jsx)("td",{className:"py-4 px-4",children:(null===e||void 0===e?void 0:e.empID)||"N/A"}),(0,i.jsx)("td",{className:"py-4 px-4",children:(null===e||void 0===e?void 0:e.empBadgeNo)||"N/A"}),(0,i.jsx)("td",{className:"py-4 px-4",children:(null===e||void 0===e?void 0:e.name)||"N/A"}),(0,i.jsx)("td",{className:"py-4 px-4",children:$((null===e||void 0===e?void 0:e.dob)||"N/A")}),(0,i.jsx)("td",{className:"py-4 px-4",children:(null===e||void 0===e?void 0:e.nationality)||"N/A"}),(0,i.jsx)("td",{className:"py-4 px-4",children:(null===e||void 0===e||null===(a=e.contractType)||void 0===a?void 0:a[e.contractType.length-1])||"N/A"}),(0,i.jsx)("td",{className:"py-4 px-4",children:(null===e||void 0===e||null===(n=e.empType)||void 0===n?void 0:n[e.empType.length-1])||"N/A"}),(0,i.jsx)("td",{className:"py-4 px-4",children:(null===e||void 0===e?void 0:e.email)||"N/A"}),(0,i.jsx)("td",{className:"py-4 px-4",children:(null===e||void 0===e?void 0:e.contactNo)||"N/A"}),(0,i.jsx)("td",{className:"py-4 px-4 font-bold ".concat((l=(null===e||void 0===e||null===(r=e.workStatus)||void 0===r?void 0:r[(null===e||void 0===e?void 0:e.workStatus.length)-1])||"N/A",{active:"text-[green]",probationary:"text-[#E8A317]",resignation:"text-red",termination:"text-[red]"}[null===l||void 0===l?void 0:l.toLowerCase()]||"text-medium_grey")),children:(null===e||void 0===e||null===(s=e.workStatus)||void 0===s?void 0:s[(null===e||void 0===e?void 0:e.workStatus.length)-1])||"N/A"})]},t)})):(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"10",className:"py-4 px-4 text-center",children:"No data available"})})})]})})}),P&&(0,i.jsx)(vn,{passingValue:O,handleFormShow:G}),W.length>0&&(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsx)("div",{className:"ml-[750px] flex justify-between mt-12 px-10",children:(0,i.jsx)(la,{currentPage:q,totalPages:Math.ceil(E.length/B),onPageChange:e=>{e>=1&&e<=Math.ceil(E.length/B)&&U(e)}})})})]})}),bn=e=>new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.?)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e),Nn=Xt.Ik().shape({name:Xt.Yj().required("Name is mandatory"),relationship:Xt.Yj().required("Relationship is mandatory"),contact:Xt.Yj().required("Contact Number is mandatory"),address:Xt.Yj().required("Address is mandatory")}),jn=Xt.Ik().shape({depenInsType:Xt.Yj().required("Insurance type is required"),depenInfo:Xt.Yj().required("Dependent information is required"),depenName:Xt.Yj().required("Name is required"),depenRelation:Xt.Yj().required("Relationship is required"),depenGender:Xt.Yj().required("Gender is required"),depenIcNumber:Xt.Yj().notRequired(),depenDob:Xt.Yj().required("Date of Birth is required"),depenNation:Xt.Yj().required("Nationality is required"),depenPpNo:Xt.Yj().notRequired(),depenBcNo:Xt.Yj().required("Birth Certificate number is required for non-locals"),depenGroupInsEffect:Xt.Yj().notRequired(),depenGroupInsEnd:Xt.Yj().notRequired(),depenTravelInsEffect:Xt.Yj().notRequired(),depenTravelInsEnd:Xt.Yj().notRequired(),depenPersonInsEffect:Xt.Yj().notRequired(),depenPersonInsEnd:Xt.Yj().notRequired(),depenotherNation:Xt.Yj().when("depenNation",{is:"Other",then:Xt.Yj().required("Other nationality is required"),otherwise:Xt.Yj().notRequired()}),depenInfUpload:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF, image files, or valid URLs are allowed",(e=>e instanceof File?["application/pdf","image/jpeg","image/png"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired()}),Dn=e=>Xt.gl().test("is-valid-family-details","Invalid family details",(e=>{if("string"===typeof e)try{const t=JSON.parse(e);return!!Array.isArray(t)&&t.every((e=>jn.isValidSync(e)))}catch(t){return!1}else if(Array.isArray(e))return Xt.YO().of(Nn).isValidSync(e);return!1})),wn=(Xt.Yj().matches(/^(0[1-9]|[12][0-9]|3[01])-(0[1-9]|1[0-2])-\d{4}$/,"Date must be in the format dd-mm-yyyy").notRequired().test("is-valid-date","Invalid date format",(e=>{if(!e)return!0;const[t,a,n]=e.split("-"),r=new Date("".concat(n,"-").concat(a,"-").concat(t));return!isNaN(r.getTime())})),Xt.Ik().shape({empID:Xt.Yj().required("Employee ID Number is mandatory"),empBadgeNo:Xt.Yj().notRequired(),name:Xt.Yj().notRequired(),accommodation:Xt.Yj().notRequired(),accommodationAddress:Xt.Yj().notRequired()})),An=Xt.Ik().shape({empID:Xt.Yj().required("Employee ID is mandatory"),overMD:Xt.Yj().notRequired(),overME:Xt.Yj().notRequired(),bruhimsRD:Xt.Yj().notRequired(),bruhimsRNo:Xt.Yj().notRequired(),bruneiMAD:Xt.Yj().notRequired(),bruneiME:Xt.Yj().notRequired(),uploadFitness:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF allowed",(e=>e instanceof File?["application/pdf"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired(),uploadRegis:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF allowed",(e=>e instanceof File?["application/pdf"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired(),uploadBwn:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF allowed",(e=>e instanceof File?["application/pdf"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired(),dependPass:Xt.YO().of(Xt.Ik().shape({dependName:Xt.Yj().notRequired(),dependPpNo:Xt.Yj().notRequired(),dependPpE:Xt.Yj().notRequired(),relation:Xt.Yj().notRequired(),labourDPBy:Xt.Yj().notRequired(),labourDRNo:Xt.Yj().notRequired(),labourDAmount:Xt.Yj().notRequired().test("is-number","Only numbers are allowed",(e=>!e||/^[0-9]+$/.test(e))),uploadDp:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF, image files, or valid URLs are allowed",(e=>e instanceof File?["application/pdf","image/jpeg","image/png"].includes(e.type):"string"!==typeof e||bn(e)))).notRequired(),uploadDr:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF, image files, or valid URLs are allowed",(e=>e instanceof File?["application/pdf","image/jpeg","image/png"].includes(e.type):"string"!==typeof e||bn(e)))).notRequired()}))}),Sn=Xt.Ik().shape({empID:Xt.Yj().required("Employee ID is mandatory"),department:Xt.Yj().required("Department is mandatory"),otherDepartment:Xt.Yj().notRequired(),position:Xt.Yj().required("Position is mandatory"),otherPosition:Xt.Yj().notRequired(),jobCat:Xt.Yj().required("Job Category is mandatory"),otherJobCat:Xt.Yj().notRequired(),doj:Xt.p6().nullable().transform(((e,t)=>""===t?null:e)).required("Date of Join is mandatory").max(new Date,"Date of Join cannot be in the future"),jobDesc:Xt.Yj().required("Job Description is mandatory"),skillPool:Xt.Yj().required("Skill Pool is mandatory"),hr:Xt.Yj().notRequired(),manager:Xt.Yj().required("Manager is mandatory"),supervisor:Xt.Yj().notRequired(),relationship:Xt.Yj().required("Employee Status is mandatory"),upgradePosition:Xt.Yj().notRequired(),upgradeDate:Xt.Yj().notRequired(),contractPeriod:Xt.Yj().notRequired(),contractStart:Xt.Yj().notRequired(),contractEnd:Xt.Yj().notRequired().test("is-after-contractStart","Contract End date must be after Contract Start date",(function(e){const{contractStart:t}=this.parent;if(!t||!e)return!0;const a=new Date(t);return new Date(e)>a})),workStatus:Xt.Yj().required("Employment Work Status is required").notOneOf([""],"Employment Work Status is mandatory"),probationStart:Xt.Yj().notRequired().test("is-on-or-after-doj-or-contract-start","Probation Start date must be the same as or after Date of Joining ",(function(e){const{doj:t}=this.parent;if(!t||!e)return!0;const a=new Date(t);return new Date(e)>=a})),probationEnd:Xt.Yj().notRequired().test("is-after-probationStart","Probation End date must be after Probation Start date",(function(e){const{probationStart:t}=this.parent;if(!t||!e)return!0;const a=new Date(t);return new Date(e)>a})),probDuration:Xt.Yj().notRequired(),workHrs:Xt.Yj().required("Normal Working Hours mandatory"),workWeek:Xt.Yj().required("Normal Working Week mandatory"),workMonth:Xt.Yj().required("Normal Working Month mandatory"),salaryType:Xt.Yj().required("Type of Salary Pay is mandatory").notOneOf([""],"Type of Salary Pay is mandatory"),pervAnnualLeaveBal:Xt.Yj().notRequired(),resignDate:Xt.Yj().notRequired(),termiDate:Xt.Yj().notRequired(),resignNotProb:Xt.Yj().notRequired(),otherResignNotProb:Xt.Yj().notRequired(),termiNotProb:Xt.Yj().notRequired(),otherTermiNotProb:Xt.Yj().notRequired(),resignNotConf:Xt.Yj().notRequired(),otherResignNotConf:Xt.Yj().notRequired(),termiNotConf:Xt.Yj().notRequired(),otherTermiNotConf:Xt.Yj().notRequired(),reasonResign:Xt.Yj().notRequired(),reasonTerminate:Xt.Yj().notRequired(),leavePass:Xt.Yj().notRequired(),dateLeavePass:Xt.Yj().nullable().transform(((e,t)=>""===t?null:e)).notRequired(),destinateLeavePass:Xt.Yj().notRequired(),durLeavePass:Xt.Yj().notRequired(),annualLeave:Xt.Yj().notRequired(),annualLeaveDate:Xt.p6().nullable().transform(((e,t)=>""===t?null:e)).notRequired(),sickLeave:Xt.Yj().notRequired(),sickLeaveDate:Xt.Yj().notRequired(),materLeave:Xt.Yj().notRequired(),paterLeave:Xt.Yj().notRequired(),mrageLeave:Xt.Yj().notRequired(),WIProbation:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF",(e=>e instanceof File?["application/pdf"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired(),WIResignation:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF",(e=>e instanceof File?["application/pdf"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired(),WITermination:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF",(e=>e instanceof File?["application/pdf"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired(),WILeaveEntitle:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF",(e=>e instanceof File?["application/pdf"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired(),WIContract:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF",(e=>e instanceof File?["application/pdf"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired(),positionRev:Xt.Yj().notRequired(),positionRevDate:Xt.p6().nullable().transform(((e,t)=>""===t?null:e)).notRequired(),revSalary:Xt.Yj().notRequired(),revSalaryDate:Xt.p6().nullable().transform(((e,t)=>""===t?null:e)).notRequired(),revLeavePass:Xt.Yj().notRequired(),revLeaveDate:Xt.p6().nullable().transform(((e,t)=>""===t?null:e)).notRequired(),revAnnualLeave:Xt.Yj().notRequired(),revALD:Xt.p6().nullable().transform(((e,t)=>""===t?null:e)).notRequired(),depEmp:Xt.Yj().notRequired(),depEmpDate:Xt.p6().nullable().transform(((e,t)=>""===t?null:e)).notRequired(),remarkWI:Xt.Yj().notRequired(),uploadPR:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF",(e=>e instanceof File?["application/pdf"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired(),uploadSP:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF",(e=>e instanceof File?["application/pdf"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired(),uploadLP:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF",(e=>e instanceof File?["application/pdf"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired(),uploadAL:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF",(e=>e instanceof File?["application/pdf"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired(),uploadDep:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF",(e=>e instanceof File?["application/pdf"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired()}),En=Xt.Ik().shape({empID:Xt.Yj().required("Employee ID Number is mandatory"),profilePhoto:Xt.Yj().required("Upload Photo is mandatory"),contractType:Xt.YO().of(Xt.Yj().required("Each Contract Type is mandatory")).min(1,"At least one Contract Type is required").required("Contract Type is mandatory"),empType:Xt.YO().of(Xt.Yj().required("Each Employee Type is mandatory")).min(1,"At least one Employee Type is required").required("Employee Type is mandatory"),name:Xt.Yj().min(3,"Name must be at least 3 characters").matches(/[A-Za-z\s]/,"Name cannot contain numbers or special characters").required("Name is mandatory"),gender:Xt.Yj().required("Gender is mandatory"),dob:Xt.Yj().required("Date of Birth is mandatory").test("age","You must be at least 15 years old",(e=>{if(!e)return!1;const t=new Date,a=new Date(e),n=t.getFullYear()-a.getFullYear(),r=t.getMonth()-a.getMonth(),s=t.getDate()-a.getDate();return n>15||15===n&&(r>0||0===r&&s>=0)})),email:Xt.Yj().email("Please enter a valid email").matches(/^[^\s]+@[^\s]+\.[^\s]{2,}$/,"Email must not contain whitespace or invalid characters").matches(/^[^.@]+(\.[^.@]+)*@[^.]+(\.[^.]+)*\.[a-z]{2,}$/,"Email must not contain consecutive dots").matches(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,"Email must conform to standard email format").matches(/^[^\\/]+$/,"Email must not contain forward or backward slashes").matches(/^[^\s]+$/,"Email must not contain whitespace").required("Email is required"),officialEmail:Xt.Yj().email("Please enter a valid email").notRequired().matches(/^[^\s]+@[^\s]+\.[^\s]{2,}$/,"Email must not contain whitespace or invalid characters").matches(/^[^.@]+(\.[^.@]+)*@[^.]+(\.[^.]+)*\.[a-z]{2,}$/,"Email must not contain consecutive dots").matches(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,"Email must conform to standard email format").matches(/^[^\\/]+$/,"Email must not contain forward or backward slashes").matches(/^[^\s]+$/,"Email must not contain whitespace"),nationality:Xt.Yj().required("Nationality is mandatory"),otherNation:Xt.Yj().notRequired(),religion:Xt.Yj().required("Religion is mandatory"),marital:Xt.Yj().required("Marital status is mandatory"),race:Xt.Yj().required("Race is mandatory"),otherRace:Xt.Yj().notRequired(),bwnIcNo:Xt.Yj().notRequired(),bwnIcColour:Xt.Yj().notRequired(),bwnIcExpiry:Xt.p6().nullable().transform(((e,t)=>""===t?null:e)).notRequired(),myIcNo:Xt.Yj().notRequired(),ppNo:Xt.Yj().notRequired(),ppIssued:Xt.p6().nullable().transform(((e,t)=>""===t?null:e)).notRequired().test("is-not-future-date","Future Date Not Allowed",(function(e){return!e||new Date(e)<=new Date})),ppExpiry:Xt.p6().nullable().transform(((e,t)=>""===t?null:e)).notRequired().test("is-future-date","Only Future Dates Allowed",(function(e){return!e||new Date(e)>new Date})),ppDestinate:Xt.Yj().notRequired(),contactNo:Xt.Yj().required("Contact Number is mandatory"),permanentAddress:Xt.Yj().required("Address is mandatory"),empBadgeNo:Xt.Yj().required("Employee Badge Number is mandatory"),sapNo:Xt.Yj().notRequired(),nationalCat:Xt.Yj().required("National Category is mandatory"),ctryOfOrigin:Xt.Yj().required("Country of Origin is mandatory"),oCOfOrigin:Xt.Yj().notRequired(),educLevel:Xt.Yj().required("Education Level is mandatory"),aTQualify:Xt.Yj().required("Academic / Technical qualification is mandatory"),familyDetails:Xt.gl().test("is-valid-family-details","Invalid family details",(function(e){const{path:t,createError:a}=this;return!!Xt.gl().test("is-valid-family-details","Invalid family details",(e=>{if("string"===typeof e)try{const t=JSON.parse(e);return!!Array.isArray(t)&&t.every((e=>Nn.isValidSync(e)))}catch(t){return!1}else if(Array.isArray(e))return Xt.YO().of(Nn).isValidSync(e);return!1}))||a({path:t,message:"Invalid family details format or content"})})),inducBrief:Xt.Yj().required("Induction Briefing Date is mandatory"),inducBriefUp:Xt.Yj().notRequired(),preEmp:Xt.Yj().notRequired(),preEmpPeriod:Xt.Yj().notRequired(),bankName:Xt.Yj().notRequired(),bankAccNo:Xt.Yj().notRequired(),bwnUpload:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF, image files, or valid URLs are allowed",(e=>e instanceof File?["application/pdf","image/jpeg","image/png"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired(),applicationUpload:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF, image files, or valid URLs are allowed",(e=>e instanceof File?["application/pdf","image/jpeg","image/png"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired(),cvCertifyUpload:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF, image files, or valid URLs are allowed",(e=>e instanceof File?["application/pdf","image/jpeg","image/png"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired(),loiUpload:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF, image files, or valid URLs are allowed",(e=>e instanceof File?["application/pdf","image/jpeg","image/png"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired(),myIcUpload:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF, image files, or valid URLs are allowed",(e=>e instanceof File?["application/pdf","image/jpeg","image/png"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired(),paafCvevUpload:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF, image files, or valid URLs are allowed",(e=>e instanceof File?["application/pdf","image/jpeg","image/png"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired(),ppUpload:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF, image files, or valid URLs are allowed",(e=>e instanceof File?["application/pdf","image/jpeg","image/png"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired(),supportDocUpload:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF, image files, or valid URLs are allowed",(e=>e instanceof File?["application/pdf","image/jpeg","image/png"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired()}),In=Xt.Ik().shape({empID:Xt.Yj().required("Employee ID Number is mandatory"),empBadgeNo:Xt.Yj().required("Employee Badge is required"),name:Xt.Yj().required("Employee Name is required"),department:Xt.Yj().required("Department is required"),empInsUpload:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF, image files, or valid URLs are allowed",(e=>e instanceof File?["application/pdf","image/jpeg","image/png"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired()}),Cn=Xt.Ik().shape({empID:Xt.Yj().required("Employee ID is required"),depInsurance:Xt.gl().test("is-valid-family-details","Invalid family details",(function(e){const{path:t,createError:a}=this;return!!Dn()||a({path:t,message:"Invalid family details format or content"})}))}),kn=Xt.Ik().shape({typeIns:Xt.Yj().required("Type Insurance is required"),insDetails:Xt.YO().of(Xt.Ik().shape({company:Xt.Yj().required("Insurance company is required")}))}),Rn=Xt.Ik().shape({groupHSNo:Xt.Yj().required("Group HS Number is required"),groupHSExp:Xt.Yj().notRequired(),groupHSUpload:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF or valid URLs are allowed",(e=>e instanceof File?["application/pdf"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired()}),Tn=Xt.Ik().shape({empStatusType:Xt.Yj().required("Employee Status Type is required"),workmenCompNo:Xt.Yj().notRequired(),workmenCompExp:Xt.Yj().notRequired(),workmenComUp:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF or valid URLs are allowed",(e=>e instanceof File?["application/pdf"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired()}),Pn=Xt.Ik().shape({travelNo:Xt.Yj().required("Travelling Number is required"),travelExp:Xt.Yj().notRequired(),travelUp:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF or valid URLs are allowed",(e=>e instanceof File?["application/pdf"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired()}),_n=Xt.Ik().shape({perAccNo:Xt.Yj().required("Personal Number is required"),perAccExp:Xt.Yj().notRequired(),perAccUp:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF or valid URLs are allowed",(e=>e instanceof File?["application/pdf"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired()}),On=Xt.Ik().shape({empID:Xt.Yj().required("Employee ID is required"),insuranceClaims:Xt.gl().test("is-valid-family-details","Invalid family details",(function(e){const{path:t,createError:a}=this;return!!Dn()||a({path:t,message:"Invalid family details format or content"})}))}),Ln=Xt.Ik().shape({empID:Xt.Yj().required("Employee ID is required"),sawpEmpLtrReq:Xt.p6().nullable().transform(((e,t)=>""===t?null:e)).required("Requested Date is required").test("is-not-future-date","Future Date Not Allowed",(e=>!e||e<=new Date)),sawpEmpLtrReci:Xt.p6().nullable().transform(((e,t)=>""===t?null:e)).notRequired().test("is-after-requested-date","Received Date cannot be before the Requested Date",(function(e){const{sawpEmpLtrReq:t}=this.parent;return!e||!t||e>=t})),sawpEmpUpload:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF, image files, or valid URLs are allowed",(e=>e instanceof File?["application/pdf","image/jpeg","image/png"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired()}),Fn=Xt.Ik().shape({empID:Xt.Yj().required("Employee ID is required"),doeEmpSubmit:Xt.p6().nullable().transform(((e,t)=>""===t?null:e)).required("Submission Date is required").test("is-not-future-date","Future Date Not Allowed",(function(e){return!e||new Date(e)<=new Date})),doeEmpApproval:Xt.p6().nullable().transform(((e,t)=>""===t?null:e)).notRequired().test("is-after-submission-date","Approval Date Must Be After Submitted Date",(function(e){const{doeEmpSubmit:t}=this.parent;return!e||!t||new Date(e)>=new Date(t)})),doeEmpValid:Xt.p6().nullable().transform(((e,t)=>""===t?null:e)).notRequired().test("is-after-approval-date","Expiry Date Must Be After Approval Date",(function(e){const{doeEmpApproval:t}=this.parent;return!e||!t||new Date(e)>=new Date(t)})),doeEmpRefNo:Xt.Yj().notRequired(),doeEmpUpload:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF, image files, or valid URLs are allowed",(e=>e instanceof File?["application/pdf","image/jpeg","image/png"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired()}),Mn=Xt.Ik().shape({empID:Xt.Yj().required("Employee ID is Required"),permitType:Xt.Yj().required("Permit Type Required"),nlmsEmpSubmit:Xt.p6().nullable().transform(((e,t)=>""===t?null:e)).required("Submission Date is Required").test("is-not-future-date","Future Date Not Allowed",(e=>!e||new Date(e)<=new Date)),nlmsEmpSubmitRefNo:Xt.Yj().notRequired(),nlmsEmpApproval:Xt.p6().nullable().transform(((e,t)=>""===t?null:e)).notRequired().test("is-after-submission","Approval Date Must Be After Submitted Date",(function(e){const{nlmsEmpSubmit:t}=this.parent;return!e||!t||new Date(e)>=new Date(t)})),nlmsRefNo:Xt.Yj().notRequired(),nlmsEmpValid:Xt.p6().nullable().transform(((e,t)=>""===t?null:e)).notRequired().test("is-after-approval","Expiry Date Must Be After Approval Date",(function(e){const{nlmsEmpApproval:t}=this.parent;return!e||!t||new Date(e)>=new Date(t)})),nlmsEmpUpload:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF, image files, or valid URLs are allowed",(e=>e instanceof File?["application/pdf","image/jpeg","image/png"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired()}),qn=Xt.Ik().shape({empID:Xt.Yj().required("Employee ID is required"),bankSubmit:Xt.p6().nullable().transform(((e,t)=>""===t?null:e)).required("Submission Date is required").test("is-not-future-date","Future Date Not Allowed",(function(e){return!e||new Date(e)<=new Date})),bankRece:Xt.p6().nullable().transform(((e,t)=>""===t?null:e)).notRequired().test("is-after-submission-date","Approval Date Must Be After Submission Date",(function(e){const{bankSubmit:t}=this.parent;return!e||!t||new Date(e)>=new Date(t)})),bankRefNo:Xt.Yj().notRequired(),bankAmt:Xt.Yj().notRequired(),bankValid:Xt.p6().nullable().transform(((e,t)=>""===t?null:e)).notRequired().test("is-after-approval-date","Valid Until Date Must Be After Approval Date",(function(e){const{bankRece:t}=this.parent;return!e||!t||new Date(e)>=new Date(t)})),bankEndorse:Xt.p6().nullable().transform(((e,t)=>""===t?null:e)).notRequired().test("is-after-submission-date","Endorsement Date must be after Submission Date",(function(e){const{bankSubmit:t}=this.parent;return!e||!t||new Date(e)>new Date(t)})),bankEmpUpload:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF, image files, or valid URLs are allowed",(e=>e instanceof File?["application/pdf","image/jpeg","image/png"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired()}),Un=Xt.Ik().shape({empID:Xt.Yj().required("Employee ID is required"),tbaPurchase:Xt.p6().nullable().transform(((e,t)=>""===t?null:e)).required("TBA Purchase Date is required").test("is-not-future-date","Future Date Not Allowed",(e=>!e||new Date(e)<=new Date)),jitpaAmt:Xt.Yj().notRequired(),jpValid:Xt.p6().nullable().transform(((e,t)=>""===t?null:e)).notRequired().test("is-not-past-date","Valid Until Date must be in the future",(e=>!e||new Date(e)>new Date)),jpEndorse:Xt.p6().nullable().transform(((e,t)=>""===t?null:e)).notRequired().test("is-after-purchase-date","Endorsement Date must be after TBA Purchase Date",(function(e){const{tbaPurchase:t}=this.parent;return!e||!t||new Date(e)>new Date(t)})),jpEmpUpload:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF, image files, or valid URLs are allowed",(e=>e instanceof File?["application/pdf","image/jpeg","image/png"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired()}),Bn=Xt.Ik().shape({empID:Xt.Yj().required("Employee ID is required"),lbrReceiptNo:Xt.Yj().required("Labour Deposit Receipt Number is required"),lbrDepoAmt:Xt.Yj().required("Deposit Amount is required").min(0,"Deposit Amount must be greater than or equal to 0"),lbrDepoSubmit:Xt.p6().nullable().transform(((e,t)=>""===t?null:e)).required("Submit Date is required").test("is-not-future-date","Future Date Not Allowed",(function(e){return!e||new Date(e)<=new Date})),lbrDepoUpload:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF, image files, or valid URLs are allowed",(e=>e instanceof File?["application/pdf","image/jpeg","image/png"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired()}),Hn=Xt.Ik().shape({empID:Xt.Yj().required("Employee ID is required"),ppLocation:Xt.Yj().oneOf(["HRD","Immigration","Employee","Vacation"],"Invalid passport location").required("Passport location is required"),arrivStampUpload:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF, image files, or valid URLs are allowed",(e=>e instanceof File?["application/pdf","image/jpeg","image/png"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired(),immigEmpUpload:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF, image files, or valid URLs are allowed",(e=>e instanceof File?["application/pdf","image/jpeg","image/png"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired(),reEntryUpload:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF, image files, or valid URLs are allowed",(e=>e instanceof File?["application/pdf","image/jpeg","image/png"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired(),arrivStampExp:Xt.Yj().notRequired(),immigRefNo:Xt.Yj().nullable().transform(((e,t)=>""===t?null:e)),ppSubmit:Xt.Yj().notRequired(),empPassExp:Xt.Yj().notRequired(),empPassStatus:Xt.Yj().nullable().transform(((e,t)=>""===t?null:e)),airTktStatus:Xt.Yj().oneOf(["Company","Own"],"Invalid air ticket status").nullable().transform(((e,t)=>""===t?null:e)),reEntryVisa:Xt.Yj().oneOf(["Single","Multiple"],"Invalid re-entry visa type").nullable().transform(((e,t)=>""===t?null:e)),immigApproval:Xt.Yj().notRequired(),reEntryVisaExp:Xt.Yj().notRequired(),remarkImmig:Xt.Yj().max(500,"Remarks can't exceed 500 characters").nullable().transform(((e,t)=>""===t?null:e))}),Wn=e=>{let{searchResult:t,newFormData:a,searchIcon1:n,searchIcon2:s,placeholder:l,rounded:o,setDrpValue:d,searchedValue:c,id:p,filteredEmployees:m,setFilteredEmployees:u}=e;const[x,h]=(0,r.useState)(""),[g,f]=(0,r.useState)(!1);(0,r.useEffect)((()=>{d&&h(d)}),[d]);const v=(0,r.useCallback)((()=>{f(!g),!0===g?null===u||void 0===u||u([]):!1===g&&(null===u||void 0===u||u(a)),console.log(m)}),[g,a]),y=(0,r.useCallback)((()=>{if(m&&m.length>0){const e=m.find((e=>{if(e.empID===x)return e}));e?t(e):(alert("Employee Id is not found."),t({}))}else alert("Employee Id is not found."),t({})}),[x,m]);return(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsxs)("div",{className:"py-2 w-full text_size_5 border text-grey bg-white border-lite_grey ".concat(o," flex items-center px-2 gap-2"),children:[(0,i.jsx)("div",{className:" text-dark_grey  text-2xl ",children:n}),(0,i.jsx)("input",{type:"text",placeholder:l,className:"outline-none w-full",value:x,onChange:e=>{const t=e.target.value.toLowerCase();if(h(t),null===c||void 0===c||c(p,t),t){const e=a&&(null===a||void 0===a?void 0:a.filter((e=>{var a,n,r,s,i;return(null===(a=e.name)||void 0===a?void 0:a.toLowerCase().includes(t))||(null===(n=e.empID)||void 0===n?void 0:n.toLowerCase().includes(t))||(null===(r=e.JOBCODE)||void 0===r?void 0:r.toLowerCase().includes(t))||(null===(s=e.location)||void 0===s?void 0:s.toLowerCase().includes(t))||(null===(i=e.empBadgeNo)||void 0===i?void 0:i.toLowerCase().includes(t))})));null===u||void 0===u||u(e)}else null===u||void 0===u||u(a)},onClick:v}),(0,i.jsx)("div",{className:" text-dark_grey  text-2xl cursor-pointer",onClick:()=>{y()},children:s})]}),(null===m||void 0===m?void 0:m.length)>0&&(0,i.jsx)("ul",{className:" absolute right-0 overflow-x-hidden  mt-2 w-full ml-auto max-h-36 overflow-y-auto rounded-lg shadow-lg bg-white z-10",children:m.map(((e,a)=>(0,i.jsx)("li",{className:"m-2 p-1 hover:bg-grey hover:text-white cursor-pointer flex justify-between items-center transition-all duration-200",onClick:()=>{console.log(e),(e.empID||e.name)&&(console.log("".concat(e.empID," - ").concat(e.name||"")),h("".concat(e.empID," - ").concat(e.name||"")),t(e),h("")),e.JOBCODE&&(h(e.JOBCODE),t(e,p)),e.location&&(h(e.location),t(e,p)),f(!1),null===u||void 0===u||u([])},children:(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:" text-sm",children:null===e||void 0===e?void 0:e.empID}),(0,i.jsxs)("span",{className:" text-sm",children:[" ",null===e||void 0===e?void 0:e.name]}),(0,i.jsx)("span",{className:" text-sm",children:null===e||void 0===e?void 0:e.JOBCODE}),(0,i.jsx)("span",{className:" text-sm",children:null===e||void 0===e?void 0:e.location})]})},a)))})]})},Yn=e=>{let{register:t,errors:a,watch:n,setValue:r,control:s}=e;const l=n("sapNo"),o=n("empBadgeNo");n("contractType"),n("empType");return(0,i.jsxs)("div",{className:"form-group grid grid-cols-1 md:grid-cols-4 gap-5",children:[(0,i.jsx)(ut,{label:"Badge Number",register:t,watch:o,name:"empBadgeNo",errors:a}),(0,i.jsx)(ut,{label:"SAP Number",register:t,watch:l,name:"sapNo",errors:a}),(0,i.jsx)(it.xI,{name:"contractType",control:s,render:e=>{let{field:t}=e;return(0,i.jsx)(ut,{label:"Contract Type",name:t.name,type:"selectOption",value:t.value,setValue:r,options:At,watch:n,register:()=>t,errors:a,append:!0})}}),(0,i.jsx)(it.xI,{name:"empType",control:s,render:e=>{let{field:t}=e;return(0,i.jsx)(ut,{label:"Employee Type",name:t.name,type:"selectOption",value:t.value,setValue:r,options:Et,watch:n,register:()=>t,errors:a,append:!0})}})]})},Vn=e=>{let{register:t,errors:a}=e;return(0,i.jsxs)("div",{className:"form-group grid grid-cols-1 md:grid-cols-3 gap-5",children:[(0,i.jsx)(ut,{label:"Name",register:t,name:"name",type:"text",errors:a}),(0,i.jsx)(ut,{label:"Gender",register:t,name:"gender",type:"select",options:vt,errors:a}),(0,i.jsx)(ut,{label:"Date of Birth",register:t,name:"dob",type:"date",errors:a})]})},zn=e=>{var t,a;let{register:n,errors:r,handleRaceChange:s,handleRelegianChange:l,selectedRace:o,selectedReligion:d,watch:c,dropDownVal:p}=e;const m=null===(t=p[0])||void 0===t?void 0:t.religionDD.map((e=>({value:e,label:e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}))),u=null===(a=p[0])||void 0===a?void 0:a.raceDD.map((e=>({value:e,label:e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}))),x=c("race"),h=c("Religion"),g=c("otherRace"),f=c("otherReligion");return(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-5 form-group",children:[(0,i.jsxs)("div",{className:"flex items-center gap-5",children:[(0,i.jsx)(ut,{label:"Religion",register:n,name:"religion",type:"select",options:m,onChange:l,errors:r}),("OTHER"===d||f&&"OTHER"===h)&&(0,i.jsx)(ut,{label:"Other Religion",register:n,name:"otherReligion",type:"text",watch:f,errors:r,placeholder:"Enter Other Religion"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-5",children:[(0,i.jsx)(ut,{label:"Race",register:n,name:"race",type:"select",watch:x,options:u,errors:r,onChange:s}),("OTHER"===o||g&&"OTHER"===x)&&(0,i.jsx)(ut,{label:"Other Race",register:n,name:"otherRace",type:"text",watch:g,errors:r,placeholder:"Enter Race"})]})]})},Jn=e=>{let{register:t,errors:a,dropDownVal:n}=e;return(0,i.jsxs)("div",{className:"form-group grid grid-cols-1 md:grid-cols-2 gap-5",children:[(0,i.jsx)(ut,{label:"National Category",register:t,name:"nationalCat",type:"select",options:jt,errors:a}),(0,i.jsx)(ut,{label:"Marital Status",register:t,name:"marital",type:"select",options:Dt,errors:a})]})},Gn=e=>{var t,a;let{register:n,errors:r,handleNationalityChange:s,handleCountryChange:l,selectedNationality:o,selectedCountry:d,watch:c,dropDownVal:p}=e;const m=c("oCOfOrigin"),u=c("otherNation"),x=c("nationality"),h=c("ctryOfOrigin"),g=null===(t=p[0])||void 0===t?void 0:t.nationalityDD.map((e=>({value:e,label:e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}))),f=null===(a=p[0])||void 0===a?void 0:a.countryORDD.map((e=>({value:e,label:e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")})));return(0,i.jsxs)("div",{className:"flex gap-5 form-group",children:[(0,i.jsxs)("div",{className:"flex flex-1 gap-7",children:[(0,i.jsx)(ut,{label:"Nationality",register:n,name:"nationality",type:"select",options:g,errors:r,onChange:s}),("OTHER"===o||u&&"OTHER"===x)&&(0,i.jsx)(ut,{label:"Other Nationality",register:n,name:"otherNation",type:"text",errors:r})]}),(0,i.jsxs)("div",{className:"flex flex-1 gap-7",children:[(0,i.jsx)(ut,{label:"Country of Origin",register:n,name:"ctryOfOrigin",type:"select",options:f,errors:r,onChange:l}),("OTHER"===d||m&&"OTHER"===h)&&(0,i.jsx)(ut,{label:"Other Country of Origin",register:n,name:"oCOfOrigin",type:"text",errors:r})]})]})},$n=e=>{let{register:t,errors:a}=e;return(0,i.jsxs)("div",{className:"grid grid-cols-4 gap-5 form-group",children:[(0,i.jsx)(ut,{label:"Brunei IC Number",register:t,name:"bwnIcNo",type:"text",errors:a}),(0,i.jsx)(ut,{label:"Brunei IC Colour",register:t,name:"bwnIcColour",type:"select",options:It,errors:a}),(0,i.jsx)(ut,{label:"Brunei IC Expiry",register:t,name:"bwnIcExpiry",type:"date",errors:a}),(0,i.jsx)(ut,{label:"Malaysian IC Number",register:t,name:"myIcNo",type:"text",errors:a})]})},Kn=e=>{let{register:t,errors:a}=e;return(0,i.jsxs)("div",{className:"grid grid-cols-4 gap-5 form-group",children:[(0,i.jsx)(ut,{label:"Passport Number",register:t,name:"ppNo",type:"text",errors:a}),(0,i.jsx)(ut,{label:"Passport Issue Date",register:t,name:"ppIssued",type:"date",errors:a}),(0,i.jsx)(ut,{label:"Passport Expiry",register:t,name:"ppExpiry",type:"date",errors:a}),(0,i.jsx)(ut,{label:"Passport issued destination",register:t,name:"ppDestinate",type:"text",errors:a})]})},Qn=e=>{var t;let{register:a,errors:n,dropDownVal:r}=e;const s=null===(t=r[0])||void 0===t?void 0:t.educLevelDD.map((e=>({value:e,label:e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")})));return(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-5 form-group",children:[(0,i.jsx)(ut,{label:"Academic / Technical qualification",register:a,name:"aTQualify",type:"text",errors:n}),(0,i.jsx)(ut,{label:"Education Level",register:a,name:"educLevel",type:"select",options:s,errors:n}),(0,i.jsx)(ut,{label:"Contact Number",register:a,name:"contactNo",type:"number",errors:n})]})},Zn=e=>{let{register:t,errors:a}=e;return(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-5 form-group",children:[(0,i.jsx)(ut,{label:"Email Address",type:"email",name:"email",register:t,errors:a}),(0,i.jsx)(ut,{label:"Official Email Address",type:"email",name:"officialEmail",register:t,errors:a}),(0,i.jsx)(ut,{label:"Home Address",type:"textarea",name:"permanentAddress",register:t,errors:a})]})},Xn=e=>{let{register:t,errors:a,control:n,value:s,watch:l,setValue:o}=e;const{fields:d,append:c,remove:p,replace:m}=(0,it.jz)({control:n,name:"familyDetails"}),u=(0,r.useRef)(!0),x=l("familyDetails");(0,r.useEffect)((()=>{if(u.current){if(s&&s.length>0){let t;console.log("Received value:",s);try{if("string"===typeof s){const e=s.replace(/\\"/g,'"');console.log("Cleaned value:",e),t=JSON.parse(e)}else t=s;m(t),o("familyDetails",t)}catch(e){console.error("Error parsing value:",e)}}else c({name:"",relationship:"",contact:"",address:"",isNew:!1});u.current=!1}else if(s&&s.length>0){let t;try{if("string"===typeof s){const e=s.replace(/\\"/g,'"');console.log("Cleaned value (on update):",e),t=JSON.parse(e)}else t=s;m(t),o("familyDetails",t)}catch(e){console.error("Error parsing value (on update):",e)}}}),[s,c,m,o]);return(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("label",{className:"block text_size_5",children:"Employee Next of Kin Info"}),d.map(((e,n)=>{var r;return(0,i.jsxs)("div",{className:"grid grid-cols-4 form-group gap-5 mt-4 relative",children:[(0,i.jsx)(ut,{label:"Name",type:"text",name:"familyDetails.".concat(n,".name"),register:t,errors:a}),(0,i.jsx)(ut,{label:"Relationship",type:"text",name:"familyDetails.".concat(n,".relationship"),register:t,errors:a}),(0,i.jsx)(ut,{label:"Contact number",type:"text",inputmode:"numeric",name:"familyDetails.".concat(n,".contact"),register:t,errors:a}),(0,i.jsx)(ut,{label:"Home address",type:"text",name:"familyDetails.".concat(n,".address"),register:t,errors:a,value:(null===x||void 0===x||null===(r=x[n])||void 0===r?void 0:r.address)||""}),e.isNew&&(0,i.jsxs)("button",{type:"button",onClick:()=>p(n),className:"absolute top-2 -right-8 text-medium_grey text-[18px]",children:[(0,i.jsx)(Lt.vli,{})," "]})]},e.id)})),(0,i.jsx)("button",{type:"button",onClick:()=>{c({name:"",relationship:"",contact:"",address:"",isNew:!0})},className:"mt-4 flex items-center text-medium_grey text-[20px] absolute -right-8 top-16",children:(0,i.jsx)(Ft.Oh0,{className:"mr-2"})})]})},er=e=>{let{register:t,errors:a}=e;return(0,i.jsxs)(i.Fragment,{children:[" ",(0,i.jsx)(ut,{label:"Company Name of Previous Employment",type:"text",name:"preEmp",register:t,errors:a}),(0,i.jsx)(ut,{label:"Previous Employment Period",type:"text",name:"preEmpPeriod",register:t,errors:a}),(0,i.jsx)(ut,{label:"Date of Induction Briefing",type:"date",name:"inducBrief",register:t,errors:a})]})},tr=()=>{const e=(0,ge.D)(),[t,a]=(0,r.useState)("");return{SubmitEIData:(0,r.useCallback)((async t=>{let{empValue:a}=t;if(!a)throw new Error("Missing required parameters");const{empID:n,aTQualify:r,alternateNo:s,agent:i,contactNo:l,cob:o,contractType:d,ctryOfOrigin:c,chinese:p,dob:m,educLevel:u,email:h,empBadgeNo:g,empType:f,familyDetails:v,gender:y,officialEmail:b,lang:N,marital:j,name:D,oCOfOrigin:w,permanentAddress:A,position:S,sapNo:E,bankName:I,bankAccNo:C,bwnIcNo:k,bwnIcColour:R,bwnIcExpiry:T,driveLic:P,inducBrief:_,inducBriefUp:O,myIcNo:L,nationality:F,nationalCat:M,otherNation:q,otherRace:U,otherReligion:B,ppNo:H,ppIssued:W,ppExpiry:Y,ppDestinate:V,preEmp:z,preEmpPeriod:J,profilePhoto:G,race:$,religion:K,bwnUpload:Q,applicationUpload:Z,cvCertifyUpload:X,loiUpload:ee,myIcUpload:te,paafCvevUpload:ae,ppUpload:ne,supportDocUpload:re}=a,se={empID:n,bwnIcNo:k,bwnIcColour:R,bwnIcExpiry:T,driveLic:P,inducBrief:_,inducBriefUp:O,myIcNo:L,nationality:F,nationalCat:M,otherNation:q,otherRace:U,otherReligion:B,ppNo:H,ppIssued:W,ppExpiry:Y,ppDestinate:V,preEmp:z,preEmpPeriod:J,race:$,religion:K,bwnUpload:Q,applicationUpload:Z,cvCertifyUpload:X,loiUpload:ee,myIcUpload:te,paafCvevUpload:ae,ppUpload:ne,supportDocUpload:re},ie={empID:n,aTQualify:r,alternateNo:s,agent:i,contactNo:l,cob:o,contractType:d,ctryOfOrigin:c,chinese:p,dob:m,educLevel:u,email:h,officialEmail:b,empBadgeNo:g,empType:f,familyDetails:v,gender:y,lang:N,marital:j,name:D,oCOfOrigin:w,profilePhoto:G,permanentAddress:A,position:S,sapNo:E,bankName:I,bankAccNo:C};try{const[t,a]=await Promise.all([e.graphql({query:ke,variables:{input:se}}),e.graphql({query:Ie,variables:{input:(0,x.A)({},ie)}})])}catch(le){throw console.error("Error executing GraphQL requests:",le),le}}),[e]),errorEmpID:t}},ar=()=>{const e=(0,ge.D)(),[t,a]=(0,r.useState)("");return{UpdateEIValue:(0,r.useCallback)((async t=>{let{collectValue:a}=t;if(!a)throw new Error("Missing required parameters");const{empID:n,PITableID:r,IDTable:s,bwnIcNo:i,bwnIcColour:l,bwnIcExpiry:o,driveLic:d,inducBrief:c,inducBriefUp:p,myIcNo:m,nationality:u,nationalCat:x,otherNation:h,otherRace:g,otherReligion:f,ppNo:v,ppIssued:y,ppExpiry:b,ppDestinate:N,preEmp:j,preEmpPeriod:D,profilePhoto:w,race:A,religion:S,bwnUpload:E,applicationUpload:I,cvCertifyUpload:C,loiUpload:k,myIcUpload:R,paafCvevUpload:T,ppUpload:P,supportDocUpload:_,aTQualify:O,alternateNo:L,agent:F,contactNo:M,cob:q,contractType:U,ctryOfOrigin:B,chinese:H,dob:W,educLevel:Y,email:V,empBadgeNo:z,empType:J,familyDetails:G,officialEmail:$,gender:K,lang:Q,marital:Z,name:X,oCOfOrigin:ee,permanentAddress:te,position:ae,sapNo:ne,bankName:re,bankAccNo:se}=a,ie={id:r,empID:n,aTQualify:O,alternateNo:L,agent:F,contactNo:M,cob:q,contractType:U,ctryOfOrigin:B,chinese:H,dob:W,educLevel:Y,email:V,empBadgeNo:z,empType:J,familyDetails:G,officialEmail:$,gender:K,lang:Q,marital:Z,name:X,oCOfOrigin:ee,profilePhoto:w,permanentAddress:te,position:ae,sapNo:ne,bankName:re,bankAccNo:se},le={id:s,empID:n,bwnIcNo:i,bwnIcColour:l,bwnIcExpiry:o,driveLic:d,inducBrief:c,inducBriefUp:p,myIcNo:m,nationality:u,nationalCat:x,otherNation:h,otherRace:g,otherReligion:f,ppNo:v,ppIssued:y,ppExpiry:b,ppDestinate:N,preEmp:j,preEmpPeriod:D,race:A,religion:S,bwnUpload:E,applicationUpload:I,cvCertifyUpload:C,loiUpload:k,myIcUpload:R,paafCvevUpload:T,ppUpload:P,supportDocUpload:_};try{const[t,a]=await Promise.all([e.graphql({query:Ce,variables:{input:ie,limit:2e4}}),e.graphql({query:"\n  mutation UpdateIDDetails(\n    $input: UpdateIDDetailsInput!\n    $condition: ModelIDDetailsConditionInput\n  ) {\n    updateIDDetails(input: $input, condition: $condition) {\n      id\n      empID\n      applicationUpload\n      bwnIcNo\n      bwnIcColour\n      bwnIcExpiry\n      bwnUpload\n      cvCertifyUpload\n      driveLic\n      inducBrief\n      inducBriefUp\n      loiUpload\n      myIcNo\n      myIcUpload\n      nationality\n      nationalCat\n      otherNation\n      otherRace\n      otherReligion\n      ppNo\n      paafCvevUpload\n      ppIssued\n      ppExpiry\n      ppUpload\n      ppDestinate\n      preEmp\n      preEmpPeriod\n      race\n      religion\n      supportDocUpload\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:le,limit:2e4}})])}catch(oe){throw console.error("Error executing GraphQL requests:",oe),oe}}),[]),errorEmpID:t}},nr=e=>{let{register:t,errors:a}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ut,{label:"Bank Name",type:"text",name:"bankName",register:t,errors:a}),(0,i.jsx)(ut,{label:"Bank Account Number",type:"text",name:"bankAccNo",register:t,errors:a})]})},rr=()=>{var e;(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]);const{SubmitEIData:t,errorEmpID:a}=tr(),{UpdateEIValue:l}=ar(),{empPIData:o,IDData:d,dropDownVal:c}=(0,r.useContext)(s.Y),[p,m]=(0,r.useState)([]),[u,f]=(0,r.useState)([]),[v,b]=(0,r.useState)(""),[N,j]=(0,r.useState)(""),[D,w]=(0,r.useState)(""),[A,S]=(0,r.useState)(""),[E,I]=(0,r.useState)([]),[C,k]=(0,r.useState)(!1),[R,T]=(0,r.useState)({bwnUpload:[],applicationUpload:[],cvCertifyUpload:[],myIcUpload:[],paafCvevUpload:[],ppUpload:[],supportDocUpload:[],loiUpload:[]}),[P,_]=(0,r.useState)({uploadProfilePhoto:null,inducBriefUp:null}),[O,L]=(0,r.useState)({profilePhoto:null,inducBriefUp:null}),[F,M]=(0,r.useState)(null),[q,U]=(0,r.useState)(null),[B,H]=(0,r.useState)([]),[W,Y]=(0,r.useState)(""),{register:V,handleSubmit:z,setValue:J,watch:G,control:$,formState:{errors:K}}=(0,it.mN)({resolver:(0,lt.t)(En),mode:"onChange",defaultValues:{familyDetails:JSON.stringify([]),contractType:[],empType:[]}}),Q=G("contractType"),Z=G("empType"),X=G("empID"),ee=G("profilePhoto");(0,r.useEffect)((()=>{(async()=>{try{const e=o.map((e=>{const t=d?d.find((t=>t.empID===e.empID)):{};return(0,x.A)((0,x.A)({},e),t)})).filter(Boolean);m(e),f(e)}catch(e){console.log(e)}})()}),[o,d]);const te=async(e,t)=>{if(!X)return alert("Please enter the Employee ID before uploading files."),void(window.location.href="/employeeInfo");let a=e.target.files[0];["application/pdf","image/jpeg","image/png","image/jpg"].includes(a.type)?(J(t,a),a&&(await pt(a,t,L,X),_((e=>(0,x.A)((0,x.A)({},e),{},{[t]:a.name}))))):alert("Upload must be a PDF file or an image (JPG, JPEG, PNG)")};(0,r.useEffect)((()=>{if(null!==O&&void 0!==O&&O.profilePhoto||null!==O&&void 0!==O&&O.inducBriefUp&&O.inducBriefUp.length>0){if(O.profilePhoto){(async e=>{const t=await(0,h.I)({path:e});return M(t.url.toString())})(O.profilePhoto)}if(O.inducBriefUp&&O.inducBriefUp.length>0){const e=O.inducBriefUp[O.inducBriefUp.length-1].upload;U(e)}}}),[O,ee]);const ae=e=>"string"===typeof e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():e,ne=e=>{const t=new Date(e);return!isNaN(t.getTime())},re=e=>{if(!e)return"";const t=new Date(e),a=t.getFullYear(),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getDate().toString().padStart(2,"0");return"".concat(a,"-").concat(n,"-").concat(r)},se=e=>{if(!e||"string"!==typeof e)return"";return e.split("/").pop().split(".").slice(0,-1).join(".")};return(0,i.jsxs)("section",{className:"bg-[#F5F6F1CC] mx-auto p-10",onClick:()=>{I([])},children:[(0,i.jsxs)("div",{className:"w-full flex items-center justify-between gap-5",children:[(0,i.jsx)(n.N_,{to:"/employee",className:"text-xl flex-1 text-grey",children:(0,i.jsx)(Lt.QVr,{})}),(0,i.jsx)("h5",{className:"flex-1 text-center mt-2 text_size_2 uppercase",children:"Employee Info"}),(0,i.jsx)("div",{className:"flex-1",children:(0,i.jsx)(Wn,{searchResult:async e=>{var t,a;["empID","driveLic","inducBrief","myIcNo","nationality","nationalCat","otherNation","otherRace","otherReligion","preEmp","preEmpPeriod","race","religion","age","aTQualify","alternateNo","agent","dob","cob","ctryOfOrigin","chinese","educLevel","email","eduDetails","empBadgeNo","empType","bankName","bankAccNo","lang","marital","name","oCOfOrigin","position","sapNo","officialEmail","bwnIcColour","gender"].forEach((t=>{let a=e[t];var n;(void 0!==a&&null!==a||(a=""),"string"===typeof a&&""!==a.trim()&&(a=a.toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")),"empBadgeNo"===t)&&(a=null===(n=a)||void 0===n?void 0:n.toUpperCase());void 0!==a&&null!==a&&J(t,a)}));["contractType","empType"].forEach((t=>J(t,((e,t)=>"contractType"===t||"empType"===t?ae(e):(Array.isArray(e)?e:e?[e]:[]).map(ae))(e[t]))));["bwnIcExpiry","ppExpiry","ppIssued"].forEach((t=>J(t,(e=>{const t=Array.isArray(e)?e[e.length-1]:e;return ne(t)?re(t):t})(e[t]))));if(["permanentAddress","contactNo","ppNo","ppDestinate","bwnIcNo"].forEach((t=>{const a=e[t];if(Array.isArray(a)){const e=a.join(", ").split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())).join(" ");J(t,e||"")}else if("string"===typeof a){const e=a.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())).join(" ");J(t,e||"")}else J(t,a||"")})),Array.isArray(e.familyDetails)&&e.familyDetails.length>0){const t=(e=>{try{let t=e;"object"===typeof t&&(t=Array.isArray(t)?JSON.stringify(t):JSON.stringify([t]));let a=t.trim();a.startsWith('"')&&a.endsWith('"')&&(a=a.slice(1,-1)),a=a.replace(/([a-zA-Z0-9_]+)(:)/g,'"$1"$2'),a=a.replace(/"(?!\\)/g,'\\"'),a=a.replace(/\\/g,"");const n=e=>e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())).join(" ");if(a.startsWith("[")&&a.endsWith("]"))return JSON.parse(a).map((e=>"string"===typeof e?n(e):"object"===typeof e?Object.fromEntries(Object.entries(e).map((e=>{let[t,a]=e;return[t,"string"===typeof a?n(a):a]}))):e));{const e=JSON.parse(a);return"string"===typeof e?[n(e)]:"object"===typeof e?[Object.fromEntries(Object.entries(e).map((e=>{let[t,a]=e;return[t,"string"===typeof a?n(a):a]})))]:[e]}}catch(t){return[]}})(null===e||void 0===e?void 0:e.familyDetails[0]);H(t||[])}else H([]);e.inducBriefUp&&_((t=>(0,x.A)((0,x.A)({},t),{},{inducBriefUp:se(e.inducBriefUp)||""}))),J("profilePhoto",(null===e||void 0===e||null===(t=e.profilePhoto)||void 0===t?void 0:t.toString())||null),J("inducBriefUp",(null===e||void 0===e||null===(a=e.inducBriefUp)||void 0===a?void 0:a.toString())||""),L((t=>({profilePhoto:e.profilePhoto||null,inducBriefUp:e.inducBriefUp||""})));(async e=>{try{if(e||M(g),e){var t;const a=await(0,h.I)({path:e});M(null===(t=a.url)||void 0===t?void 0:t.toString())}}catch(a){}})((null===e||void 0===e?void 0:e.profilePhoto)||null);["bwnUpload","applicationUpload","cvCertifyUpload","loiUpload","myIcUpload","paafCvevUpload","ppUpload","supportDocUpload"].map((t=>{if(e&&e[t])try{var a;const n=JSON.parse(e[t]),r=(Array.isArray(n)?n:[n]).map((e=>{if("string"===typeof e)try{const t=(e=>{try{let t=e.replace(/=/g,":");return t=t.replace(/([{,])\s*(\w+)\s*:/g,'$1"$2":'),t=t.replace(/:\s*([^"{[\]},]+)/g,': "$1"'),t}catch(t){return console.error("Error processing string:",t),e}})(e);return JSON.parse(t)}catch(t){return e}return e})),s=r[r.length-1],i=null!==s&&void 0!==s&&s.upload?se(s.upload):null!==(a=s[0])&&void 0!==a&&a.upload?se(s[0].upload):null;J(t,r),T((e=>(0,x.A)((0,x.A)({},e),{},{[t]:r}))),_((e=>(0,x.A)((0,x.A)({},e),{},{[t]:i||""})))}catch(n){}}))},newFormData:u,searchIcon2:(0,i.jsx)(y.zfp,{}),placeholder:"Employee Id",rounded:"rounded-lg",filteredEmployees:E,setFilteredEmployees:I})})]}),(0,i.jsxs)("form",{onSubmit:z((async e=>{e.contractType=Q,e.empType=Z;const a=e=>e?new Date(e).toLocaleDateString("en-CA"):null,n=a(e.bwnIcExpiry),r=a(e.ppIssued),s=a(e.ppExpiry),i=(e,t)=>{const a=[...e||[],t];return-1!==a.findIndex((e=>null!==e))?a.map((e=>null===e?"N/A":e)):[]};try{const a=o.find((t=>t.empID===e.empID)),c=d.find((t=>t.empID===e.empID));if(c&&a){const t=i(c.bwnIcExpiry,n),o=i(c.ppExpiry,s),d=i(c.ppIssued,r),p=(0,x.A)((0,x.A)({},e),{},{profilePhoto:O.profilePhoto,inducBriefUp:O.inducBriefUp,bwnUpload:JSON.stringify(R.bwnUpload),bwnIcExpiry:t,ppIssued:d,ppExpiry:o,applicationUpload:JSON.stringify(R.applicationUpload),cvCertifyUpload:JSON.stringify(R.cvCertifyUpload),loiUpload:JSON.stringify(R.loiUpload),myIcUpload:JSON.stringify(R.myIcUpload),paafCvevUpload:JSON.stringify(R.paafCvevUpload),ppUpload:JSON.stringify(R.ppUpload),supportDocUpload:JSON.stringify(R.supportDocUpload),familyDetails:JSON.stringify(e.familyDetails),PITableID:a.id,IDTable:c.id,email:e.email.trim().toLowerCase(),officialEmail:e.officialEmail.trim().toLowerCase()});await l({collectValue:p}),Y("Employee Personal Info updated successfully"),k(!0)}else{const a=i([],n),l=i([],s),o=i([],r),d=(0,x.A)((0,x.A)({},e),{},{profilePhoto:O.profilePhoto,inducBriefUp:O.inducBriefUp,bwnUpload:JSON.stringify(R.bwnUpload),bwnIcExpiry:a,ppIssued:o,ppExpiry:l,applicationUpload:JSON.stringify(R.applicationUpload),cvCertifyUpload:JSON.stringify(R.cvCertifyUpload),loiUpload:JSON.stringify(R.loiUpload),myIcUpload:JSON.stringify(R.myIcUpload),paafCvevUpload:JSON.stringify(R.paafCvevUpload),ppUpload:JSON.stringify(R.ppUpload),supportDocUpload:JSON.stringify(R.supportDocUpload),familyDetails:JSON.stringify(e.familyDetails),email:e.email.trim().toLowerCase(),officialEmail:e.officialEmail.trim().toLowerCase()});await t({empValue:d}),Y("Employee Personal Info saved successfully"),k(!0)}}catch(c){console.log(c)}})),className:" flex flex-col justify-center",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center py-7 mt-2",children:[(0,i.jsxs)("div",{className:"py-2 center flex-col max-w-[160px]",children:[(0,i.jsx)("input",{type:"file",id:"fileInput",name:"profilePhoto",accept:".jpg,.jpeg,.png",onChange:e=>{te(e,"profilePhoto")},className:"hidden"}),(0,i.jsxs)("div",{className:"h-[120px] max-w-[120px] relative rounded-md bg-lite_skyBlue",children:[(0,i.jsx)("img",{src:F instanceof File?URL.createObjectURL(F):"string"===typeof F&&F?F:ee||g,id:"previewImg",alt:"profile",className:"object-cover w-full h-full",onError:e=>e.target.src=g}),(F||ee)&&(0,i.jsx)("div",{className:"absolute top-24 -right-3  bg-lite_grey p-[2px] rounded-full cursor-pointer",onClick:()=>document.getElementById("fileInput").click(),children:(0,i.jsx)(y.iog,{className:"w-6 h-6 p-1"})})]}),!F&&!ee&&(0,i.jsx)("div",{className:"mt-1 rounded-lg text-center",children:(0,i.jsx)("button",{type:"button",className:"text_size_6",onClick:()=>document.getElementById("fileInput").click(),children:"Choose Image"})}),!F&&!ee&&K.profilePhoto&&(0,i.jsx)("p",{className:"text-[red] text-[13px] text-center",children:null===K||void 0===K||null===(e=K.profilePhoto)||void 0===e?void 0:e.message})]}),(0,i.jsxs)("div",{className:"max-w-sm",children:[(0,i.jsx)(ut,{label:"Employee ID",register:V,name:"empID",type:"text",value:G("empID")||"",placeholder:"Enter Employee ID",errors:K}),a&&(0,i.jsx)("p",{className:"text-[red] text-[13px] text-center",children:a})]})]}),(0,i.jsx)(Yn,{register:V,errors:K,setValue:J,watch:G,control:$}),(0,i.jsx)(Vn,{register:V,errors:K}),(0,i.jsx)(zn,{register:V,errors:K,handleRaceChange:e=>{w(e.target.value)},handleRelegianChange:e=>{S(e.target.value)},selectedRace:D,selectedReligion:A,watch:G,dropDownVal:c}),(0,i.jsx)(Jn,{register:V,errors:K,dropDownVal:c}),(0,i.jsx)(Gn,{register:V,errors:K,handleNationalityChange:e=>{b(e.target.value)},selectedNationality:v,selectedCountry:N,handleCountryChange:e=>{j(e.target.value)},watch:G,dropDownVal:c}),(0,i.jsx)($n,{register:V,errors:K}),(0,i.jsx)(Kn,{register:V,errors:K}),(0,i.jsx)(Qn,{register:V,errors:K,dropDownVal:c}),(0,i.jsx)(Zn,{register:V,errors:K}),(0,i.jsx)(Xn,{register:V,errors:K,control:$,watch:G,setValue:J,value:B}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-5 form-group mt-2",children:[(0,i.jsx)(er,{register:V,errors:K}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text_size_5 mb-2",children:"Upload Induction Form"}),(0,i.jsxs)("label",{className:"flex items-center px-3 py-2 p-2.5 bg-lite_skyBlue border border-[#dedddd] rounded-md cursor-pointer",children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"file"},V("inducBriefUp")),{},{onChange:e=>te(e,"inducBriefUp"),className:"hidden",accept:".pdf, .jpg, .jpeg, .png"})),(0,i.jsxs)("span",{className:"ml-2 flex p-1 text-grey gap-10",children:[(0,i.jsx)(ft.gwN,{})," Induction Form"]})]}),(0,i.jsx)("p",{className:"text-xs mt-1 text-grey",children:null===P||void 0===P?void 0:P.inducBriefUp})]}),(0,i.jsx)(nr,{register:V,errors:K})]}),(0,i.jsx)("div",{className:"grid grid-cols-4 gap-5 form-group mt-5",children:Ct.map(((e,t)=>(0,i.jsx)(it.xI,{name:e.title,control:$,render:t=>{let{field:{onChange:a,value:n}}=t;return(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsxs)("h2",{className:"text_size_5",children:["Upload ",e.label]}),(0,i.jsxs)("label",{className:"mt-2 flex items-center px-3 py-3 text_size_7 bg-lite_skyBlue border border-[#dedddd] rounded cursor-pointer",children:[(0,i.jsx)("input",{type:"file",className:"hidden",accept:".pdf,image/jpeg,image/png",onChange:t=>(async(e,t)=>{if(!X)return alert("Please enter the Employee ID before uploading files."),void(window.location.href="/employeeInfo");const a=e.target.files[0];if(!a)return;if(!["application/pdf","image/jpeg","image/png","image/jpg"].includes(a.type))return void alert("Upload must be a PDF file or an image (JPG, JPEG, PNG)");const n=G(t)||[];J(t,[...n,a]);try{await pt(a,t,T,X),_((e=>(0,x.A)((0,x.A)({},e),{},{[t]:a.name})))}catch(r){console.log(r)}})(t,e.title)}),(0,i.jsxs)("span",{className:"ml-2 text-grey font-normal flex justify-between items-center gap-10",children:[e.icon,e.label]})]}),(0,i.jsx)("p",{className:"text-xs mt-1 text-grey",children:(null===P||void 0===P?void 0:P[e.title])||""}),K[e.title]&&(0,i.jsx)("p",{className:"text-red-500 text-xs mt-1",children:K[e.title].message})]})}},t)))}),(0,i.jsx)("div",{className:"flex justify-center items-center mt-7 ",children:(0,i.jsx)("button",{type:"submit",className:"primary_btn",children:"Save"})}),C&&(0,i.jsx)(Le,{text:W,notification:C,path:"/employeeInfo"})]})]})},sr=()=>{const e=(0,ge.D)(),t=(0,r.useCallback)((async t=>{let{workInfoValue:a}=t;if(!a)throw new Error("Missing required parameters");const{empID:n,department:r,otherDepartment:s,position:i,otherPosition:l,jobCat:o,otherJobCat:d,doj:c,jobDesc:p,skillPool:m,relationship:u,hr:x,manager:h,supervisor:g,upgradePosition:f,upgradeDate:v,contractPeriod:y,contractStart:b,contractEnd:N,workStatus:j,probationStart:D,probationEnd:w,workHrs:A,workWeek:S,workMonth:E,salaryType:I,resignDate:C,termiDate:k,resignNotProb:R,otherResignNotProb:T,termiNotProb:P,otherTermiNotProb:_,resignNotConf:O,otherResignNotConf:L,termiNotConf:F,otherTermiNotConf:M,reasonResign:q,reasonTerminate:U,leavePass:B,dateLeavePass:H,hospLeave:W,destinateLeavePass:Y,durLeavePass:V,annualLeave:z,annualLeaveDate:J,sickLeave:G,sickLeaveDate:$,materLeave:K,paterLeave:Q,mrageLeave:Z,pervAnnualLeaveBal:X,probDuration:ee,WIContract:te,WIProbation:ae,WIResignation:ne,WITermination:re,WILeaveEntitle:se,positionRev:ie,positionRevDate:le,revSalary:oe,revSalaryDate:de,revLeavePass:ce,revLeaveDate:pe,revAnnualLeave:me,revALD:ue,depEmp:xe,depEmpDate:he,remarkWI:ge,uploadPR:fe,uploadSP:ve,uploadLP:ye,uploadAL:be,uploadDep:Ne,sapNo:je}=a,Ae=e=>e?new Date(e).toLocaleDateString("en-CA"):[],Ie=Ae(N),Ce=Ae(b),ke=(Re=c)?new Date(Re).toLocaleDateString("en-CA"):null;var Re;const Te=Ae(w),Pe=Ae(D),_e=Ae(v),Oe=Ae(J),Le=Ae(H),Fe=Ae(he),Me=Ae(le),qe=Ae(de),Ue=Ae(pe),Be=Ae(ue),He=[Ie,Ce,Te,Pe,_e,i,l,r,s,o,d,u,x,p,h,ee,g,I,f,A,j,S,E,y].map((e=>null==e||Array.isArray(e)&&0===e.length?[]:Array.isArray(e)?[...new Set(e)]:[e])),[We,Ye,Ve,ze,Je,Ge,$e,Ke,Qe,Ze,Xe,et,tt,at,nt,rt,st,it,lt,ot,dt,ct,pt,mt]=He,ut=[z,Oe,Y,V,Le,B].map((e=>null==e||Array.isArray(e)&&0===e.length?[]:Array.isArray(e)?[...new Set(e)]:[e])),[xt,ht,gt,ft,vt,yt]=ut,bt=[Fe,xe,Me,ie,qe,oe,Ue,ce,Be,me].map((e=>null==e||Array.isArray(e)&&0===e.length?[]:Array.isArray(e)?[...new Set(e)]:[e])),[Nt,jt,Dt,wt,At,St,Et,It,Ct,kt]=bt,Rt={empID:n,department:Ke,otherDepartment:Qe,position:Ge,otherPosition:$e,jobCat:Ze,otherJobCat:Xe,doj:ke,jobDesc:at,skillPool:m,relationship:et,upgradePosition:lt,upgradeDate:Je,contractStart:Ye,contractPeriod:mt,contractEnd:We,hr:tt,manager:nt,supervisor:st,workStatus:dt,probationStart:ze,probationEnd:Ve,probDuration:rt,workHrs:ot,workWeek:ct,workMonth:pt,salaryType:it,sapNo:je},Tt={empID:n,annualLeave:xt,annualLeaveDate:ht,destinateLeavePass:gt,durLeavePass:ft,dateLeavePass:vt,leavePass:yt,materLeave:K,mrageLeave:Z,paterLeave:Q,pervAnnualLeaveBal:X,sickLeave:G,sickLeaveDate:$,hospLeave:W},Pt={empID:n,resignDate:C,resignNotProb:R,otherResignNotProb:T,resignNotConf:O,otherResignNotConf:L,reasonResign:q,reasonTerminate:U,termiDate:k,termiNotProb:P,otherTermiNotProb:_,termiNotConf:F,otherTermiNotConf:M,WIContract:JSON.stringify(te),WIProbation:JSON.stringify(ae),WIResignation:JSON.stringify(ne),WITermination:JSON.stringify(re),WILeaveEntitle:JSON.stringify(se)},_t={empID:n,depEmpDate:Nt,depEmp:jt,positionRev:wt,positionRevDate:Dt,revSalary:St,revSalaryDate:At,revLeavePass:It,revLeaveDate:Et,revAnnualLeave:kt,revALD:Ct,remarkWI:ge,uploadPR:JSON.stringify(fe),uploadSP:JSON.stringify(ve),uploadLP:JSON.stringify(ye),uploadAL:JSON.stringify(be),uploadDep:JSON.stringify(Ne)};try{const[t,a,n,r]=await Promise.all([e.graphql({query:Ee,variables:{input:Rt}}),e.graphql({query:we,variables:{input:Tt}}),e.graphql({query:Se,variables:{input:Pt}}),e.graphql({query:De,variables:{input:_t}})]);console.log(t),console.log(a),console.log(n),console.log(r)}catch(Ot){console.log(Ot)}}),[]);return{SubmitWIData:t}},ir=()=>{var e,t,a,n;const{dropDownVal:i}=(0,r.useContext)(s.Y),l=null===(e=i[0])||void 0===e?void 0:e.resignNotifConfDD.map((e=>({value:e,label:e}))),o=null===(t=i[0])||void 0===t?void 0:t.resignNotifProbDD.map((e=>({value:e,label:e}))),d=null===(a=i[0])||void 0===a?void 0:a.termiNotifConfDD.map((e=>({value:e,label:e})));return{positions:["Accountant","Accounts Assistant","Accounts Coordinator","Admin Clerk","Advance Scaffolder","Advance Scaffolder Leadman","Apprentice Blaster Painter","Apprentice Marker Fitter Level 1A (Structural & Basic Piping)","Assistant Construction Supervisor","Assistant Field Engineer","Assistant Material Controller","Assistant Quality Control Inspector","Blaster/Painter","Blasting/Painting & Insulation Coordinator","Blasting/Painting PTW Supervisor","Blasting/Painting Supervisor","Calibration & Certification Coordinator","Camp Inspector cum Driver","Clerk","Coating Field Support","Construction Engineer","Construction Site Supervisor","Contract Engineer","Contract Manager","Cost Engineer","Costing Engineer","Deputy Facility Manager","Deputy HR Manager","Deputy Logistic Coordinator","Deputy Project Manager","Director's Personal Asst","Document & Data Controller","Document Controller","Document Controller cum Training/Medical Support","Document Controller/Timekeeper","Driver","Driver/Operator","E&I Manager","Electrician","Equipment & Maintenance Coordinator","Executive Director","Field Engineer","Field Engineer - Rotating","Finance & Procurement Manager","Finance/Project Controls Coordinator","Fitter Mechanic","Fitter Mechanic Grade A","Flange Management Engineer","Flange Management Inspector","Foreman","Forklift cum Overhead Crane Operator","Forklift Operator","General Manager","Helper","HP Jetter/Senior Mechanical Technician","HR Assistant","HR Assistant Coordinator","HR Coordinator","Human Resource Manager","HR/LBD Coordinator","HSE & Welfare Advisor","HSE Advisor","HSSE Advisor/Auditor","HSSE Coordinator","HSSE Manager","HSSE Officer","HSSE Offshore Officer","HSSE Training Coordinator","Industrial Cleaner","Industrial Cleaner Lead","Industrial Cleaner Supervisor","Insulation Fabricator","Insulation Field Support","Insulation Inspector","Insulation Supervisor","Insulation Supervisor/Permit Holder","Insulation Worksite Supervisor","Insulator","Insulator cum Fabricator","Inventory Maintenance Supervisor","IT Assistant Engineer","Junior Coordinator","Junior Electrician","Junior Engineer","Junior Field Engineer","Junior Material Coordinator","Junior Mechancial Technician","Junior Mechanical Technician","Junior Planner","Junior QC Inspector","Junior Scheduler","LBD & Welfare Manager","Leadman","Load Out Leadman","Loadout/Backload Supervisor","Logistics Coordinator","Logistics Scheduler","Logistics Scheduler & Timekeeper","Machinist","Machinist Grade A","Maintenance Coordinator","Managing Director","Marker Fitter","Marker Fitter Grade A","Marker Fitter Grade B","Marker Fitter Multiskill","Material Coordinator","Mechanic","Mechanical Construction Coordinator","Mechanical Construction Supervisor","Mechanical cum Hotwork Supervisor","Mechanical Engineer","Mechanical Execution Lead","Mechanical Field Engineer","Mechanical Insulation Supervisor","Mechanical Leadman","Mechanical Supervisor","Mechanical Supervisor/ PIC","Mechanical Supervisor/Permit Holder","Mechanical Technician","Mechanical Technician cum Rigger","Mechanical/Hotwork Supervisor","Office Assistant/Driver","Offshore Fabrication Workshop / Deck Supervisor","Offshore Mechanical Store Supervisor","Offshore Operations Manager","Offshore PWHT Technician","OMEC Contract Manager","Painter","Pass Coordinator cum Document Controller","Permit Coordinator","Personnel Officer","Pipe Welder - 6GR Trainee","Pipe Welder (6G)","Piping Supervisor","Planner","Planning Engineer","Procurement Coordinator","Project Coordinator","Project Engineer","PTW Supervisor","Public Relation Officer","Purchaser cum Expeditor","Purchasing Clerk","Purchasing Coordinator","PWHT Technician cum Electrician","QA/QC Coordinator","QA/QC Engineer","QA/QC Inspector","QA/QC Manager/QMR","Quantity Surveyor","Rigger","Rigger Multiskill","Rotating Equipment Engineer","Rotating Equipment Technician","Rotating Supervisor","Rotating Technician","Rotating Technician cum Mechanical Technician","Scaffold Coordinator","Scaffolder","Scaffolding Field Support","Scaffolding Inspector","Scaffolding Inspector cum Supervisor","Scaffolding Superintendent","Scaffolding Supervisor","Scaffolding Supervisor & Permit Holder","Scaffolding Supervisor/Inspector","Secretary","Secretary Cum Admin","Senior Document Controller","Senior Inspector","Senior Mechanical Supervisor","Senior Mechanical Technician","Senior Mechanical Technician cum HP/UHP Lead Operator","Senior Mechanical Technician/Banksman","Senior Planning Engineer","Senior Rotating Technician","Senior Scheduler","Senior Supervisor","Store Assistant","Store Coordinator","Storekeeper","Supervisor","Technical Assistant/Driver","Technical Clerk","Technical Field Support","Technical Field Support cum Fire Watcher","Timekeeper/Clerk","Tools & Equipment Coordinator","Trainee Technician","Training Coordinator","Turnaround Coordinator","UHP/HP Pump Operator/Hydro Jetter cum Mechanical Technician","Unit Shutdown Coordinator","Valve Technician","Welder","Welder Grade A","Welder Grade A1","Welder Grade B","Welder Grade C","Welder Multiskill","Welding Inspector","Welfare Officer cum CVEV Officer","Workpack Preparer","Worksite Supervisor","Other"],workFields:[{label:"Date of Join",name:"doj",type:"date"},{label:"Job Description",name:"jobDesc",type:"text"},{label:"Skill Pool",name:"skillPool",type:"select",options:["","Corporate","Management","Supervisory","Administration & Accounts","Skilled","Unskilled"]},{label:"HR ID",name:"hr",value:"Hr-notification@adininworks.com",type:"text",readOnly:!0},{label:"Manager ID",name:"manager",type:"text"},{label:"Supervisor ID",name:"supervisor",type:"text"}],terminationFields:[{label:"Date of Resignation",name:"resignDate",type:"date"},{label:"Date of Termination",name:"termiDate",type:"date"},{label:"Resignation Notice During Probation",name:"resignNotProb",type:"select",options:o},{label:"Termination Notice During Probation",name:"termiNotProb",type:"select",options:null===(n=i[0])||void 0===n?void 0:n.termiNotifProbDD.map((e=>({value:e,label:e})))},{label:"Resignation Notice After Confirmation",name:"resignNotConf",type:"select",options:l},{label:"Termination Notice After Confirmation",name:"termiNotConf",type:"select",options:d},{label:"Reason of Resignation",name:"reasonResign",type:"text"},{label:"Reason of Termination",name:"reasonTerminate",type:"text"}],leaveBasic:[{label:"Date of Leave Passage Entitlement After Contract",name:"dateLeavePass",type:"date"},{label:"Duration Period of Leave Passage Entitlement",name:"durLeavePass",type:"text"},{label:"Destination of Leave Passage Entitlement",name:"destinateLeavePass",type:"text"}],leaveFieldsAnother:[{label:"Annual Leave Entitlement",name:"annualLeave",type:"text"},{label:"Effective Date",name:"annualLeaveDate",type:"date"},{label:"Sick Leave Entitlement",name:"sickLeave",type:"text"},{label:"Effective Date",name:"sickLeaveDate",type:"date"},{label:"Maternity Leave Entitlement",name:"materLeave",type:"text"},{label:"Paternity Leave Entitlement",name:"paterLeave",type:"text"},{label:"Marriage Leave Entitlement",name:"mrageLeave",type:"text"},{label:"Hospitalisation Leave Entitlement",name:"hospLeave",type:"text"},{label:"Previous Annual Leave Balance",name:"pervAnnualLeaveBal",type:"text"}],serviceRecords:[{label:"Position Revision",name:"positionRev",type:"text"},{label:"Effective Date",name:"positionRevDate",type:"date"},{label:"Upload File",name:"uploadPR",type:"file"},{label:"Salary Package Revision",name:"revSalary",type:"text"},{label:"Effective Date",name:"revSalaryDate",type:"date"},{label:"Upload File",name:"uploadSP",type:"file"},{label:"Leave Passage Revision",name:"revLeavePass",type:"text"},{label:"Effective Date",name:"revLeaveDate",type:"date"},{label:"Upload File",name:"uploadLP",type:"file"},{label:"Annual Leave Revison",name:"revAnnualLeave",type:"text"},{label:"Effective date",name:"revALD",type:"date"},{label:"Upload File",name:"uploadAL",type:"file"},{label:"Change of Department",name:"depEmp",type:"text"},{label:"Effective Date",name:"depEmpDate",type:"date"},{label:"Upload File",name:"uploadDep",type:"file"}],hiringJob:[{label:"Job Title",name:"jobTitle",type:"text"},{label:"Experience",name:"experience",type:"text"},{label:"Location",name:"location",type:"text"},{label:"Quantity",name:"quantity",type:"number"},{label:"Start Date",name:"startDate",type:"date"},{label:"Expiry Date",name:"expiryDate",type:"date"}]}},lr=()=>{const e=(0,ge.D)(),t=(0,r.useCallback)((async t=>{let{workInfoUpValue:a}=t;if(!a)throw new Error("Missing required parameters");const n=e=>e&&new Date(e).toLocaleDateString("en-CA"),r=(e,t)=>e?null==t?e:[...new Set([...e||[],null===t||void 0===t?"N/A":t])].map((e=>null===e||void 0===e||""===e?"N/A":e)):t?[null===t||void 0===t||""===t?"N/A":t]:[],s=(e,t)=>e?null==t?e:[...e,t].map((e=>null===e||void 0===e||""===e?"N/A":e)):t?[null===t||void 0===t||""===t?"N/A":t]:[],{empID:i,SRDataRecord:l,leaveDetailsDataRecord:o,workInfoDataRecord:d,terminateDataRecord:c,department:p,otherDepartment:m,position:u,otherPosition:x,jobCat:h,otherJobCat:g,doj:f,jobDesc:v,skillPool:y,relationship:b,hr:N,manager:j,supervisor:D,upgradePosition:w,upgradeDate:A,contractPeriod:S,contractStart:E,contractEnd:I,workStatus:C,probationStart:k,probationEnd:R,probDuration:T,workHrs:P,workWeek:_,workMonth:O,salaryType:L,annualLeave:F,annualLeaveDate:M,destinateLeavePass:q,durLeavePass:U,dateLeavePass:B,leavePass:H,materLeave:W,mrageLeave:Y,paterLeave:V,sickLeave:z,sickLeaveDate:J,hospLeave:G,pervAnnualLeaveBal:$,resignDate:K,resignNotProb:Q,otherResignNotProb:Z,resignNotConf:X,otherResignNotConf:ee,reasonResign:te,reasonTerminate:ae,termiDate:ne,termiNotProb:re,otherTermiNotProb:se,termiNotConf:ie,otherTermiNotConf:le,WIContract:oe,WIProbation:de,WIResignation:ce,WITermination:pe,WILeaveEntitle:me,depEmpDate:ue,depEmp:xe,positionRev:he,positionRevDate:ge,revSalary:fe,revSalaryDate:ve,revLeavePass:ye,revLeaveDate:be,revAnnualLeave:Ne,revALD:je,remarkWI:De,uploadPR:we,uploadSP:Se,uploadLP:Ee,uploadAL:Ie,uploadDep:Ce,sapNo:ke}=a,Re=n(I),Te=n(E),Pe=(_e=f)?new Date(_e).toLocaleDateString("en-CA"):null;var _e;const Oe=n(R),Le=n(k),Fe=n(A),Me=n(M),qe=n(B),Ue=n(ue),Be=n(ge),He=n(ve),We=n(be),Ye=n(je);if(d){const t=r(d.contractEnd,Re);console.log(t);const a=r(d.contractStart,Te),n=r(d.probationEnd,Oe),l=r(d.probationStart,Le),o=r(d.upgradeDate,Fe),c=r(d.position,u),f=r(d.otherPosition,x),A=r(d.department,p),E=r(d.otherDepartment,m),I=r(d.jobCat,h),k=r(d.otherJobCat,g),R=r(d.jobDesc,v),F=r(d.salaryType,L),M=s(d.manager,j),q=r(d.hr,N),U=s(d.supervisor,D),B=r(d.workHrs,P),H=r(d.workMonth,O),W=r(d.workWeek,_),Y=r(d.workStatus,C),V=r(d.relationship,b),z=r(d.upgradePosition,w),J=r(d.contractPeriod,S),G=r(d.probDuration,T),$={id:d.id,empID:i,department:A,otherDepartment:E,position:c,otherPosition:f,jobCat:I,otherJobCat:k,doj:Pe,jobDesc:R,skillPool:y,relationship:V,upgradePosition:z,upgradeDate:o,contractStart:a,contractPeriod:J,contractEnd:t,hr:q,manager:M,supervisor:U,workStatus:Y,probationStart:l,probationEnd:n,probDuration:G,workHrs:B,workWeek:W,workMonth:H,salaryType:F,sapNo:ke};try{const t=await e.graphql({query:"\n  mutation UpdateEmpWorkInfo(\n    $input: UpdateEmpWorkInfoInput!\n    $condition: ModelEmpWorkInfoConditionInput\n  ) {\n    updateEmpWorkInfo(input: $input, condition: $condition) {\n      id\n      empID\n      contractStart\n      contractEnd\n      contractPeriod\n      doj\n      department\n      hr\n      jobCat\n      jobDesc\n      manager\n      otherJobCat\n      otherDepartment\n      otherPosition\n      probationStart\n      probationEnd\n      probDuration\n      position\n      relationship\n      supervisor\n      skillPool\n      salaryType\n      sapNo\n      upgradeDate\n      upgradePosition\n      workStatus\n      workHrs\n      workWeek\n      workMonth\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:$,limit:2e4}});console.log(t)}catch(Ve){console.log(Ve)}}if(o){const t=r(o.leavePass,H),a=r(o.dateLeavePass,qe),n=r(o.destinateLeavePass,q),s=r(o.durLeavePass,U),l=r(o.annualLeave,F),d=r(o.annualLeaveDate,Me),c={id:o.id,empID:i,leavePass:t,dateLeavePass:a,destinateLeavePass:n,durLeavePass:s,annualLeave:l,annualLeaveDate:d,sickLeave:z,sickLeaveDate:J,materLeave:W,paterLeave:V,mrageLeave:Y,pervAnnualLeaveBal:$,hospLeave:G};try{const t=await e.graphql({query:Ae,variables:{input:c,limit:2e4}});console.log(t)}catch(Ve){console.log(Ve)}}if(c){const t={id:c.id,empID:i,resignDate:K,termiDate:ne,resignNotProb:Q,otherResignNotProb:Z,termiNotProb:re,otherTermiNotProb:se,resignNotConf:X,otherResignNotConf:ee,termiNotConf:ie,otherTermiNotConf:le,reasonResign:te,reasonTerminate:ae,WIContract:oe,WIProbation:de,WIResignation:ce,WITermination:pe,WILeaveEntitle:me};try{const a=await e.graphql({query:"\n  mutation UpdateTerminationInfo(\n    $input: UpdateTerminationInfoInput!\n    $condition: ModelTerminationInfoConditionInput\n  ) {\n    updateTerminationInfo(input: $input, condition: $condition) {\n      id\n      empID\n      resignDate\n      resignNotProb\n      otherResignNotProb\n      resignNotConf\n      otherResignNotConf\n      reasonResign\n      reasonTerminate\n      termiDate\n      termiNotProb\n      otherTermiNotProb\n      termiNotConf\n      otherTermiNotConf\n      WIContract\n      WIProbation\n      WIResignation\n      WITermination\n      WILeaveEntitle\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:t,limit:2e4}});console.log(a)}catch(Ve){console.log(Ve)}}if(l){const t=r(l.depEmpDate,Ue),a=r(l.depEmp,xe),n=r(l.positionRevDate,Be),s=r(l.positionRev,he),o=r(l.revSalary,fe),d=r(l.revSalaryDate,He),c=r(l.revLeaveDate,We),p=r(l.revLeavePass,ye),m=r(l.revAnnualLeave,Ne),u=r(l.revALD,Ye),x={id:l.id,empID:i,positionRev:s,positionRevDate:n,revSalary:o,revSalaryDate:d,revLeavePass:p,revLeaveDate:c,revAnnualLeave:m,revALD:u,depEmp:a,depEmpDate:t,remarkWI:De,uploadPR:we,uploadSP:Se,uploadLP:Ee,uploadAL:Ie,uploadDep:Ce};try{await e.graphql({query:"\n  mutation UpdateServiceRecord(\n    $input: UpdateServiceRecordInput!\n    $condition: ModelServiceRecordConditionInput\n  ) {\n    updateServiceRecord(input: $input, condition: $condition) {\n      id\n      empID\n      depEmpDate\n      depEmp\n      positionRev\n      positionRevDate\n      revSalary\n      revSalaryDate\n      revLeavePass\n      revLeaveDate\n      revAnnualLeave\n      revALD\n      remarkWI\n      uploadPR\n      uploadSP\n      uploadLP\n      uploadAL\n      uploadDep\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:x,limit:2e4}})}catch(Ve){console.log(Ve)}}}),[]);return{WIUpdateData:t}},or=e=>{var t;let{register:a,errors:n,watch:r,dropDownVal:s,setValue:l,control:o}=e;const d=null===(t=s[0])||void 0===t?void 0:t.relationshipDD.map((e=>({value:e,label:e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")})));return(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-5 form-group mt-5",children:[(0,i.jsx)(ut,{label:"Employee Status",register:a,name:"relationship",type:"select",options:d,errors:n}),(0,i.jsx)(ut,{label:"Upgrade Position",register:a,name:"upgradePosition",type:"text",errors:n}),(0,i.jsx)(ut,{label:"Position Upgrade Effective Date",register:a,name:"upgradeDate",type:"date",errors:n}),(0,i.jsx)(ut,{label:"Contract Period Status",register:a,name:"contractPeriod",type:"text",errors:n}),(0,i.jsx)(ut,{label:"Contract Start Date",register:a,name:"contractStart",type:"date",errors:n}),(0,i.jsx)(ut,{label:"Contract End Date",register:a,name:"contractEnd",type:"date",errors:n}),(0,i.jsx)(ut,{label:"Probation Duration",register:a,name:"probDuration",type:"text",errors:n}),(0,i.jsx)(ut,{label:"Probationary Start Date",register:a,name:"probationStart",type:"date",errors:n}),(0,i.jsx)(ut,{label:"Probationary End Date",register:a,name:"probationEnd",type:"date",errors:n})]})},dr=e=>{var t;let{register:a,errors:n,dropDownVal:r,watch:s,setValue:l,control:o}=e;const d=null===(t=r[0])||void 0===t?void 0:t.workStatusDD.map((e=>({value:e,label:e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")})));return(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-5 form-group mt-5",children:[(0,i.jsx)(ut,{label:"Normal Working Hours Per Day",register:a,type:"text",name:"workHrs",errors:n}),(0,i.jsx)(ut,{label:"Normal Working Day Per Week",register:a,type:"text",name:"workWeek",errors:n}),(0,i.jsx)(ut,{label:"Normal Working Day Per Month",register:a,type:"text",name:"workMonth",errors:n}),(0,i.jsx)(ut,{label:"Employment Work Status",register:a,type:"select",options:d,name:"workStatus",errors:n}),(0,i.jsx)(ut,{label:"Type of Salary Pay",register:a,type:"select",options:St,name:"salaryType",errors:n})]})},cr=e=>{var t,a,n;let{register:r,errors:s,watch:l,onChange:o,selection:d,dropDownVal:c}=e;const p=null===(t=c[0])||void 0===t?void 0:t.departmentDD.map((e=>({value:e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "),label:e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}))),m=null===(a=c[0])||void 0===a?void 0:a.positionDD.map((e=>({value:e,label:e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}))),u=null===(n=c[0])||void 0===n?void 0:n.jobCatDD.map((e=>({value:e,label:e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}))),x=l("department"),h=l("otherDepartment"),g=l("position"),f=l("otherPosition"),v=l("jobCat"),y=l("otherJobCat");return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-5 form-group mt-2",children:[(0,i.jsx)("div",{children:(0,i.jsx)(ut,{label:"Department",register:r,name:"department",type:"select",options:p,errors:s,onChange:o})}),(0,i.jsx)("div",{children:("OTHER"===d.department||h||"OTHER"===x)&&(0,i.jsx)(ut,{label:"Other Department",register:r,name:"otherDepartment",type:"text",errors:s})})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-5 form-group mt-2",children:[(0,i.jsx)("div",{children:(0,i.jsx)(ut,{label:"Position",register:r,name:"position",type:"select",options:m,errors:s,onChange:o})}),(0,i.jsx)("div",{children:("OTHER"===d.position||f||"OTHER"===g)&&(0,i.jsx)(ut,{label:"Other Position",register:r,name:"otherPosition",type:"text",errors:s})})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-5 form-group mt-2",children:[(0,i.jsx)("div",{children:(0,i.jsx)(ut,{label:"Job Category",register:r,name:"jobCat",type:"select",options:u,errors:s,onChange:o})}),(0,i.jsx)("div",{children:("OTHER"===d.jobCat||y||"OTHER"===v)&&(0,i.jsx)(ut,{label:"Other Job",register:r,name:"otherJobCat",type:"text",errors:s})})]})]})},pr=()=>{const{WIUpdateData:e}=lr(),{SubmitWIData:t}=sr(),{SRDataValue:a}=(()=>{const e=(0,ge.D)();return{SRDataValue:(0,r.useCallback)((async t=>{let{SRValue:a}=t;if(!a)throw new Error("Missing required parameters");const{empID:n,depEmpDate:r,depEmp:s,positionRev:i,positionRevDate:l,revSalary:o,revSalaryDate:d,revLeavePass:c,revLeaveDate:p,revAnnualLeave:m,revALD:u,remarkWI:x,uploadPR:h,uploadSP:g,uploadLP:f,uploadAL:v,uploadDep:y}=a;console.log(a);const b=e=>e?new Date(e).toLocaleDateString("en-CA"):[],N=[b(r),s,b(l),i,b(d),o,b(p),c,b(u),m].map((e=>null==e||Array.isArray(e)&&0===e.length?[]:Array.isArray(e)?[...new Set(e)]:[e])),[j,D,w,A,S,E,I,C,k,R]=N,T={empID:n,depEmpDate:j,depEmp:D,positionRev:A,positionRevDate:w,revSalary:E,revSalaryDate:S,revLeavePass:C,revLeaveDate:I,revAnnualLeave:R,revALD:k,remarkWI:x,uploadPR:JSON.stringify(h),uploadSP:JSON.stringify(g),uploadLP:JSON.stringify(f),uploadAL:JSON.stringify(v),uploadDep:JSON.stringify(y)};console.log(T);try{await e.graphql({query:De,variables:{input:T}})}catch(P){console.log(P)}}),[])}})(),{LeaveDataValue:l}=(()=>{const e=(0,ge.D)(),t=(0,r.useCallback)((async t=>{let{LeaveValue:a}=t;if(!a)throw new Error("Missing required parameters");const{empID:n,leavePass:r,dateLeavePass:s,hospLeave:i,destinateLeavePass:l,durLeavePass:o,annualLeave:d,annualLeaveDate:c,sickLeave:p,sickLeaveDate:m,materLeave:u,paterLeave:x,mrageLeave:h,pervAnnualLeaveBal:g}=a,f=e=>e?new Date(e).toLocaleDateString("en-CA"):[],v=[d,f(c),l,o,f(s),r].map((e=>null==e||Array.isArray(e)&&0===e.length?[]:Array.isArray(e)?[...new Set(e)]:[e])),[y,b,N,j,D,w]=v,A={empID:n,annualLeave:y,annualLeaveDate:b,destinateLeavePass:N,durLeavePass:j,dateLeavePass:D,leavePass:w,materLeave:u,mrageLeave:h,paterLeave:x,pervAnnualLeaveBal:g,sickLeave:p,sickLeaveDate:m,hospLeave:i};try{await Promise.all([e.graphql({query:we,variables:{input:A}})])}catch(S){console.log(S)}}),[]);return{LeaveDataValue:t}})(),{TerminateDataValue:o}=(()=>{const e=(0,ge.D)();return{TerminateDataValue:(0,r.useCallback)((async t=>{let{TerminateValue:a}=t;if(!a)throw new Error("Missing required parameters");const{empID:n,resignDate:r,termiDate:s,resignNotProb:i,otherResignNotProb:l,termiNotProb:o,otherTermiNotProb:d,resignNotConf:c,otherResignNotConf:p,termiNotConf:m,otherTermiNotConf:u,reasonResign:x,reasonTerminate:h,WIContract:g,WIProbation:f,WIResignation:v,WITermination:y,WILeaveEntitle:b}=a,N={empID:n,resignDate:r,resignNotProb:i,otherResignNotProb:l,resignNotConf:c,otherResignNotConf:p,reasonResign:x,reasonTerminate:h,termiDate:s,termiNotProb:o,otherTermiNotProb:d,termiNotConf:m,otherTermiNotConf:u,WIContract:JSON.stringify(g),WIProbation:JSON.stringify(f),WIResignation:JSON.stringify(v),WITermination:JSON.stringify(y),WILeaveEntitle:JSON.stringify(b)};try{await Promise.all([e.graphql({query:Se,variables:{input:N}})])}catch(j){console.log(j)}}),[])}})();(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]);const{empPIData:d,terminateData:c,workInfoData:p,leaveDetailsData:m,SRData:u,dropDownVal:h}=(0,r.useContext)(s.Y),{register:g,handleSubmit:f,control:v,setValue:b,getValues:N,watch:j,formState:{errors:D}}=(0,it.mN)({defaultValues:{uploadAL:[],uploadPR:[],uploadSP:[],uploadLP:[],uploadDep:[]},resolver:(0,lt.t)(Sn)}),[w,A]=(0,r.useState)(!1),[S,E]=(0,r.useState)([]),[I,C]=(0,r.useState)([]),[k,R]=(0,r.useState)(""),[T,P]=(0,r.useState)([]),_=j("empID"),[O,L]=(0,r.useState)(!1),{terminationFields:F,leaveFieldsAnother:M,workFields:q,leaveBasic:U,serviceRecords:B}=ir(),[H,W]=(0,r.useState)(""),[Y,V]=(0,r.useState)({department:"",position:"",jobCat:"",otherDeparment:""}),z=j(F.map((e=>e.name)));(0,r.useEffect)((()=>{d.map((e=>{_===e.empID&&W(e.name)}))}),[d]);const[J,G]=(0,r.useState)({uploadPR:null,uploadSP:null,uploadLP:null,uploadAL:null,uploadDep:null,WIProbation:null,WIResignation:null,WITermination:null,WILeaveEntitle:null,WIContract:null}),[$,K]=(0,r.useState)({uploadPR:[],uploadSP:[],uploadLP:[],uploadAL:[],uploadDep:[],WIProbation:[],WIResignation:[],WITermination:[],WILeaveEntitle:[],WIContract:[]});(0,r.useEffect)((()=>{(async()=>{try{const e=d.map((e=>{const t=p?p.find((t=>t.empID===e.empID)):{},a=c?c.find((t=>t.empID===e.empID)):{},n=m?m.find((t=>t.empID===e.empID)):{},r=u?u.find((t=>t.empID===e.empID)):{};return(0,x.A)((0,x.A)((0,x.A)((0,x.A)((0,x.A)({},e),t),a),n),r)})).filter(Boolean);E(e),C(e)}catch(e){console.log(e)}})()}),[d,c,p,m,u]);const Q=async(e,t)=>{if(!_)return void alert("Please enter the Employee ID before uploading files.");const a=e.target.files[0];if(!a)return;if(!["application/pdf"].includes(a.type))return void alert("Upload must be a PDF file");const n=j(t)||[];b(t,[...n,a]);try{await pt(a,t,K,_),G((e=>(0,x.A)((0,x.A)({},e),{},{[t]:a.name})))}catch(r){console.log(r)}},Z=e=>{const t=null===e||void 0===e?void 0:e.split("/").pop();return null===t||void 0===t?void 0:t.split(".").slice(0,-1).join(".")};return(0,i.jsxs)("section",{className:"bg-[#F5F6F1CC] mx-auto p-10",onClick:()=>{P([])},children:[(0,i.jsxs)("div",{className:"w-full flex items-center justify-between gap-5",children:[(0,i.jsx)(n.N_,{to:"/employee",className:"text-xl flex-1 text-grey",children:(0,i.jsx)(Lt.QVr,{})}),(0,i.jsx)("p",{className:"flex-1 text-center mt-2 text_size_2 uppercase",children:"Work Info"}),(0,i.jsx)("div",{className:"flex-1",children:(0,i.jsx)(Wn,{searchResult:e=>{["empID","doj","hospLeave","skillPool","resignDate","termiDate","resignNotProb","otherResignNotProb","termiNotProb","otherTermiNotProb","resignNotConf","otherResignNotConf","termiNotConf","otherTermiNotConf","reasonResign","reasonTerminate","materLeave","paterLeave","sickLeave","sickLeaveDate","mrageLeave","compasLeave","remarkWI","sapNo","pervAnnualLeaveBal","remainingAnualLeave","remainingCompasLeave","remainingHosLeave","remainingMateLeave","remainingMrageLeave","remainingPaternityLeave","remainingSickLeave"].forEach((t=>{let a=void 0!==e[t]&&null!==e[t]?e[t].toString().trim():"";let n=a.toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ");"termiNotProb"!==t&&"termiNotConf"!==t&&"resignNotProb"!==t&&"resignNotConf"!==t||(n=n.toUpperCase()),b(t,n)}));["dateLeavePass","depEmp","positionRev","revSalary","revLeavePass","revAnnualLeave","durLeavePass","destinateLeavePass","annualLeave","leavePass","salaryType","manager","supervisor","workStatus","workHrs","workWeek","workMonth","upgradePosition","contractPeriod","probDuration","department","otherDepartment","position","otherPosition","jobCat","otherJobCat","jobDesc","relationship","upgradeDate","revALD","contractStart","contractEnd","probationStart","probationEnd","revLeaveDate","revSalaryDate","depEmpDate","annualLeaveDate","positionRevDate"].forEach((t=>{const a=e[t];b(t,(e=>{const t=e=>"string"===typeof e&&e?e.toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "):"";var a;return Array.isArray(e)&&e.length>0?t(null===(a=e[e.length-1])||void 0===a?void 0:a.trim()):"string"===typeof e?t(e.trim()):null})(a))})),b("hr","Hr-notification@adininworks.com");["WIProbation","WIResignation","WITermination","WILeaveEntitle","WIContract","uploadPR","uploadSP","uploadLP","uploadAL","uploadDep"].forEach((t=>{if(e[t])try{const a=e[t][0],n=(a.startsWith('"')&&a.endsWith('"')?a.slice(1,-1):a).replace(/\\"/g,'"'),r=JSON.parse(n);if(!Array.isArray(r))throw new Error("Parsed result is not an array for ".concat(t));const s=r.map((e=>"string"===typeof e?JSON.parse(e):e));b(t,s),K((e=>(0,x.A)((0,x.A)({},e),{},{[t]:s}))),G((e=>(0,x.A)((0,x.A)({},e),{},{[t]:s.length>0?Z(s[s.length-1].upload):""})))}catch(a){console.error("Failed to parse ".concat(t,":"),a)}}))},newFormData:I,searchIcon2:(0,i.jsx)(y.zfp,{}),placeholder:"Employee Id",rounded:"rounded-lg",filteredEmployees:T,setFilteredEmployees:P})})]}),(0,i.jsxs)("form",{onSubmit:f((async n=>{try{const r=(null===d||void 0===d?void 0:d.find((e=>e.empID===n.empID)))||null,s=(null===c||void 0===c?void 0:c.find((e=>e.empID===n.empID)))||null,i=(null===p||void 0===p?void 0:p.find((e=>e.empID===n.empID)))||null,h=(null===m||void 0===m?void 0:m.find((e=>e.empID===n.empID)))||null,g=(null===u||void 0===u?void 0:u.find((e=>e.empID===n.empID)))||null;if(g){const t=(0,x.A)((0,x.A)({},n),{},{SRDataRecord:g,uploadPR:JSON.stringify($.uploadPR),uploadSP:JSON.stringify($.uploadSP),uploadLP:JSON.stringify($.uploadLP),uploadAL:JSON.stringify($.uploadAL),uploadDep:JSON.stringify($.uploadDep)});await e({workInfoUpValue:t})}else{const e=(0,x.A)((0,x.A)({},n),{},{empID:n.empID,uploadPR:JSON.stringify($.uploadPR),uploadSP:JSON.stringify($.uploadSP),uploadLP:JSON.stringify($.uploadLP),uploadAL:JSON.stringify($.uploadAL),uploadDep:JSON.stringify($.uploadDep)});await a({SRValue:e})}if(h){const t=(0,x.A)((0,x.A)({},n),{},{leaveDetailsDataRecord:h});await e({workInfoUpValue:t})}else{const e=(0,x.A)((0,x.A)({},n),{},{empID:n.empID});await l({LeaveValue:e})}if(i){const t=(0,x.A)((0,x.A)({},n),{},{sapNo:null===r||void 0===r?void 0:r.sapNo,workInfoDataRecord:i});await e({workInfoUpValue:t})}else{const e=(0,x.A)((0,x.A)({},n),{},{sapNo:null===r||void 0===r?void 0:r.sapNo});await t({workInfoValue:e})}if(s){const t=(0,x.A)((0,x.A)({},n),{},{terminateDataRecord:s,WIContract:JSON.stringify($.WIContract),WIProbation:JSON.stringify($.WIProbation),WIResignation:JSON.stringify($.WIResignation),WITermination:JSON.stringify($.WITermination),WILeaveEntitle:JSON.stringify($.WILeaveEntitle)});await e({workInfoUpValue:t})}else{const e=(0,x.A)((0,x.A)({},n),{},{empID:n.empID,WIContract:JSON.stringify($.WIContract),WIProbation:JSON.stringify($.WIProbation),WIResignation:JSON.stringify($.WIResignation),WITermination:JSON.stringify($.WITermination),WILeaveEntitle:JSON.stringify($.WILeaveEntitle)});await o({TerminateValue:e})}R("Employee Work Info Stored successfully"),A(!0)}catch(r){console.log("Error during submission:",r)}})),className:" mt-20 bg-[#F5F6F1CC]",children:[(0,i.jsx)("div",{className:"flex justify-end items-center mt-5",children:(0,i.jsx)("div",{children:(0,i.jsx)(ut,{label:"Employee ID",type:"text",name:"empID",placeholder:"Enter Employee ID",errors:D,register:g})})}),(0,i.jsx)(cr,{register:g,errors:D,watch:j,onChange:e=>{const{name:t,value:a}=e.target;V((e=>(0,x.A)((0,x.A)({},e),{},{[t]:a})))},selection:Y,getValues:N,setValue:b,dropDownVal:h}),(0,i.jsx)("div",{className:"grid grid-cols-3 gap-5 form-group mt-5",children:q.map(((e,t)=>{var a;return(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{className:"mb-1 text_size_5",children:e.label}),"select"===e.type?(0,i.jsx)("select",(0,x.A)((0,x.A)({},g(e.name)),{},{className:"input-field select-custom",defaultValue:e.value||"",watch:j(e.name),readOnly:e.readOnly||!1,children:(e.options||[]).map(((e,t)=>{const a=e.trim().toLowerCase().replace(/^\w/,(e=>e.toUpperCase()));return(0,i.jsx)("option",{value:"Select"===e.trim()?"":e.trim(),children:a},t)}))})):(0,i.jsx)("input",(0,x.A)((0,x.A)({type:e.type},g(e.name)),{},{className:"input-field",defaultValue:e.value||"",readOnly:e.readOnly||!1})),D[e.name]&&(0,i.jsx)("p",{className:"text-[red] text-[13px] mt-1",children:null===(a=D[e.name])||void 0===a?void 0:a.message})]},t)}))}),(0,i.jsx)(or,{register:g,errors:D,watch:j,dropDownVal:h}),(0,i.jsx)(dr,{register:g,errors:D,watch:j,dropDownVal:h}),(0,i.jsx)("hr",{className:"text-lite_grey mb-5"}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("p",{className:"text_size_3 form-group text-medium_grey my-5",children:"Employee Leave Info"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-5 form-group mt-5",children:[(0,i.jsx)(ut,{label:"Leave Passage Entitlement for Non-Local",register:g,name:"leavePass",type:"select",options:Rt,errors:D}),U.map(((e,t)=>(0,i.jsx)(ut,{label:e.label,register:g,name:e.name,type:e.type,errors:D},t)))]}),(0,i.jsx)("div",{className:"grid grid-cols-4 gap-5 form-group mt-5",children:M.map(((e,t)=>{var a;return(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{className:"mb-1 text_size_5",children:e.label}),"select"===e.type?(0,i.jsx)("select",(0,x.A)((0,x.A)({},g(e.name)),{},{className:"input-field select-custom",children:(e.options||[]).map(((e,t)=>{const a=e.trim().toLowerCase().replace(/^\w/,(e=>e.toUpperCase()));return(0,i.jsx)("option",{value:"Select"===e.trim()?"":e.trim(),children:a},t)}))})):(0,i.jsx)("input",(0,x.A)((0,x.A)({type:e.type},g(e.name)),{},{className:"input-field"})),D[e.name]&&(0,i.jsx)("p",{className:"text-[red] text-[13px] mt-1",children:null===(a=D[e.name])||void 0===a?void 0:a.message})]},t)}))})]}),(0,i.jsx)("hr",{className:"text-lite_grey mb-5"}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("p",{className:"text_size_3 form-group text-medium_grey my-5",children:"Employee Exit Info"}),(0,i.jsx)("div",{className:"grid grid-cols-2 form-group gap-5",children:F.map(((e,t)=>{var a,n,r;const s="OTHER"===z[t];return(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{className:"block text_size_5",children:e.label}),"select"===e.type?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("select",(0,x.A)((0,x.A)({},g(null===e||void 0===e?void 0:e.name)),{},{className:"input-field select-custom",children:[(0,i.jsx)("option",{value:"",children:"Select"}),null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.map(((e,t)=>{var a,n;const r="object"===typeof e?null===(a=e.value)||void 0===a?void 0:a.trim():String(e).trim(),s="object"===typeof e?null===(n=e.label)||void 0===n?void 0:n.trim():String(e).trim();return(0,i.jsx)("option",{value:"Select"===r?"":String(r).toUpperCase(),children:s},t)}))]})),s&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text",placeholder:"Please specify"},g("other".concat(e.name.charAt(0).toUpperCase()+e.name.slice(1)),{required:"This field is required when 'Other' is selected"})),{},{className:"input-field"})),(0,i.jsx)("p",{className:"text-[red] text-[13px] mt-1",children:null===(n=D["other".concat(e.name.charAt(0).toUpperCase()+e.name.slice(1))])||void 0===n?void 0:n.message})]})]}):(0,i.jsx)("input",(0,x.A)((0,x.A)({type:e.type},g(e.name)),{},{className:"input-field"})),(0,i.jsx)("p",{className:"text-[red] text-[13px] mt-1",children:null===(r=D[e.name])||void 0===r?void 0:r.message})]},t)}))})]}),(0,i.jsx)("div",{className:"grid grid-cols-3 gap-5 form-group mt-5",children:_t.map(((e,t)=>(0,i.jsx)(it.xI,{name:e.title,control:v,render:t=>{let{field:{onChange:a,value:n}}=t;return(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsxs)("h2",{className:"text_size_5",children:["Upload ",e.label]}),(0,i.jsxs)("label",{className:"mt-2 flex items-center px-3 py-3 text_size_7 bg-lite_skyBlue border border-[#dedddd] rounded cursor-pointer",children:[(0,i.jsx)("input",{type:"file",className:"hidden",accept:"application/pdf",onChange:t=>Q(t,e.title)}),(0,i.jsxs)("span",{className:"ml-2 text-grey font-normal flex justify-between items-center gap-10",children:[e.icon,e.label]})]}),(0,i.jsx)("p",{className:"text-xs mt-1 text-grey",children:(null===J||void 0===J?void 0:J[e.title])||""}),D[e.title]&&(0,i.jsx)("p",{className:"text-red text-xs mt-1",children:D[e.title].message})]})}},t)))}),(0,i.jsx)("hr",{className:"text-lite_grey mb-5"}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("p",{className:"text_size_5 form-group text-medium_grey my-5",children:"Employee Service Record"}),(0,i.jsx)("div",{className:"grid grid-cols-3 gap-5 ",children:B.map(((e,t)=>"file"===e.type?(0,i.jsx)(wa,{field:e,register:g,handleFileChange:Q,uploadedFileNames:J,errors:D},t):(0,i.jsx)("div",{children:(0,i.jsx)(ut,{label:e.label,name:e.name,type:e.type,register:g,errors:D})},t)))}),(0,i.jsxs)("div",{className:"md:col-span-2 form-group",children:[(0,i.jsx)("label",{className:"mb-1 text_size_5",children:"Remarks for Work Info"}),(0,i.jsx)("textarea",(0,x.A)((0,x.A)({},g("remarkWI")),{},{className:"resize-none w-full p-2 mt-1 border bg-lite_skyBlue border-lite_grey rounded-md outline-none",rows:"4"})),D.remarkWI&&(0,i.jsx)("p",{className:"text-[red] text-[13px] mt-1",children:D.remarkWI.message})]})]}),(0,i.jsx)("div",{className:"center my-10",children:(0,i.jsx)("button",{type:"submit",className:"primary_btn",children:"Save"})})]}),w&&(0,i.jsx)(Le,{text:k,notification:w,path:"/workInfo"})]})},mr={medicalFields:[{label:"Overseas Medical Fitness issued date",name:"overMD",type:"date"},{label:"Overseas Medical Fitness Expiry",name:"overME",type:"date"},{label:"Upload File",name:"uploadFitness",type:"file"},{label:"Date submitted of BruHims Registration",name:"bruhimsRD",type:"date"},{label:"BruHims Registration Number",name:"bruhimsRNo",type:"text"},{label:"Upload File",name:"uploadRegis",type:"file"},{label:"Brunei Medical Appointment Date",name:"bruneiMAD",type:"date"},{label:"Brunei Medical Fitness Expiry",name:"bruneiME",type:"date"},{label:"Upload File",name:"uploadBwn",type:"file"}]},ur=e=>{let{errors:t,register:a,setValue:n,setArrayUploadDocs:s,control:l,value:o,getValues:d,watch:c,setUploadedFileNames:p,UploadingFiles:m}=e;const u=(0,r.useRef)(!0),[h,g]=(0,r.useState)({}),[f,v]=(0,r.useState)({uploadDp:null,uploadDr:null}),{fields:y,append:b,remove:N,replace:j}=(0,it.jz)({control:l,name:"dependPass"});(0,r.useEffect)((()=>{if(u.current){if(o&&o.length>0){const e=("string"===typeof o?JSON.parse(o):o).map((e=>(0,x.A)((0,x.A)({},e),{},{uploadDp:Array.isArray(e.uploadDp)?e.uploadDp:["string"===typeof e.uploadDp?JSON.parse(e.uploadDp):e.uploadDp],uploadDr:Array.isArray(e.uploadDr)?e.uploadDr:["string"===typeof e.uploadDr?JSON.parse(e.uploadDr):e.uploadDr]})));j(e),n("dependPass",e)}else b({dependName:"",dependPpNo:"",dependPpE:"",relation:"",labourDPBy:"",labourDRNo:"",labourDAmount:"",uploadDp:[],uploadDr:[],isNew:!1});u.current=!1}else if(o&&o.length>0){const e=("string"===typeof o?JSON.parse(o):o).map((e=>(0,x.A)((0,x.A)({},e),{},{uploadDp:Array.isArray(e.uploadDp)?e.uploadDp:["string"===typeof e.uploadDp?JSON.parse(e.uploadDp):e.uploadDp],uploadDr:Array.isArray(e.uploadDr)?e.uploadDr:["string"===typeof e.uploadDr?JSON.parse(e.uploadDr):e.uploadDr]})));j(e),n("dependPass",e);["uploadDp","uploadDr"].forEach((t=>{e&&Array.isArray(e)&&e.forEach(((e,a)=>{const n=null===e||void 0===e?void 0:e[t],r=Array.isArray(n)?n.map((e=>"string"===typeof e?JSON.parse(e):e)):[];g((e=>{const n=Array.isArray(e[t])?[...e[t]]:[];return n[a]=r,(0,x.A)((0,x.A)({},e),{},{[t]:n})}));const s=r.length>0&&r[r.length-1].upload?D(r[r.length-1].upload):"";v((e=>(0,x.A)((0,x.A)({},e),{},{["".concat(a,"_").concat(t)]:s})))}))}))}}),[o,b,j,n]);const D=e=>{if(!e)return"";return e.split("/").pop().split(".").slice(0,-1).join(".")},w=c("empID"),A=async(e,t,a)=>{if(!w)return alert("Please enter the Employee ID before uploading files."),void(window.location.href="/labourImmigration");const r=e.target.files[0];if(!r)return;if("application/pdf"!==r.type)return void alert("Upload must be a PDF file");const s=[...d("dependPass[".concat(a,"].").concat(t))||[],r];n("dependPass[".concat(a,"].").concat(t),s);try{await pt(r,t,g,w,a),v((e=>(0,x.A)((0,x.A)({},e),{},{["".concat(a,"_").concat(t)]:r.name})))}catch(i){console.error("File upload error:",i)}};(0,r.useEffect)((()=>{s(h)}),[h,s]);return(0,i.jsxs)("div",{className:"form-group mt-5",children:[(0,i.jsxs)("div",{className:"flex justify-between mb-5 text-dark_grey",children:[(0,i.jsx)("label",{className:"text_size_3",children:"Dependent Pass Info"}),(0,i.jsx)("button",{type:"button",className:"px-3 py-1 rounded",onClick:()=>{b({dependName:"",dependPpNo:"",dependPpE:"",relation:"",labourDPBy:"",labourDRNo:"",labourDAmount:"",uploadDp:[],uploadDr:[]})},children:(0,i.jsx)(Ft.Oh0,{className:"text-xl"})})]}),y.map(((e,n)=>{var r,s,l,o;return(0,i.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-2 relative",children:[(0,i.jsx)(ut,{label:"Dependent Name",type:"text",name:"dependPass[".concat(n,"].dependName"),placeholder:"Enter Name",errors:t,register:a}),(0,i.jsx)(ut,{label:"Passport Number",type:"text",name:"dependPass[".concat(n,"].dependPpNo"),placeholder:"Enter Passport Number",errors:t,register:a}),(0,i.jsx)(ut,{label:"Date of Birth",type:"date",name:"dependPass[".concat(n,"].dependPpE"),placeholder:"Enter Date of Birth",errors:t,register:a}),(0,i.jsx)(ut,{label:"Relation",type:"text",name:"dependPass[".concat(n,"].relation"),placeholder:"Enter Relation",errors:t,register:a}),(0,i.jsx)(ut,{label:"Labour Deposit By",type:"select",name:"dependPass[".concat(n,"].labourDPBy"),options:kt,errors:t,register:a}),(0,i.jsx)(ut,{label:"Labour Deposit Received Number",type:"text",name:"dependPass[".concat(n,"].labourDRNo"),placeholder:"Enter Deposit Number",errors:t,register:a}),(0,i.jsx)(ut,{label:"Labour Deposit Amount",type:"text",name:"dependPass[".concat(n,"].labourDAmount"),placeholder:"Enter Deposit Amount",errors:t,register:a}),(0,i.jsx)(Da,{label:"Upload Dependent Pass",onChangeFunc:e=>A(e,"uploadDp",n),register:a("dependPass[".concat(n,"].uploadDp")),error:null===t||void 0===t||null===(r=t.dependPass)||void 0===r||null===(s=r[n])||void 0===s?void 0:s.uploadDp,fileName:f["".concat(n,"_uploadDp")]||""}),(0,i.jsx)(Da,{label:"Upload Dependent Passport",onChangeFunc:e=>A(e,"uploadDr",n),register:a("dependPass[".concat(n,"].uploadDr")),error:null===t||void 0===t||null===(l=t.dependPass)||void 0===l||null===(o=l[n])||void 0===o?void 0:o.uploadDr,fileName:f["".concat(n,"_uploadDr")]||""}),0!==n&&(0,i.jsx)("button",{type:"button",onClick:()=>N(n),className:"absolute top-0 right-0 text-medium_grey text-[18px]",children:(0,i.jsx)(Lt.vli,{})})]},e.id)}))]})},xr=()=>{const e=(0,ge.D)();return{SubmitMPData:(0,r.useCallback)((async t=>{let{labValue:a}=t;if(!a)throw new Error("Missing required parameters");const n={empID:a.empID,overMD:a.overMD,overME:a.overME,bruhimsRD:a.bruhimsRD,bruhimsRNo:a.bruhimsRNo,bruneiMAD:a.bruneiMAD,bruneiME:a.bruneiME,dependPass:JSON.stringify(a.dependPass),uploadFitness:a.uploadFitness,uploadRegis:a.uploadRegis,uploadBwn:a.uploadBwn};try{const t=await Promise.all([e.graphql({query:"\n  mutation CreateLabourMedicalInfo(\n    $input: CreateLabourMedicalInfoInput!\n    $condition: ModelLabourMedicalInfoConditionInput\n  ) {\n    createLabourMedicalInfo(input: $input, condition: $condition) {\n      id\n      empID\n      overMD\n      overME\n      bruhimsRD\n      bruhimsRNo\n      bruneiMAD\n      bruneiME\n      uploadFitness\n      uploadRegis\n      uploadBwn\n      dependPass\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:n}})]);console.log(t,"successfully stored data")}catch(r){throw console.error("Error executing GraphQL requests:",r),r}}),[])}},hr=()=>{const e=(0,ge.D)();return{updateMedicalSubmit:(0,r.useCallback)((async t=>{let{LabUpValue:a}=t;if(!a||!a.LabTable)throw new Error("Missing required parameters or LabTable ID");const n={id:a.LabTable,empID:a.empID,overMD:a.overMD,overME:a.overME,bruhimsRD:a.bruhimsRD,bruhimsRNo:a.bruhimsRNo,bruneiMAD:a.bruneiMAD,bruneiME:a.bruneiME,uploadBwn:a.uploadBwn,dependPass:JSON.stringify(a.dependPass),uploadFitness:a.uploadFitness,uploadRegis:a.uploadRegis};try{return await e.graphql({query:"\n  mutation UpdateLabourMedicalInfo(\n    $input: UpdateLabourMedicalInfoInput!\n    $condition: ModelLabourMedicalInfoConditionInput\n  ) {\n    updateLabourMedicalInfo(input: $input, condition: $condition) {\n      id\n      empID\n      overMD\n      overME\n      bruhimsRD\n      bruhimsRNo\n      bruneiMAD\n      bruneiME\n      uploadFitness\n      uploadRegis\n      uploadBwn\n      dependPass\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:n,limit:2e4}})}catch(r){throw console.error("Error updating LabourMedicalInfo:",r.message),r}}),[])}},gr=()=>{(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]);const{SubmitMPData:e}=xr(),{updateMedicalSubmit:t}=hr(),{empPIData:a,LMIData:l}=(0,r.useContext)(s.Y),[o,d]=(0,r.useState)([]),[c,p]=(0,r.useState)([]),[m,u]=(0,r.useState)({}),[h,g]=(0,r.useState)([]),[f,v]=(0,r.useState)({uploadFitness:[],uploadRegis:[],uploadBwn:[]}),[b,N]=(0,r.useState)(!1),[j,D]=(0,r.useState)(null),[w,A]=(0,r.useState)(""),{register:S,handleSubmit:E,setValue:I,watch:C,control:k,getValues:R,formState:{errors:T}}=(0,it.mN)({defaultValues:{uploadFitness:[],uploadRegis:[],uploadBwn:[],dependPass:[]},resolver:(0,lt.t)(An)});(0,r.useEffect)((()=>{(async()=>{try{const e=a.map((e=>{const t=l?l.find((t=>t.empID===e.empID)):{};return(0,x.A)((0,x.A)({},e),t)})).filter(Boolean);d(e)}catch(e){console.error("Error fetching data:",e)}})()}),[a,l]);const P=C("empID"),_=async(e,t)=>{if(!P)return alert("Please enter the Employee ID before uploading files."),void(window.location.href="/labourImmigration");const a=e.target.files[0];if(!a)return;if(!["application/pdf"].includes(a.type))return void alert("Upload must be a PDF file ");const n=C(t)||[];I(t,[...n,a]);try{await pt(a,t,v,P),u((e=>(0,x.A)((0,x.A)({},e),{},{[t]:a.name})))}catch(r){console.log(r)}},O=e=>e.split("/").pop().split(".").slice(0,-1).join(".");return(0,i.jsxs)("form",{onSubmit:E((async n=>{try{const r=a.find((e=>e.empID===n.empID)),s=l.find((e=>e.empID===n.empID)),i=e=>{if(!e||isNaN(new Date(e).getTime()))return;const t=new Date(e),a=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getFullYear();return"".concat(a,"/").concat(n,"/").concat(r)},o=i(n.overMD),d=i(n.overME),p=i(n.bruhimsRD),m=i(n.bruneiMAD),u=i(n.bruneiME);if(s&&r){const e=(e,t)=>{if(""===t)return e;const a=[...new Set([...e||[],t])];return a.length>0?a:null},a=e(null===s||void 0===s?void 0:s.bruneiMAD,m),r=e(null===s||void 0===s?void 0:s.bruneiME,u),i=(0,x.A)((0,x.A)({},n),{},{overMD:o,overME:d,bruhimsRD:p,bruneiMAD:a,bruneiME:r,uploadFitness:JSON.stringify(f.uploadFitness),uploadRegis:JSON.stringify(f.uploadRegis),uploadBwn:JSON.stringify(f.uploadBwn),dependPass:JSON.stringify(n.dependPass.map(((e,t)=>{var a,n;const r=(null===c||void 0===c||null===(a=c.uploadDp)||void 0===a?void 0:a[t])||e.uploadDp,s=(null===c||void 0===c||null===(n=c.uploadDr)||void 0===n?void 0:n[t])||e.uploadDr;return(0,x.A)((0,x.A)({},e),{},{uploadDp:r,uploadDr:s})}))),LabTable:s.id});await t({LabUpValue:i}),A("Medical and Dependent Info details updated successfully"),N(!0)}else{const[t,a]=[[m],[u]].map((e=>[...new Set(e)])),r=(0,x.A)((0,x.A)({},n),{},{overMD:o,overME:d,bruhimsRD:p,bruneiMAD:t,bruneiME:a,uploadFitness:JSON.stringify(f.uploadFitness),uploadRegis:JSON.stringify(f.uploadRegis),uploadBwn:JSON.stringify(f.uploadBwn),dependPass:JSON.stringify(n.dependPass.map(((e,t)=>{var a,n;const r=(null===c||void 0===c||null===(a=c.uploadDp)||void 0===a?void 0:a[t])||e.uploadDp,s=(null===c||void 0===c||null===(n=c.uploadDr)||void 0===n?void 0:n[t])||e.uploadDr;return(0,x.A)((0,x.A)({},e),{},{uploadDp:r,uploadDr:s})})))});await e({labValue:r}),A("Medical and Dependent Info details saved successfully"),N(!0)}}catch(r){console.log(r),console.error("Error submitting data to AWS:",JSON.stringify(r,null,2))}})),onClick:()=>{g([])},className:"container mx-auto p-10 bg-[#F5F6F1CC]",children:[(0,i.jsxs)("div",{className:"w-full flex items-center justify-between",children:[(0,i.jsx)(n.N_,{to:"/employee",className:"text-xl flex-1 text-grey",children:(0,i.jsx)(Lt.QVr,{})}),(0,i.jsx)("p",{className:"flex-1 text-center mt-2 text_size_2 uppercase",children:"Medical & Dependent Info"}),(0,i.jsx)("div",{className:"flex-1",children:(0,i.jsx)(Wn,{searchIcon2:(0,i.jsx)(y.zfp,{}),searchResult:e=>{["empID","bruhimsRNo","overMD","overME","bruhimsRD"].forEach((t=>{let a=e[t];null!==a&&void 0!==a||(a=""),"overMD"!==t&&"overME"!==t&&"bruhimsRD"!==t||(a=a?(e=>{const t=e.split("/");if(3!==t.length)throw new Error("Invalid date format: ".concat(e));let a,n,r;if(t[0]>12?[a,n,r]=t:[n,a,r]=t,!(e=>{const[t,a,n]=e;return!isNaN(t)&&!isNaN(a)&&!isNaN(n)&&t>0&&a>0&&n>0})([a,n,r]))throw new Error("Invalid date values: ".concat(e));return"".concat(r,"-").concat(n.padStart(2,"0"),"-").concat(a.padStart(2,"0"))})(a):""),I(t,a)}));if(["bruneiMAD","bruneiME"].forEach((t=>{const a=(e=>{if(/^\d{2}\/\d{2}\/\d{4}$/.test(e)){const[t,a,n]=e.split("/"),r=parseInt(t,10)>12,s=r?t:a,i=r?a:t;return"".concat(n,"-").concat(i.padStart(2,"0"),"-").concat(s.padStart(2,"0"))}return e})((e=>{if(Array.isArray(e)){const t=e[e.length-1];return"string"===typeof t&&t.startsWith("[")&&t.endsWith("]")?t.slice(1,-1):t}return e})(e[t]));I(t,a)})),null!==e&&void 0!==e&&e.dependPass)try{const t=JSON.parse(e.dependPass);D(t)}catch(t){}["uploadFitness","uploadRegis","uploadBwn"].forEach((a=>{if(e&&e[a])try{const t=JSON.parse(e[a]).map((e=>"string"===typeof e?JSON.parse(e):e));I(a,t),v((e=>(0,x.A)((0,x.A)({},e),{},{[a]:t}))),u((e=>(0,x.A)((0,x.A)({},e),{},{[a]:t.length>0?O(t[t.length-1].upload):""})))}catch(t){}}))},placeholder:"Employee ID",rounded:"rounded-lg",newFormData:o,filteredEmployees:h,setFilteredEmployees:g})})]}),(0,i.jsx)("div",{className:"flex justify-end items-center pt-10 pb-2",children:(0,i.jsx)("div",{children:(0,i.jsx)(ut,{label:"Employee ID",type:"text",name:"empID",placeholder:"Enter Employee ID",errors:T,register:S})})}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("p",{className:"text_size_3 form-group text-medium_grey mb-5",children:"Employee Medical Info"}),(0,i.jsx)("div",{className:" grid grid-cols-3 gap-x-5 gap-y-5 mt-5 mb-5 ",children:mr.medicalFields.map(((e,t)=>(0,i.jsx)(wa,{field:e,register:S,handleFileChange:_,uploadedFileNames:m,errors:T},t)))})]}),(0,i.jsx)("hr",{}),(0,i.jsx)(ur,{register:S,UploadingFiles:m,setUploadedFileNames:u,control:k,setValue:I,setArrayUploadDocs:p,arrayUploadDocs:c,errors:T,watch:C,value:j,getValues:R}),(0,i.jsx)("div",{className:"center",children:(0,i.jsx)("button",{type:"submit",className:"primary_btn",children:"Submit"})}),b&&(0,i.jsx)(Le,{text:w,notification:b,path:"/labourImmigration"})]})},fr=(0,ge.D)(),vr=((0,ge.D)(),e=>{let{isVisible:t,onClose:a}=e;const{SubmitReqData:n}=(()=>{const e=(0,ge.D)();return{SubmitReqData:(0,r.useCallback)((async t=>{let{EmpReqValue:a}=t;if(!a)throw new Error("Missing required parameters");const n=localStorage.getItem("userID");if(!n)throw new Error("User ID is not available in localStorage");const r=a.requestorID||n;if(!r)throw new Error("Requestor ID is missing");const s={requestorID:r,approverID:a.approverID||"",reqName:a.reqName,department:a.department,project:a.project,position:a.position,quantity:a.quantity,reasonForReq:a.reasonForReq,justification:a.justification,replacementFor:a.replacementFor||null,qualification:a.qualification,status:a.status,remarkReq:a.remarkReq,tentativeDate:a.tentativeDate?new Date(a.tentativeDate).toISOString():null};console.log("Submitting data:",s);try{const t=await e.graphql({query:"\n  mutation CreateEmpRequisition(\n    $input: CreateEmpRequisitionInput!\n    $condition: ModelEmpRequisitionConditionInput\n  ) {\n    createEmpRequisition(input: $input, condition: $condition) {\n      id\n      department\n      justification\n      project\n      position\n      quantity\n      qualification\n      reasonForReq\n      replacementFor\n      tentativeDate\n      status\n      remarkReq\n      reqName\n      requestorID\n      approverID\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:s}});console.log("Successfully stored data:",t)}catch(i){throw console.error("Error executing GraphQL request:",i),i}}),[])}})(),[s,l]=(0,r.useState)(""),[o,d]=(0,r.useState)(""),[c,p]=(0,r.useState)({generalManagerEmail:null,humanResourceManagerEmail:null}),{register:m,handleSubmit:u,formState:{errors:h}}=(0,it.mN)({resolver:(0,lt.t)(ot.M3)}),[g,f]=(0,r.useState)(!1),[v,y]=(0,r.useState)("");(0,r.useEffect)((()=>{const e=localStorage.getItem("userID"),t=localStorage.getItem("userType");l(e),d(t);(async()=>{try{const e=await(async()=>{try{var e,t,a,n;const[r,s]=await Promise.all([fr.graphql({query:fe.it,variables:{limit:2e4}}),fr.graphql({query:fe.bJ,variables:{limit:2e4}})]);console.log("Fetched Personal Info Data:",r),console.log("Fetched Work Info Data:",s);const i=(null===r||void 0===r||null===(e=r.data)||void 0===e||null===(t=e.listEmpPersonalInfos)||void 0===t?void 0:t.items)||[],l=(null===s||void 0===s||null===(a=s.data)||void 0===a||null===(n=a.listEmpWorkInfos)||void 0===n?void 0:n.items)||[];console.log("Personal Info Items:",i),console.log("Work Info Items:",l),i.length||console.warn("Personal info dataset is empty."),l.length||console.warn("Work info dataset is empty.");const o=i.reduce(((e,t)=>(null!==t&&void 0!==t&&t.empID&&(e[t.empID]=t),e)),{});console.log("Personal Info Map (empID -> Personal Info):",o);const d=l.map((e=>{const t=o[e.empID]||{};return{empID:e.empID,position:e.position,officialEmail:t.officialEmail||null}}));console.log("Merged Data (empID, position, officialEmail):",d);const c=d.find((e=>"General Manager"===e.position)),p=d.find((e=>"Human Resource Manager"===e.position));return console.log("General Manager Details:",c),console.log("Human Resource Manager Details:",p),c||console.error("No employee found for position: General Manager"),p||console.error("No employee found for position: Human Resource Manager"),{generalManagerEmail:(null===c||void 0===c?void 0:c.officialEmail)||null,humanResourceManagerEmail:(null===p||void 0===p?void 0:p.officialEmail)||null}}catch(r){throw console.error("Error fetching GM and HR details:",r.message||r),new Error("Failed to fetch GM and HR details. Please try again later.")}})();p(e),console.log("Fetched GM and HR Emails:",e)}catch(e){console.error("Error fetching GM and HR emails:",e)}})()}),[]);const{personalInfo:N,workInfo:j}=Be(s);return(0,i.jsxs)("div",{className:"bg-white w-full max-w-[900px] rounded-lg relative",children:[(0,i.jsxs)("div",{className:"text-center p-2",children:[(0,i.jsx)("img",{src:he.A,alt:"Logo",className:"max-w-[250px] w-full mx-28 mb-3"}),(0,i.jsx)("h2",{className:"text-lg font-semibold underline my-6",children:"Apply for Employee Requisition"}),(0,i.jsx)("button",{onClick:a,className:"absolute -top-4 -right-4 border rounded-full p-1",children:(0,i.jsx)(b.RQJ,{size:20})})]}),(0,i.jsx)("div",{className:"max-h-[450px] overflow-y-auto px-4",children:(0,i.jsxs)("form",{onSubmit:u((async e=>{try{const t=N.empID||s;if(!t)throw new Error("Requestor ID is missing.");const a=(0,x.A)((0,x.A)({},e),{},{reqName:N.name,requestorID:t,department:e.department,project:e.project,position:e.position,quantity:parseInt(e.quantity,10),reasonForReq:e.reasonForReq,justification:e.justification,replacementFor:e.replacementFor||null,qualification:e.qualification,tentativeDate:e.tentativeDate,status:e.status,approverID:"",remarkReq:e.remarkReq});await n({EmpReqValue:a}),f(!0),y("Your Requisition Submitted Successfully");const{generalManagerEmail:r,humanResourceManagerEmail:i}=c;"Manager"===o&&(r?(console.log("Sending email to GM at:",r),await Me("Employee Requisition Request","Dear GM, \n            Your Manager ".concat(N.name||"N/A"," has submitted the Employee Requisition Form.\n            View the details at: https://hr.adininworks.co"),"hr_no-reply@adininworks.com",r)):console.error("General Manager email not found."),i?(console.log("Sending email to HR at:",i),await Me("Employee Requisition Request","Dear HR, \n            Your Manager ".concat(N.name||"N/A"," has submitted the Employee Requisition Form.\n            View the details at: https://hr.adininworks.co"),"hr_no-reply@adininworks.com",i),console.log("Email to HR sent successfully.")):console.error("Human Resource Manager email not found."))}catch(t){console.error("Error submitting data:",t)}})),className:"pb-5",children:[(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{label:"Department",name:"department",type:"text"},{label:"Position",name:"position",type:"text"},{label:"Project",name:"project",type:"text"},{label:"Quantity",name:"quantity",type:"text"},{label:"Reason for Request",name:"reasonForReq",type:"select",options:[{value:"Additional",label:"Additional"},{value:"Replacement",label:"Replacement"}]},{label:"Justification of Request",name:"justification",type:"text"},{label:"If Replacement, for whom",name:"replacementFor",type:"text"},{label:"State Qualification Desired",name:"qualification",type:"text"},{label:"Tentative Date to Mobilize",name:"tentativeDate",type:"date"}].map((e=>(0,i.jsx)(ut,(0,x.A)({label:e.label,name:e.name,type:e.type,register:m,errors:h},"select"===e.type&&{options:e.options}),e.name)))}),(0,i.jsx)("div",{className:"flex justify-center items-center gap-4 pt-4",children:(0,i.jsx)("button",{type:"submit",className:"primary_btn",children:"Submit"})}),g&&(0,i.jsx)(Le,{text:v,notification:g,path:"/recrutiles/applyemployreq"})]})})]})}),yr=()=>{const{empPIData:e,EmpInsuranceData:t,workInfoData:a,IDData:l,depInsuranceData:o}=(0,r.useContext)(s.Y),[d,c]=(0,r.useState)([]),[p,m]=(0,r.useState)("employeeInsurances"),[u,h]=(0,r.useState)([]),[g,f]=(0,r.useState)([]),v=(0,n.Zp)(),b=(0,n.zy)();(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]),(0,r.useEffect)((()=>{(async()=>{try{const n=e.map((e=>{const n=t?t.find((t=>t.empID===e.empID)):{},r=a?a.find((t=>t.empID===e.empID)):{},s=l?l.find((t=>t.empID===e.empID)):{},i=o?o.find((t=>t.empID===e.empID)):{};return(0,x.A)((0,x.A)((0,x.A)((0,x.A)((0,x.A)({},e),n),r),s),i)}));c(n)}catch(n){console.log(n)}})()}),[e,t,a,l]);const N=(e,t)=>{m(e),v(t)};(0,r.useEffect)((()=>{const e=b.pathname;m("/insuranceAdd"===e?"employeeInsurances":"/insuranceAdd/dependentInsurance"===e?"dependentInsurance":"employeeInsurances")}),[b]);const j=e=>{h(e)};return(0,i.jsx)("section",{className:"w-full bg-[#F5F6F1]",onClick:()=>{f([])},children:(0,i.jsxs)("div",{className:"relative mx-auto p-10 h-full",children:[(0,i.jsxs)("div",{className:"w-full flex items-center justify-between gap-5",children:[(0,i.jsx)(n.N_,{to:"/employee",className:"text-xl flex-1 text-grey",children:(0,i.jsx)(Lt.QVr,{})}),(0,i.jsx)("p",{className:"flex-1 text-center mt-2 text_size_2 uppercase",children:"Insurance Form"}),(0,i.jsx)("div",{className:"flex-1",children:(b.pathname,(0,i.jsx)(Wn,{searchResult:j,newFormData:d,searchIcon2:(0,i.jsx)(y.zfp,{}),placeholder:"Employee Id",rounded:"rounded-lg",filteredEmployees:g,setFilteredEmployees:f}))})]}),(0,i.jsxs)("div",{className:"flex border-b m-4 text-[16px] font-semibold",children:[(0,i.jsx)("button",{className:"py-2 px-4 focus:outline-none ".concat("employeeInsurances"===p?"border-b-8 border-yellow":""),onClick:()=>N("employeeInsurances","/insuranceAdd"),children:"Employee Insurance"}),(0,i.jsx)("button",{className:"py-2 px-4 focus:outline-none ".concat("dependentInsurance"===p?"border-b-8 border-yellow":""),onClick:()=>N("dependentInsurance","/insuranceAdd/dependentInsurance"),children:"Dependent Insurance"})]}),(0,i.jsx)("div",{children:(0,i.jsx)(n.sv,{context:{activeNavTab:p,handleNext:()=>{switch(p){case"employeeInsurances":v("/insuranceAdd"),m("employeeInsurances");break;case"dependentInsurance":v("/insuranceAdd/dependentInsurance"),m("dependentInsurance")}},searchResultData:u}})})]})})};var br=a(5200);const Nr=()=>{const e=(0,ge.D)();return{SubmitMPData:(0,r.useCallback)((async t=>{let{empInsValue:a}=t;if(!a)throw new Error("Missing required parameters");const n={empID:a.empID,groupIns:[a.groupIns],groupInsEffectDate:[a.groupInsEffectDate],groupInsEndDate:[a.groupInsEndDate],empStatusType:a.empStatusType,workmenCompNo:a.workmenCompNo,travelIns:[a.travelIns],accidentIns:[a.accidentIns],empInsUpload:[a.empInsUpload]};console.log(n);try{const t=await Promise.all([e.graphql({query:"\n  mutation CreateEmpInsurance(\n    $input: CreateEmpInsuranceInput!\n    $condition: ModelEmpInsuranceConditionInput\n  ) {\n    createEmpInsurance(input: $input, condition: $condition) {\n      id\n      empID\n      groupIns\n      groupInsEffectDate\n      groupInsEndDate\n      empStatusType\n      workmenCompNo\n      travelIns\n      accidentIns\n      empInsUpload\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:n}})]);console.log(t,"successfully stored data")}catch(r){throw console.log(r),console.error("Error executing GraphQL requests:",r),r}}),[])}},jr=()=>{const e=(0,ge.D)();return{UpdateEIDataSubmit:(0,r.useCallback)((async t=>{let{empInsValue:a}=t;if(!a)throw new Error("Missing required parameters");const n={id:a.id,empID:a.empID,groupIns:[a.groupIns],groupInsEffectDate:[a.groupInsEffectDate],groupInsEndDate:[a.groupInsEndDate],empStatusType:a.empStatusType,workmenCompNo:a.workmenCompNo,travelIns:[a.travelIns],accidentIns:[a.accidentIns],empInsUpload:[a.empInsUpload]};try{await Promise.all([e.graphql({query:"\n  mutation UpdateEmpInsurance(\n    $input: UpdateEmpInsuranceInput!\n    $condition: ModelEmpInsuranceConditionInput\n  ) {\n    updateEmpInsurance(input: $input, condition: $condition) {\n      id\n      empID\n      groupIns\n      groupInsEffectDate\n      groupInsEndDate\n      empStatusType\n      workmenCompNo\n      travelIns\n      accidentIns\n      empInsUpload\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:n,limit:2e4}})])}catch(r){throw console.log(r),console.error("Error executing GraphQL requests:",r),r}}),[])}},Dr=()=>{var e,t;(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]);const{searchResultData:a}=(0,n.KC)(),{EmpInsuranceData:l,workMenDetails:o,dropDownVal:d}=(0,r.useContext)(s.Y),{SubmitMPData:c}=Nr(),{UpdateEIDataSubmit:p}=jr(),[m,u]=(0,r.useState)(!1),[h,g]=(0,r.useState)({empInsUpload:[]}),[f,v]=(0,r.useState)([{}]),[y,b]=(0,r.useState)([]),[N,j]=(0,r.useState)(""),{register:D,handleSubmit:w,setValue:A,watch:S,control:E,formState:{errors:I}}=(0,it.mN)({defaultValues:{empStatusType:"",workmenCompNo:"",empInsUpload:[]},resolver:(0,lt.t)(In)}),C=null===(e=d[0])||void 0===e?void 0:e.insuHSDD.map((e=>({value:e,label:e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}))),k=(null===(t=d[0])||void 0===t||t.nationalityDD.map((e=>({value:e,label:e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}))),S("otherNation")),[R,T]=(0,r.useState)(""),[P,_]=(0,r.useState)([]),O=[{label:"Employee Badge Number",key:"empBadgeNo",type:"text"},{label:"Employee Name",key:"name",type:"text"},{label:"Department",key:"department",type:"text"},{label:"Position",key:"position",type:"text"},{label:"Date of Joining",key:"doj",type:"date"},{label:"Gender",key:"gender",type:"text"},{label:"Brunei I/C Number",key:"bwnIcNo",type:"text"},{label:"Passport Number for Non-Local",key:"ppNo",type:"text"},{label:"Date of Birth",key:"dob",type:"date"},{label:"Marital Status",key:"marital",type:"text"},{label:"Nationality",key:"nationality",type:"text"},{label:"Other Nationality",key:"otherNation",type:"text"},{label:"Group H&S Insurance",key:"groupIns",type:"select",options:C},{label:"Group H&S Insurance Enrollment Effective Date",key:"groupInsEffectDate",type:"date"},{label:"Group H&S Insurance Enrollment End Date",key:"groupInsEndDate",type:"date"},{label:"Travelling Insurance",key:"travelIns",type:"select",options:["Yes","No"]}],L=()=>{v((e=>[...e,{}])),b((e=>[...e,[]]))},F=e=>Array.isArray(e)?e[e.length-1]:e;(0,r.useEffect)((()=>{if(!a)return;A("empID",a.empID);const e=F(a.empStatusType);e&&(T(e),A("empStatusType",e));const t=F(a.workmenCompNo);t&&A("workmenCompNo",t),O.forEach((e=>{void 0!==a[e.key]&&A(e.key,F(a[e.key]))}));["accidentIns"].forEach((e=>{var t;A(e,(t=a[e],Array.isArray(t)?t[t.length-1]:t))}));const n=null===a||void 0===a?void 0:a.empInsUpload;if(n)try{const e=null===JSON||void 0===JSON?void 0:JSON.parse(n),t=null===e||void 0===e?void 0:e.map((e=>"string"===typeof e?null===JSON||void 0===JSON?void 0:JSON.parse(e):e));g((e=>(0,x.A)((0,x.A)({},e),{},{empInsUpload:t})))}catch(r){console.error("Failed to parse JSON:",r)}else console.warn("searchResultData?.empInsUpload is undefined or not a valid JSON string.")}),[a,A]),(0,r.useEffect)((()=>{if(R){const e=new Date,t=o.filter((t=>{const a=new Date(t.workmenCompExp);return t.empStatusType===R&&a>e})).sort(((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)));_(t);!S("workmenCompNo")&&t.length>0&&A("workmenCompNo",t[0].workmenCompNo)}}),[R,A,S,o]);return(0,i.jsxs)("form",{onSubmit:w((async e=>{const t=l.find((t=>t.empID===e.empID));if(t){const a=(0,x.A)((0,x.A)({},e),{},{id:t.id,empInsUpload:JSON.stringify(h.empInsUpload.flat())});await p({empInsValue:a}),j("Employee Insurance Info updated successfully"),u(!0)}else{const t=(0,x.A)((0,x.A)({},e),{},{empInsUpload:JSON.stringify(h.empInsUpload.flat())});await c({empInsValue:t}),j("Employee Insurance Info Saved successfully"),u(!0)}})),className:"mx-auto p-2 my-10 bg-[#F5F6F1CC]",children:[(0,i.jsx)("div",{className:"flex justify-end items-center",children:(0,i.jsx)("div",{className:"max-w-sm",children:(0,i.jsx)(ut,{label:"Employee ID",register:D,name:"empID",type:"text",watch:S("empID")||"",placeholder:"Enter Employee ID",errors:I})})}),(0,i.jsx)("div",{className:"grid grid-cols-2 gap-5 w-full ",children:O.map((e=>{var t;let{label:a,key:n,type:r,options:s=[],className:l=""}=e;return(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{className:"mb-1 text_size_5",children:a}),"select"===r?(0,i.jsxs)("select",(0,x.A)((0,x.A)({},D(n)),{},{className:"input-field select-custom ".concat(l),children:[(0,i.jsx)("option",{value:"",children:"Select"}),s.map((e=>"string"===typeof e?(0,i.jsx)("option",{value:e.toUpperCase(),children:e},e):(0,i.jsx)("option",{value:e.value.toUpperCase(),children:e.label},e.value)))]})):"otherNation"===n?(0,i.jsx)("input",(0,x.A)((0,x.A)({type:r},D(n)),{},{className:"input-field ".concat(l),value:k||"N/A"})):(0,i.jsx)("input",(0,x.A)((0,x.A)({type:r},D(n)),{},{className:"input-field ".concat(l)})),I[n]&&(0,i.jsx)("p",{className:"text-[red] text-[13px] mt-1",children:null===(t=I[n])||void 0===t?void 0:t.message})]},n)}))}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-5 mt-5",children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{className:"mb-1 text_size_5",children:"Workmen Compensation Insurance"}),(0,i.jsxs)("select",(0,x.A)((0,x.A)({},D("empStatusType")),{},{className:"input-field select-custom ",onChange:e=>T(e.target.value),value:R,children:["              ",(0,i.jsx)("option",{value:"",children:"Select"}),["OffShore","OnShore","General"].map((e=>(0,i.jsx)("option",{value:e,children:e},e)))]}))]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{className:"mb-1 text_size_5",children:"Workmen Compensation Policy Number"}),(0,i.jsx)("select",(0,x.A)((0,x.A)({},D("workmenCompNo")),{},{className:"input-field select-custom ",value:S("workmenCompNo")||"",onChange:e=>A("workmenCompNo",e.target.value),children:P.map((e=>(0,i.jsx)("option",{value:e.workmenCompNo,children:e.workmenCompNo},e.id)))}))]})]}),(0,i.jsx)("div",{className:"grid grid-cols-2 gap-5 mt-5 ",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text_size_5",children:"Personal Accident Insurance"}),(0,i.jsxs)("select",(0,x.A)((0,x.A)({className:"input-field select-custom"},D("accidentIns")),{},{children:[(0,i.jsx)("option",{value:"",children:"Select"}),(0,i.jsx)("option",{value:"Yes",children:"Yes"}),(0,i.jsx)("option",{value:"No",children:"No"})]}))]})}),(0,i.jsx)("div",{className:"grid grid-cols-3 gap-10 mt-12",children:f.map(((e,t)=>{var a;return(0,i.jsxs)("div",{className:"form-group w-full relative",children:[(0,i.jsxs)("label",{className:"w-full flex items-center px-3 py-3 text_size_7 p-2.5 bg-lite_skyBlue border border-[#dedddd] rounded-md cursor-pointer",children:["Upload",(0,i.jsx)(it.xI,{name:"empInsUpload[".concat(t,"]"),control:E,render:e=>{let{field:a}=e;return(0,i.jsx)("input",{type:"file",onChange:e=>{(async(e,t,a)=>{const n=e.target.files[0];if(!n)return;if(["application/pdf"].includes(n.type)){b((e=>{const t=[...e];return t[a]={name:n.name,file:n},t}));try{const e=await pt(n,t,g,a);e&&b((t=>{const n=[...t];return n[a]=[e],n}))}catch(r){console.error("Error uploading file:",r)}}else alert("Upload must be a PDF file")})(e,"empInsUpload",t)},className:"hidden",accept:".pdf"})}}),(0,i.jsx)("span",{className:"ml-2",children:(0,i.jsx)(ft.gwN,{})})]}),(0,i.jsx)("p",{className:"text-grey mt-1 text-xs",children:(null===(a=y[t])||void 0===a?void 0:a.name)||""}),0===t&&(0,i.jsx)("button",{type:"button",onClick:L,className:"absolute top-1/2 -right-8 transform -translate-y-1/2 flex items-center text-medium_grey text-[20px]",children:(0,i.jsx)(br.tN3,{className:"mr-1"})}),t>0&&(0,i.jsx)("button",{type:"button",onClick:()=>(e=>{v((t=>t.filter(((t,a)=>a!==e)))),b((t=>t.filter(((t,a)=>a!==e))))})(t),className:"absolute top-1/2 -right-8 transform -translate-y-1/2 flex items-center text-medium_grey text-[20px]",children:(0,i.jsx)(br.prK,{className:"mr-1"})})]},t)}))}),(0,i.jsx)("div",{className:"center my-10",children:(0,i.jsx)("button",{type:"submit",className:"primary_btn",children:"Save"})}),m&&(0,i.jsx)(Le,{text:N,notification:m,path:"/employee"})]})},wr=e=>{var t;let{dropDownVal:a,register:n,errors:r,index:s,selectedNationality:l,handleNationalityChange:o,watch:d}=e;const c=d("depInsurance[".concat(s,"].depenotherNation")||0),p=d("depInsurance[".concat(s,"].depenNation")||0),m=null===(t=a[0])||void 0===t?void 0:t.nationalityDD.map((e=>({value:e,label:e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")})));return(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[(0,i.jsx)(ut,{label:"Gender",register:n,name:"depInsurance[".concat(s,"].depenGender"),type:"select",options:vt,errors:r}),(0,i.jsx)(ut,{label:"Date of Birth",register:n,name:"depInsurance[".concat(s,"].depenDob"),type:"date",errors:r}),(0,i.jsx)(ut,{label:"Nationality",register:n,name:"depInsurance[".concat(s,"].depenNation"),type:"select",options:m,errors:r,onChange:o}),("OTHER"===l||c&&"OTHER"===p)&&(0,i.jsx)(ut,{label:"Other Nationality",register:n,name:"depInsurance[".concat(s,"].depenotherNation"),type:"text",errors:r}),(0,i.jsx)(ut,{label:"Birth Certificate Number (Below Age 12)",register:n,name:"depInsurance[".concat(s,"].depenBcNo"),type:"text",errors:r}),(0,i.jsx)(ut,{label:"Brunei I/C Number",register:n,name:"depInsurance[".concat(s,"].depenIcNumber"),type:"text",errors:r}),(0,i.jsx)(ut,{label:"Passport Number for Non-Local",register:n,name:"depInsurance[".concat(s,"].depenPpNo"),type:"text",errors:r}),(0,i.jsx)(ut,{label:"Group H&S Insurance Enrollment Effective Date",register:n,name:"depInsurance[".concat(s,"].depenGroupInsEffect"),type:"date",errors:r}),(0,i.jsx)(ut,{label:"Group H&S Insurance Enrollment End Date",register:n,name:"depInsurance[".concat(s,"].depenGroupInsEnd"),type:"date",errors:r}),(0,i.jsx)(ut,{label:"Travelling Insurance Enrollment Effective Date",register:n,name:"depInsurance[".concat(s,"].depenTravelInsEffect"),type:"date",errors:r}),(0,i.jsx)(ut,{label:"Travelling Insurance Enrollment End Date",register:n,name:"depInsurance[".concat(s,"].depenTravelInsEnd"),type:"date",errors:r}),(0,i.jsx)(ut,{label:"Personal Accident Insurance Enrollment Effective Date",register:n,name:"depInsurance[".concat(s,"].depenPersonInsEffect"),type:"date",errors:r}),(0,i.jsx)(ut,{label:"Personal Accident Insurance Enrollment End Date",register:n,name:"depInsurance[".concat(s,"].depenPersonInsEnd"),type:"date",errors:r})]})})},Ar=e=>{var t,a;let{register:n,errors:r,index:s}=e;return(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-5 flex-wrap",children:[(0,i.jsx)(ut,{label:"Dependent Name",register:n,name:"depInsurance[".concat(s,"].depenName"),type:"text",errors:r}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("label",{className:"mb-1 text_size_5",children:"Relationship"}),(0,i.jsxs)("select",(0,x.A)((0,x.A)({},n("depInsurance[".concat(s,"].depenRelation"))),{},{className:"input-field select-custom",children:[(0,i.jsx)("option",{value:""}),(0,i.jsx)("option",{value:"Spouse",children:"Spouse"}),(0,i.jsx)("option",{value:"Child",children:"Child"})]})),(null===(t=r.depInsurance)||void 0===t||null===(a=t[s])||void 0===a?void 0:a.depenRelation)&&(0,i.jsx)("p",{className:"text-[red] text-xs mt-1",children:r.depInsurance[s].depenRelation.message})]})]})},Sr=()=>{var e;(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]);const{depInsuranceData:t,dropDownVal:a}=(0,r.useContext)(s.Y),{SubmitMPData:l}=(()=>{const e=(0,ge.D)();return{SubmitMPData:(0,r.useCallback)((async t=>{let{depValue:a}=t;if(!a)throw new Error("Missing required parameters");const n={empID:a.empID,depInsurance:JSON.stringify(a.depInsurance)};console.log(n);try{const t=await Promise.all([e.graphql({query:"\n  mutation CreateEmpDepInsurance(\n    $input: CreateEmpDepInsuranceInput!\n    $condition: ModelEmpDepInsuranceConditionInput\n  ) {\n    createEmpDepInsurance(input: $input, condition: $condition) {\n      id\n      empID\n      depInsurance\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:n}})]);console.log(t,"successfully stored data")}catch(r){throw console.error("Error executing GraphQL requests:",r),r}}),[])}})(),{UpdateDIData:o}=(()=>{const e=(0,ge.D)();return{UpdateDIData:(0,r.useCallback)((async t=>{let{depValue:a}=t;if(!a)throw new Error("Missing required parameters");const n={empID:a.empID,depInsurance:JSON.stringify(a.depInsurance),id:a.id};try{await Promise.all([e.graphql({query:"\n  mutation UpdateEmpDepInsurance(\n    $input: UpdateEmpDepInsuranceInput!\n    $condition: ModelEmpDepInsuranceConditionInput\n  ) {\n    updateEmpDepInsurance(input: $input, condition: $condition) {\n      id\n      empID\n      depInsurance\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:n,limit:2e4}})])}catch(r){throw console.error("Error executing GraphQL requests:",r),r}}),[])}})(),[d,c]=(0,r.useState)(!1),{searchResultData:p}=(0,n.KC)(),[m,u]=(0,r.useState)(""),{register:h,handleSubmit:g,formState:{errors:f},setValue:v,watch:y}=(0,it.mN)({resolver:(0,lt.t)(Cn),defaultValues:{depInsurance:[{}]}}),[b,N]=(0,r.useState)([{id:Date.now()}]),[j,D]=(0,r.useState)({}),[w,A]=(0,r.useState)({depInsurance:[]}),[S,E]=(0,r.useState)(b),[I,C]=(0,r.useState)(""),k=(0,r.useRef)(!0),R=y("empID"),T=null===(e=a[0])||void 0===e?void 0:e.insuClaimDD.map((e=>({value:e,label:e}))),P=e=>{u(e.target.value)};(0,r.useEffect)((()=>{v("empID",null===p||void 0===p?void 0:p.empID);const e=null===p||void 0===p?void 0:p.depInsurance;if(e)try{const t=JSON.parse(e);k.current?(t&&t.length>0&&(E(t),v("depInsurance",t),t.forEach(((e,t)=>{if(null!==e&&void 0!==e&&e.depenInfUpload){const a=e.depenInfUpload,n=JSON.parse(a).map((e=>"string"===typeof e?JSON.parse(e):e));A((e=>{const a=[...e.depInsurance];return a[t]=n,(0,x.A)((0,x.A)({},e),{},{depInsurance:a})})),D((e=>(0,x.A)((0,x.A)({},e),{},{[t]:n.length>0?_(n[n.length-1].upload):""})))}}))),k.current=!1):t&&t.length>0&&(E(t),v("depInsurance",t))}catch(t){console.error("Error parsing depInsurance data:",t)}}),[p]);const _=e=>e.split("/").pop().split(".").slice(0,-1).join(".");return(0,i.jsx)("div",{className:"bg-[#F5F6F1CC] mx-auto p-2 py-10",children:(0,i.jsxs)("form",{className:"flex flex-col gap-5",onSubmit:g((async e=>{console.log(e);try{const a=t.find((t=>t.empID===e.empID));if(a){const t=(0,x.A)((0,x.A)({},e),{},{depInsurance:e.depInsurance.map(((e,t)=>(0,x.A)((0,x.A)({},e),{},{depenInfUpload:JSON.stringify(w.depInsurance[t])||[]}))),id:a.id});await o({depValue:t})}else{const t=(0,x.A)((0,x.A)({},e),{},{depInsurance:e.depInsurance.map(((e,t)=>(0,x.A)((0,x.A)({},e),{},{depenInfUpload:JSON.stringify(w.depInsurance[t])||[]})))});await l({depValue:t})}}catch(a){console.error("Error submitting data:",a)}})),children:[(0,i.jsx)("div",{className:"flex justify-end items-center",children:(0,i.jsxs)("div",{className:"max-w-sm",children:[(0,i.jsx)("label",{className:"text_size_5",children:"Employee ID"}),(0,i.jsx)("input",(0,x.A)({type:"text",className:"input-field",placeholder:"Enter Employee ID"},h("empID"))),f.empID&&(0,i.jsx)("p",{className:"text-[red] text-[12px]",children:f.empID.message})]})}),(0,i.jsx)("button",{type:"button",onClick:()=>{const e={id:Date.now()};E((t=>[...t,e]))},className:"absolute right-3 mt-10 text-medium_grey text-[25px]",children:(0,i.jsx)(br.tN3,{className:"mr-1"})}),S&&S.length>0&&S.map(((e,t)=>{var n,r,s;return(0,i.jsxs)("div",{className:"flex flex-col gap-5 border-b pb-10",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[(0,i.jsx)(ut,{label:"Type of Insurance Claim",register:h,name:"insuranceClaims[".concat(t,"].claimType"),type:"select",options:T,errors:null===(n=f.insuranceClaims)||void 0===n?void 0:n[t]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"mb-1 text_size_5",children:"Dependent Information"}),(0,i.jsxs)("select",(0,x.A)((0,x.A)({},h("depInsurance[".concat(t,"].depenInfo"))),{},{className:"input-field select-custom",children:[(0,i.jsx)("option",{value:""}),(0,i.jsx)("option",{value:"Spouse",children:"Spouse"}),(0,i.jsx)("option",{value:"Child",children:"Child"}),(0,i.jsx)("option",{value:"Spouse&Child",children:"Spouse & Child"})]})),(null===(r=f.depInsurance)||void 0===r||null===(s=r[t])||void 0===s?void 0:s.depenInfo)&&(0,i.jsx)("p",{className:"text-[red] text-xs mt-1",children:f.depInsurance[t].depenInfo.message})]})]}),(0,i.jsx)(Ar,{register:h,errors:f,index:t}),(0,i.jsx)(wr,{register:h,errors:f,index:t,watch:y,selectedNationality:m,handleNationalityChange:P,dropDownVal:a}),(0,i.jsx)("div",{className:"grid grid-cols-3 gap-10",children:(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"flex items-center px-3 py-3 text_size_7 p-2.5 bg-lite_skyBlue border border-[#dedddd] rounded-md cursor-pointer",children:["Upload",(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"file"},h("depInsurance[".concat(t,"].depenInfUpload"))),{},{onChange:e=>(async(e,t,a)=>{if(!R)return alert("Please enter the Employee ID before uploading files."),void(window.location.href="/insuranceAdd/dependentInsurance");const n=e.target.files[0];if(!n)return;if(["application/pdf"].includes(n.type)){v("depInsurance[".concat(a,"].depenInfUpload, selectedFile"));try{await pt(n,t,A,R,a),D((e=>(0,x.A)((0,x.A)({},e),{},{[a]:n.name})))}catch(r){console.log(r)}}else alert("Upload must be a PDF file")})(e,"depInsurance",t),accept:"application/pdf",className:"hidden"})),(0,i.jsx)(ft.gwN,{className:"ml-1"})]}),(0,i.jsx)("p",{className:"text-secondary text-xs pt-1",children:j[t]}),(null===f||void 0===f?void 0:f.depenInfUpload)&&(0,i.jsx)("p",{className:"text-red text-sm",children:f.depenInfUpload.message})]})}),t>0&&(0,i.jsx)("button",{type:"button",onClick:()=>(e=>{const t=S.filter(((t,a)=>a!==e));E(t),v("depInsurance",t)})(t),className:"text-red-500 mt-2 text-medium_grey text-[25px]",children:(0,i.jsx)(br.prK,{})})]},t)})),(0,i.jsx)("div",{className:"md:col-span-2 flex justify-center mt-10",children:(0,i.jsx)("button",{type:"submit",className:"primary_btn",children:"Save"})}),d&&(0,i.jsx)(Le,{text:I,notification:d,path:"/employee"})]})})},Er=()=>{const{empPIData:e,SawpDetails:t,DNData:a,BJLData:l,PPValidsData:o}=(0,r.useContext)(s.Y),[d,c]=(0,r.useState)([]),[p,m]=(0,r.useState)("sawp"),[u,h]=(0,r.useState)([]),[g,f]=(0,r.useState)(""),[v,b]=(0,r.useState)([]),N=(0,n.Zp)(),j=(0,n.zy)();(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]),(0,r.useEffect)((()=>{const e=localStorage.getItem("userID");f(e)}),[]),(0,r.useEffect)((()=>{(async()=>{try{const n=e.map((e=>{const n=t?t.find((t=>t.empID===e.empID)):{},r=l?l.find((t=>t.empID===e.empID)):{},s=o?o.find((t=>t.empID===e.empID)):{},i=a?a.find((t=>t.empID===e.empID)):{};return(0,x.A)((0,x.A)((0,x.A)((0,x.A)((0,x.A)({},e),n),i),s),r)})).filter(Boolean);c(n)}catch(n){console.log(n)}})()}),[e,t,a,l,o]);const D=(e,t)=>{m(e),N(t)};(0,r.useEffect)((()=>{const e=j.pathname;e.includes("/doe")?m("doe"):e.includes("/nlms")?m("nlms"):e.includes("/bankGuarantee")?m("bankGuarantee"):e.includes("/jitpa")?m("jitpa"):e.includes("/labourDeposit")?m("labourDeposit"):e.includes("/immigration")?m("immigration"):m("sawp")}),[j]);const w=e=>{h(e)};return(0,i.jsx)("section",{className:"w-full min-h-screen bg-[#F5F6F1]",onClick:()=>{b([])},children:(0,i.jsxs)("div",{className:"relative mx-auto p-10 h-full",children:[(0,i.jsxs)("div",{className:"w-full flex items-center justify-between gap-5",children:[(0,i.jsx)(n.N_,{to:"/employee",className:"text-xl flex-1 text-grey",children:(0,i.jsx)(Lt.QVr,{})}),(0,i.jsx)("p",{className:"flex-1 text-center mt-2 text_size_2 uppercase",children:"Employee Work Pass"}),(0,i.jsx)("div",{className:"flex-1",children:"/sawp"===j.pathname||"/sawp/doe"===j.pathname||"/sawp/nlms"===j.pathname||"/sawp/bankGuarantee"===j.pathname||"/sawp/jitpa"===j.pathname||"/sawp/labourDeposit"===j.pathname||"/sawp/immigration"===j.pathname?(0,i.jsx)(Wn,{searchResult:w,newFormData:d,searchIcon2:(0,i.jsx)(y.zfp,{}),placeholder:"Employee Id",rounded:"rounded-lg",empID:g,filteredEmployees:v,setFilteredEmployees:b}):null})]}),(0,i.jsxs)("div",{className:"flex justify-between border-b m-4 text-[16px] font-semibold",children:[(0,i.jsx)("button",{className:"py-2 px-4 focus:outline-none ".concat("sawp"===p?"border-b-8 border-yellow":""),onClick:()=>D("sawp","/sawp"),children:"SAWP"}),(0,i.jsx)("button",{className:"py-2 px-4 focus:outline-none ".concat("doe"===p?"border-b-8 border-yellow":""),onClick:()=>D("doe","/sawp/doe"),children:"DOE"}),(0,i.jsx)("button",{className:"py-2 px-4 focus:outline-none ".concat("nlms"===p?"border-b-8 border-yellow":""),onClick:()=>D("nlms","/sawp/nlms"),children:"NLMS"}),(0,i.jsx)("button",{className:"py-2 px-4 focus:outline-none ".concat("bankGuarantee"===p?"border-b-8 border-yellow":""),onClick:()=>D("bankGuarantee","/sawp/bankGuarantee"),children:"BANK GUARANTEE"}),(0,i.jsx)("button",{className:"py-2 px-4 focus:outline-none ".concat("jitpa"===p?"border-b-8 border-yellow":""),onClick:()=>D("jitpa","/sawp/jitpa"),children:"JITPA"}),(0,i.jsx)("button",{className:"py-2 px-4 focus:outline-none ".concat("labourDeposit"===p?"border-b-8 border-yellow":""),onClick:()=>D("labourDeposit","/sawp/labourDeposit"),children:"LABOUR DEPOSIT"}),(0,i.jsx)("button",{className:"py-2 px-4 focus:outline-none ".concat("immigration"===p?"border-b-8 border-yellow":""),onClick:()=>D("immigration","/sawp/immigration"),children:"IMMIGRATION"})]}),(0,i.jsx)("div",{children:(0,i.jsx)(n.sv,{context:{activeNavTab:p,handleNext:()=>{switch(p){case"sawp":N("/sawp"),m("doe");break;case"doe":N("/sawp/doe"),m("nlms");break;case"nlms":N("/sawp/nlms"),m("bankGuarantee");break;case"bankGuarantee":N("/sawp/bankGuarantee"),m("jitpa");break;case"jitpa":N("/sawp/jitpa"),m("labourDeposit");break;case"labourDeposit":N("/sawp/labourDeposit"),m("immigration");break;case"immigration":N("/sawp/immigration"),m("immigration")}},searchResultData:u}})})]})})},Ir=()=>{const e=(0,ge.D)();return{NLADatas:(0,r.useCallback)((async t=>{let{NLACreValue:a}=t;if(!a)throw new Error("Missing required parameters");const n={empID:a.empID,accommodation:[a.accommodation],accommodationAddress:[a.accommodationAddress]};console.log(n);try{const t=await Promise.all([e.graphql({query:"\n  mutation CreateEmployeeNonLocalAcco(\n    $input: CreateEmployeeNonLocalAccoInput!\n    $condition: ModelEmployeeNonLocalAccoConditionInput\n  ) {\n    createEmployeeNonLocalAcco(input: $input, condition: $condition) {\n      id\n      empID\n      accommodation\n      accommodationAddress\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:n}})]);console.log(t,"successfully stored data")}catch(r){throw console.error("Error executing GraphQL requests:",r),r}}),[])}},Cr=()=>{const e=(0,ge.D)(),[t,a]=(0,r.useState)("");return{NLAUpdateFun:(0,r.useCallback)((async t=>{let{NLAValue:n}=t;if(!n)throw a("All fields (empID, accommodation, accommodationAddress, IDTable) are required."),new Error("Missing required parameters");try{const{empID:t,accommodation:r,accommodationAddress:s,IDTable:i}=n,l={id:i,empID:t,accommodation:r,accommodationAddress:s},o=await e.graphql({query:"\n  mutation UpdateEmployeeNonLocalAcco(\n    $input: UpdateEmployeeNonLocalAccoInput!\n    $condition: ModelEmployeeNonLocalAccoConditionInput\n  ) {\n    updateEmployeeNonLocalAcco(input: $input, condition: $condition) {\n      id\n      empID\n      accommodation\n      accommodationAddress\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:l,limit:2e4}});console.log("Data successfully updated:",o),a("")}catch(r){throw console.error("Error updating data:",r),a("Error updating employee data. Please try again."),r}}),[]),errorEmpID:t}},kr=()=>{const{NLADatas:e,errorEmpID:t}=Ir(),{NLAUpdateFun:a}=Cr(),{empPIData:l,IDData:o,NLAData:d}=(0,r.useContext)(s.Y),[c,p]=(0,r.useState)([]),[m,u]=(0,r.useState)([]),[h,g]=(0,r.useState)(!1),[f,v]=(0,r.useState)([]),[b,N]=(0,r.useState)("");(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]),(0,r.useEffect)((()=>{(async()=>{try{const e=l.map((e=>{const t=d?d.find((t=>t.empID===e.empID)):{},a=o?o.find((t=>t.empID===e.empID)):{};return(0,x.A)((0,x.A)((0,x.A)({},e),t),a)})).filter(Boolean);p(e),u(e)}catch(e){console.error("Error fetching data:",e)}})()}),[l,d]);const{register:j,handleSubmit:D,setValue:w,watch:A,formState:{errors:S}}=(0,it.mN)({resolver:(0,lt.t)(wn)});return(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center  p-10 bg-[#F5F6F1]",onClick:()=>{v([])},children:[(0,i.jsxs)("div",{className:"w-full flex items-center justify-between gap-5",children:[(0,i.jsx)(n.N_,{to:"/employee",className:"text-xl flex-1 text-grey",children:(0,i.jsx)(Lt.QVr,{})}),(0,i.jsx)("p",{className:"flex-1 text-center mt-2 text_size_2 uppercase",children:"Non-Local Accommodation in Brunei"}),(0,i.jsx)("div",{className:"flex-1",children:(0,i.jsx)(Wn,{searchResult:e=>{["empID","empBadgeNo","name","accommodation","accommodationAddress"].forEach((t=>w(t,e[t])));["accommodation","accommodationAddress"].forEach((t=>{var a;w(t,(a=e[t],Array.isArray(a)?a[a.length-1]:a))}))},newFormData:m,searchIcon2:(0,i.jsx)(y.zfp,{}),placeholder:"Employee Id",rounded:"rounded-lg",filteredEmployees:f,setFilteredEmployees:v})})]}),(0,i.jsxs)("form",{className:"h-screen   w-full",onSubmit:D((async t=>{if(t.empID)try{const n=l.find((e=>e.empID===t.empID)),r=d.find((e=>e.empID===t.empID));if(r&&n){const e=(0,x.A)((0,x.A)({},t),{},{PITableID:n.id,IDTable:r.id});await a({NLAValue:e}),N("Details updated successfully"),g(!0)}else{const a=(0,x.A)({},t);await e({NLACreValue:a}),N("Details saved successfully"),g(!0)}}catch(n){console.log(n),console.error("Error submitting data to AWS:",JSON.stringify(n,null,2))}else console.error("empID is missing")})),children:[(0,i.jsx)("div",{className:"flex justify-end items-center mt-14",children:(0,i.jsx)("div",{className:"max-w-sm",children:(0,i.jsx)(ut,{label:"Employee ID",register:j,name:"empID",type:"text",placeholder:"Enter Employee ID",errors:S})})}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-6 mt-10",children:[(0,i.jsx)(ut,{label:"Badge Number",register:j,name:"empBadgeNo",type:"text",value:A("empBadgeNo")||"",errors:S}),(0,i.jsx)(ut,{label:"Name",register:j,name:"name",type:"text",errors:S}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text_size_5",children:"Accommodation"}),(0,i.jsxs)("select",(0,x.A)((0,x.A)({className:"input-field select-custom"},j("accommodation")),{},{children:[(0,i.jsx)("option",{value:""}),(0,i.jsx)("option",{value:"Company Premises",children:"Company Premises"}),(0,i.jsx)("option",{value:"Own Premises",children:"Own Premises"})]})),S.accommodation&&(0,i.jsx)("p",{className:"text-[red] text-[12px] mt-1",children:S.accommodation.message})]}),(0,i.jsxs)("div",{className:"col-span-1",children:[(0,i.jsx)("label",{className:"block text_size_5",children:"Accommodation Address"}),(0,i.jsx)("input",(0,x.A)({type:"text",className:"input-field"},j("accommodationAddress"))),S.accommodationAddress&&(0,i.jsx)("p",{className:"text-[red] text-[12px] mt-1",children:S.accommodationAddress.message})]})]}),(0,i.jsx)("div",{className:"flex justify-center items-center my-10",children:(0,i.jsx)("button",{type:"submit",className:"primary_btn",children:"Save"})})]})]})};const Rr=a.p+"static/media/lock.8b3c70d53923d4f1b00fadb4331d1371.svg";var Tr=a(1957),Pr=a(432);const _r=(0,ge.D)(),Or=()=>{var e,t,a,s;const[l,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(!1),[p,m]=(0,r.useState)(!1),{register:u,formState:{errors:h},handleSubmit:g}=(0,it.mN)({resolver:(0,lt.t)(ot.$A)}),[f,v]=(0,r.useState)(""),b=g((async e=>{const{password:t,currentPassword:a}=e;try{var n;const e=await(0,dt.H)(),i=null===(n=localStorage.getItem("userID"))||void 0===n?void 0:n.toUpperCase();if(e){var r,s;await(0,Tr.f)({oldPassword:a,newPassword:t});const e=await _r.graphql({query:fe.ZZ,variables:{filter:{empID:{eq:i}}}}),n=null===e||void 0===e||null===(r=e.data)||void 0===r||null===(s=r.listUsers)||void 0===s?void 0:s.items[0].id;await _r.graphql({query:Te,variables:{input:{id:n,password:t}}}).then((async e=>{console.log(e),localStorage.removeItem("userID"),localStorage.removeItem("userType"),await(0,Pr.C)(),window.location.href="/login"})),console.log("Password reset successfully")}}catch(f){console.log(f),v(f.message)}}));return(0,i.jsxs)("section",{className:"screen-size mx-auto flex absolute top-0 left-0 min-h-screen ",children:[(0,i.jsx)("div",{className:"flex-1 border-r-2 border-[#E9E9E9] center",children:(0,i.jsx)("img",{className:"w-full max-w-[450px]",src:Rr,alt:" Rightside Image not found"})}),(0,i.jsxs)("div",{className:"flex-1 flex items-center gap-8 py-20 flex-col w-full",children:[(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("img",{className:"w-full max-w-[450px]",src:he.A,alt:" Logo not found"})]}),f&&(0,i.jsx)("p",{className:"text-red",children:f}),(0,i.jsxs)("section",{className:" space-y-5",children:[(0,i.jsx)("h4",{className:"title text-center",children:"Change Password"}),(0,i.jsxs)("div",{className:"w-[400px] space-y-1",children:[(0,i.jsx)("label",{htmlFor:"userID",className:"text-dark_grey text_size_8",children:"Login ID"}),(0,i.jsx)("div",{className:"shadow-md shadow-[#00000040] border border-[#D3D3D3] overflow-hidden rounded-lg py-1 px-3 w-full",children:(0,i.jsx)("input",(0,x.A)({className:"outline-none py-2 w-full",type:"text",id:"userID",name:"userID"},u("userID")))}),(0,i.jsx)("p",{className:"text-[red] text-sm my-2 ml-5",children:null===(e=h.userID)||void 0===e?void 0:e.message})]}),(0,i.jsxs)("div",{className:"w-[400px] space-y-1",children:[(0,i.jsx)("label",{htmlFor:"currentPassword",className:"text-dark_grey text_size_8",children:"Current Password"}),(0,i.jsxs)("div",{className:"shadow-md shadow-[#00000040] border border-[#D3D3D3] overflow-hidden rounded-lg py-1 pl-3 pr-4 w-full center",children:[(0,i.jsx)("input",(0,x.A)({className:"outline-none py-2 w-full",type:l?"text":"password",id:"currentPassword",name:"currentPassword"},u("currentPassword"))),l?(0,i.jsx)(y.whC,{className:"text-2xl text-[#837E7E]",onClick:()=>o(!l)}):(0,i.jsx)(y.Rds,{className:"text-2xl text-[#837E7E]",onClick:()=>o(!l)})]}),(0,i.jsx)("p",{className:"text-[red] text-sm my-2 ml-5",children:null===(t=h.password)||void 0===t?void 0:t.message})]}),(0,i.jsxs)("div",{className:"w-[400px] space-y-1",children:[(0,i.jsx)("label",{htmlFor:"password",className:"text-dark_grey text_size_8",children:"New Password"}),(0,i.jsxs)("div",{className:"shadow-md shadow-[#00000040] border border-[#D3D3D3] overflow-hidden rounded-lg py-1 pl-3 pr-4 w-full center",children:[(0,i.jsx)("input",(0,x.A)({className:"outline-none py-2 w-full",type:d?"text":"password",id:"password",name:"password"},u("password"))),d?(0,i.jsx)(y.whC,{className:"text-2xl text-[#837E7E]",onClick:()=>c(!d)}):(0,i.jsx)(y.Rds,{className:"text-2xl text-[#837E7E]",onClick:()=>c(!d)})]}),(0,i.jsx)("p",{className:"text-[red] text-sm my-2 ml-5",children:null===(a=h.password)||void 0===a?void 0:a.message})]}),(0,i.jsxs)("div",{className:"w-[400px] space-y-1",children:[(0,i.jsx)("label",{htmlFor:"confirmPassword",className:"text-dark_grey text_size_8",children:"Confirm Password"}),(0,i.jsxs)("div",{className:"shadow-md shadow-[#00000040] border border-[#D3D3D3] overflow-hidden rounded-lg py-1 pl-3 pr-4 w-full center",children:[(0,i.jsx)("input",(0,x.A)({className:"outline-none py-2 w-full",type:p?"text":"password",id:"confirmPassword",name:"confirmPassword"},u("confirmPassword"))),p?(0,i.jsx)(y.whC,{className:"text-2xl text-[#837E7E]",onClick:()=>m(!p)}):(0,i.jsx)(y.Rds,{className:"text-2xl text-[#837E7E]",onClick:()=>m(!p)})]}),(0,i.jsx)("p",{className:"text-[red] text-sm my-2 ml-5",children:null===(s=h.password)||void 0===s?void 0:s.message})]}),(0,i.jsx)("div",{className:"center pb-5",children:(0,i.jsx)(n.N_,{to:"/dashboard",className:"primary_btn text_size_4 my-5",onClick:b,children:"Update"})}),(0,i.jsx)("hr",{className:"border-[1.5px] text-[#B3B3B3]"})]})]})]})};var Lr=a(423);const Fr=(0,ge.D)(),Mr=e=>{const[t,a]=(0,r.useState)({id:"",name:"",email:"",contactNo:"",dob:""}),[n,s]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{e&&(async()=>{try{var t,n;const r=await Fr.graphql({query:fe.it,variables:{limit:2e4}}),s=((null===r||void 0===r||null===(t=r.data)||void 0===t||null===(n=t.listEmpPersonalInfos)||void 0===n?void 0:n.items)||[]).find((t=>t.empID.toLowerCase()===e.toLowerCase()));s&&a({id:s.id,name:s.name,email:s.email,contactNo:s.contactNo||"",dob:s.dob||""})}catch(r){console.error("Error fetching employee personal infos:",r)}})()}),[e]),{personalInfo:t,isEditing:n,setIsEditing:s,handleSave:async()=>{const n={id:t.id,empID:e.toUpperCase(),name:t.name,email:t.email,contactNo:t.contactNo,dob:t.dob};try{const e=await Fr.graphql({query:Ce,variables:{input:n,variables:{limit:2e4}}});if(e.data.updateEmpPersonalInfo){const t=e.data.updateEmpPersonalInfo;a({id:t.id,name:t.name,email:t.email,contactNo:t.contactNo,dob:t.dob}),s(!1)}}catch(r){console.error("Error saving data:",r)}},setPersonalInfo:a}},qr=()=>{const[e,t]=(0,r.useState)(""),{personalInfo:a,isEditing:s,setIsEditing:l,handleSave:o,setPersonalInfo:d}=Mr(e),c=e=>{const{name:t,value:n}=e.target;d((0,x.A)((0,x.A)({},a),{},{[t]:n}))};return(0,r.useEffect)((()=>{const e=localStorage.getItem("userID");t(e),console.log("UserID from localStorage:",e)}),[]),(0,i.jsx)("section",{className:"screen-size center py-20",children:(0,i.jsxs)("div",{className:"rounded-lg shadow-lg p-5 px-10 space-y-4 max-w-xl w-full text_size_8 text-dark_grey",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("h3",{className:"text_size_2",children:"Personal Information"}),(0,i.jsx)(n.N_,{to:"/dashboard",children:(0,i.jsx)(Lr.WQq,{className:"text-2xl font-semibold"})})]}),(0,i.jsx)("hr",{className:"border border-[#d4cfcf]"}),(0,i.jsxs)("section",{className:"space-y-4",children:[(0,i.jsx)("div",{className:"flex justify-between gap-10",children:(0,i.jsxs)("div",{className:"w-full space-y-2 ",children:[(0,i.jsx)("label",{htmlFor:"name",children:"Name"}),(0,i.jsx)("div",{className:"border rounded-sm flex-1 border-[#d4cfcf] text-[#4F4F4F] text-xs px-2 py-3 ",children:(0,i.jsx)("input",{id:"name",className:"outline-none w-full",type:"text",name:"name",readOnly:!s,value:a.name,onChange:c})})]})}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("label",{htmlFor:"email",children:"Email Address"}),(0,i.jsx)("div",{className:"border rounded-sm border-[#d4cfcf] text-[#4F4F4F] text-xs px-2 py-3 ",children:(0,i.jsx)("input",{id:"email",className:"outline-none w-full",type:"email",name:"email",readOnly:!s,value:a.email,onChange:c})})]}),(0,i.jsxs)("div",{className:"flex justify-between gap-10",children:[(0,i.jsxs)("div",{className:"w-full space-y-2",children:[(0,i.jsx)("label",{htmlFor:"contactNo",children:"Mobile Number"}),(0,i.jsx)("div",{className:"border rounded-sm flex-1 border-[#d4cfcf] text-[#4F4F4F] text-xs px-2 py-3.5 ",children:(0,i.jsx)("input",{id:"contactNo",className:"outline-none w-full",type:"text",name:"contactNo",readOnly:!s,value:a.contactNo,onChange:c})})]}),(0,i.jsxs)("div",{className:"w-full space-y-2",children:[(0,i.jsx)("label",{htmlFor:"dob",children:"Date of Birth"}),(0,i.jsxs)("div",{className:"border flex rounded-sm flex-1 border-[#d4cfcf] text-[#4F4F4F] text-xs px-2 py-3 ",children:[(0,i.jsx)("input",{id:"dob",className:"outline-none w-full",type:"text",name:"dob",readOnly:!s,value:a.dob,onChange:c}),(0,i.jsx)("span",{children:(0,i.jsx)(y.qsp,{className:"text-xl"})})]})]})]}),(0,i.jsx)("div",{className:"center flex justify-between py-3",children:s?(0,i.jsx)("button",{onClick:o,className:"primary_btn",children:"Save"}):(0,i.jsx)("button",{onClick:()=>l(!0),className:"primary_btn",children:"Edit"})})]})]})})},Ur=e=>{let{fileName:t,ensureExcelFile:a,UploadFile:n,setEnsureExcelFile:s,setFileName:l,clearUseRefObject:o}=e;const[d,c]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{t&&t&&c(!0)}),[t]),(0,i.jsx)("div",{children:d&&(0,i.jsx)("section",{className:" inset-0 flex items-center justify-center z-50 ",children:!1===a&&(0,i.jsxs)("div",{className:" flex flex-col relative items-center justify-center space-y-2 text-dark_grey text_size_5 max-w-sm  w-full bg-white shadow-md p-10 border border-lite_grey",children:[(0,i.jsx)("p",{className:"absolute right-2 top-2",onClick:()=>{o(),s(!0),l(null)},children:(0,i.jsx)(ta.uDv,{className:"text-3xl text-grey cursor-pointer"})}),(0,i.jsx)("p",{children:"Filename"}),(0,i.jsx)("p",{className:"text-center",children:t}),(0,i.jsxs)("p",{className:"text-[red] text-center",children:[" ","Error: Please upload CSV or XLS file type only"," "]})]})})})},Br=e=>{let{fileNameForSuccessful:t,setCloseSavedModel:a,backToHome:n}=e;const[s,l]=(0,r.useState)(!0);return(0,r.useEffect)((()=>{t&&t&&l(!0)}),[t]),(0,i.jsx)("div",{children:s&&(0,i.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 ",children:(0,i.jsxs)("div",{className:"relative ",children:[(0,i.jsx)(y.enS,{className:"absolute  left-60 -top-5 text-5xl text-[#2BEE48] z-50"}),(0,i.jsx)("div",{className:"border w-[509px] h-[218px]  border-lite_grey rounded shadow-md  bg-white pt-8",children:(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:" flex flex-col items-center gap-5",children:[(0,i.jsx)("p",{className:"text-dark_grey text_size_5",children:"Saved Successfully"}),(0,i.jsx)("p",{className:" text-dark_grey text-[16px] ",children:t}),(0,i.jsx)("button",{className:" p-2 rounded border-[#FEF116] bg-[#FEF116] text-dark_grey text_size_5 w-52",onClick:()=>{l(!s),a(!1),n(0)},children:"Close"})]})})})]})})})};var Hr=a(3986);const Wr=e=>{let{allEmpDetails:t,secondaryData:a,searchResult:n,placeholder:s,Position:l}=e;const[o,d]=(0,r.useState)("");return(0,i.jsxs)("div",{className:"flex items-center border border-[#D9D9D9] bg-white rounded p-2 text-[#000000] text-sm w-fit md:max-w-md",children:[(0,i.jsx)("input",{value:o,type:"text",placeholder:s,className:"outline-none flex-grow text-sm text_size_7 text-dark_grey w-full ",onChange:e=>{const t=e.target.value.trim().toUpperCase();if(d(t),t){const e=a&&(null===a||void 0===a?void 0:a.map((e=>{const a=e=>{var a,n,r,s,i,l,o,d;return(null===e||void 0===e||null===(a=e.no)||void 0===a?void 0:a.toString().toUpperCase().includes(t))||(null===e||void 0===e||null===(n=e.NO)||void 0===n?void 0:n.toString().toUpperCase().includes(t))||(null===e||void 0===e||null===(r=e.fidNo)||void 0===r?void 0:r.toString().toUpperCase().includes(t))||(null===e||void 0===e||null===(s=e.FID)||void 0===s?void 0:s.toString().toUpperCase().includes(t))||(null===e||void 0===e||null===(i=e.empBadgeNo)||void 0===i?void 0:i.toString().toUpperCase().includes(t))||(null===e||void 0===e||null===(l=e.BADGE)||void 0===l?void 0:l.toString().toUpperCase().includes(t))||(null===e||void 0===e||null===(o=e.sapNo)||void 0===o?void 0:o.toString().toUpperCase().includes(t))||(null===e||void 0===e||null===(d=e.empID)||void 0===d?void 0:d.toString().toUpperCase().includes(t))};if("Manager_"===l){const t=e.data.filter(a);if(t.length>0)return{id:e.id,data:t}}else{if("ViewTimeSheet_"!==l){return a(e)?e:null}{const t=e.data.filter(a);if(t.length>0)return{id:e.id,data:t}}}}))),r=null===e||void 0===e?void 0:e.filter((e=>null!==e&&void 0!==e));n(r)}else n(a)}}),(0,i.jsx)("span",{className:"ml-2",children:(0,i.jsx)(br.CKj,{className:"text-xl text-dark_grey"})})]})},Yr=e=>{let{setClosePopup:t}=e;return(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsxs)("div",{className:"relative flex flex-col items-center gap-5 p-5 px-16 rounded shadow-lg border border-lite_grey bg-white",children:[(0,i.jsx)("div",{children:(0,i.jsx)("button",{className:"absolute top-2 right-2 text-dark_grey ",onClick:()=>{t(!1)},children:(0,i.jsx)(ta.uDv,{className:" text-[25px]  text-dark_grey"})})}),(0,i.jsxs)("div",{className:"flex flex-col items-center  gap-2",children:[(0,i.jsx)("p",{className:"text-dark_grey text_size_3 font-semibold",children:"Alert!"}),(0,i.jsx)("p",{className:"text-dark_grey text-center text_size_6",children:"The uploaded Excel sheet does not match the expected format."}),(0,i.jsx)("p",{children:"Please verify the structure and try uploading again."}),(0,i.jsx)("p",{className:"text-[#FF0000] text_size_5 font-bold",children:"ERROR"})]})]})})},Vr=e=>{var t;return"HO"===(t=e)?{fieldObj:{REC:null,CTR:null,DEPT:null,EMPLOYEEID:null,BADGE:null,NAME:null,DATE:null,ONAM:null,OFFAM:null,ONPM:null,OFFPM:null,IN:null,OUT:null,TOTALINOUT:null,ALLDAYMINUTES:null,NETMINUTES:null,TOTALHOURS:null,NORMALWORKINGHRSPERDAY:null,TOTALACTUALHOURS:null,OT:null,REMARKS:null},fields:["REC","CTR","DEPT","EMPLOYEEID","BADGE","NAME","DATE","ONAM","OFFAM","ONPM","OFFPM","IN","OUT","TOTALINOUT","ALLDAYMINUTES","NETMINUTES","TOTALHOURS","NORMALWORKINGHRSPERDAY","TOTALACTUALHOURS","OT","REMARKS"],tableHeader:["REC#","CTR","DEPT","EMPLOYEE ID","BADGE#","NAME","DATE","ON AM","OFF AM","ON PM","OFF PM","IN","OUT","TOTAL IN/OUT","ALL DAY MINUTES","NET MINUTES","TOTAL HOURS","NORMAL WORKING HRS PER DAY","TOTAL ACTUAL HOURS","OT","REMARKS"]}:"BLNG"===t?{fieldObj:{FID:null,NAMEFLAST:null,ENTRANCEDATEUSED:null,ENTRANCEDATETIME:null,EXITDATETIME:null,AVGDAILYTOTALBYDAY:null,AHIGHLIGHTDAILYTOTALBYGROUP:null,ADININWORKSENGINEERINGSDNBHD:null,NORMALWORKINGHRSPERDAY:null,WORKINGHOURS:null,OT:null,REMARKS:null},fields:["FID","NAMEFLAST","ENTRANCEDATEUSED","ENTRANCEDATETIME","EXITDATETIME","AVGDAILYTOTALBYDAY","AHIGHLIGHTDAILYTOTALBYGROUP","ADININWORKSENGINEERINGSDNBHD","NORMALWORKINGHRSPERDAY","WORKINGHOURS","OT","REMARKS"],tableHeader:["FID","NAME (FLAST)","ENTRANCE DATE USED","ENTRANCE DATETIME","EXIT DATETIME","AVG. DAILY TOTAL BY DAY","A HIGHLIGHT DAILY TOTAL BY GROUP","ADININ WORK & ENGINEERING SDN BHD","NORMAL WORKING HRS PER DAY","ACTUAL WORKING HOURS","OT","REMARKS"]}:"SBW"===t?{fieldObj:{NAME:null,DEPTDIV:null,BADGE:null,DATE:null,IN:null,OUT:null,TOTALINOUT:null,ALLDAYMINHRS:null,NETMINUTES:null,TOTALHOURS:null,NORMALWORKINGHRSPERDAY:null,WORKINGHOURS:null,OT:null,REMARKS:null},fields:["NAME","DEPTDIV","BADGE","DATE","IN","OUT","TOTALINOUT","ALLDAYMINHRS","NETMINUTES","TOTALHOURS","NORMALWORKINGHRSPERDAY","WORKINGHOURS","OT","REMARKS"],tableHeader:["NAME","DEPT/DIV","BADGE#","DATE","IN","OUT","TOTAL IN/OUT","ALL DAY MIN (HRS)","NET MINUTES","TOTAL HOURS","NORMAL WORKING HRS PER DAY","ACTUAL WORKING HOURS","OT","REMARKS"]}:"ORMC"===t?{fieldObj:{NAME:null,DEPTDIV:null,BADGE:null,DATE:null,IN:null,OUT:null,TOTALINOUT:null,ALLDAYMINHRS:null,NETMINUTES:null,TOTALHOURS:null,NORMALWORKINGHRSPERDAY:null,WORKINGHOURS:null,OT:null,REMARKS:null},fields:["NAME","DEPTDIV","BADGE","DATE","IN","OUT","TOTALINOUT","ALLDAYMINHRS","NETMINUTES","TOTALHOURS","NORMALWORKINGHRSPERDAY","WORKINGHOURS","OT","REMARKS"],tableHeader:["Name","DEPT/DIV","BADGE#","DATE","IN","OUT","TOTAL IN/OUT","ALL DAY MIN (HRS)","NET MINUTES","TOTAL HOURS","NORMAL WORKING HRS PER DAY","ACTUAL WORKING HOURS","OT","REMARKS"]}:"Offshore"===t?{fieldObj:{NAME:null,NO:null,LOCATION:null,DATE:null,TOTALHOURS:null,TOTALHOURS2:null,TOTALHOURS3:null,NORMALWORKINGHRSPERDAY:null,WORKINGHOURS:null,OT:null,REMARKS:null},fields:["NAME","NO","LOCATION","DATE","TOTALHOURS","TOTALHOURS2","TOTALHOURS3","NORMALWORKINGHRSPERDAY","WORKINGHOURS","OT","REMARKS"],tableHeader:["EMPLOYEE NAME","SAP ID","LOCATION","DATE","TOTAL NT","TOTAL OT","TOTAL IN/OUT","NORMAL WORKING HRS PER DAY","ACTUAL WORKING HOURS","OT","REMARKS"]}:void 0};var zr=a(2021);a(9555);const Jr=e=>{let{searchResult:t,newFormData:a,searchIcon1:n,searchIcon2:s,placeholder:l,rounded:o,setDrpValue:d,searchedValue:c,id:p}=e;const[m,u]=(0,r.useState)(""),[x,h]=(0,r.useState)([]),[g,f]=(0,r.useState)(!1);(0,r.useEffect)((()=>{d&&u(d)}),[d]),(0,r.useEffect)((()=>{const e=e=>{e.target.closest(".dropdown-container")||f(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const v=(0,r.useCallback)((()=>{f((e=>!e))}),[]);(0,r.useEffect)((()=>{h(a)}),[g]);return(0,i.jsxs)("div",{className:"relative dropdown-container",children:[(0,i.jsxs)("div",{className:"py-2 w-full text_size_5 border text-grey bg-white border-lite_grey ".concat(o," flex items-center px-2 gap-2"),children:[(0,i.jsx)("div",{className:"text-dark_grey text-2xl",children:n}),(0,i.jsx)("input",{type:"text",placeholder:l,className:"outline-none w-full cursor-pointer",value:m,onChange:e=>{const t=e.target.value.toLowerCase();if(u(t),null===c||void 0===c||c(p,t),t){const e=null===a||void 0===a?void 0:a.filter((e=>{var a,n,r,s,i;return(null===(a=e.name)||void 0===a?void 0:a.toLowerCase().includes(t))||(null===(n=e.empID)||void 0===n?void 0:n.toLowerCase().includes(t))||(null===(r=e.JOBCODE)||void 0===r?void 0:r.toLowerCase().includes(t))||(null===(s=e.location)||void 0===s?void 0:s.toLowerCase().includes(t))||(null===(i=e.empBadgeNo)||void 0===i?void 0:i.toLowerCase().includes(t))}));h(e)}else h(a)},onClick:v}),(0,i.jsx)("div",{className:"text-dark_grey text-1xl",children:s})]}),g&&(null===x||void 0===x?void 0:x.length)>0&&(0,i.jsx)("ul",{className:"absolute right-0 overflow-x-hidden mt-2 w-full max-h-36 overflow-y-auto rounded-lg shadow-lg bg-white z-10",children:x.map(((e,a)=>(0,i.jsx)("li",{className:"m-2 p-1 hover:bg-grey hover:text-white cursor-pointer flex justify-between items-center transition-all duration-200",onClick:()=>(e=>{e.empID||e.name?(u("".concat(e.empID," - ").concat(e.name||"")),t(e)):e.JOBCODE?(u(e.JOBCODE),t(e,p)):e.location&&(u(e.location),t(e,p)),f(!1),h([])})(e),children:(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-sm",children:e.empID}),(0,i.jsxs)("span",{className:"text-sm",children:[" ",e.name]}),(0,i.jsx)("span",{className:"text-sm",children:e.JOBCODE}),(0,i.jsx)("span",{className:"text-sm",children:e.location})]})},a)))})]})},Gr=e=>{let{editObject:t,toggleFunction:a,tableHeader:n,editFunction:s,fields:l,fieldObj:o,titleName:d,Position:c}=e;const[p,m]=(0,r.useState)(null),[u,h]=(0,r.useState)(null),[g,f]=(0,r.useState)(null),[v,y]=(0,r.useState)(null),[b,N]=(0,r.useState)([]),[j,D]=(0,r.useState)({fieldObj:o}),w=[{id:1,JOBCODE:"J9001"},{id:2,JOBCODE:"J9002"},{id:3,JOBCODE:"J9009M433"},{id:4,JOBCODE:"J9010M432"},{id:5,JOBCODE:"J9013M432"},{id:6,JOBCODE:"J9014"},{id:7,JOBCODE:"J9026M433"},{id:8,JOBCODE:"J9027M433"},{id:9,JOBCODE:"J9028M432"},{id:10,JOBCODE:"J9032M431"},{id:11,JOBCODE:"J9036M433"},{id:12,JOBCODE:"J9037M433"},{id:13,JOBCODE:"J9038M433"},{id:14,JOBCODE:"J9040M433"},{id:15,JOBCODE:"J9041M433"},{id:16,JOBCODE:"J9043M432"},{id:17,JOBCODE:"J9057M431"},{id:18,JOBCODE:"J9063M431"},{id:19,JOBCODE:"J9064M431"},{id:20,JOBCODE:"J9068M431"},{id:21,JOBCODE:"J9069M433"},{id:22,JOBCODE:"J9070M431"},{id:23,JOBCODE:"J9071M433"},{id:24,JOBCODE:"J9072M431"},{id:25,JOBCODE:"J9073M431"},{id:26,JOBCODE:"J9074M433"},{id:27,JOBCODE:"J9075M433"}],A=[{id:1,location:"Offshore"},{id:2,location:"Head Office"},{id:3,location:"ORMC"},{id:4,location:"SBW"},{id:5,location:"BLNG"},{id:6,location:"Crest Centurion 2"},{id:7,location:"DAY TRIPPING"},{id:8,location:"Icon Aliza"},{id:9,location:"Icon Valiant"},{id:10,location:"Khalifa"},{id:11,location:"Masshor Princess"},{id:12,location:"MV Falgout"},{id:13,location:"Accounts"},{id:14,location:"HR"},{id:15,location:"Purchasing"},{id:16,location:"Corporate"},{id:17,location:"CPT"}];(0,r.useEffect)((()=>{if(t){var e;D(t),console.log(t);const a=(null===t||void 0===t||null===(e=t.jobLocaWhrs)||void 0===e?void 0:e.filter((e=>null!==e&&void 0!==e)))||[];if(console.log("Valid Job Location & Working Hours:",a),a.length>0){const e=a.map(((e,t)=>({id:t+1,JOBCODE:e.JOBCODE,LOCATION:e.LOCATION,WORKINGHRS:e.WORKINGHRS,OVERTIMEHRS:e.OVERTIMEHRS})));e&&R(e)}else R([{id:1}])}}),[t]);const S=(e,t)=>{console.log(t),""===t&&""!==t||R((a=>a.map((a=>a.id===e?(0,x.A)((0,x.A)({},a),{},{JOBCODE:t||null}):a))))},E=(e,t)=>{(""!==t||""===t)&&R((a=>a.map((a=>a.id===e?(0,x.A)((0,x.A)({},a),{},{LOCATION:t||null}):a))))},I=(e,t)=>{R((a=>a.map((a=>a.id===t?(0,x.A)((0,x.A)({},a),{},{JOBCODE:(null===e||void 0===e?void 0:e.JOBCODE)||a.JOBCODE||null}):a))))},C=(e,t)=>{h(e),R((a=>a.map((a=>a.id===t?(0,x.A)((0,x.A)({},a),{},{LOCATION:(null===e||void 0===e?void 0:e.location)||a.location||null}):a))))},[k,R]=(0,r.useState)([{id:1}]),T=(0,r.useCallback)(((e,t,a)=>{R((n=>n.map((n=>n.id===e?(0,x.A)((0,x.A)({},n),{},{WORKINGHRS:"WorkingHrs"===a?t:n.WORKINGHRS,OVERTIMEHRS:"WorkingHrs"!==a||t&&""!==t?"OvertimeHrs"===a?t:n.OVERTIMEHRS:0}):n))))}),[]);(0,r.useEffect)((()=>{const e=e=>{const t=Math.floor(e),a=Math.round(60*(e-t));return"".concat(t,":").concat(a.toString().padStart(2,"0"))},t=(t,a)=>{const n=e=>{let t=0;if(e){let a=e.includes(".")?e.replace(".",":"):e;a.includes(":")||(a="".concat(a,":00"));const[n,r]=a.split(":").map(Number);if(isNaN(n)||isNaN(r))throw new Error("Invalid time format");t=60*n+r}const a=Math.floor(t/60),n=t%60;return"".concat(a,":").concat(n.toString().padStart(2,"0"))},r=(e,t)=>{let a=e.reduce(((e,a)=>{if(console.log(a),a[t]){let n=a[t].includes(".")?a[t].replace(".",":"):a[t];n.includes(":")||(n="".concat(n,":00"));const[r,s]=n.split(":").map(Number);e+=60*r+(s||0)}return e}),0);const n=Math.floor(a/60),r=a%60;return"".concat(n,":").concat(r.toString().padStart(2,"0"))},s=r(k,"WORKINGHRS"),i=r(k,"OVERTIMEHRS");console.log(s," : ",i),D((t=>{const r=parseFloat(null===s||void 0===s?void 0:s.split(":")[0])+parseFloat(null===s||void 0===s?void 0:s.split(":")[1])/60,l=n(null===t||void 0===t?void 0:t.NORMALWORKINGHRSPERDAY),o=parseFloat(null===l||void 0===l?void 0:l.split(":")[0])+parseFloat(null===l||void 0===l?void 0:l.split(":")[1])/60,d=r-o<=0?0:r-o;f(r>o);const c=n(null===t||void 0===t?void 0:t.ADININWORKSENGINEERINGSDNBHD),p=parseFloat(null===c||void 0===c?void 0:c.split(":")[0])+parseFloat(null===c||void 0===c?void 0:c.split(":")[1])/60,m=parseFloat(null===i||void 0===i?void 0:i.split(":")[0])+parseFloat(null===i||void 0===i?void 0:i.split(":")[1])/60;return y(r+m>p&&r+m>p),(0,x.A)((0,x.A)({},t),{},{[a]:s,OT:e(d)})}))};t(0,"HO"===d?"TOTALACTUALHOURS":"WORKINGHOURS")}),[k]),(0,r.useEffect)((()=>{const e=k.reduce(((e,t)=>{let a=t.OVERTIMEHRS||"0:00";a.includes(".")?a=a.replace(".",":"):a.includes(":")||(a="".concat(a,":00"));const[n,r]=a.split(":").map(Number);return e+60*n+r}),0),t=Math.floor(e/60),a=e%60,n="".concat(t,":").concat(a.toString().padStart(2,"0"));console.log(n),e>0&&D((e=>(0,x.A)((0,x.A)({},e),{},{OT:n})))}),[k]);const P=(0,r.useCallback)((()=>{const e=k&&k.map((e=>({JOBCODE:null===e||void 0===e?void 0:e.JOBCODE,LOCATION:null===e||void 0===e?void 0:e.LOCATION,WORKINGHRS:null===e||void 0===e?void 0:e.WORKINGHRS,OVERTIMEHRS:null===e||void 0===e?void 0:e.OVERTIMEHRS}))),t=(0,x.A)((0,x.A)({},j),{},{jobLocaWhrs:e});s(t)}),[k,j]),_=e=>{const{name:t,value:a}=e.target;D((e=>{const n=(0,x.A)((0,x.A)({},e),{},{[t]:a});if("WORKINGHOURS"===t||"TOTALACTUALHOURS"===t){const t=parseInt(a)||0,r=parseInt(e.NORMALWORKINGHRSPERDAY)||0,s=t-r<=0?"0":t-r;return f(t>r),(0,x.A)((0,x.A)({},n),{},{OT:s})}return n}))};return(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 ",onClick:()=>{N([])},children:(0,i.jsxs)("section",{className:"bg-[#FBFBFB] p-5 gap-2 flex flex-col item-center rounded-lg shadow-md border-4 border-[#EBEBEB] h-[600px] w-[900px] overflow-y-auto",children:[(0,i.jsx)("div",{className:"flex justify-end",children:(0,i.jsx)(zr.j55,{className:"text-2xl cursor-pointer",onClick:a})}),(0,i.jsx)("div",{className:"flex justify-center ",children:(0,i.jsx)("img",{className:"size-32 h-12 w-full",src:he.A,alt:"not found"})}),(0,i.jsx)("div",{className:"flex justify-center py-2 ",children:(0,i.jsx)("p",{className:"text-dark_grey text_size_2",children:"Edit Access"})}),null===l||void 0===l?void 0:l.map(((e,t)=>(0,i.jsxs)("div",{className:"grid grid-cols-2 pl-5 gap-5",children:[(0,i.jsx)("p",{className:"text-dark_grey text_size_6 pt-2",children:n[t]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{type:"text",name:e,className:"border border-dark_grey rounded text-dark_grey text-[16px] outline-none w-full py-1 px-3 cursor-auto bg-white",value:j[e]||"",onChange:_,readOnly:t<7}),!0===g&&!1===v&&"BLNG"===d?("WORKINGHOURS"===e||"TOTALACTUALHOURS"===e)&&(0,i.jsx)("span",{className:"text_size_9 mt-2 text-red",children:"Working hours exceed the NWHPD"}):!1===g&&!0===v&&"BLNG"===d?("WORKINGHOURS"===e||"TOTALACTUALHOURS"===e)&&(0,i.jsx)("span",{className:"text_size_9 mt-2 text-red",children:"Working hours + OT exceed the AW & ESB"}):!0===g&&!0===v&&"BLNG"===d?("WORKINGHOURS"===e||"TOTALACTUALHOURS"===e)&&(0,i.jsx)("span",{className:"text_size_9 mt-2 text-red",children:"Working hours + OT exceed the NWHPD, AW & ESB"}):g&&"BLNG"!==d?("WORKINGHOURS"===e||"TOTALACTUALHOURS"===e)&&(0,i.jsx)("span",{className:"text_size_9 mt-2 text-red",children:"Working hours exceed the NWHPD"}):""]})]},t))),"Manager"===c&&(0,i.jsxs)("div",{className:"grid grid-cols-2 pl-5 gap-5",children:[(0,i.jsx)("p",{className:"text-dark_grey text_size_6 pt-2",children:"STATUS"}),(0,i.jsx)("input",{type:"text",className:"border border-dark_grey rounded text-dark_grey text-[16px] outline-none w-full py-1 px-3 cursor-auto bg-white",value:"Pending",readOnly:!0})]}),(0,i.jsxs)("section",{className:"grid grid-cols-1 pl-4 ",children:[(0,i.jsxs)("div",{className:"grid grid-cols-[10fr,10fr,10fr,10fr,0.6fr] gap-0 pt-5",children:[(0,i.jsx)("label",{className:"text_size_6 text-dark_grey ",children:"JOBCODE"}),(0,i.jsx)("label",{className:"text_size_6 text-dark_grey ",children:"LOCATION"}),(0,i.jsx)("label",{className:"text_size_6 text-dark_grey ",children:"WORKING HOURS"}),(0,i.jsx)("label",{className:"text_size_6 text-dark_grey ",children:"OVERTIME HOURS"})]}),k&&k.map(((e,t)=>(0,i.jsxs)("div",{className:"grid grid-cols-[5fr,5fr,5fr,5fr,0fr] gap-4 pt-1 pb-2",children:[(0,i.jsx)("div",{className:"w-fit",children:(0,i.jsx)(Jr,{newFormData:w,placeholder:"Search Job Code",rounded:"rounded",searchResult:I,searchedValue:S,setDrpValue:(null===e||void 0===e?void 0:e.JOBCODE)||null,id:e.id})}),(0,i.jsxs)("div",{className:"w-fit",children:[(0,i.jsx)(Jr,{newFormData:A,placeholder:"Search Location",rounded:"rounded",searchResult:C,setDrpValue:e.LOCATION||null,searchedValue:E,id:e.id}),!e.LOCATION&&(0,i.jsx)("span",{className:"text_size_9 mt-2 text-red",children:"Location must not be empty."})]}),(0,i.jsx)("div",{className:"w-fit ",children:(0,i.jsx)("input",{type:"text",id:"workingHours-".concat(t),value:e.WORKINGHRS||"",onChange:t=>{T(e.id,t.target.value,"WorkingHrs")},placeholder:"Enter Hours",className:"border border-lite_grey rounded text-dark_grey text_size_5 outline-none w-full py-2 px-3 cursor-auto bg-white",readOnly:!e.LOCATION})}),(0,i.jsx)("div",{className:"w-fit",children:(0,i.jsx)("input",{type:"text",id:"OverTimeHours-".concat(t),value:e.OVERTIMEHRS||"",onChange:t=>{T(e.id,t.target.value,"OvertimeHrs")},placeholder:"Enter Overtime ",className:"border border-lite_grey rounded text-dark_grey text_size_5 outline-none w-full py-2 px-3 cursor-auto bg-white",readOnly:!e.LOCATION})}),(0,i.jsx)("div",{className:"pt-2.5",children:0===t?(0,i.jsx)(ia.hkz,{className:"text-xl text-dark_ash cursor-pointer",onClick:()=>{R((e=>{let t=e.length+1;for(;e.some((e=>e.id===t));)t++;const a={id:t};return[...e,a]}))}}):(0,i.jsx)(ia.noF,{className:"text-xl text-dark_ash cursor-pointer",onClick:()=>{(e=>{const t=k.filter((t=>{if(t.id!==e)return t}));R(t)})(e.id)}})})]},t)))]}),(0,i.jsx)("div",{className:" flex justify-center",children:(0,i.jsx)("button",{className:" text-dark_grey text_size_3 rounded bg-[#FEF116] px-9 m-5 py-2",onClick:()=>{P(),a()},children:"Save"})})]})})},$r=e=>{let{toggleSFAMessage:t,setExcelData:a,icons:n,iconColor:r,textColor:s,title:l,message:o,btnText:d,messageTwo:c}=e;return(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,i.jsxs)("div",{className:"relative ",children:[(0,i.jsx)("div",{className:"absolute  left-44 -top-5 text-5xl ".concat(r," z-50 "),children:n}),(0,i.jsx)("div",{className:"border w-[409px] h-[218px]  border-lite_grey rounded shadow-md  bg-white pt-12",children:(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:" flex flex-col items-center gap-5",children:[(0,i.jsx)("p",{className:"text_size_2 ".concat(s),children:l}),(0,i.jsx)("p",{className:" text-dark_grey  text_size_6 ",children:o}),c&&(0,i.jsx)("p",{className:" text-dark_grey  text_size_6 ",children:c}),!c&&(0,i.jsx)("button",{className:" p-2 rounded border-[#FEF116] bg-[#FEF116] text-dark_grey text_size_5 w-52",onClick:()=>{t(null),null===a||void 0===a||a(null)},children:d})]})})})]})})})},Kr=e=>{let{successMess:t,toggleSFAMessage:a,setExcelData:n,userIdentification:r}=e;return(0,i.jsxs)("div",{children:[!0===t&&(0,i.jsx)($r,{toggleSFAMessage:a,setExcelData:n,icons:(0,i.jsx)(y.enS,{}),iconColor:"text-[#2BEE48]",textColor:"text-[#05b01f]",title:"Success!",message:"Data has been successfully ".concat("Manager"===r?"Approved":"Stored"),btnText:"OK"}),!1===t&&(0,i.jsx)($r,{toggleSFAMessage:a,icons:(0,i.jsx)(ta.uDv,{}),iconColor:"text-[#dc2626]",textColor:"text-[#dc2626]",title:"Sorry :(",message:"Something went wrong please try again!!",btnText:"TRY AGAIN"})]})},Qr=(0,ge.D)(),Zr=async e=>{let t=[],a=null;do{const n=await Qr.graphql({query:e,variables:{nextToken:a}}),r=n.data[Object.keys(n.data)[0]].items;t=[...t,...r],a=n.data[Object.keys(n.data)[0]].nextToken}while(a);return t},Xr=async e=>{try{var t;const a=null===(t=localStorage.getItem("userID"))||void 0===t?void 0:t.toUpperCase();console.log(a);const n=async()=>{const[e,t,n]=await Promise.all([Zr(fe.it),Zr(fe.bJ),Zr(fe.ZZ)]),r=e.map((e=>{const a=t.find((t=>t.empID===e.empID)),r=n.find((t=>t.empID===e.empID));return a||r?(0,x.A)((0,x.A)((0,x.A)({},e),a),r):null})).filter((e=>null!==e));return r.filter((e=>e.empID===a&&"Manager"===e.selectType))},r=await n(),s=null===e||void 0===e?void 0:e.filter((e=>r.some((t=>e.assignTo===t.empBadgeNo))));console.log(s);const i=s.filter((e=>null!==e&&void 0!==e));return console.log(i),i}catch(a){console.log("ERROR : ",a)}},es=(0,ge.D)(),ts=e=>{let{toggleFunctionForAssiMana:t,renameKeysFunctionAndSubmit:a}=e;const[n,s]=(0,r.useState)([]),[l,o]=(0,r.useState)({mbadgeNo:"",mName:"",mdepartment:"",mfromDate:"",muntilDate:""}),[d,c]=(0,r.useState)({}),p=(()=>{const[e,t]=(0,r.useState)(null);return(0,r.useEffect)((()=>{async function e(e){let t=[],a=null;do{const n=await es.graphql({query:e,variables:{nextToken:a}}),r=n.data[Object.keys(n.data)[0]].items;t=[...t,...r],a=n.data[Object.keys(n.data)[0]].nextToken}while(a);return t}!async function(){try{const[a,n]=await Promise.all([e(fe.it),e(fe.bJ)]),r=n,s=a.map((e=>{const t=r.find((t=>t.empID===e.empID));return t?(0,x.A)((0,x.A)({},e),t):null})).filter((e=>null!==e));t(s)}catch(a){}}()}),[]),e})(),m=e=>{const{name:t,value:a}=e.target;o((e=>(0,x.A)((0,x.A)({},e),{},{[t]:a}))),c((e=>(0,x.A)((0,x.A)({},e),{},{[t]:""})))};(0,r.useEffect)((()=>{(null===p||void 0===p?void 0:p.length)>0&&s(p)}),[p]);return(0,i.jsx)("section",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,i.jsxs)("div",{className:"bg-white w-[90%] max-w-[500px] rounded-lg shadow-lg p-7 ",onClick:()=>{s([])},children:[(0,i.jsxs)("div",{className:" flex items-center justify-between pb-5 ",children:[(0,i.jsx)("img",{className:"max-w-[220px] w-full",src:he.A,alt:"not found"}),(0,i.jsx)(zr.j55,{className:"text-2xl  text-dark_grey cursor-pointer ",onClick:()=>{t()}})]}),(0,i.jsx)("header",{className:"flex justify-between items-center pb-4 border-b",children:(0,i.jsx)("h2",{className:"text-dark_grey text_size_2",children:"Assign Manager"})}),(0,i.jsx)("main",{className:"mt-4",children:(0,i.jsxs)("form",{className:"grid grid-cols-1 gap-4",children:[(0,i.jsx)("div",{className:"flex-1",children:(0,i.jsx)(Wn,{searchResult:e=>{console.log(e),o({mbadgeNo:(null===e||void 0===e?void 0:e.empBadgeNo)||"",mName:(null===e||void 0===e?void 0:e.name)||"",mdepartment:Array.isArray(null===e||void 0===e?void 0:e.department)&&(null===e||void 0===e?void 0:e.department.length)>0?e.department[e.department.length-1]:""})},newFormData:p,searchIcon2:(0,i.jsx)(y.zfp,{}),placeholder:"Search Employee Id",rounded:"rounded-lg",filteredEmployees:n,setFilteredEmployees:s})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium ",children:"Badge No."}),(0,i.jsx)("input",{type:"text",name:"mbadgeNo",value:l.mbadgeNo||"",onChange:m,className:"mt-1 block w-full border border-dark_grey outline-none rounded text-sm py-1.5 px-3"}),d.mbadgeNo&&(0,i.jsx)("p",{className:"text-red text-xs",children:d.mbadgeNo})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium ",children:"Name"}),(0,i.jsx)("input",{type:"text",name:"mName",value:l.mName||"",onChange:m,className:"mt-1 block w-full border border-dark_grey outline-none rounded text-sm py-1.5 px-3"}),d.mName&&(0,i.jsx)("p",{className:"text-red text-xs",children:d.mName})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium ",children:"Department"}),(0,i.jsx)("input",{type:"text",name:"mdepartment",value:l.mdepartment||"",onChange:m,className:"mt-1 block w-full border border-dark_grey outline-none rounded text-sm py-1.5 px-3"}),d.mdepartment&&(0,i.jsx)("p",{className:"text-red text-xs",children:d.mdepartment})]}),(0,i.jsx)("p",{className:"text-dark_grey text_size_2 ",children:"Timesheet Period:"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-600",children:"From"}),(0,i.jsx)("input",{type:"date",name:"mfromDate",value:l.mfromDate||"",onChange:m,className:"mt-1 block w-full border border-dark_grey outline-none rounded text-sm py-1.5 px-3"}),d.mfromDate&&(0,i.jsx)("p",{className:"text-red text-xs",children:d.mfromDate})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-600",children:"Until"}),(0,i.jsx)("input",{type:"date",name:"muntilDate",value:l.muntilDate||"",onChange:m,className:"mt-1 block w-full border border-dark_grey outline-none rounded text-sm py-1.5 px-3"}),d.muntilDate&&(0,i.jsx)("p",{className:"text-red text-xs",children:d.muntilDate})]})]})]})}),(0,i.jsx)("footer",{className:"flex justify-center mt-6 space-x-3",children:(0,i.jsx)("button",{className:"px-5 py-2 bg-[#FEF116] text_size_5 text-dark_grey rounded",onClick:()=>{const e={};Object.keys(l).forEach((t=>{if(!l[t]){const a={mbadgeNo:"Badge No",mName:"Name",mdepartment:"Department",mfromDate:"From Date",muntilDate:"Until Date"}[t];e[t]="".concat(a," is required.")}})),Object.keys(e).length>0?c(e):(a(l),t())},children:"Send for Approval"})})]})})},as=(e,t)=>{const a=25,[n,s]=(0,r.useState)([]),[i,l]=(0,r.useState)(1),o=(0,r.useCallback)((()=>{try{if(e&&e){const t=i+1,n=i*a,r=n+a,o=e.slice(n,r);s((e=>[...e,...o])),l(t)}}catch(t){console.log(t," : Error occur")}}),[i,e]),d=(0,r.useCallback)((()=>{if(!e||0===e.length)return;const t=e.reduce(((e,t)=>(t.data&&e.push(...t.data),e)),[]),n=i*a,r=n+a;s((e=>[...e,...t.slice(n,r)])),l((e=>e+1))}),[i,e]);(0,r.useEffect)((()=>{"Manager"===t&&"Manager"!==t||e&&e.length>0&&(s(e.slice(0,a)),l(1))}),[e,t]),(0,r.useEffect)((()=>{if("Manager"===t){if(!e||0===e.length)return s([]),void l(1);const t=e.reduce(((e,t)=>(t.data&&e.push(...t.data),e)),[]),n=0,r=i*a;s(t.slice(n,r))}}),[e,t,i]);return{handleScroll:(0,r.useCallback)((e=>{e.target.scrollHeight-e.target.scrollTop<=e.target.clientHeight+5&&o()}),[o,d,t]),visibleData:n,setVisibleData:s}},ns=async e=>{let{getEmail:t,Position:a}=e,n=!1;const r=e=>{if(!e)return"Invalid date";const t=new Date(e);if(isNaN(t.getTime()))return"Invalid date";const a=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();return"".concat(a,"/").concat(n,"/").concat(r)};if(t&&!n)try{var s,i,l,o,d,c;const e=new Date,N=r(null===t||void 0===t||null===(s=t.TimeSheetData)||void 0===s?void 0:s.trade),j=r(null===t||void 0===t||null===(i=t.TimeSheetData)||void 0===i?void 0:i.tradeCode),D=r(e),w="Manager"===a?null===t||void 0===t||null===(l=t.TimeKeeperDetails)||void 0===l?void 0:l.name:null===t||void 0===t||null===(o=t.ManagerDetails)||void 0===o?void 0:o.name,A='"Dear '.concat(w,'" <timesheet_no-reply@adininworks.com>'),S="Manager"===a?null===t||void 0===t||null===(d=t.TimeKeeperDetails)||void 0===d?void 0:d.officialEmail:null===t||void 0===t||null===(c=t.ManagerDetails)||void 0===c?void 0:c.officialEmail,E="https://hr.adininworks.co/login";let I="",C="";var p,m,u,x,h,g,f,v,y,b;if("Manager"===a)I="".concat(null===t||void 0===t||null===(p=t.TimeSheetData)||void 0===p?void 0:p.fileType," Time Sheet Approved"),C="\n            Dear ".concat(null===t||void 0===t||null===(m=t.TimeKeeperDetails)||void 0===m?void 0:m.name,",\n            \n            Your submitted ").concat(null===t||void 0===t||null===(u=t.TimeSheetData)||void 0===u?void 0:u.fileType," timesheet for the period ").concat(N," to ").concat(j," has been approved by ").concat(null===t||void 0===t||null===(x=t.ManagerDetails)||void 0===x?void 0:x.name,".\n            \n            Details:\n            Employee Name: ").concat(null===t||void 0===t||null===(h=t.ManagerDetails)||void 0===h?void 0:h.name,"\n            Approval Date: ").concat(D,"\n\n            Thank you for your prompt submission.\n            \n            Best regards,\n            The Timesheet Management Team\n          ");else I="".concat(null===t||void 0===t||null===(g=t.TimeSheetData)||void 0===g?void 0:g.fileType," Time Sheet Submitted for Approval"),C="\n            Dear ".concat(null===t||void 0===t||null===(f=t.ManagerDetails)||void 0===f?void 0:f.name,",\n            \n            The ").concat(null===t||void 0===t||null===(v=t.TimeSheetData)||void 0===v?void 0:v.fileType," timesheet for ").concat(null===t||void 0===t||null===(y=t.TimeKeeperDetails)||void 0===y?void 0:y.name," has been submitted and is awaiting your approval.\n            \n            Details:\n            Employee Name: ").concat(null===t||void 0===t||null===(b=t.TimeKeeperDetails)||void 0===b?void 0:b.name,"\n            Time Period: From date ").concat(N," Until date ").concat(j,"\n            Date Submitted: ").concat(D,"\n            \n            To review and approve the timesheet, please click the link below:\n            ").concat(E,"\n            \n            Best regards,\n            The Timesheet Management Team\n          ");return n=!0,console.log(I,C,A,S),{subject:I,message:C,fromAddress:A,toAddress:S}}catch(N){console.error("Error sending email:",N)}},rs=e=>{let{toggleForRemarkFunc:t,addRemarks:a,passSelectedData:n}=e;const[s,l]=(0,r.useState)("");return console.log(n),(0,i.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 w-96",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center border-b pb-2",children:[(0,i.jsx)("div",{className:"",children:(0,i.jsx)("img",{className:"size-30 h-12 w-full",src:he.A,alt:"not found"})}),(0,i.jsx)("button",{onClick:()=>{t()},className:"text-dark_grey ",children:"\u2716"})]}),(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsx)("label",{className:"block text_size_5",children:"Add Remark"}),(0,i.jsx)("textarea",{value:s,onChange:e=>l(e.target.value),className:"mt-1 p-2 w-full border rounded-md ",rows:"4",placeholder:"Enter your remark..."})]}),(0,i.jsx)("div",{className:"flex justify-center mt-6",children:(0,i.jsx)("button",{onClick:()=>{if(n){const e=(0,x.A)((0,x.A)({},n),{},{REMARKS:s,status:"Rejected"});a(e)}t()},className:"px-4 py-2 text-dark_grey text_size_5 border bg-primary rounded border-primary",children:"Reject"})})]})})},ss=(0,ge.D)(),is=async e=>{let t=[],a=null;do{const n=await ss.graphql({query:e,variables:{nextToken:a}}),r=n.data[Object.keys(n.data)[0]].items;t=[...t,...r],a=n.data[Object.keys(n.data)[0]].nextToken}while(a);return t},ls=async e=>{try{var t;const a=null===(t=localStorage.getItem("userID"))||void 0===t?void 0:t.toUpperCase();console.log(a);const n=async()=>{const[e,t]=await Promise.all([is(fe.it),is(fe.ZZ)]),n=e.map((e=>{const a=t.find((t=>t.empID===e.empID));return a?(0,x.A)((0,x.A)({},e),a):null})).filter((e=>null!==e));return n.filter((e=>e.empID===a&&"Manager"!==e.selectType))},r=await n();console.log(r),console.log(e);const s=null===e||void 0===e?void 0:e.filter((e=>r.some((t=>e.assignBy===t.empID))));console.log(s);const i=s.filter((e=>null!==e&&void 0!==e));return console.log(i),i}catch(a){console.log("ERROR : ",a)}},os=["sapNo"],ds=(0,ge.D)(),cs=e=>{var t,a,n;let{excelData:s,returnedTHeader:l,Position:o,convertedStringToArrayObj:d,titleName:c,setExcelData:p,fileName:m,showRejectedItemTable:u}=e;const h=null===(t=localStorage.getItem("userID"))||void 0===t?void 0:t.toUpperCase();console.log(d);const[g,f]=(0,r.useState)(!1),[v,b]=(0,r.useState)(null),[N,j]=(0,r.useState)(null),[D,w]=(0,r.useState)(null),[A,S]=(0,r.useState)(),[E,I]=(0,r.useState)(!1),[C,k]=(0,r.useState)(!0),[R,T]=(0,r.useState)(""),[P,_]=(0,r.useState)(null),[O,L]=(0,r.useState)(!1),[F,M]=(0,r.useState)(null),[q,U]=(0,r.useState)(null),[B,H]=(0,r.useState)(null),[W,Y]=(0,r.useState)([]),[V,z]=(0,r.useState)([]),[J,G]=(0,r.useState)(null),[$,K]=(0,r.useState)(null),{handleScroll:Q,visibleData:Z,setVisibleData:X}=as(v,"TimeKeeper"),[ee,te]=(0,r.useState)(null),[ae,ne]=(0,r.useState)({}),[re,se]=(0,r.useState)({}),ie=async e=>{try{var t,a;const n=await ds.graphql({query:fe.it}),r=null===n||void 0===n||null===(t=n.data)||void 0===t||null===(a=t.listEmpPersonalInfos)||void 0===a?void 0:a.items;if(r&&e){const t=r.find((t=>t.empBadgeNo===e.assignTo)),a=r.find((t=>t.empID===e.assignBy)),n={ManagerDetails:t||null,TimeKeeperDetails:a||null,TimeSheetData:e};return K(n),n}}catch(n){console.error("Error fetching data from GraphQL:",n.message)}return null};(0,r.useEffect)((()=>{try{if(s){const e=async()=>{try{const t=new Promise(((e,t)=>{s?e(s):setTimeout((()=>{t("No data found after waiting.")}),5e3)})),a=await t;async function n(e){let t=[],a=null;do{const n=await ds.graphql({query:e,variables:{nextToken:a}}),r=n.data[Object.keys(n.data)[0]].items;t=[...t,...r],a=n.data[Object.keys(n.data)[0]].nextToken}while(a);return t}(async()=>{try{const[e,t]=await Promise.all([n(fe.it),n(fe.bJ)]),r=e,s=t.map((e=>{let{sapNo:t}=e;return(0,Hr.A)(e,os)})),i=r.map((e=>{const t=s.find((t=>(null===t||void 0===t?void 0:t.empID)===(null===e||void 0===e?void 0:e.empID)));return t?(0,x.A)((0,x.A)({},e),t):null})).filter((e=>null!==e));console.log(i);const l=a.map((e=>{const t=i.find((t=>(null===t||void 0===t?void 0:t.sapNo)==(null===e||void 0===e?void 0:e.NO)));return console.log(t),(0,x.A)((0,x.A)({},e),{},{NORMALWORKINGHRSPERDAY:t?t.workHrs[t.workHrs.length-1]:null})}));console.log(l),b(l),j(l)}catch(e){console.error("Error fetching work info:",e.message)}})()}catch(e){}};e()}}catch(e){console.log("Error : ",e)}}),[s]),(0,r.useEffect)((()=>{const e=localStorage.getItem("userType");"Manager"===e?T("Manager"):"Manager"!==e&&T("TimeKeeper")}),[]);const le=e=>{if(e&&e.length>0){w(!0);const t=null===e||void 0===e?void 0:e.map((e=>{let t=[];try{Array.isArray(e.empWorkInfo)&&(t=e.empWorkInfo.map((e=>"string"===typeof e?JSON.parse(e):e)))}catch(a){console.error("Error parsing empWorkInfo for ID:",e.id,a)}return{id:e.id,fileName:e.fileName,NAME:e.empName||"",NO:e.fidNo||"",LOCATION:e.companyName||"",DATE:e.date||"",TOTALHOURS:e.totalNT||0,TOTALHOURS2:e.totalOT||0,TOTALHOURS3:e.totalNTOT||0,WORKINGHOURS:e.actualWorkHrs||0,OT:(null===e||void 0===e?void 0:e.otTime)||0,NORMALWORKINGHRSPERDAY:(null===e||void 0===e?void 0:e.normalWorkHrs)||0,jobLocaWhrs:t.flat()||[],fileType:e.fileType||"",timeKeeper:e.assignBy||"",manager:e.assignTo||"",REMARKS:e.remarks||"",status:e.status||""}}));b(t),j(t)}};(0,r.useEffect)((()=>{if(l&&(null===l||void 0===l?void 0:l.length)>0)(async()=>{const e=l&&l.map((e=>{const t={};for(const n in e)t[n]="string"!==typeof(a=e[n])?a:a.replace(/[^a-zA-Z0-9]/g,"");var a;return t})),t=["NAME","No","Company","TOTALHOURS"],a=await new Promise((a=>{a(e&&e.every((e=>t.every((t=>Object.values(e).map((e=>"string"===typeof e?e.toUpperCase():e)).includes(t.toUpperCase()))))))}));f(!0),console.log(a),H(a),w(a),k(!1)})();else if(l||"Rejected"===u)if(l||"Rejected"!==u)w(!1),k(!1);else{(async()=>{w(!0);try{const e=new Promise(((e,t)=>{d?e(d):setTimeout((()=>{t("No data found after waiting.")}),5e3)})),t=await e;if("Manager"!==R){const e=await ls(t);le(e)}}catch(e){}})()}else{(async()=>{w(!0);try{const e=new Promise(((e,t)=>{d?e(d):setTimeout((()=>{t("No data found after waiting.")}),5e3)})),t=await e;if("Manager"===R){const e=await Xr(t);le(e)}}catch(e){}})()}}),[l,d,R,u]);const oe=()=>{I(!E)},de=(0,r.useCallback)((async(e,t)=>{_(e),U(!0===e&&t?t:null)}),[]),ce=()=>{L(!O)},pe=Vr(c),me=async e=>{if("Manager"!==R&&"Rejected"!==u){const t=async e=>{let t=0,a=!1;for(const s of e)try{var n;const e=await ds.graphql({query:ve,variables:{input:s}});if(null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.createTimeSheet){console.log("TimeSheet created successfully:",e.data.createTimeSheet);const n=e.data.createTimeSheet;if(t++,t===v.length&&(te(!1),X([]),b(null)),!a){de(!0,n),te(!0);const e=await ie(n);if(console.log(e),e){const t=await ns({getEmail:e,Position:o});if(t){const{subject:e,message:a,fromAddress:n,toAddress:r}=t;await Me(e,a,n,r)}else console.error("Notification returned undefined!")}else console.error("MergeTableForNotification returned undefined!");a=!0}X([]),b(null)}}catch(r){console.error("Error creating TimeSheet:",r),de(!1)}};t((v&&v.map((e=>({fileName:m,empName:e.NAME||"",fidNo:e.NO||"",companyName:e.LOCATION||"",date:e.DATE||"",totalNT:e.TOTALHOURS||"",totalOT:e.TOTALHOURS2||"",totalNTOT:e.TOTALHOURS3||"",normalWorkHrs:(null===e||void 0===e?void 0:e.NORMALWORKINGHRSPERDAY)||0,actualWorkHrs:e.WORKINGHOURS||"",otTime:e.OT||"",remarks:e.REMARKS||"",empWorkInfo:[JSON.stringify(null===e||void 0===e?void 0:e.jobLocaWhrs)]||0,companyName:null===e||void 0===e?void 0:e.LOCATION,fileType:"Offshore",status:"Pending"})))).map((t=>(0,x.A)((0,x.A)({},t),{},{assignTo:e.mbadgeNo,assignBy:h,trade:e.mfromDate,tradeCode:e.muntilDate}))))}else if("Manager"===R){const e=[...W,...V],t=null===e||void 0===e?void 0:e.filter(((e,t,a)=>t===a.findIndex((t=>t.id===e.id)))),a=async e=>{let t=!1;for(const n of e)try{const e=await ds.graphql({query:ye,variables:{input:n}});if(e.data.updateTimeSheet){const a=e.data.updateTimeSheet;if(console.log(e.data.updateTimeSheet),!t){de(!0,a);const e=await ie(a);if(e){const t=await ns({getEmail:e,Position:o});if(t){const{subject:e,message:a,fromAddress:n,toAddress:r}=t;console.log(e,a,n,r),await Me(e,a,n,r)}else console.error("Notification returned undefined!")}else console.error("MergeTableForNotification returned undefined!");t=!0}}}catch(a){console.error("Error creating TimeSheet:",a),de(!1)}};a(t&&t.length>0?t.map((e=>({id:e.id,empName:e.NAME||"",fidNo:e.NO||"",companyName:e.LOCATION||"",date:e.DATE||"",totalNT:e.TOTALHOURS||"",totalOT:e.TOTALHOURS2||"",totalNTOT:e.TOTALHOURS3||"",normalWorkHrs:(null===e||void 0===e?void 0:e.NORMALWORKINGHRSPERDAY)||0,actualWorkHrs:e.WORKINGHOURS||"",otTime:e.OT||"",remarks:e.REMARKS||"",empWorkInfo:[JSON.stringify(null===e||void 0===e?void 0:e.jobLocaWhrs)]||0,fileType:"Offshore",status:e.status}))):[])}else if("Manager"!==R&&"Rejected"===u){const e=async e=>{let t=!1;for(const s of e)try{var a;const e=await ds.graphql({query:ye,variables:{input:s}});if(null!==e&&void 0!==e&&null!==(a=e.data)&&void 0!==a&&a.updateTimeSheet){var n;console.log("TimeSheet created successfully:",e.data.updateTimeSheet);const a=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.updateTimeSheet;if(!t){de(!0,a);const e=await ie(a);if(e){const t=await ns({getEmail:e,Position:o});if(t){const{subject:e,message:a,fromAddress:n,toAddress:r}=t;await Me(e,a,n,r)}else console.error("Notification returned undefined!")}else console.error("MergeTableForNotification returned undefined!");t=!0}X([]),b(null)}}catch(r){}};e(v&&v.length>0?v.map((e=>({id:e.id,empName:e.NAME||"",fidNo:e.NO||"",companyName:e.LOCATION||"",date:e.DATE||"",totalNT:e.TOTALHOURS||"",totalOT:e.TOTALHOURS2||"",totalNTOT:e.TOTALHOURS3||"",normalWorkHrs:(null===e||void 0===e?void 0:e.NORMALWORKINGHRSPERDAY)||0,actualWorkHrs:e.WORKINGHOURS||"",otTime:e.OT||"",remarks:e.REMARKS||"",empWorkInfo:[JSON.stringify(null===e||void 0===e?void 0:e.jobLocaWhrs)]||0,fileType:"Offshore",status:"Pending"}))):[])}},ue=()=>{M(!F)},xe=(e,t)=>{console.log(t),"Approved"===t?(console.log(e),Y((t=>[...t.filter((t=>t.id!==e.id)),(0,x.A)((0,x.A)({},e),{},{status:"Approved"})]))):"Rejected"===t&&(G(e),console.log(e),z((t=>[...t.filter((t=>t.id!==e.id)),e])))},he=(e,t)=>{if("Approved"===t){const t=W.filter((t=>t.id!==e.id));Y(t)}else if("Rejected"===t){const t=V.filter((t=>t.id!==e.id));z(t)}},ge=(0,r.useCallback)((()=>{const e=[...W,...V],t=null===v||void 0===v?void 0:v.filter((t=>!e.some((e=>t.id===e.id))));b(t),Y([]),z([])}),[W,V,v]);console.log(W," : ",V);const be=e=>{try{const[t,a,n]=e.split("/");return"".concat(a,"/").concat(t,"/").concat(n)}catch(t){}};return(0,i.jsxs)("div",{children:[D?(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"flex justify-end w-full mr-7",children:(0,i.jsx)(Wr,{allEmpDetails:v,searchResult:async e=>{try{const t=await e;b(t)}catch(t){console.error("Error fetching user data:",t)}},secondaryData:N,Position:o,placeholder:"Sap No."})}),(0,i.jsx)("div",{className:"table-container ",onScroll:Q,children:(0,i.jsxs)("table",{className:"styled-table w-[100%]",children:[(0,i.jsx)("thead",{className:"sticky-header border",children:(0,i.jsxs)("tr",{className:"text_size_5 ",children:[(0,i.jsx)("td",{className:"px-5 flex-1 text_size_7",children:"S No."}),null!==(a=null===pe||void 0===pe?void 0:pe.tableHeader.map(((e,t)=>(0,i.jsx)("td",{className:"px-5 flex-1 text_size_7",children:e},t))))&&void 0!==a?a:(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"100%",className:"text-center",children:"No headers available"})}),!B&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{className:"".concat("Rejected"===u?"hidden":"px-5 flex-1 text_size_7"),children:"STATUS"}),(0,i.jsx)("td",{className:"".concat("Rejected"===u?"hidden":"px-5 flex-1 text_size_7"),children:"APPROVE"}),(0,i.jsx)("td",{className:"".concat("Rejected"===u?"hidden":"px-5 flex-1 text_size_7"),children:"REJECT"})]})]})}),(0,i.jsx)("tbody",{children:Z&&Z.length>0?Z.map(((e,t)=>{const a=(e,a)=>{const n="Pending"===(null===e||void 0===e?void 0:e.status);return(0,i.jsxs)("tr",{className:"text-dark_grey h-[40px] text-sm rounded-sm shadow-md border-b-2 border-[#CECECE] bg-white",onClick:()=>{oe(),(e=>{S(e)})(e)},children:[(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:t+1}),(0,i.jsx)("td",{className:"text-start px-4 flex-1",children:null===e||void 0===e?void 0:e.NAME}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:null===e||void 0===e?void 0:e.NO}),(0,i.jsx)("td",{className:"text-start px-4 flex-1",children:null===e||void 0===e?void 0:e.LOCATION}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:be(null===e||void 0===e?void 0:e.DATE)}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.TOTALHOURS)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.TOTALHOURS2)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.TOTALHOURS3)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.NORMALWORKINGHRSPERDAY)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.WORKINGHOURS)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.OT)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:null===e||void 0===e?void 0:e.REMARKS}),n&&(0,i.jsxs)(r.Fragment,{children:[(0,i.jsx)("td",{className:"text-center px-4 flex-1 ".concat("Approved"===(null===e||void 0===e?void 0:e.status)?"text-[#0CB100]":"text_size_8"),children:null===e||void 0===e?void 0:e.status}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{className:"h-4 w-4",type:"checkbox",checked:ae[e.id]||!1,onClick:e=>e.stopPropagation(),onChange:t=>{console.log(e),t.target.checked?(ne((a=>(0,x.A)((0,x.A)({},a),{},{[e.id]:t.target.checked}))),xe(e,"Approved")):(he(e,"Approved"),ne((t=>(0,x.A)((0,x.A)({},t),{},{[e.id]:!1}))))}})}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{className:"h-4 w-4",type:"checkbox",checked:re[e.id]||!1,onClick:e=>e.stopPropagation(),onChange:t=>{t.target.checked?(se((a=>(0,x.A)((0,x.A)({},a),{},{[e.id]:t.target.checked}))),xe(e,"Rejected"),ue()):(he(e,"Rejected"),se((t=>(0,x.A)((0,x.A)({},t),{},{[e.id]:!1}))))}})})]})]},t+1)};return("Manager"===R||"Manager"!==R)&&a(e)})):null!==(n=(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"100%",className:"px-6 py-6 text-center text-dark_ash text_size_5 bg-white",children:(0,i.jsx)("p",{className:"px-6 py-6",children:"Please wait few seconds."})})}))&&void 0!==n?n:(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"100%",className:"px-6 py-6 text-center text-dark_ash text_size_5 bg-white",children:(0,i.jsx)("p",{className:"px-6 py-6",children:"Please wait few seconds."})})})})]})}),(0,i.jsx)("div",{className:"flex justify-center my-5 gap-5 py-3".concat(Z&&Z.length>0?"":"hidden"),children:(0,i.jsx)("button",{className:"rounded px-3 py-2 ".concat("w-52"," bg-[#FEF116] text_size_5 text-dark_grey mb-10"),onClick:()=>{"Manager"!==R?ce():"Manager"===R&&(me(),ge())},children:"Manager"===R?"Finalize and Submit":"Assign Manager"})})]}):"",!1===D&&!0===g&&(0,i.jsx)(Yr,{setClosePopup:f}),!0===E&&(0,i.jsx)(Gr,{toggleFunction:oe,editObject:A,fieldObj:(null===pe||void 0===pe?void 0:pe.fieldObj)||{},fields:(null===pe||void 0===pe?void 0:pe.fields)||[],tableHeader:(null===pe||void 0===pe?void 0:pe.tableHeader)||[],editFunction:e=>{try{var t;const a=Array.isArray(null===(t=v[0])||void 0===t?void 0:t.data)?((e,t)=>e.map((e=>({id:e.id,data:e.data.map((e=>e.NO===t.NO?t:e))}))))(v,e):((e,t)=>e.map((e=>e.NO===t.NO?t:e)))(v,e);console.log(a);const n=null===a||void 0===a?void 0:a.map((e=>{var t,a;(console.log(e),Array.isArray(null===e||void 0===e?void 0:e.jobLocaWhrs)&&(null===e||void 0===e||null===(t=e.jobLocaWhrs)||void 0===t?void 0:t.length)>0)?e.LOCATION=null===e||void 0===e||null===(a=e.jobLocaWhrs[0])||void 0===a?void 0:a.LOCATION:e.LOCATION=null;return e}));b(n)}catch(a){console.log(a)}},titleName:c,Position:o}),!0===ee?(0,i.jsx)($r,{toggleSFAMessage:de,icons:(0,i.jsx)(y.enS,{}),iconColor:"text-[#2BEE48]",textColor:"text-[#05b01f]",title:"Processing...",message:"Data is being saved, ",messageTwo:"this might take a few seconds..."}):!1===ee?(0,i.jsx)(Kr,{successMess:P,toggleSFAMessage:de,setExcelData:p,userIdentification:R}):"",!0===O&&(0,i.jsx)(ts,{toggleFunctionForAssiMana:ce,renameKeysFunctionAndSubmit:me}),!0===F&&(0,i.jsx)(rs,{toggleForRemarkFunc:ue,addRemarks:e=>{console.log(e);const t=V.map((t=>t.id===e.id?(console.log(e),(0,x.A)((0,x.A)({},e),{},{REMARKS:e.REMARKS})):t));z(t)},passSelectedData:J})]})},ps=(0,ge.D)(),ms=async e=>{console.log("Response Data:",e);try{const t=await(async e=>{let t=[],a=null;do{const n=await ps.graphql({query:e,variables:{nextToken:a}}),r=n.data[Object.keys(n.data)[0]].items;t=[...t,...r],a=n.data[Object.keys(n.data)[0]].nextToken}while(a);return t})(fe.it);if(t&&e){const a=t.find((t=>t.empBadgeNo===e.assignTo)),n=t.find((t=>t.empID===e.assignBy)),r={ManagerDetails:a||null,TimeKeeperDetails:n||null,TimeSheetData:e};return console.log("Email Info:",r),r}}catch(t){console.error("Error fetching data from GraphQL:",t.message)}return null},us=["sapNo"],xs=(0,ge.D)(),hs=e=>{var t,a;let{excelData:n,returnedTHeader:s,convertedStringToArrayObj:l,titleName:o,setExcelData:d,Position:c,fileName:p,showRejectedItemTable:m}=e;const u=null===(t=localStorage.getItem("userID"))||void 0===t?void 0:t.toUpperCase(),[h,g]=(0,r.useState)(!1),[f,v]=(0,r.useState)(null),[b,N]=(0,r.useState)(null),[j,D]=(0,r.useState)(null),[w,A]=(0,r.useState)(),[S,E]=(0,r.useState)(!1),[I,C]=(0,r.useState)(!1),[k,R]=(0,r.useState)(""),[T,P]=(0,r.useState)(null),[_,O]=(0,r.useState)(null),[L,F]=(0,r.useState)(null),[M,q]=(0,r.useState)(null),[U,B]=(0,r.useState)([]),[H,W]=(0,r.useState)([]),[Y,V]=(0,r.useState)(null),[z,J]=(0,r.useState)({}),[G,$]=(0,r.useState)({}),{handleScroll:K,visibleData:Q,setVisibleData:Z}=as(f,"TimeKeeper"),[X,ee]=(0,r.useState)(null);(0,r.useEffect)((()=>{try{if(n){const e=async()=>{try{const t=new Promise(((e,t)=>{n?e(n):setTimeout((()=>{t("No data found after waiting.")}),5e3)})),a=await t;async function r(e){let t=[],a=null;do{const n=await xs.graphql({query:e,variables:{nextToken:a}}),r=n.data[Object.keys(n.data)[0]].items;t=[...t,...r],a=n.data[Object.keys(n.data)[0]].nextToken}while(a);return t}(async()=>{try{const[e,t]=await Promise.all([r(fe.it),r(fe.bJ)]),n=e,s=t.map((e=>{let{sapNo:t}=e;return(0,Hr.A)(e,us)})),i=n.map((e=>{const t=s.find((t=>(null===t||void 0===t?void 0:t.empID)===(null===e||void 0===e?void 0:e.empID)));return t?(0,x.A)((0,x.A)({},e),t):null})).filter((e=>null!==e));console.log(a);const l=a.map((e=>{const t=i.find((t=>(null===t||void 0===t?void 0:t.sapNo)==(null===e||void 0===e?void 0:e.FID)));return(0,x.A)((0,x.A)({},e),{},{NORMALWORKINGHRSPERDAY:t?null===t||void 0===t?void 0:t.workHrs[t.workHrs.length-1]:null})}));console.log(l),v(l),N(l)}catch(e){console.error("Error fetching work info:",e.message)}})()}catch(e){}};e()}}catch(e){console.log("Error : ",e)}}),[n]),(0,r.useEffect)((()=>{const e=localStorage.getItem("userType");"Manager"===e?R("Manager"):"TimeKeeper"===e&&R("TimeKeeper")}),[l]);const te=e=>{if(e&&e.length>0){D(!0);const t=e&&e.map((e=>{var t,a;let n=[];try{Array.isArray(e.empWorkInfo)&&(n=e.empWorkInfo.map((e=>"string"===typeof e?JSON.parse(e):e)))}catch(r){console.error("Error parsing empWorkInfo for ID:",e.id,r)}return{id:e.id,fileName:p,FID:e.fidNo||0,NAMEFLAST:e.empName||"",ENTRANCEDATEUSED:e.date||"",ENTRANCEDATETIME:(null===(t=e.inTime)||void 0===t?void 0:t.replace(/[\[\]]/g,""))||"",EXITDATETIME:(null===(a=e.outTime)||void 0===a?void 0:a.replace(/[\[\]]/g,""))||"",AVGDAILYTOTALBYDAY:e.avgDailyTD||"",AHIGHLIGHTDAILYTOTALBYGROUP:e.totalHrs||"",ADININWORKSENGINEERINGSDNBHD:e.aweSDN||"",WORKINGHOURS:e.actualWorkHrs||0,OT:e.otTime||0,NORMALWORKINGHRSPERDAY:(null===e||void 0===e?void 0:e.normalWorkHrs)||0,jobLocaWhrs:n.flat()||[],fileType:e.fileType,timeKeeper:e.assignBy,manager:e.assignTo,REMARKS:e.remarks||"",status:e.status||""}}));v(t),N(t)}};(0,r.useEffect)((()=>{if(s&&(null===s||void 0===s?void 0:s.length)>0)(async()=>{const e=s.map((e=>{const t={};for(const n in e)t[n]="string"!==typeof(a=e[n])?a:a.replace(/[^a-zA-Z0-9]/g,"");var a;return t})),t=["ADININWORKSENGINEERINGSDNBHD","FID","NameFLAST","EntranceDateUsed","EntranceDatetime","ExitDatetime","DayDifference","AvgDailyTotalByDay","AHighlightDailyTotalByGroup"],a=await new Promise((a=>{a(e&&e.every((e=>t.every((t=>Object.values(e).map((e=>"string"===typeof e?e.toUpperCase():e)).includes(t.toUpperCase()))))))}));g(!0),F(a),D(a)})();else if(s||"Rejected"===m)if(s||"Rejected"!==m)D(!1);else{(async()=>{D(!0);try{const e=new Promise(((e,t)=>{l?e(l):setTimeout((()=>{t("No data found after waiting.")}),5e3)})),t=await e;if("Manager"!==k){const e=await ls(t);te(e)}}catch(e){}})()}else{(async()=>{D(!0);try{const e=new Promise(((e,t)=>{l?e(l):setTimeout((()=>{t("No data found after waiting.")}),5e3)})),t=await e;if("Manager"===k){const e=await Xr(t);te(e)}}catch(e){}})()}}),[s,l,k,m]);const ae=()=>{E(!S)},ne=async(e,t)=>{P(e),!0===e&&t&&O(t)},re=()=>{C(!I)},se=Vr(o),ie=async e=>{if("Manager"!==k&&"Rejected"!==m){const t=async e=>{let t=0,a=!1;for(const s of e)try{var n;const e=await xs.graphql({query:ve,variables:{input:s}});if(null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.createTimeSheet){console.log("TimeSheet created successfully:",e.data.createTimeSheet);const n=e.data.createTimeSheet;if(t++,t===f.length&&(ee(!1),Z([]),v(null)),!a){ne(!0,n),ee(!0);const e=await ms(n);if(e){const t=await ns({getEmail:e,Position:c});if(t){const{subject:e,message:a,fromAddress:n,toAddress:r}=t;await Me(e,a,n,r)}else console.error("Notification returned undefined!")}else console.error("MergeTableForNotification returned undefined!");Z([]),v(null),a=!0}}}catch(r){console.error("Error creating TimeSheet:",r),ne(!1)}};t((f&&f.map(((e,t)=>({fileName:p,fidNo:(null===e||void 0===e?void 0:e.FID)||0,empName:(null===e||void 0===e?void 0:e.NAMEFLAST)||"",date:(null===e||void 0===e?void 0:e.ENTRANCEDATEUSED)||"",inTime:(null===e||void 0===e?void 0:e.ENTRANCEDATETIME)||"",outTime:(null===e||void 0===e?void 0:e.EXITDATETIME)||"",avgDailyTD:(null===e||void 0===e?void 0:e.AVGDAILYTOTALBYDAY)||"",totalHrs:(null===e||void 0===e?void 0:e.AHIGHLIGHTDAILYTOTALBYGROUP)||"",aweSDN:(null===e||void 0===e?void 0:e.ADININWORKSENGINEERINGSDNBHD)||"",normalWorkHrs:(null===e||void 0===e?void 0:e.NORMALWORKINGHRSPERDAY)||0,actualWorkHrs:(null===e||void 0===e?void 0:e.WORKINGHOURS)||0,otTime:(null===e||void 0===e?void 0:e.OT)||0,empWorkInfo:[JSON.stringify(null===e||void 0===e?void 0:e.jobLocaWhrs)]||0,fileType:"BLNG",status:"Pending",remarks:(null===e||void 0===e?void 0:e.REMARKS)||"",companyName:null===e||void 0===e?void 0:e.LOCATION})))).map((t=>(0,x.A)((0,x.A)({},t),{},{assignTo:e.mbadgeNo,assignBy:u,trade:e.mfromDate,tradeCode:e.muntilDate}))))}else if("Manager"===k){const e=[...U,...H],t=null===e||void 0===e?void 0:e.filter(((e,t,a)=>t===a.findIndex((t=>t.id===e.id)))),a=async e=>{let t=!1;for(const r of e)try{var a;const e=await xs.graphql({query:ye,variables:{input:r}});if(null!==e&&void 0!==e&&null!==(a=e.data)&&void 0!==a&&a.updateTimeSheet){console.log("TimeSheet Updated successfully:",e.data.updateTimeSheet);const a=e.data.updateTimeSheet;if(!t){ne(!0,a);const e=await ms(a);if(e){const t=await ns({getEmail:e,Position:c});if(t){const{subject:e,message:a,fromAddress:n,toAddress:r}=t;await Me(e,a,n,r)}else console.error("Notification returned undefined!")}else console.error("MergeTableForNotification returned undefined!");t=!0}}}catch(n){console.error("Error creating TimeSheet:",n),ne(!1)}};a(t&&t.length>0?t.map((e=>({id:e.id,fidNo:(null===e||void 0===e?void 0:e.FID)||0,empName:(null===e||void 0===e?void 0:e.NAMEFLAST)||"",date:(null===e||void 0===e?void 0:e.ENTRANCEDATEUSED)||"",inTime:(null===e||void 0===e?void 0:e.ENTRANCEDATETIME)||"",outTime:(null===e||void 0===e?void 0:e.EXITDATETIME)||"",avgDailyTD:(null===e||void 0===e?void 0:e.AVGDAILYTOTALBYDAY)||"",totalHrs:(null===e||void 0===e?void 0:e.AHIGHLIGHTDAILYTOTALBYGROUP)||"",aweSDN:(null===e||void 0===e?void 0:e.ADININWORKSENGINEERINGSDNBHD)||"",normalWorkHrs:(null===e||void 0===e?void 0:e.NORMALWORKINGHRSPERDAY)||0,actualWorkHrs:(null===e||void 0===e?void 0:e.WORKINGHOURS)||0,otTime:(null===e||void 0===e?void 0:e.OT)||0,empWorkInfo:[JSON.stringify(null===e||void 0===e?void 0:e.jobLocaWhrs)]||0,fileType:"BLNG",status:e.status,remarks:(null===e||void 0===e?void 0:e.REMARKS)||""}))):[])}else if("Manager"!==k&&"Rejected"===m){const e=async e=>{let t=!1;for(const r of e)try{var a;const e=await xs.graphql({query:ye,variables:{input:r}});if(null!==e&&void 0!==e&&null!==(a=e.data)&&void 0!==a&&a.updateTimeSheet){console.log("TimeSheet created successfully:",e.data.updateTimeSheet);const a=e.data.updateTimeSheet;if(!t){ne(!0,a);const e=await ms(a);if(e){const t=await ns({getEmail:e,Position:c});if(t){const{subject:e,message:a,fromAddress:n,toAddress:r}=t;await Me(e,a,n,r)}else console.error("Notification returned undefined!")}else console.error("MergeTableForNotification returned undefined!");Z([]),v(null),t=!0}}}catch(n){}};e(f&&f.length>0?f.map((e=>({id:e.id,fidNo:(null===e||void 0===e?void 0:e.FID)||0,empName:(null===e||void 0===e?void 0:e.NAMEFLAST)||"",date:(null===e||void 0===e?void 0:e.ENTRANCEDATEUSED)||"",inTime:(null===e||void 0===e?void 0:e.ENTRANCEDATETIME)||"",outTime:(null===e||void 0===e?void 0:e.EXITDATETIME)||"",avgDailyTD:(null===e||void 0===e?void 0:e.AVGDAILYTOTALBYDAY)||"",totalHrs:(null===e||void 0===e?void 0:e.AHIGHLIGHTDAILYTOTALBYGROUP)||"",aweSDN:(null===e||void 0===e?void 0:e.ADININWORKSENGINEERINGSDNBHD)||"",normalWorkHrs:(null===e||void 0===e?void 0:e.NORMALWORKINGHRSPERDAY)||0,actualWorkHrs:(null===e||void 0===e?void 0:e.WORKINGHOURS)||0,otTime:(null===e||void 0===e?void 0:e.OT)||0,empWorkInfo:[JSON.stringify(null===e||void 0===e?void 0:e.jobLocaWhrs)]||0,fileType:"BLNG",status:"Pending",remarks:(null===e||void 0===e?void 0:e.REMARKS)||""}))):[])}},le=()=>{q(!M)},oe=(e,t)=>{"Approved"===t?B((t=>[...t.filter((t=>t.id!==e.id)),(0,x.A)((0,x.A)({},e),{},{status:"Approved"})])):"Rejected"===t&&(W((t=>[...t.filter((t=>t.id!==e.id)),e])),V(e))},de=(e,t)=>{if("Approved"===t){const t=U.filter((t=>t.id!==e.id));B(t)}else if("Rejected"===t){const t=H.filter((t=>t.id!==e.id));W(t)}},ce=(0,r.useCallback)((()=>{const e=[...U,...H],t=null===f||void 0===f?void 0:f.filter((t=>!e.some((e=>t.id===e.id))));v(t)}),[U,H,f]),pe=e=>{const[t,a,n]=e.split("/");return"".concat(a,"/").concat(t,"/").concat(n)},me=e=>{const t=String(e),a=new Date(t),n=a.getDate(),r=a.getMonth()+1,s=a.getFullYear(),i=(null===t||void 0===t?void 0:t.split(" ")[1])+" "+(null===t||void 0===t?void 0:t.split(" ")[2]);return"".concat(n,"/").concat(r,"/").concat(s," ").concat(i)};return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{children:!0===j?(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"flex justify-end w-full mr-7 ",children:(0,i.jsx)(Wr,{allEmpDetails:f,searchResult:async e=>{try{const t=await e;v(t)}catch(t){console.error("Error fetching user data:",t)}},secondaryData:b,Position:c,placeholder:"FID"})}),(0,i.jsx)("div",{className:"table-container",onScroll:K,children:(0,i.jsxs)("table",{className:"styled-table ",children:[(0,i.jsx)("thead",{className:"sticky-header w-[100%]",children:(0,i.jsxs)("tr",{className:"text_size_5",children:[(0,i.jsx)("td",{className:"px-4 text-center text_size_7",children:"S No."}),null!==(a=null===se||void 0===se?void 0:se.tableHeader.map(((e,t)=>(0,i.jsx)("td",{className:"px-4 flex-1 text_size_7",children:e},t))))&&void 0!==a?a:(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"100%",className:"text-center",children:"No headers available"})}),!L&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{className:"".concat("Rejected"===m?"hidden":"px-5 flex-1 text_size_7"),children:"STATUS"}),(0,i.jsx)("td",{className:"".concat("Rejected"===m?"hidden":"px-5 flex-1 text_size_7"),children:"APPROVE"}),(0,i.jsx)("td",{className:"".concat("Rejected"===m?"hidden":"px-5 flex-1 text_size_7"),children:"REJECT"})]})]})}),(0,i.jsx)("tbody",{children:Q&&(null===Q||void 0===Q?void 0:Q.length)>0?Q.map(((e,t)=>{const a=(e,a)=>{const n="Pending"===(null===e||void 0===e?void 0:e.status);return(0,i.jsxs)("tr",{className:"text-dark_grey h-[40px] text-sm rounded-sm shadow-md border-b-2 border-[#CECECE] bg-white ",onClick:()=>{ae(),(e=>{A(e)})(e)},children:[(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:t+1}),(0,i.jsx)("td",{className:"text-start px-4 flex-1",children:null===e||void 0===e?void 0:e.FID}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:null===e||void 0===e?void 0:e.NAMEFLAST}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:pe(null===e||void 0===e?void 0:e.ENTRANCEDATEUSED)}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:me(null===e||void 0===e?void 0:e.ENTRANCEDATETIME)}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:me(null===e||void 0===e?void 0:e.EXITDATETIME)}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:null===e||void 0===e?void 0:e.AVGDAILYTOTALBYDAY}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.AHIGHLIGHTDAILYTOTALBYGROUP)||""}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.ADININWORKSENGINEERINGSDNBHD)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.NORMALWORKINGHRSPERDAY)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.WORKINGHOURS)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.OT)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:null===e||void 0===e?void 0:e.REMARKS}),n&&(0,i.jsxs)(r.Fragment,{children:[(0,i.jsx)("td",{className:"text-center px-4 flex-1 ".concat("Approved"===(null===e||void 0===e?void 0:e.status)?"text-[#0CB100]":"text_size_8"),children:null===e||void 0===e?void 0:e.status}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{className:"h-4 w-4",type:"checkbox",checked:z[e.id]||!1,onClick:e=>e.stopPropagation(),onChange:t=>{t.target.checked?(J((a=>(0,x.A)((0,x.A)({},a),{},{[e.id]:t.target.checked}))),oe(e,"Approved")):(de(e,"Approved"),J((t=>(0,x.A)((0,x.A)({},t),{},{[e.id]:!1}))))}})}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{className:"h-4 w-4",type:"checkbox",checked:G[e.id]||!1,onClick:e=>e.stopPropagation(),onChange:t=>{t.target.checked?($((a=>(0,x.A)((0,x.A)({},a),{},{[e.id]:t.target.checked}))),oe(e,"Rejected"),le()):(de(e,"Rejected"),$((t=>(0,x.A)((0,x.A)({},t),{},{[e.id]:!1}))))}})})]})]},t+1)};return("Manager"===k||"Manager"!==k)&&a(e)})):(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"100%",className:"text-center text-dark_ash text_size_5 bg-white",children:(0,i.jsx)("p",{className:"px-6 py-6",children:"Please wait few seconds."})})})})]})}),(0,i.jsx)("div",{className:"flex justify-center my-5 ".concat(Q&&Q.length>0?"":"hidden"),children:(0,i.jsx)("button",{className:"rounded px-3 py-2 ".concat("Manager"===k?"w-40":"w-52"," bg-[#FEF116] text_size_5 text-dark_grey mb-10"),onClick:()=>{"Manager"!==k?re():"Manager"===k&&(ie(),ce())},children:"Manager"===k?"Finalize and Submit":"Assign Manager"})})]}):!1===j&&!0===h?(0,i.jsx)(Yr,{setClosePopup:g}):""}),!0===S&&(0,i.jsx)(Gr,{toggleFunction:ae,editObject:w,fieldObj:(null===se||void 0===se?void 0:se.fieldObj)||{},fields:(null===se||void 0===se?void 0:se.fields)||[],tableHeader:(null===se||void 0===se?void 0:se.tableHeader)||[],editFunction:e=>{try{var t;const a=Array.isArray(null===(t=f[0])||void 0===t?void 0:t.data)?((e,t)=>e.map((e=>({id:e.id,data:e.data.map((e=>e.FID===t.FID&&e.ENTRANCEDATEUSED===t.ENTRANCEDATEUSED?t:e))}))))(f,e):((e,t)=>e.map((e=>e.FID===t.FID&&e.ENTRANCEDATEUSED===t.ENTRANCEDATEUSED?t:e)))(f,e),n=null===a||void 0===a?void 0:a.map((e=>{var t,a;Array.isArray(null===e||void 0===e?void 0:e.jobLocaWhrs)&&(null===e||void 0===e||null===(t=e.jobLocaWhrs)||void 0===t?void 0:t.length)>0?e.LOCATION=null===e||void 0===e||null===(a=e.jobLocaWhrs[0])||void 0===a?void 0:a.LOCATION:e.LOCATION=null;return e}));v(n)}catch(a){console.log(a)}},titleName:o,Position:c}),!0===X?(0,i.jsx)($r,{toggleSFAMessage:ne,icons:(0,i.jsx)(y.enS,{}),iconColor:"text-[#2BEE48]",textColor:"text-[#05b01f]",title:"Processing...",message:"Data is being saved, ",messageTwo:"this might take a few seconds..."}):!1===X?(0,i.jsx)(Kr,{successMess:T,toggleSFAMessage:ne,setExcelData:d,userIdentification:k}):"",!0===I&&(0,i.jsx)(ts,{toggleFunctionForAssiMana:re,renameKeysFunctionAndSubmit:ie}),!0===M&&(0,i.jsx)(rs,{toggleForRemarkFunc:le,addRemarks:e=>{const t=H.map((t=>t.id===e.id?(0,x.A)((0,x.A)({},e),{},{REMARKS:e.REMARKS}):t));W(t)},passSelectedData:Y})]})},gs=(0,ge.D)(),fs=e=>{const t=localStorage.getItem("userType"),[a,n]=(0,r.useState)(null);return(0,r.useEffect)((()=>{if("Manager"!==t){async function a(e){let t=[],a=null;do{const n=await gs.graphql({query:e,variables:{nextToken:a}}),r=n.data[Object.keys(n.data)[0]].items;t=[...t,...r],a=n.data[Object.keys(n.data)[0]].nextToken}while(a);return t}async function r(){try{const[t,r]=await Promise.all([a(fe.it),a(fe.bJ)]),s=r,i=t.map((e=>{const t=s.find((t=>t.empID===e.empID));return t?(0,x.A)((0,x.A)({},e),t):null})).filter((e=>null!==e)),l=new Promise(((t,a)=>{e?t(e):setTimeout((()=>{a("No data found after waiting.")}),5e3)})),o=await l;(async()=>{const e=null===o||void 0===o?void 0:o.map((e=>{const t=null===i||void 0===i?void 0:i.find((t=>t.empBadgeNo===e.BADGE));return(0,x.A)((0,x.A)({},e),{},{NORMALWORKINGHRSPERDAY:t?t.workHrs[t.workHrs.length-1]:null})}));console.log("useTableMergedData : ",e),n(e)})()}catch(t){}}r()}}),[]),a},vs=(0,ge.D)(),ys=e=>{var t,a,n;let{excelData:s,returnedTHeader:l,titleName:o,setExcelData:d,convertedStringToArrayObj:c,Position:p,fileName:m,showRejectedItemTable:u}=e;const h=null===(t=localStorage.getItem("userID"))||void 0===t?void 0:t.toUpperCase(),[g,f]=(0,r.useState)(!1),[v,b]=(0,r.useState)(null),[N,j]=(0,r.useState)(null),[D,w]=(0,r.useState)(null),[A,S]=(0,r.useState)(),[E,I]=(0,r.useState)(!1),[C,k]=(0,r.useState)(!1),[R,T]=(0,r.useState)({}),[P,_]=(0,r.useState)({}),[O,L]=(0,r.useState)(!0),[F,M]=(0,r.useState)(""),[q,U]=(0,r.useState)(null),[B,H]=(0,r.useState)(null),[W,Y]=(0,r.useState)(null),[V,z]=(0,r.useState)(null),[J,G]=(0,r.useState)([]),[$,K]=(0,r.useState)([]),[Q,Z]=(0,r.useState)(null),{handleScroll:X,visibleData:ee,setVisibleData:te}=as(v,"TimeSheet"),[ae,ne]=(0,r.useState)(null),re=fs(s);(0,r.useEffect)((()=>{re&&re.length>0&&(b(re),j(re))}),[re]);(0,r.useEffect)((()=>{(async()=>{var e,t;const[a]=await Promise.all([vs.graphql({query:fe.Oy})]),n=(null===a||void 0===a||null===(e=a.data)||void 0===e||null===(t=e.listTimeSheets)||void 0===t?void 0:t.items).filter((e=>"SBW"===e.fileType));console.log(n)})()}),[]),(0,r.useEffect)((()=>{const e=localStorage.getItem("userType");"Manager"===e?M("Manager"):"Manager"!==e&&M("TimeKeeper")}),[c]);const se=e=>{if(e&&e.length>0){w(!0);const t=e&&(null===e||void 0===e?void 0:e.map((e=>{let t=[];try{Array.isArray(e.empWorkInfo)&&(t=e.empWorkInfo.map((e=>"string"===typeof e?JSON.parse(e):e)))}catch(a){console.error("Error parsing empWorkInfo for ID:",e.id,a)}return{id:e.id,fileName:e.fileName,NAME:e.empName||0,DEPTDIV:e.empDept||"",BADGE:e.empBadgeNo||"",DATE:e.date||"",IN:e.inTime||"",OUT:e.outTime||0,TOTALINOUT:e.totalInOut||"",ALLDAYMINHRS:e.allDayHrs||"",NETMINUTES:e.netMins||"",TOTALHOURS:e.totalHrs||0,NORMALWORKINGHRSPERDAY:(null===e||void 0===e?void 0:e.normalWorkHrs)||0,WORKINGHOURS:e.actualWorkHrs||0,OT:(null===e||void 0===e?void 0:e.otTime)||0,jobLocaWhrs:t.flat()||[],fileType:e.fileType||"",timeKeeper:e.assignBy||"",manager:e.assignTo||"",REMARKS:e.remarks||"",status:e.status||""}})));console.log(t),b(t),j(t)}};(0,r.useEffect)((()=>{if(l&&l.length>0)(async()=>{const e=l.map((e=>Object.keys(e).reduce(((t,a)=>(t[a.replace(/[^a-zA-Z0-9]/g,"").toLowerCase()]=e[a],t)),{}))),t=["deptdiv","name","badge"],a=await new Promise((a=>{a(e.every((e=>t.every((t=>Object.keys(e).map((e=>e.toLowerCase())).includes(t.toLowerCase()))))))}));f(!0),w(a),H(a)})();else if(l||"Rejected"===u)if(l||"Rejected"!==u)w(!1),L(!1);else{(async()=>{w(!0);try{const e=new Promise(((e,t)=>{c?e(c):setTimeout((()=>{t("No data found after waiting.")}),5e3)})),t=await e;if("Manager"!==F){const e=await ls(t);se(e)}}catch(e){}})()}else{(async()=>{w(!0);try{const e=new Promise(((e,t)=>{c?e(c):setTimeout((()=>{t("No data found after waiting.")}),5e3)})),t=await e;if("Manager"===F){const e=await Xr(t);console.log(e),se(e)}}catch(e){}})()}}),[l,c,F,u]);const ie=()=>{k(!C)},le=async(e,t)=>{Y(e),!0===e&&t&&U(t)},oe=()=>{I(!E)},de=Vr(o),ce=async e=>{if("Manager"!==F&&"Rejected"!==u){const t=await Promise.all(v.map((async e=>({fileName:m,empName:e.NAME||"",empDept:e.DEPTDIV||"",empBadgeNo:e.BADGE||"",date:e.DATE||"",inTime:e.IN||"",outTime:e.OUT||"",totalInOut:e.TOTALINOUT||"",allDayHrs:e.ALLDAYMINHRS||"",netMins:e.NETMINUTES||"",totalHrs:e.TOTALHOURS||"",normalWorkHrs:(null===e||void 0===e?void 0:e.NORMALWORKINGHRSPERDAY)||0,actualWorkHrs:e.WORKINGHOURS||"",otTime:e.OT||"",companyName:null===e||void 0===e?void 0:e.LOCATION,remarks:e.REMARKS||"",empWorkInfo:[JSON.stringify(null===e||void 0===e?void 0:e.jobLocaWhrs)]||0,fileType:"SBW",status:"Pending"})))),a=(await t).map((t=>(0,x.A)((0,x.A)({},t),{},{assignTo:e.mbadgeNo,assignBy:h,trade:e.mfromDate,tradeCode:e.muntilDate})));console.log(a);const n=async e=>{let t=0,a=!1;for(const s of e)try{var n;const e=await vs.graphql({query:ve,variables:{input:s}});if(null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.createTimeSheet){console.log("TimeSheet created successfully:",e.data.createTimeSheet);const n=e.data.createTimeSheet;if(t++,t===v.length&&(ne(!1),te([]),b(null)),!a){le(!0,n),ne(!0);const e=await ms(n);if(console.log(e),e){const t=await ns({getEmail:e,Position:p});if(t){const{subject:e,message:a,fromAddress:n,toAddress:r}=t;await Me(e,a,n,r)}else console.error("Notification returned undefined!")}else console.error("MergeTableForNotification returned undefined!");te([]),b(null),a=!0}}}catch(r){console.error("Error creating TimeSheet:",r),le(!1)}};n(a)}else if("Manager"===F){const e=[...J,...$],t=null===e||void 0===e?void 0:e.filter(((e,t,a)=>t===a.findIndex((t=>t.id===e.id)))),a=async e=>{let t=!1;for(const r of e)try{var a;const e=await vs.graphql({query:ye,variables:{input:r}});if(null!==e&&void 0!==e&&null!==(a=e.data)&&void 0!==a&&a.updateTimeSheet){console.log("TimeSheet Updated successfully:",e.data.updateTimeSheet);const a=e.data.updateTimeSheet;if(!t){le(!0,a);const e=await ms(a);if(e){const t=await ns({getEmail:e,Position:p});if(t){const{subject:e,message:a,fromAddress:n,toAddress:r}=t;await Me(e,a,n,r)}else console.error("Notification returned undefined!")}else console.error("MergeTableForNotification returned undefined!");t=!0}}}catch(n){console.error("Error creating TimeSheet:",n),le(!1)}};a(t&&t.length>0?t.map((e=>({id:e.id,empName:e.NAME||"",empDept:e.DEPTDIV||"",empBadgeNo:e.BADGE||"",date:e.DATE||"",inTime:e.IN||"",outTime:e.OUT||"",totalInOut:e.TOTALINOUT||"",allDayHrs:e.ALLDAYMINHRS||"",netMins:e.NETMINUTES||"",totalHrs:e.TOTALHOURS||"",normalWorkHrs:(null===e||void 0===e?void 0:e.NORMALWORKINGHRSPERDAY)||0,actualWorkHrs:e.WORKINGHOURS||"",otTime:e.OT||"",remarks:e.REMARKS||"",empWorkInfo:[JSON.stringify(null===e||void 0===e?void 0:e.jobLocaWhrs)]||0,fileType:"SBW",status:e.status}))):[])}else if("Manager"!==F&&"Rejected"===u){const e=async e=>{let t=!1;for(const r of e)try{var a;const e=await vs.graphql({query:ye,variables:{input:r}});if(null!==e&&void 0!==e&&null!==(a=e.data)&&void 0!==a&&a.updateTimeSheet){console.log("TimeSheet created successfully:",e.data.updateTimeSheet);const a=e.data.updateTimeSheet;if(!t){le(!0,a);const e=await ms(a);if(e){const t=await ns({getEmail:e,Position:p});if(t){const{subject:e,message:a,fromAddress:n,toAddress:r}=t;await Me(e,a,n,r)}else console.error("Notification returned undefined!")}else console.error("MergeTableForNotification returned undefined!");te([]),b(null),t=!0}}}catch(n){}};e(v&&v.length>0?v.map((e=>({id:e.id,empName:e.NAME||"",empDept:e.DEPTDIV||"",empBadgeNo:e.BADGE||"",date:e.DATE||"",inTime:e.IN||"",outTime:e.OUT||"",totalInOut:e.TOTALINOUT||"",allDayHrs:e.ALLDAYMINHRS||"",netMins:e.NETMINUTES||"",totalHrs:e.TOTALHOURS||"",normalWorkHrs:(null===e||void 0===e?void 0:e.NORMALWORKINGHRSPERDAY)||0,actualWorkHrs:e.WORKINGHOURS||"",otTime:e.OT||"",remarks:e.REMARKS||"",empWorkInfo:[JSON.stringify(null===e||void 0===e?void 0:e.jobLocaWhrs)]||0,fileType:"SBW",status:"Pending"}))):[])}},pe=()=>{z(!V)},me=(e,t)=>{"Approved"===t?G((t=>[...t.filter((t=>t.id!==e.id)),(0,x.A)((0,x.A)({},e),{},{status:"Approved"})])):"Rejected"===t&&(K((t=>[...t.filter((t=>t.id!==e.id)),e])),Z(e))},ue=(e,t)=>{if("Approved"===t){const t=J.filter((t=>t.id!==e.id));G(t)}else if("Rejected"===t){const t=$.filter((t=>t.id!==e.id));K(t)}},xe=(0,r.useCallback)((()=>{const e=[...J,...$],t=null===v||void 0===v?void 0:v.filter((t=>!e.some((e=>t.id===e.id))));b(t),G([]),K([])}),[J,$,v]),he=e=>{try{const[t,a,n]=e.split("/");return"".concat(a,"/").concat(t,"/").concat(n)}catch(t){}};return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{children:!0===D?(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"flex justify-end w-full mr-7",children:(0,i.jsx)(Wr,{allEmpDetails:v,searchResult:async e=>{try{const t=await e;b(t)}catch(t){console.error("Error fetching user data:",t)}},secondaryData:N,Position:p,placeholder:"Badge No."})}),(0,i.jsx)("div",{className:"table-container",onScroll:X,children:(0,i.jsxs)("table",{className:"styled-table w-[100%]",children:[(0,i.jsx)("thead",{className:"sticky-header",children:(0,i.jsxs)("tr",{className:"text_size_5 h-16",children:[(0,i.jsx)("td",{className:"px-4 text-center text_size_7",children:"S No."}),null!==(a=null===de||void 0===de?void 0:de.tableHeader.map(((e,t)=>(0,i.jsx)("td",{className:"px-4 flex-1 text_size_7",children:e},t))))&&void 0!==a?a:(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"100%",className:"text-center text_size_7",children:"No headers available"})}),!B&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{className:"".concat("Rejected"===u?"hidden":"px-5 flex-1 text_size_7"),children:"STATUS"}),(0,i.jsx)("td",{className:"".concat("Rejected"===u?"hidden":"px-5 flex-1 text_size_7"),children:"APPROVE"}),(0,i.jsx)("td",{className:"".concat("Rejected"===u?"hidden":"px-5 flex-1 text_size_7"),children:"REJECT"})]})]})}),(0,i.jsx)("tbody",{children:ee&&(null===ee||void 0===ee?void 0:ee.length)>0?ee.map(((e,t)=>{const a=(e,a)=>{const n="Pending"===(null===e||void 0===e?void 0:e.status);return(0,i.jsxs)("tr",{className:"text-dark_grey h-[40px] text-sm rounded-sm shadow-md border-b-2 border-[#CECECE] bg-white",onClick:()=>{ie(),(e=>{S(e)})(e)},children:[(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:t+1}),(0,i.jsx)("td",{className:"text-start px-4 flex-1",children:null===e||void 0===e?void 0:e.NAME}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:null===e||void 0===e?void 0:e.DEPTDIV}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:null===e||void 0===e?void 0:e.BADGE}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:he(null===e||void 0===e?void 0:e.DATE)}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.IN)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.OUT)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.TOTALINOUT)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.ALLDAYMINHRS)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.NETMINUTES)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.TOTALHOURS)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.NORMALWORKINGHRSPERDAY)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.WORKINGHOURS)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.OT)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:null===e||void 0===e?void 0:e.REMARKS}),n&&(0,i.jsxs)(r.Fragment,{children:[(0,i.jsx)("td",{className:"text-center px-4 flex-1 ".concat("Approved"===(null===e||void 0===e?void 0:e.status)?"text-[#0CB100]":"text_size_8"),children:null===e||void 0===e?void 0:e.status}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{className:"h-4 w-4",type:"checkbox",checked:R[e.id]||!1,onClick:e=>e.stopPropagation(),onChange:t=>{t.target.checked?(T((a=>(0,x.A)((0,x.A)({},a),{},{[e.id]:t.target.checked}))),me(e,"Approved")):(ue(e,"Approved"),T((t=>(0,x.A)((0,x.A)({},t),{},{[e.id]:!1}))))}})}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{className:"h-4 w-4",type:"checkbox",checked:P[e.id]||!1,onClick:e=>e.stopPropagation(),onChange:t=>{t.target.checked?(_((a=>(0,x.A)((0,x.A)({},a),{},{[e.id]:t.target.checked}))),me(e,"Rejected"),pe()):(ue(e,"Rejected"),_((t=>(0,x.A)((0,x.A)({},t),{},{[e.id]:!1}))))}})})]})]},t+1)};return("Manager"===F||"Manager"!==F)&&a(e)})):null!==(n=(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"100%",className:"px-6 py-6 text-center text-dark_ash text_size_5 bg-white",children:(0,i.jsx)("p",{className:"px-6 py-6",children:"Please wait few seconds."})})}))&&void 0!==n?n:(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"100%",className:"px-6 py-6 text-center text-dark_ash text_size_5 bg-white",children:(0,i.jsx)("p",{className:"px-6 py-6",children:"Please wait few seconds."})})})})]})}),(0,i.jsx)("div",{className:"flex justify-center my-5 ".concat(ee&&ee.length>0?"":"hidden"),children:(0,i.jsx)("button",{className:"rounded px-3 py-2 ".concat("Manager"===F?"w-40":"w-52"," bg-[#FEF116] text_size_5 text-dark_grey mb-10"),onClick:()=>{"Manager"!==F?oe():"Manager"===F&&(ce(),xe())},children:"Manager"===F?"Finalize and Submit":"Assign Manager"})})]}):!1===D&&!0===g?(0,i.jsx)(Yr,{setClosePopup:f}):""}),!0===C&&(0,i.jsx)(Gr,{toggleFunction:ie,editObject:A,fieldObj:(null===de||void 0===de?void 0:de.fieldObj)||{},fields:(null===de||void 0===de?void 0:de.fields)||[],tableHeader:(null===de||void 0===de?void 0:de.tableHeader)||[],editFunction:e=>{try{var t;const a=Array.isArray(null===(t=v[0])||void 0===t?void 0:t.data)?((e,t)=>e.map((e=>({id:e.id,data:e.data.map((e=>e.DEPTDIV===t.DEPTDIV&&e.BADGE===t.BADGE?t:e))}))))(v,e):((e,t)=>e.map((e=>e.DEPTDIV===t.DEPTDIV&&e.BADGE===t.BADGE?t:e)))(v,e),n=null===a||void 0===a?void 0:a.map((e=>{var t,a;Array.isArray(null===e||void 0===e?void 0:e.jobLocaWhrs)&&(null===e||void 0===e||null===(t=e.jobLocaWhrs)||void 0===t?void 0:t.length)>0?e.LOCATION=null===e||void 0===e||null===(a=e.jobLocaWhrs[0])||void 0===a?void 0:a.LOCATION:e.LOCATION=null;return e}));b(n),console.log(n)}catch(a){console.log(a)}},titleName:o,Position:p}),!0===ae?(0,i.jsx)($r,{toggleSFAMessage:le,icons:(0,i.jsx)(y.enS,{}),iconColor:"text-[#2BEE48]",textColor:"text-[#05b01f]",title:"Processing...",message:"Data is being saved, ",messageTwo:"this might take a few seconds..."}):!1===ae?(0,i.jsx)(Kr,{successMess:W,toggleSFAMessage:le,setExcelData:d,userIdentification:F}):"",!0===E&&(0,i.jsx)(ts,{toggleFunctionForAssiMana:oe,renameKeysFunctionAndSubmit:ce}),!0===V&&(0,i.jsx)(rs,{toggleForRemarkFunc:pe,addRemarks:e=>{const t=$.map((t=>t.id===e.id?(0,x.A)((0,x.A)({},e),{},{REMARKS:e.REMARKS}):t));K(t)},passSelectedData:Q})]})},bs=(0,ge.D)(),Ns=e=>{var t,a,n;let{excelData:s,returnedTHeader:l,titleName:o,setExcelData:d,convertedStringToArrayObj:c,Position:p,fileName:m,defaultValue:u,showRejectedItemTable:h}=e;const g=null===(t=localStorage.getItem("userID"))||void 0===t?void 0:t.toUpperCase(),[f,v]=(0,r.useState)(!1),[b,N]=(0,r.useState)(null),[j,D]=(0,r.useState)(null),[w,A]=(0,r.useState)(u),[S,E]=(0,r.useState)({}),[I,C]=(0,r.useState)({}),[k,R]=(0,r.useState)(),[T,P]=(0,r.useState)(!1),[_,O]=(0,r.useState)(!1),[L,F]=(0,r.useState)(!0),[M,q]=(0,r.useState)(""),[U,B]=(0,r.useState)(null),[H,W]=(0,r.useState)(null),[Y,V]=(0,r.useState)(null),[z,J]=(0,r.useState)(null),[G,$]=(0,r.useState)([]),[K,Q]=(0,r.useState)([]),[Z,X]=(0,r.useState)(null),{handleScroll:ee,visibleData:te,setVisibleData:ae}=as(b,"TimeKeeper"),[ne,re]=(0,r.useState)(null),se=fs(s);(0,r.useEffect)((()=>{try{se&&se.length>0&&(N(se),D(se))}catch(e){}}),[se]);(0,r.useEffect)((()=>{const e=localStorage.getItem("userType");"Manager"===e?q("Manager"):"Manager"!==e&&q("TimeKeeper")}),[c]);const ie=e=>{if(e&&e.length>0){A(!0);const t=e&&(null===e||void 0===e?void 0:e.map((e=>{let t=[];try{Array.isArray(e.empWorkInfo)&&(t=e.empWorkInfo.map((e=>"string"===typeof e?JSON.parse(e):e)))}catch(a){console.error("Error parsing empWorkInfo for ID:",e.id,a)}return{id:e.id,fileName:e.fileName,NAME:e.empName||0,DEPTDIV:e.empDept||"",BADGE:e.empBadgeNo||"",DATE:e.date||"",IN:e.inTime||"",OUT:e.outTime||0,TOTALINOUT:e.totalInOut||"",ALLDAYMINHRS:e.allDayHrs||"",NETMINUTES:e.netMins||"",TOTALHOURS:e.totalHrs||0,NORMALWORKINGHRSPERDAY:(null===e||void 0===e?void 0:e.normalWorkHrs)||0,WORKINGHOURS:e.actualWorkHrs||0,OT:(null===e||void 0===e?void 0:e.otTime)||0,jobLocaWhrs:t.flat()||[],fileType:e.fileType||"",timeKeeper:e.assignBy||"",manager:e.assignTo||"",REMARKS:e.remarks||"",status:e.status||""}})));N(t),D(t)}};(0,r.useEffect)((()=>{if(l&&l.length>0)(async()=>{const e=l.map((e=>Object.keys(e).reduce(((t,a)=>(t[a.replace(/[^a-zA-Z0-9]/g,"").toLowerCase()]=e[a],t)),{}))),t=["name"],a=await new Promise((a=>{a(e.every((e=>t.every((t=>Object.keys(e).map((e=>e.toLowerCase())).includes(t.toLowerCase()))))))}));v(!0),A(a),B(a)})();else if(l||"Rejected"===h)if(l||"Rejected"!==h)A(!1),F(!1);else{(async()=>{A(!0);try{const e=new Promise(((e,t)=>{c?e(c):setTimeout((()=>{t("No data found after waiting.")}),5e3)})),t=await e;if("Manager"!==M){const e=await ls(t);ie(e)}}catch(e){}})()}else{(async()=>{A(!0);try{const e=new Promise(((e,t)=>{c?e(c):setTimeout((()=>{t("No data found after waiting.")}),5e3)})),t=await e;if("Manager"===p){const e=await Xr(t);ie(e)}}catch(e){}})()}}),[l,c,M,h]);const le=()=>{P(!T)},oe=async(e,t)=>{W(e),!0===e&&t&&V(t)},de=()=>{O(!_)},ce=Vr(o),pe=async e=>{if("Manager"!==M){const t=async e=>{let t=0,a=!1;for(const s of e)try{var n;const e=await bs.graphql({query:ve,variables:{input:s}});if(null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.createTimeSheet){console.log("TimeSheet created successfully:",e.data.createTimeSheet);const n=e.data.createTimeSheet;if(t++,t===b.length&&(re(!1),ae([]),N(null)),!a){oe(!0,n),re(!0);const e=await ms(n);if(e){const t=await ns({getEmail:e,Position:p});if(t){const{subject:e,message:a,fromAddress:n,toAddress:r}=t;await Me(e,a,n,r)}else console.error("Notification returned undefined!")}else console.error("MergeTableForNotification returned undefined!");a=!0}}}catch(r){console.error("Error creating TimeSheet:",r),oe(!1)}};t((b&&b.map((e=>({fileName:m,empName:e.NAME||"",empDept:e.DEPTDIV||"",empBadgeNo:e.BADGE||"",date:e.DATE||"",inTime:e.IN||"",outTime:e.OUT||"",totalInOut:e.TOTALINOUT||"",allDayHrs:e.ALLDAYMINHRS||"",netMins:e.NETMINUTES||"",totalHrs:e.TOTALHOURS||"",normalWorkHrs:(null===e||void 0===e?void 0:e.NORMALWORKINGHRSPERDAY)||0,actualWorkHrs:e.WORKINGHOURS||"",otTime:e.OT||"",remarks:e.REMARKS||"",empWorkInfo:[JSON.stringify(null===e||void 0===e?void 0:e.jobLocaWhrs)]||0,fileType:"ORMC",status:"Pending",companyName:null===e||void 0===e?void 0:e.LOCATION})))).map((t=>(0,x.A)((0,x.A)({},t),{},{assignTo:e.mbadgeNo,assignBy:g,trade:e.mfromDate,tradeCode:e.muntilDate}))))}else if("Manager"===M){const e=[...G,...K],t=null===e||void 0===e?void 0:e.filter(((e,t,a)=>t===a.findIndex((t=>t.id===e.id)))),a=async e=>{let t=!1;for(const r of e)try{var a;const e=await bs.graphql({query:ye,variables:{input:r}});if(null!==e&&void 0!==e&&null!==(a=e.data)&&void 0!==a&&a.updateTimeSheet){console.log("TimeSheet Updated successfully:",e.data.updateTimeSheet);const a=e.data.updateTimeSheet;if(!t){oe(!0,a);const e=await ms(a);if(e){const t=await ns({getEmail:e,Position:p});if(t){const{subject:e,message:a,fromAddress:n,toAddress:r}=t;await Me(e,a,n,r)}else console.error("Notification returned undefined!")}else console.error("MergeTableForNotification returned undefined!");t=!0}}}catch(n){console.error("Error creating TimeSheet:",n),oe(!1)}};a(t&&t.length>0?t.map((e=>({id:e.id,empName:e.NAME||"",empDept:e.DEPTDIV||"",empBadgeNo:e.BADGE||"",date:e.DATE||"",inTime:e.IN||"",outTime:e.OUT||"",totalInOut:e.TOTALINOUT||"",allDayHrs:e.ALLDAYMINHRS||"",netMins:e.NETMINUTES||"",totalHrs:e.TOTALHOURS||"",normalWorkHrs:(null===e||void 0===e?void 0:e.NORMALWORKINGHRSPERDAY)||0,actualWorkHrs:e.WORKINGHOURS||"",otTime:e.OT||"",remarks:e.REMARKS||"",empWorkInfo:[JSON.stringify(null===e||void 0===e?void 0:e.jobLocaWhrs)]||0,fileType:"ORMC",status:e.status}))):[])}else if("Manager"!==M&&"Rejected"===h){const e=async e=>{let t=!1;for(const r of e)try{var a;const e=await bs.graphql({query:ye,variables:{input:r}});if(null!==e&&void 0!==e&&null!==(a=e.data)&&void 0!==a&&a.updateTimeSheet){console.log("TimeSheet created successfully:",e.data.updateTimeSheet);const a=e.data.updateTimeSheet;if(!t){oe(!0,a);const e=await ms(a);if(e){const t=await ns({getEmail:e,Position:p});if(t){const{subject:e,message:a,fromAddress:n,toAddress:r}=t;await Me(e,a,n,r)}else console.error("Notification returned undefined!")}else console.error("MergeTableForNotification returned undefined!");ae([]),N(null),t=!0}}}catch(n){}};e(b&&b.length>0?b.map((e=>({id:e.id,empName:e.NAME||"",empDept:e.DEPTDIV||"",empBadgeNo:e.BADGE||"",date:e.DATE||"",inTime:e.IN||"",outTime:e.OUT||"",totalInOut:e.TOTALINOUT||"",allDayHrs:e.ALLDAYMINHRS||"",netMins:e.NETMINUTES||"",totalHrs:e.TOTALHOURS||"",normalWorkHrs:(null===e||void 0===e?void 0:e.NORMALWORKINGHRSPERDAY)||0,actualWorkHrs:e.WORKINGHOURS||"",otTime:e.OT||"",remarks:e.REMARKS||"",empWorkInfo:[JSON.stringify(null===e||void 0===e?void 0:e.jobLocaWhrs)]||0,fileType:"ORMC",status:"Pending"}))):[])}},me=()=>{J(!z)},ue=(e,t)=>{"Approved"===t?$((t=>[...t.filter((t=>t.id!==e.id)),(0,x.A)((0,x.A)({},e),{},{status:"Approved"})])):"Rejected"===t&&(Q((t=>[...t.filter((t=>t.id!==e.id)),e])),X(e))},xe=(e,t)=>{if("Approved"===t){const t=G.filter((t=>t.id!==e.id));$(t)}else if("Rejected"===t){const t=K.filter((t=>t.id!==e.id));Q(t)}},he=(0,r.useCallback)((()=>{const e=[...G,...K],t=null===b||void 0===b?void 0:b.filter((t=>!e.some((e=>t.id===e.id))));N(t),$([]),Q([])}),[G,K,b]),ge=e=>{try{const[t,a,n]=e.split("/");return"".concat(a,"/").concat(t,"/").concat(n)}catch(t){}};return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{children:!0===w?(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"flex justify-end w-full mr-7",children:(0,i.jsx)(Wr,{allEmpDetails:b,searchResult:async e=>{try{const t=await e;N(t)}catch(t){console.error("Error fetching user data:",t)}},secondaryData:j,Position:p,placeholder:"Badge No."})}),(0,i.jsx)("div",{className:"table-container",onScroll:ee,children:(0,i.jsxs)("table",{className:"styled-table w-[100%]",children:[(0,i.jsx)("thead",{className:"sticky-header",children:(0,i.jsxs)("tr",{className:"text_size_5",children:[(0,i.jsx)("td",{className:"px-5 text-center text_size_7",children:"S No."}),null!==(a=null===ce||void 0===ce?void 0:ce.tableHeader.map(((e,t)=>(0,i.jsx)("td",{className:"px-5 flex-1 text_size_7",children:e},t))))&&void 0!==a?a:(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"100%",className:"text-center text_size_7",children:"No headers available"})}),!U&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{className:"".concat("Rejected"===h?"hidden":"px-5 flex-1 text_size_7"),children:"STATUS"}),(0,i.jsx)("td",{className:"".concat("Rejected"===h?"hidden":"px-5 flex-1 text_size_7"),children:"APPROVE"}),(0,i.jsx)("td",{className:"".concat("Rejected"===h?"hidden":"px-5 flex-1 text_size_7"),children:"REJECT"})]})]})}),(0,i.jsx)("tbody",{children:te&&te.length>0?te.map(((e,t)=>{const a=(e,a)=>{const n="Pending"===(null===e||void 0===e?void 0:e.status);return(0,i.jsxs)("tr",{className:"text-dark_grey h-[40px] text-sm rounded-sm shadow-md border-b-2 border-[#CECECE] bg-white",onClick:()=>{le(),(e=>{R(e)})(e)},children:[(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:t+1}),(0,i.jsx)("td",{className:"text-start px-4 flex-1",children:null===e||void 0===e?void 0:e.NAME}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:null===e||void 0===e?void 0:e.DEPTDIV}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:null===e||void 0===e?void 0:e.BADGE}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:ge(null===e||void 0===e?void 0:e.DATE)}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.IN)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.OUT)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.TOTALINOUT)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.ALLDAYMINHRS)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.NETMINUTES)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.TOTALHOURS)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.NORMALWORKINGHRSPERDAY)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.WORKINGHOURS)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.OT)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:null===e||void 0===e?void 0:e.REMARKS}),n&&(0,i.jsxs)(r.Fragment,{children:[(0,i.jsx)("td",{className:"text-center px-4 flex-1 ".concat("Approved"===(null===e||void 0===e?void 0:e.status)?"text-[#0CB100]":"text_size_8"),children:null===e||void 0===e?void 0:e.status}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{className:"h-4 w-4",type:"checkbox",checked:S[e.id]||!1,onClick:e=>e.stopPropagation(),onChange:t=>{t.target.checked?(E((a=>(0,x.A)((0,x.A)({},a),{},{[e.id]:t.target.checked}))),ue(e,"Approved")):(xe(e,"Approved"),E((t=>(0,x.A)((0,x.A)({},t),{},{[e.id]:!1}))))}})}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{className:"h-4 w-4",type:"checkbox",onClick:e=>e.stopPropagation(),onChange:t=>{t.target.checked?(C((a=>(0,x.A)((0,x.A)({},a),{},{[e.id]:t.target.checked}))),ue(e,"Rejected"),me()):(xe(e,"Rejected"),C((t=>(0,x.A)((0,x.A)({},t),{},{[e.id]:!1}))))}})})]})]},t+1)};return("Manager"===M||"Manager"!==M)&&a(e)})):null!==(n=(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"100%",className:"px-6 py-6 text-center text-dark_ash text_size_5 bg-white ",children:(0,i.jsx)("p",{className:"px-6 py-6",children:"Please wait few seconds."})})}))&&void 0!==n?n:(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"100%",className:"px-6 py-6 text-center text-dark_ash text_size_5",children:(0,i.jsx)("p",{className:"px-6 py-6",children:"Please wait few seconds."})})})})]})}),(0,i.jsx)("div",{className:"flex justify-center my-5 gap-5 ".concat(te&&te.length>0?"":"hidden"),children:(0,i.jsx)("button",{className:"rounded px-3 py-2 ".concat("Manager"===M?"w-40":"w-52"," bg-[#FEF116] text_size_5 text-dark_grey mb-10"),onClick:()=>{"Manager"!==M?de():"Manager"===M&&(pe(),he())},children:"Manager"===M?"Approve":"Assign Manager"})})]}):!1===w&&!0===f?(0,i.jsx)(Yr,{setClosePopup:v}):""}),!0===T&&(0,i.jsx)(Gr,{toggleFunction:le,editObject:k,fieldObj:(null===ce||void 0===ce?void 0:ce.fieldObj)||{},fields:(null===ce||void 0===ce?void 0:ce.fields)||[],tableHeader:(null===ce||void 0===ce?void 0:ce.tableHeader)||[],editFunction:e=>{try{var t;const a=Array.isArray(null===(t=b[0])||void 0===t?void 0:t.data)?((e,t)=>e.map((e=>({id:e.id,data:e.data.map((e=>e.IN===t.IN&&e.OUT===t.OUT?t:e))}))))(b,e):((e,t)=>e.map((e=>e.IN===t.IN&&e.OUT===t.OUT?t:e)))(b,e),n=null===a||void 0===a?void 0:a.map((e=>{var t,a;Array.isArray(null===e||void 0===e?void 0:e.jobLocaWhrs)&&(null===e||void 0===e||null===(t=e.jobLocaWhrs)||void 0===t?void 0:t.length)>0?e.LOCATION=null===e||void 0===e||null===(a=e.jobLocaWhrs[0])||void 0===a?void 0:a.LOCATION:e.LOCATION=null;return e}));N(n)}catch(a){console.log(a)}},titleName:o,Position:p}),!0===ne?(0,i.jsx)($r,{toggleSFAMessage:oe,icons:(0,i.jsx)(y.enS,{}),iconColor:"text-[#2BEE48]",textColor:"text-[#05b01f]",title:"Processing...",message:"Data is being saved, ",messageTwo:"this might take a few seconds..."}):!1===ne?(0,i.jsx)(Kr,{successMess:H,toggleSFAMessage:oe,setExcelData:d,userIdentification:M}):"",!0===_&&(0,i.jsx)(ts,{toggleFunctionForAssiMana:de,renameKeysFunctionAndSubmit:pe}),!0===z&&(0,i.jsx)(rs,{toggleForRemarkFunc:me,addRemarks:e=>{const t=K.map((t=>t.id===e.id?(0,x.A)((0,x.A)({},e),{},{REMARKS:e.REMARKS}):t));Q(t)},passSelectedData:Z})]})},js=(0,ge.D)(),Ds=e=>{var t,a,n;let{setExcelData:s,excelData:l,returnedTHeader:o,Position:d,convertedStringToArrayObj:c,titleName:p,fileName:m,showRejectedItemTable:u}=e;const h=null===(t=localStorage.getItem("userID"))||void 0===t?void 0:t.toUpperCase(),[g,f]=(0,r.useState)(!1),[v,b]=(0,r.useState)(null),[N,j]=(0,r.useState)(null),[D,w]=(0,r.useState)(),[A,S]=(0,r.useState)(!1),[E,I]=(0,r.useState)(null),[C,k]=(0,r.useState)(!1),[R,T]=(0,r.useState)(""),[P,_]=(0,r.useState)(null),[O,L]=(0,r.useState)(null),[F,M]=(0,r.useState)(null),[q,U]=(0,r.useState)({}),[B,H]=(0,r.useState)({}),[W,Y]=(0,r.useState)(null),[V,z]=(0,r.useState)([]),[J,G]=(0,r.useState)([]),[$,K]=(0,r.useState)(null),{handleScroll:Q,visibleData:Z,setVisibleData:X}=as(v,"TimeKeeper"),[ee,te]=(0,r.useState)(null),ae=fs(l);(0,r.useEffect)((()=>{ae&&ae.length>0&&(b(ae),j(ae))}),[ae]),(0,r.useEffect)((()=>{const e=localStorage.getItem("userType");"Manager"===e?T("Manager"):"Manager"!==e&&T("TimeKeeper")}),[c]);const ne=e=>{if(e&&(null===e||void 0===e?void 0:e.length)>0){I(!0);const t=e&&(null===e||void 0===e?void 0:e.map((e=>{let t=[];try{Array.isArray(e.empWorkInfo)&&(t=e.empWorkInfo.map((e=>"string"===typeof e?JSON.parse(e):e)))}catch(a){console.error("Error parsing empWorkInfo for ID:",e.id,a)}return{id:e.id,fileName:e.fileName,REC:e.rec||0,CTR:e.ctr||"",DEPT:e.empDept||"",EMPLOYEEID:e.empID||"",BADGE:e.empBadgeNo||"",NAME:e.empName||0,DATE:e.date||"",ONAM:e.onAM||"",OFFAM:e.offAM||"",ONPM:e.onPM||0,OFFPM:e.offPM||0,IN:(null===e||void 0===e?void 0:e.inTime)||0,OUT:e.outTime||0,TOTALINOUT:e.totalInOut||"",ALLDAYMINUTES:e.allDayHrs||"",NETMINUTES:e.netMins||"",TOTALHOURS:e.totalHrs||"",NORMALWORKINGHRSPERDAY:(null===e||void 0===e?void 0:e.normalWorkHrs)||0,WORKINGHOURS:(null===e||void 0===e?void 0:e.actualWorkHrs)||0,OT:(null===e||void 0===e?void 0:e.otTime)||0,TOTALACTUALHOURS:e.actualWorkHrs||"",jobLocaWhrs:t.flat()||[],fileType:e.fileType,timeKeeper:e.assignBy,manager:e.assignTo,REMARKS:e.remarks||"",status:e.status||""}})));b(t),j(t)}};(0,r.useEffect)((()=>{if(o&&o.length>0)(async()=>{const e=o.map((e=>{const t={};for(const n in e)t[n]="string"!==typeof(a=e[n])?a:a.replace(/[^a-zA-Z0-9]/g,"");var a;return t})),t=["REC","CTR","DEPT","EMPLOYEEID","BADGE","NAME","DATE","ONAM","OFFAM","ONPM","OFFPM","IN","OUT","TOTALINOUT","ALLDAYMINUTES","NETMINUTES","TOTALHOURS","REMARKS"],a=await new Promise((a=>{a(e&&e.every((e=>t.every((t=>Object.values(e).map((e=>"string"===typeof e?e.toUpperCase():e)).includes(t.toUpperCase()))))))}));f(!0),_(a),I(a)})();else if(o||"Rejected"===u)if(o||"Rejected"!==u)I(!1);else{(async()=>{I(!0);try{const e=new Promise(((e,t)=>{c?e(c):setTimeout((()=>{t("No data found after waiting.")}),5e3)})),t=await e;if("Manager"!==R){const e=await ls(t);ne(e)}}catch(e){}})()}else{(async()=>{I(!0);try{const e=new Promise(((e,t)=>{c?e(c):setTimeout((()=>{t("No data found after waiting.")}),5e3)})),t=await e;if("Manager"===R){const e=await Xr(t);ne(e)}}catch(e){}})()}}),[o,c,R,u]);const re=()=>{S(!A)},se=async(e,t)=>{L(e),!0===e&&t&&M(t)},ie=()=>{k(!C)},le=Vr(p),oe=async e=>{if("Manager"!==R){const t=(v&&v.map((e=>({fileName:m,rec:e.REC||"",ctr:e.CTR||"",empDept:e.DEPT||"",empID:e.EMPLOYEEID||"",empBadgeNo:e.BADGE||"",empName:e.NAME||"",date:e.DATE||"",onAM:e.ONAM||"",offAM:e.OFFAM||"",onPM:e.ONPM||"",offPM:e.OFFPM||"",inTime:e.IN||"",outTime:e.OUT||"",totalInOut:e.TOTALINOUT||"",allDayHrs:e.ALLDAYMINUTES||"",netMins:e.NETMINUTES||"",totalHrs:e.TOTALHOURS||"",normalWorkHrs:(null===e||void 0===e?void 0:e.NORMALWORKINGHRSPERDAY)||0,actualWorkHrs:(null===e||void 0===e?void 0:e.WORKINGHOURS)||0,otTime:(null===e||void 0===e?void 0:e.OT)||0,actualWorkHrs:e.TOTALACTUALHOURS||"",empWorkInfo:[JSON.stringify(null===e||void 0===e?void 0:e.jobLocaWhrs)]||0,fileType:"HO",status:"Pending",remarks:e.REMARKS||"",companyName:null===e||void 0===e?void 0:e.LOCATION})))).map((t=>(0,x.A)((0,x.A)({},t),{},{assignTo:e.mbadgeNo,assignBy:h,trade:e.mfromDate,tradeCode:e.muntilDate})));console.log(v.length);const a=async e=>{let t=0,a=!1;for(const s of e)try{var n;const e=await js.graphql({query:ve,variables:{input:s}});if(null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.createTimeSheet){console.log("TimeSheet created successfully:",e.data.createTimeSheet);const n=e.data.createTimeSheet;if(t++,t===v.length&&(te(!1),X([]),b(null)),!a){se(!0,n),te(!0);const e=await ms(n);if(e){const t=await ns({getEmail:e,Position:d});if(t){const{subject:e,message:a,fromAddress:n,toAddress:r}=t;await Me(e,a,n,r)}else console.error("Notification returned undefined!")}else console.error("MergeTableForNotification returned undefined!");a=!0}}}catch(r){console.error("Error creating TimeSheet:",r),se(!1)}};a(t)}else if("Manager"===R){const e=[...V,...J],t=null===e||void 0===e?void 0:e.filter(((e,t,a)=>t===a.findIndex((t=>t.id===e.id)))),a=async e=>{let t=!1;for(const r of e)try{var a;const e=await js.graphql({query:ye,variables:{input:r}});if(null!==e&&void 0!==e&&null!==(a=e.data)&&void 0!==a&&a.updateTimeSheet){console.log("TimeSheet Updated successfully:",e.data.updateTimeSheet);const a=e.data.updateTimeSheet;if(!t){se(!0,a);const e=await ms(a);if(e){const t=await ns({getEmail:e,Position:d});if(t){const{subject:e,message:a,fromAddress:n,toAddress:r}=t;await Me(e,a,n,r)}else console.error("Notification returned undefined!")}else console.error("MergeTableForNotification returned undefined!");t=!0}X([]),b(null)}}catch(n){console.error("Error creating TimeSheet:",n),se(!1)}};a(t&&t.length>0?t.map((e=>({id:e.id,rec:e.REC||"",ctr:e.CTR||"",empDept:e.DEPT||"",empID:e.EMPLOYEEID||"",empBadgeNo:e.BADGE||"",empName:e.NAME||"",date:e.DATE||"",onAM:e.ONAM||"",offAM:e.OFFAM||"",onPM:e.ONPM||"",offPM:e.OFFPM||"",inTime:e.IN||"",outTime:e.OUT||"",totalInOut:e.TOTALINOUT||"",allDayHrs:e.ALLDAYMINUTES||"",netMins:e.NETMINUTES||"",totalHrs:e.TOTALHOURS||"",normalWorkHrs:(null===e||void 0===e?void 0:e.NORMALWORKINGHRSPERDAY)||0,actualWorkHrs:(null===e||void 0===e?void 0:e.WORKINGHOURS)||0,otTime:(null===e||void 0===e?void 0:e.OT)||0,actualWorkHrs:e.TOTALACTUALHOURS||"",empWorkInfo:[JSON.stringify(null===e||void 0===e?void 0:e.jobLocaWhrs)]||0,fileType:"HO",status:e.status,remarks:e.REMARKS||""}))):[])}else if("Manager"!==R&&"Rejected"===u){const e=async e=>{let t=!1;for(const r of e)try{var a;const e=await js.graphql({query:ye,variables:{input:r}});if(null!==e&&void 0!==e&&null!==(a=e.data)&&void 0!==a&&a.updateTimeSheet){console.log("TimeSheet created successfully:",e.data.updateTimeSheet);const a=e.data.updateTimeSheet;if(!t){se(!0,a);const e=await ms(a);if(e){const t=await ns({getEmail:e,Position:d});if(t){const{subject:e,message:a,fromAddress:n,toAddress:r}=t;await Me(e,a,n,r)}else console.error("Notification returned undefined!")}else console.error("MergeTableForNotification returned undefined!");X([]),b(null),t=!0}}}catch(n){}};e(v&&v.length>0?v.map((e=>({id:e.id,rec:e.REC||"",ctr:e.CTR||"",empDept:e.DEPT||"",empID:e.EMPLOYEEID||"",empBadgeNo:e.BADGE||"",empName:e.NAME||"",date:e.DATE||"",onAM:e.ONAM||"",offAM:e.OFFAM||"",onPM:e.ONPM||"",offPM:e.OFFPM||"",inTime:e.IN||"",outTime:e.OUT||"",totalInOut:e.TOTALINOUT||"",allDayHrs:e.ALLDAYMINUTES||"",netMins:e.NETMINUTES||"",totalHrs:e.TOTALHOURS||"",normalWorkHrs:(null===e||void 0===e?void 0:e.NORMALWORKINGHRSPERDAY)||0,actualWorkHrs:(null===e||void 0===e?void 0:e.WORKINGHOURS)||0,otTime:(null===e||void 0===e?void 0:e.OT)||0,actualWorkHrs:e.TOTALACTUALHOURS||"",empWorkInfo:[JSON.stringify(null===e||void 0===e?void 0:e.jobLocaWhrs)]||0,fileType:"HO",status:"Pending",remarks:e.REMARKS||""}))):[])}},de=()=>{Y(!W)},ce=(e,t)=>{"Approved"===t?z((t=>[...t.filter((t=>t.id!==e.id)),(0,x.A)((0,x.A)({},e),{},{status:"Approved"})])):"Rejected"===t&&(G((t=>[...t.filter((t=>t.id!==e.id)),e])),K(e))},pe=(e,t)=>{if("Approved"===t){const t=V.filter((t=>t.id!==e.id));z(t)}else if("Rejected"===t){const t=J.filter((t=>t.id!==e.id));G(t)}},me=(0,r.useCallback)((()=>{const e=[...V,...J],t=null===v||void 0===v?void 0:v.filter((t=>!e.some((e=>t.id===e.id))));b(t),z([]),G([])}),[V,J,v]),ue=e=>{try{const[t,a,n]=e.split("/");return"".concat(a,"/").concat(t,"/").concat(n)}catch(t){console.log(t," : ERROR")}};return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{children:!0===E?(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"flex justify-end w-full mr-7",children:(0,i.jsx)(Wr,{allEmpDetails:v,searchResult:async e=>{try{const t=await e;b(t)}catch(t){}},secondaryData:N,Position:d,placeholder:"Badge No."})}),(0,i.jsx)("div",{className:"table-container",onScroll:Q,children:(0,i.jsxs)("table",{className:"styled-table w-[100%]",children:[(0,i.jsx)("thead",{className:"sticky-header",children:(0,i.jsxs)("tr",{className:"text_size_5",children:[(0,i.jsx)("td",{className:"px-4 flex-1 text_size_7",children:"S No."}),null!==(a=null===le||void 0===le?void 0:le.tableHeader.map(((e,t)=>(0,i.jsx)("td",{className:"px-4 flex-1 text_size_7",children:e},t))))&&void 0!==a?a:(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"100%",className:"text-center",children:"No headers available"})}),!P&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{className:"".concat("Rejected"===u?"hidden":"px-5 flex-1 text_size_7"),children:"STATUS"}),(0,i.jsx)("td",{className:"".concat("Rejected"===u?"hidden":"px-5 flex-1 text_size_7"),children:"APPROVE"}),(0,i.jsx)("td",{className:"".concat("Rejected"===u?"hidden":"px-5 flex-1 text_size_7"),children:"REJECT"})]})]})}),(0,i.jsx)("tbody",{children:Z&&(null===Z||void 0===Z?void 0:Z.length)>0?Z.map(((e,t)=>{const a=(e,a)=>{const n="Pending"===(null===e||void 0===e?void 0:e.status);return(0,i.jsxs)("tr",{className:"text-dark_grey h-[40px] text-sm rounded-sm shadow-md border-b-2 border-[#CECECE] bg-white",onClick:()=>{re(),(e=>{w(e)})(e)},children:[(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:t+1}),(0,i.jsx)("td",{className:"text-start px-4 flex-1",children:null===e||void 0===e?void 0:e.REC}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:null===e||void 0===e?void 0:e.CTR}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:null===e||void 0===e?void 0:e.DEPT}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:null===e||void 0===e?void 0:e.EMPLOYEEID}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:null===e||void 0===e?void 0:e.BADGE}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:null===e||void 0===e?void 0:e.NAME}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:ue(null===e||void 0===e?void 0:e.DATE)}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:null===e||void 0===e?void 0:e.ONAM}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:null===e||void 0===e?void 0:e.OFFAM}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:null===e||void 0===e?void 0:e.ONPM}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:null===e||void 0===e?void 0:e.OFFPM}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.IN)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.OUT)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.TOTALINOUT)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.ALLDAYMINUTES)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.NETMINUTES)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.TOTALHOURS)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.NORMALWORKINGHRSPERDAY)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.TOTALACTUALHOURS)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.OT)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:null===e||void 0===e?void 0:e.REMARKS}),n&&(0,i.jsxs)(r.Fragment,{children:[(0,i.jsx)("td",{className:"text-center px-4 flex-1 ".concat("Approved"===(null===e||void 0===e?void 0:e.status)?"text-[#0CB100]":"text_size_8"),children:null===e||void 0===e?void 0:e.status}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{className:"h-4 w-4",type:"checkbox",checked:q[e.id]||!1,onClick:e=>e.stopPropagation(),onChange:t=>{t.target.checked?(U((a=>(0,x.A)((0,x.A)({},a),{},{[e.id]:t.target.checked}))),ce(e,"Approved")):(pe(e,"Approved"),U((t=>(0,x.A)((0,x.A)({},t),{},{[e.id]:!1}))))}})}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{className:"h-4 w-4",type:"checkbox",checked:B[e.id]||!1,onClick:e=>e.stopPropagation(),onChange:t=>{t.target.checked?(H((a=>(0,x.A)((0,x.A)({},a),{},{[e.id]:t.target.checked}))),ce(e,"Rejected"),de()):(pe(e,"Rejected"),H((t=>(0,x.A)((0,x.A)({},t),{},{[e.id]:!1}))))}})})]})]},t+1)};return("Manager"===R||"Manager"!==R)&&a(e)})):null!==(n=(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"100%",className:"px-6 py-6 text-center text-dark_ash text_size_5 bg-white  ",children:(0,i.jsx)("p",{className:"px-6 py-6",children:"Please wait few seconds."})})}))&&void 0!==n?n:(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"100%",className:"px-6 py-6 text-center text-dark_ash text_size_5 bg-white",children:(0,i.jsx)("p",{className:"px-6 py-6",children:"Please wait few seconds."})})})})]})}),(0,i.jsx)("div",{className:"flex justify-center my-5 ".concat(Z&&Z.length>0?"":"hidden"),children:(0,i.jsx)("button",{className:"rounded px-3 py-2 ".concat("Manager"===R?"w-40":"w-52"," bg-[#FEF116] text_size_5 text-dark_grey mb-10"),onClick:()=>{"Manager"!==R?ie():"Manager"===R&&(oe(),me())},children:"Manager"===R?"Finalize and Submit":"Assign Manager"})})]}):!1===E&&!0===g?(0,i.jsx)(Yr,{setClosePopup:f}):""}),!0===A&&(0,i.jsx)(Gr,{toggleFunction:re,editObject:D,fieldObj:(null===le||void 0===le?void 0:le.fieldObj)||{},fields:(null===le||void 0===le?void 0:le.fields)||[],tableHeader:(null===le||void 0===le?void 0:le.tableHeader)||[],editFunction:e=>{var t;const a=Array.isArray(null===(t=v[0])||void 0===t?void 0:t.data)?((e,t)=>e.map((e=>({id:e.id,data:e.data.map((e=>e.BADGE===t.BADGE&&e.DATE===t.DATE?t:e))}))))(v,e):((e,t)=>e.map((e=>e.EMPLOYEEID===t.EMPLOYEEID&&e.DATE===t.DATE?t:e)))(v,e),n=null===a||void 0===a?void 0:a.map((e=>{var t,a;Array.isArray(null===e||void 0===e?void 0:e.jobLocaWhrs)&&(null===e||void 0===e||null===(t=e.jobLocaWhrs)||void 0===t?void 0:t.length)>0?e.LOCATION=null===e||void 0===e||null===(a=e.jobLocaWhrs[0])||void 0===a?void 0:a.LOCATION:e.LOCATION=null;return e}));b(n)},titleName:p,Position:d}),!0===ee?(0,i.jsx)($r,{toggleSFAMessage:se,icons:(0,i.jsx)(y.enS,{}),iconColor:"text-[#2BEE48]",textColor:"text-[#05b01f]",title:"Processing...",message:"Data is being saved, ",messageTwo:"this might take a few seconds..."}):!1===ee?(0,i.jsx)(Kr,{successMess:O,toggleSFAMessage:se,setExcelData:s,userIdentification:R}):"",!0===C&&(0,i.jsx)(ts,{toggleFunctionForAssiMana:ie,renameKeysFunctionAndSubmit:oe}),!0===W&&(0,i.jsx)(rs,{toggleForRemarkFunc:de,addRemarks:e=>{const t=J.map((t=>t.id===e.id?(0,x.A)((0,x.A)({},e),{},{REMARKS:e.REMARKS}):t));G(t)},passSelectedData:$})]})};var ws=a(1238);const As=["FID","NAMEFLAST","ENTRANCEDATEUSED","ENTRANCEDATETIME","EXITDATETIME","AVGDAILYTOTALBYDAY","ADININWORKSENGINEERINGSDNBHD"],Ss=((0,ge.D)(),(e,t)=>{const[a,n]=(0,r.useState)(!1),s=(0,ge.D)(),[i,l]=(0,r.useState)([]),[o,d]=(0,r.useState)(null);try{return(0,r.useEffect)((()=>{const a=localStorage.getItem("userType");d(a);("Manager"===a&&e||"Manager"!==a)&&(async()=>{try{n(!0);let p=null,m=[],u=[];const x={and:"Manager"===t?[{status:{eq:"Pending"}},{fileType:{eq:e}}]:"viewTimeSheet"===t?[{fileType:{eq:e}}]:"viewSummary"===t?[{status:{eq:"Approved"}},{fileType:{eq:e}}]:"timeKeeper"===t?[{status:{eq:"Rejected"}},{fileType:{eq:e}}]:[{fileType:{eq:e}}]};do{var a,r,i,o,d,c;const e=await s.graphql({query:fe.Oy,variables:{filter:x,limit:800,nextToken:p}});null===e||void 0===e||null===(a=e.data)||void 0===a||null===(r=a.listTimeSheets)||void 0===r||r.items,u=(null===e||void 0===e||null===(i=e.data)||void 0===i||null===(o=i.listTimeSheets)||void 0===o?void 0:o.items)||[],p=null===e||void 0===e||null===(d=e.data)||void 0===d||null===(c=d.listTimeSheets)||void 0===c?void 0:c.nextToken,u.filter((e=>null!==e&&void 0!==e)),m=[...m,...u]}while(p);l(m)}catch(p){console.error("Error fetching data for ".concat(e,":"),p)}finally{n(!1)}})()}),[e]),{convertedStringToArrayObj:i,getPosition:o,loading:a}}catch(c){console.log("ERROR : ",c)}}),Es=((0,ge.D)(),e=>{let{title:t}=e;const a=(0,r.useRef)(null),[s,l]=(0,r.useState)(""),[o,d]=(0,r.useState)(""),[c,p]=(0,r.useState)(!1),[m,u]=(0,r.useState)(""),[h,g]=(0,r.useState)(!0),[f,v]=(0,r.useState)(null),[y,b]=(0,r.useState)(null),[N,j]=(0,r.useState)(),[D,w]=(0,r.useState)(null),[A,S]=(0,r.useState)(""),[E,I]=(0,r.useState)(0),[C,k]=(0,r.useState)(!1),[R,T]=(0,r.useState)(!1),[P,_]=(0,r.useState)("");(0,r.useEffect)((()=>{S(!0===R?"ORMC":t)}),[R]);const O=localStorage.getItem("userType");(0,r.useEffect)((()=>{_("Manager"===O?"Manager":"timeKeeper")}),[O,E]);const{convertedStringToArrayObj:L,getPosition:F}=Ss(A,P),M=async()=>{try{if("Offshore"===A){const e=((e,t,a,n,r)=>{if(null!==e){const s=ws.LF(e,{type:"buffer"}),i=s.SheetNames,l=[];i.forEach((e=>{const t=ws.Wp.sheet_to_json(s.Sheets[e]);l.push({sheetName:e,data:t})}));const o=(e,t)=>{const a={},n={};return Object.keys(t).forEach((r=>{const s=t[r];n[s]?(n[s]+=1,a["".concat(s,"_").concat(n[s])]=e[r]||null):(n[s]=1,a[s]=e[r]||null)})),a},d=[],c=l&&l.map((e=>{const t=e.sheetName,a=e.data[0],n=e.data[2],r=e.data.slice(3,4).map((e=>o(e,n))),s=e.data[7],i=e.data[2],l=["138000","CONTRACT No:","DAILY TIME SHEET ","__EMPTY","__EMPTY_4"].map((e=>e.trim())),c=Object.fromEntries(Object.entries(i).filter((e=>{let[t,a]=e;return!l.includes(t.trim())}))),p=(0,x.A)((0,x.A)({},s),c);return d.push(p),{sheetName:t,rows:r,tbodyRows:e.data.slice(8).map((e=>o(e,p))),location:a}})),p=[];function m(e){const t=new Date(1899,11,30),a=e;return new Date(t.getTime()+24*a*60*60*1e3)}function u(e){const t=e.split("/");if(3!==t.length)throw new Error("Invalid date format. Expected DD/MM/YYYY");const[a,n,r]=t;return"".concat(a,"/").concat(n,"/").concat(r)}function h(e){return"string"!==typeof e?e:e.replace(/[^a-zA-Z0-9]/g,"")}return c&&c.map(((e,t)=>{const a=e.rows,n=e.location.__EMPTY,r=e.tbodyRows.map(((e,t)=>(0,x.A)((0,x.A)({},e),{},{date:a.map((e=>e.DATE)),location:n})));let s=r.findIndex((e=>"TOTAL"===e.NAME));if(console.log(s),s>-1){const e=r.slice(0,s).filter((e=>null!==e.NAME)).flat();p.push(...e)}})),t((p&&p.map((e=>{const t=u(m(e.date.flat()).toLocaleDateString());return(0,x.A)((0,x.A)({},e),{},{date:t})}))).map((e=>{const t={};for(const a in e)t[h(a).toUpperCase()]=e[a];return t}))),r(!1),d}n.current.value="",a(null)})(f,w,v,a,k);j(e),a.current.value="",v(null)}else if("ORMC"===A){const e=((e,t,a,n,r)=>{try{if(null!==e){const l=ws.LF(e,{type:"buffer"}),o=l.SheetNames,d=[],c=[];var s=!1;o.map((e=>{const t=ws.Wp.sheet_to_json(l.Sheets[e]);d.push({sheetName:e,data:t})}));const p=d&&d.map((e=>{const t=e.data;var a=t.slice(0,1);const n=a.some((e=>["NAME","DATE"].every((t=>t in e))));s=n;var r=t.slice(0);return c.push(r),a}));if(!0===s){const m=(e,t)=>{if("time"===t){const t=24*e,a=Math.floor(t),n=60*(t-a),r=Math.floor(n),s=60*(n-r),i=Math.round(s);return"".concat(a.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"),":").concat(i.toString().padStart(2,"0"))}if("date"===t){const t=new Date(1899,11,30),a=e;return new Date(t.getTime()+24*a*60*60*1e3)}};function u(e){return"string"!==typeof e?e:e.replace(/[^a-zA-Z0-9]/g,"")}const x=c.flat().map((e=>{const t={};for(const a in e)t[u(a)]=e[a];return t})),h=x&&x.map((e=>{if("number"===typeof e.IN&&(e.IN=m(e.IN,"time")),"number"===typeof e.OUT&&(e.OUT=m(e.OUT,"time")),"number"===typeof e.DATE){const t=m(e.DATE,"date"),a=new Date(t);e.DATE=a.toLocaleDateString()}return e})),g=h.filter((e=>e.IN&&e.OUT));console.log("filteHighlightedData : ",g);const f=e=>{var t;return((null===e||void 0===e||null===(t=e.DATE)||void 0===t?void 0:t.trim())||"").replace(/\(\w+\)/,"").trim()};let v=f(h[0]);function y(e){const t=e.split("/");if(3!==t.length)throw new Error("Invalid date format. Expected DD/MM/YYYY");const[a,n,r]=t;return"".concat(a,"/").concat(n,"/").concat(r)}v||(v=f(h[1]));const b=y(new Date(v).toLocaleDateString());return console.log(b),g.forEach((e=>{e.DATE=b})),t(g),r(!1),p.flat()}return s}n.current.value="",a(null)}catch(i){console.log("ERROR",i)}})(f,w,v,a,k);if(j(e),!1===e){const e=await((e,t,a,n,r)=>{if(null!==e){const s=ws.LF(e,{type:"buffer"}),i=s.SheetNames,l=[],o=[];i.map((e=>{const t=ws.Wp.sheet_to_json(s.Sheets[e]);l.push({sheetName:e,data:t})}));const d=l&&l.map((e=>{const t=e.data;var a=t.slice(1,2);const n=a.map((e=>Object.entries(e).map((e=>{let[t,a]=e;return[{key:t,value:a}]})))).flat().flat();return t.slice(2).forEach((e=>{const t={};Object.entries(e).forEach((e=>{let[a,r]=e;const s=n.find((e=>e.key===a));s&&(t[s.value]=r)})),o.push(t)})),a})),c=(e,t)=>{if("time"===t){const t=24*e,a=Math.floor(t),n=60*(t-a),r=Math.floor(n),s=60*(n-r),i=Math.round(s);return"".concat(a.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"),":").concat(i.toString().padStart(2,"0"))}if("date"===t){const t=new Date(1899,11,30),a=e;return new Date(t.getTime()+24*a*60*60*1e3)}};function p(e){return"string"!==typeof e?e:e.replace(/[^a-zA-Z0-9]/g,"")}const m=o.map((e=>{const t={};for(const a in e)t[p(a)]=e[a];return t}));t((m&&m.map((e=>{if("number"===typeof e.IN&&(e.IN=c(e.IN,"time")),"number"===typeof e.OUT&&(e.OUT=c(e.OUT,"time")),"number"===typeof e.DATE){const t=c(e.DATE,"date"),a=new Date(t);e.DATE=a.toLocaleDateString()}return e}))).filter((e=>e.IN&&e.OUT)));const u=(e=>e.map((e=>e.map((e=>Object.entries(e).reduce(((e,t)=>{let[a,n]=t;return e[n]=a,e}),{}))))))(d);return r(!1),u.flat()}n.current.value="",a(null)})(f,w,v,a,k);j(e)}a.current.value="",v(null)}else if("SBW"===A){const e=((e,t,a,n,r)=>{try{if(null!==e){const l=ws.LF(e,{type:"buffer"}),o=l.SheetNames,d=[],c=[];var s=!1;o.forEach((e=>{const t=ws.Wp.sheet_to_json(l.Sheets[e]);d.push({sheetName:e,data:t})}));const p=d&&d.map((e=>{const t=e.data;var a=t.slice(0,1);const n=a.some((e=>["NAME","DATE"].every((t=>t in e))));s=n;var r=t.slice(0);return c.push(r),a}));if(!0===s){const m=(e,t)=>{if("time"===t){const t=24*e,a=Math.floor(t),n=60*(t-a),r=Math.floor(n),s=60*(n-r),i=Math.round(s);return"".concat(a.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"),":").concat(i.toString().padStart(2,"0"))}if("date"===t){const t=new Date(1899,11,30),a=e;return new Date(t.getTime()+24*a*60*60*1e3)}};function u(e){return"string"!==typeof e?e:e.replace(/[^a-zA-Z0-9]/g,"")}const x=c.flat().map((e=>{const t={};for(const a in e)t[u(a)]=e[a];return t})),h=x&&x.map((e=>{if("number"===typeof e.IN&&(e.IN=m(e.IN,"time")),"number"===typeof e.OUT&&(e.OUT=m(e.OUT,"time")),"number"===typeof e.DATE){const t=m(e.DATE,"date"),a=new Date(t);e.DATE=a.toLocaleDateString()}return e})),g=e=>{var t;return((null===e||void 0===e||null===(t=e.DATE)||void 0===t?void 0:t.trim())||"").replace(/\(\w+\)/,"").trim()};let f=g(h[0]);function v(e){const t=e.split("/");if(3!==t.length)throw new Error("Invalid date format. Expected DD/MM/YYYY");const[a,n,r]=t;return"".concat(a,"/").concat(n,"/").concat(r)}f||(f=g(h[1]));const y=h.filter((e=>e.IN&&e.OUT)),b=v(new Date(f).toLocaleDateString());return y.forEach((e=>{e.DATE=b})),console.log(y),t(y),r(!1),p.flat()}return s}n.current.value="",a(null)}catch(i){}})(f,w,v,a,k);if(j(e),!1===e){const e=await((e,t,a,n,r)=>{if(null!==e){const s=ws.LF(e,{type:"buffer"}),i=s.SheetNames,l=[],o=[];i.forEach((e=>{const t=ws.Wp.sheet_to_json(s.Sheets[e]);l.push({sheetName:e,data:t})}));const d=l&&l.map((e=>{const t=e.data;var a=t.slice(1,2);const n=a.map((e=>Object.entries(e).map((e=>{let[t,a]=e;return[{key:t,value:a}]})))).flat().flat();return t.slice(2).forEach((e=>{const t={};Object.entries(e).forEach((e=>{let[a,r]=e;const s=n.find((e=>e.key===a));s&&(t[s.value]=r)})),o.push(t)})),a})),c=(e,t)=>{if("time"===t){const t=24*e,a=Math.floor(t),n=60*(t-a),r=Math.floor(n),s=60*(n-r),i=Math.round(s);return"".concat(a.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"),":").concat(i.toString().padStart(2,"0"))}if("date"===t){const t=new Date(1899,11,30),a=e;return new Date(t.getTime()+24*a*60*60*1e3)}};function p(e){return"string"!==typeof e?e:e.replace(/[^a-zA-Z0-9]/g,"")}const m=o.map((e=>{const t={};for(const a in e)t[p(a)]=e[a];return t}));t((m&&m.map((e=>{if("number"===typeof e.IN&&(e.IN=c(e.IN,"time")),"number"===typeof e.OUT&&(e.OUT=c(e.OUT,"time")),"number"===typeof e.DATE){const t=c(e.DATE,"date"),a=new Date(t);e.DATE=a.toLocaleDateString()}return e}))).filter((e=>e.IN&&e.OUT)));const u=d.map((e=>e.map((e=>Object.entries(e).reduce(((e,t)=>{let[a,n]=t;return e[n]=a,e}),{})))));return r(!1),u.flat()}n.current.value="",a(null)})(f,w,v,a,k);j(e)}a.current.value="",v(null)}else if("HO"===A){const e=((e,t,a,n,r)=>{try{if(null!==e){const i=ws.LF(e,{type:"buffer"}),l=i.SheetNames,o=[],d=[];l.forEach((e=>{const t=ws.Wp.sheet_to_json(i.Sheets[e]);o.push({sheetName:e,data:t})}));const c=o&&o.map((e=>{const t=e.data;var a=t.slice(1,2);const n=a.map((e=>Object.entries(e).map((e=>{let[t,a]=e;return[{key:t,value:a}]})))).flat().flat();return t.slice(2).forEach((e=>{const t={};Object.entries(e).forEach((e=>{let[a,r]=e;const s=n.find((e=>e.key===a));s&&(t[s.value]=r)})),d.push(t)})),a})),p=(e,t)=>{if("time"===t){const t=24*e,a=Math.floor(t),n=60*(t-a),r=Math.floor(n),s=60*(n-r),i=Math.round(s);return"".concat(a.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"),":").concat(i.toString().padStart(2,"0"))}if("date"===t){const t=new Date(1899,11,30),a=e;return new Date(t.getTime()+24*a*60*60*1e3)}};function m(e){return"string"!==typeof e?e:e.replace(/[^a-zA-Z0-9]/g,"")}const u=d.map((e=>{const t={};for(const a in e)t[m(a)]=e[a];return t}));function x(e){const t=e.split("/");if(3!==t.length)throw new Error("Invalid date format. Expected DD/MM/YYYY");const[a,n,r]=t;return"".concat(a,"/").concat(n,"/").concat(r)}return t((u&&u.map((e=>{if("number"===typeof e.ONAM&&(e.ONAM=p(e.ONAM,"time")),"number"===typeof e.OFFAM&&(e.OFFAM=p(e.OFFAM,"time")),"number"===typeof e.ONPM&&(e.ONPM=p(e.ONPM,"time")),"number"===typeof e.OFFPM&&(e.OFFPM=p(e.OFFPM,"time")),"number"===typeof e.IN&&(e.IN=p(e.IN,"time")),"number"===typeof e.OUT&&(e.OUT=p(e.OUT,"time")),"number"===typeof e.DATE){const t=p(e.DATE,"date"),a=x(new Date(t).toLocaleDateString());e.DATE=a}return e}))).filter((e=>e.IN&&e.OUT))),r(!1),c.flat()}n.current.value="",a(null)}catch(s){console.log(s)}})(f,w,v,a,k);j(e),a.current.value="",v(null)}else if("BLNG"===A){const e=((e,t,a,n,r)=>{try{if(null!==e){const i=ws.LF(e,{type:"buffer",cellStyles:!0}),l=i.SheetNames,o=[],d=[],c=[];l.forEach((e=>{const t=ws.Wp.sheet_to_json(i.Sheets[e]);o.push({sheetName:e,data:t})}));const p=o&&o.map((e=>{const t=e.data;var a=t.slice(0,1);const n=a.map((e=>Object.entries(e).map((e=>{let[t,a]=e;return[{key:t,value:a}]})))).flat().flat();return t.slice(1).forEach((e=>{const t={};Object.entries(e).forEach((e=>{let[a,r]=e;const s=n.find((e=>e.key===a));s&&(t[s.value]=r)})),c.push(t)})),a}));function m(e){return"string"!==typeof e?e:e.replace(/[^a-zA-Z0-9]/g,"")}const u=c.map((e=>{const t={};for(const a in e)t[m(a).toUpperCase()]=e[a];return(0,x.A)((0,x.A)({},t),{},{NORMALWORKINGHRSPERDAY:"",WORKINGHOURS:"",OT:"",REMARKS:""})}));d.push(u);const h=(e,t)=>{if("dateTime"===t){const t=new Date(1899,11,30),a=24*e*60*60*1e3;return new Date(t.getTime()+a)}if("date"===t){const t=new Date(1899,11,30),a=e;return new Date(t.getTime()+24*a*60*60*1e3)}if("time"===t){const t=24*e,a=Math.floor(t),n=60*(t-a),r=Math.floor(n),s=60*(n-r),i=Math.round(s);return"".concat(a.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"),":").concat(i.toString().padStart(2,"0"))}if("Avg. Daily Total By Day"===t){const t=Math.round(24*e*60),a=Math.floor(t/60),n=t%60,r=String(a).padStart(2,"0"),s=String(n).padStart(2,"0");return"".concat(r,":").concat(s)}},g=e=>e.toLocaleString("en-US",{day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0}),f=d.flat(),v=(f&&f.map((e=>{if("number"===typeof e.EXITDATETIME){const t=h(e.EXITDATETIME,"dateTime");e.EXITDATETIME=g(t)}if("number"===typeof e.ENTRANCEDATETIME){const t=h(e.ENTRANCEDATETIME,"dateTime");e.ENTRANCEDATETIME=g(t)}if("number"===typeof e.ENTRANCEDATEUSED){const t=h(e.ENTRANCEDATEUSED,"date"),a=new Date(t);e.ENTRANCEDATEUSED=a.toLocaleDateString(),console.log(a.toLocaleDateString())}if("number"===typeof e.AVGDAILYTOTALBYDAY){const t=h(e.AVGDAILYTOTALBYDAY,"Avg. Daily Total By Day");e.AVGDAILYTOTALBYDAY=t}if("number"===typeof e.ADININWORKSENGINEERINGSDNBHD){const t=h(e.ADININWORKSENGINEERINGSDNBHD,"Avg. Daily Total By Day");e.ADININWORKSENGINEERINGSDNBHD=t}return e}))).reduce(((e,t)=>{const{FID:a,NAMEFLAST:n,ENTRANCEDATEUSED:r,ENTRANCEDATETIME:s,EXITDATETIME:i,AVGDAILYTOTALBYDAY:l,ADININWORKSENGINEERINGSDNBHD:o}=t,d=(0,Hr.A)(t,As),c=e[e.length-1]||{},p=a||c.FID,m=n||c.NAMEFLAST,u=r||c.ENTRANCEDATEUSED,h=e.find((e=>e.FID===p&&e.NAMEFLAST===m&&e.ENTRANCEDATEUSED===u));return h?(h.ENTRANCEDATETIME.push(s),h.EXITDATETIME.push(i)):(e.push((0,x.A)({FID:p||"",NAMEFLAST:m||"",ENTRANCEDATEUSED:r,ENTRANCEDATETIME:[s],EXITDATETIME:[i],AVGDAILYTOTALBYDAY:l,ADININWORKSENGINEERINGSDNBHD:l},d)),console.log("Working...")),e}),[]);return console.log("transformedData : ",v),v.forEach((e=>{e.FID&&e.ENTRANCEDATEUSED&&(e.EXITDATETIME.length>1&&(e.EXITDATETIME=[e.EXITDATETIME[e.EXITDATETIME.length-1]]),e.ENTRANCEDATETIME.length>1&&(e.ENTRANCEDATETIME=[e.ENTRANCEDATETIME[0]]))})),t(v),r(!1),p.flat()}n.current.value="",a(null)}catch(s){}})(f,w,v,a,k);j(e),a.current.value="",v(null)}}catch(e){console.log("ERROR",e)}};return(0,i.jsxs)("div",{className:"p-10 bg-[#fafaf6] min-h-screen  flex-col items-center",children:[(0,i.jsxs)("div",{className:"flex ".concat("Manager"===F?"justify-start":"justify-center","  mt-5"),children:[(0,i.jsx)("div",{children:(0,i.jsx)(n.N_,{to:"/timeSheet",className:"text-xl flex-1 text-grey w-1/12",children:(0,i.jsx)(Lt.QVr,{})})}),"Manager"!==F&&(0,i.jsxs)("div",{className:"flex justify-center gap-11 w-11/12 pr-5 ",children:[(0,i.jsx)("p",{className:"".concat(0===E&&"border-b-4 border-b-primary"," pb-1 cursor-pointer text_size_5"),onClick:()=>{I(0)},children:"Upload ".concat(t," Excel Sheet")}),(0,i.jsx)("p",{className:"".concat(1===E&&"border-b-4 border-b-primary"," pb-1 cursor-pointer text_size_5"),onClick:()=>{I(1)},children:"".concat(t," Rejected Items")})]})]}),(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:" m-9 screen-size my-5  flex flex-col items-center gap-3",children:[(0,i.jsx)("p",{className:"".concat(0===E?"text-2xl font-semibold text-dark_grey uppercase mt-4":"hidden"),children:t}),"Manager"!==F&&0===E&&(0,i.jsx)("div",{className:"my-2 flex flex-col gap-5",children:(0,i.jsxs)("div",{className:"flex gap-5",children:[(0,i.jsxs)("div",{className:" flex flex-col items-center  gap-5",children:[(0,i.jsx)("div",{className:"border-[#30303080] border-2",children:(0,i.jsx)("input",{className:"outline-none py-2 px-3 text-sm w-64",type:"text",placeholder:"Please Upload the Time Sheet",value:o||"",onChange:e=>{d(e.target.value)},readOnly:!0})}),(0,i.jsxs)("div",{className:"flex gap-2 p",children:[(0,i.jsx)("span",{children:(0,i.jsx)(ft.dnm,{className:"text-xs mt-1.5"})}),(0,i.jsx)("span",{className:"text-dark_grey",children:"XLS / CSV Files only"})]})]}),(0,i.jsxs)("div",{className:"",children:[!o&&(0,i.jsxs)("div",{children:[(0,i.jsx)("button",{className:"text_size_4 border-[#30303080] border-2 py-1 px-10 text-dark_grey rounded-md bg-[#FEF116]",onClick:()=>{(async()=>{a.current.click()})()},children:"Upload"}),"Offshore"===t&&(0,i.jsxs)("div",{className:"flex items-center space-x-3 m-5",children:[(0,i.jsx)("input",{type:"checkbox",className:"h-5 w-5 text-dark_grey rounded checked:bg-red checked:border-transparent",checked:R,onChange:()=>{T(!R),w(null)}}),(0,i.jsx)("label",{htmlFor:"custom-checkbox",className:"text-dark_grey text_size_4 ",children:"ORMC"})]})]}),o&&(0,i.jsxs)("div",{className:"flex gap-5",children:[(0,i.jsx)("button",{className:"text_size_4 border-[#30303080] border-2 py-1 px-10 text-dark_grey rounded-md bg-[#FEF116]",onClick:()=>{k(!0),setTimeout((()=>{M()}),1e3),g(),d()},children:"Submit"}),(0,i.jsx)("button",{className:"text_size_4 border-[#30303080] border-2 py-1 px-10 text-dark_grey rounded-md ",onClick:()=>{d(""),a.current.value=""},children:"Cancel"})]})]}),(0,i.jsx)("input",{ref:a,type:"file",className:"hidden",onChange:e=>{(e=>{u(e.target.files[0].name);let t=["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/csv"],a=e.target.files[0];if(a)if(d(e.target.files[0].name),a&&t.includes(a.type)){var n=a&&t.includes(a.type);g(n),b(null);let e=new FileReader;e.readAsArrayBuffer(a),e.onload=e=>{v(e.target.result)}}else b("Please select only excel file types"),v(null)})(e),(e=>{const t=e.target.files[0],a=["xlsx","xls"];if(t){const n=t.name.split(".").pop().toLowerCase();a.includes(n)?l(""):(l("Please upload a valid Excel file."),e.target.value="")}})(e)},accept:".xls,.xlsx"})]})})]})}),s&&(0,i.jsx)("div",{className:"flex items-center justify-center ",children:(0,i.jsx)(Ur,{fileName:o,ensureExcelFile:h,typeError:y,UploadFile:M,setEnsureExcelFile:g,setFileName:d,clearUseRefObject:()=>{a.current.value="",v(null)}})}),(0,i.jsx)("div",{children:!0===C&&(0,i.jsx)("div",{className:"flex justify-center items-center text_size_5 text-dark_grey m-2",children:(0,i.jsx)("p",{children:"Please wait a few seconds....."})})}),D&&(0,i.jsxs)("div",{children:["Offshore"===A&&(0,i.jsx)(cs,{setExcelData:w,excelData:D,returnedTHeader:N,Position:F,titleName:A,fileName:m}),"HO"===A&&(0,i.jsx)(Ds,{setExcelData:w,excelData:D,returnedTHeader:N,Position:F,titleName:A,fileName:m}),"SBW"===A&&(0,i.jsx)(ys,{setExcelData:w,excelData:D,returnedTHeader:N,Position:F,titleName:A,fileName:m}),"ORMC"===A&&(0,i.jsx)(Ns,{setExcelData:w,excelData:D,returnedTHeader:N,Position:F,titleName:A,fileName:m}),"BLNG"===A&&(0,i.jsx)(hs,{excelData:D,setExcelData:w,returnedTHeader:N,Position:F,titleName:A,fileName:m})]}),!D&&"Manager"===F&&"BLNG"===A&&(0,i.jsx)(hs,{titleName:A,returnedTHeader:null,convertedStringToArrayObj:L,Position:F,fileName:m}),!D&&"Manager"===F&&"HO"===A&&(0,i.jsx)(Ds,{titleName:A,returnedTHeader:null,convertedStringToArrayObj:L,Position:F,fileName:m}),!D&&"Manager"===F&&"SBW"===A&&(0,i.jsx)(ys,{titleName:A,returnedTHeader:null,convertedStringToArrayObj:L,Position:F,fileName:m}),!D&&"Manager"===F&&"ORMC"===A&&(0,i.jsx)(Ns,{titleName:A,returnedTHeader:null,convertedStringToArrayObj:L,Position:F,fileName:m}),!D&&"Manager"===F&&"Offshore"===A&&(0,i.jsx)(cs,{titleName:A,returnedTHeader:null,convertedStringToArrayObj:L,Position:F,fileName:m}),"Offshore"===A&&"Manager"!==F&&1===E&&(0,i.jsx)(cs,{titleName:A,showRejectedItemTable:"Rejected",convertedStringToArrayObj:L,Position:F}),"BLNG"===A&&"Manager"!==F&&1===E&&(0,i.jsx)(hs,{titleName:A,showRejectedItemTable:"Rejected",convertedStringToArrayObj:L,Position:F}),"HO"===A&&"Manager"!==F&&1===E&&(0,i.jsx)(Ds,{titleName:A,showRejectedItemTable:"Rejected",convertedStringToArrayObj:L,Position:F}),"ORMC"===A&&"Manager"!==F&&1===E&&(0,i.jsx)(Ns,{titleName:A,showRejectedItemTable:"Rejected",convertedStringToArrayObj:L,Position:F}),"SBW"===A&&"Manager"!==F&&1===E&&(0,i.jsx)(ys,{titleName:A,showRejectedItemTable:"Rejected",convertedStringToArrayObj:L,Position:F}),c&&(0,i.jsx)("div",{className:"flex flex-col items-center",children:(0,i.jsx)(Br,{fileNameForSuccessful:m,setCloseSavedModel:p,returnedTHeader:[]})})]})}),Is=()=>(0,i.jsx)("div",{children:(0,i.jsx)(Es,{title:"Offshore"})}),Cs=()=>(0,i.jsx)("section",{children:(0,i.jsx)(Es,{title:"BLNG"})}),ks=e=>{let{handleFilterChange:t,toggleDropdown:a,isOpen:n}=e;const[s,l]=(0,r.useState)("All");return(0,i.jsx)("section",{className:"w-fit grid grid-cols-1",children:(0,i.jsxs)("div",{className:"center gap-2 border relative rounded-md p-[9px] text-sm text-secondary border-[#CDCDCD] bg-white cursor-pointer",onClick:a,children:[(0,i.jsx)(y.NDY,{}),(0,i.jsx)("p",{children:"Filter"}),n&&(0,i.jsx)("div",{className:"top-10 absolute w-fit shadow-xl bg-white z-50",children:(0,i.jsx)("div",{className:"p-1 shadow-md flex flex-col bg-white ",children:["All","Pending","Approved","Rejected"].map((e=>(0,i.jsx)("button",{onClick:()=>(e=>{l(e),t(e)})(e),className:"w-full text-left px-4 py-2 text-sm border-b-2 border-white ".concat(s===e?"text-white bg-[#71717a]":"text-dark_grey hover:bg-grey hover:text-white"),children:e},e)))})})]})})},Rs=e=>{let{newSearchFunction:t,visibleData:a,message:r,setVisibleData:s}=e;const{setTimeSheetFileData:l,setShowListTimeSheet:o,setSearchQuery:d}=ht(),c=(0,n.Zp)();return(0,i.jsx)("div",{className:"table-container flex justify-center ",children:(0,i.jsxs)("table",{className:"styled-table w-full",children:[(0,i.jsx)("thead",{className:"sticky-header",children:(0,i.jsxs)("tr",{className:"text_size_6 text-center h-12",children:[(0,i.jsx)("th",{children:"S No."}),(0,i.jsx)("th",{children:"File Name"}),(0,i.jsx)("th",{children:"Type"}),(0,i.jsx)("th",{children:"Date"}),(0,i.jsx)("th",{children:"View"}),(0,i.jsx)("th",{children:"Status"})]})}),(0,i.jsx)("tbody",{children:a&&a.length>0?a.map(((e,a)=>(0,i.jsxs)("tr",{className:"text-dark_grey h-[53px] text-sm bg-white  rounded-sm shadow-md text-start border-b-2 border-[#CECECE]",children:[(0,i.jsx)("td",{children:a+1}),(0,i.jsx)("td",{children:e.fileName}),(0,i.jsx)("td",{children:e.fileType}),(0,i.jsx)("td",{children:e.date}),(0,i.jsx)("td",{onClick:()=>{(e=>{l(null),s([]),d(null),l(e),o(!1),c("/viewTsheetDetails")})(e),t(e)},className:"underline text-dark_skyBlue cursor-pointer",children:"View"}),(0,i.jsx)("td",{className:"Approved"===e.status?"text-[#16a34a] text_size_7":"Rejected"===e.status?"text-[#a31f16] text_size_7":"text-[#272727] text_size_7",children:e.status})]},a))):(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"15",className:"text-center text-dark_ash text_size_5 bg-white",children:(0,i.jsx)("p",{className:"p-5",children:r||"Please select an Excel Sheet from the dropdown to display the data."})})})})]})})},Ts=()=>{const e=(0,r.useRef)(null),[t,a]=(0,r.useState)(!1),[s,l]=(0,r.useState)("All"),[o,d]=(0,r.useState)(null),[c,p]=(0,r.useState)(!0),[m,u]=(0,r.useState)(null),[x,h]=(0,r.useState)(null),[g,f]=(0,r.useState)(""),[v,y]=(0,r.useState)(!1),{startDate:b,setStartDate:N,endDate:j,setEndDate:D,searchQuery:w,setSearchQuery:A,showListTimeSheet:S,setShowListTimeSheet:E,timeSheetFileData:I,setTimeSheetFileData:C,categoryFilter:k,setCategoryFilter:R}=ht(),{convertedStringToArrayObj:T}=Ss(k,"viewTimeSheet"),{handleScroll:P,visibleData:_,setVisibleData:O}=as(x,"TimeKeeper");console.log(x),console.log(_),(0,r.useEffect)((()=>{const e=function(e){const t={};return e.forEach((e=>{const a=e.updatedAt.split("T")[0],n=e.status,r="".concat(a,"_").concat(n);t[r]||(t[r]={fileName:e.fileName,fileType:e.fileType,date:a,status:n,updatedAt:[]}),t[r].updatedAt.push(e)})),Object.values(t)}(T);console.log(e),h(e),u(e)}),[T]),(0,r.useEffect)((()=>{if(!m||0===m.length)return;let e=[...m];if("All"!==s&&(e=e.filter((e=>e.status===s))),b){const t=new Date(b).toLocaleDateString();e=e.filter((e=>new Date(e.date).toLocaleDateString()===t))}e.length>0?h(e):(O([]),f("No matching results found."))}),[m,b,s]),(0,r.useEffect)((()=>{p(!1)}),[_]);const L=(0,r.useCallback)((e=>{d(null===e||void 0===e?void 0:e.updatedAt),console.log(e)}),[]);return(0,i.jsx)("div",{className:"bg-[#fafaf6] ".concat(S&&"h-screen"," border border-[#fafaf6] flex justify-center "),onClick:()=>{!0===t&&a(!1),!0===v&&y(!1)},children:(0,i.jsxs)("div",{className:"".concat(S?"w-[1300px]":"screen-size"," m-9"),children:[(0,i.jsxs)("div",{className:"flex items-center w-full",children:[(0,i.jsx)(n.N_,{to:"".concat(S?"/timeSheet":"/viewTimesheet"),className:"text-xl text-grey cursor-pointer w-1/15 flex items-center",onClick:()=>{N(""),D(""),E(!0),C(null)},children:(0,i.jsx)(Lt.QVr,{})}),(0,i.jsx)("header",{className:"text_size_2 py-5 flex-grow text-dark_grey text-center",children:(0,i.jsx)("p",{children:"View Time Sheet"})})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,i.jsxs)("div",{className:"flex justify-start gap-4",children:[(0,i.jsxs)("div",{className:"relative grid grid-cols-1",children:[(0,i.jsx)("label",{className:"text_size_6",children:S?"Choose Date":"Start Date"}),(0,i.jsx)("input",{type:"date",value:b,className:"border border-[#D9D9D9] rounded outline-none p-2 text-[#000000] text-sm",onChange:e=>N(e.target.value)})]}),!S&&(0,i.jsxs)("div",{className:"relative grid grid-cols-1",children:[(0,i.jsx)("label",{className:"text_size_6",children:"End Date"}),(0,i.jsx)("input",{type:"date",value:j,className:"border border-[#D9D9D9] rounded outline-none p-2 text-[#000000] text-sm",onChange:e=>D(e.target.value)})]})]}),(0,i.jsxs)("div",{className:"flex justify-end gap-4 mt-6",children:[(0,i.jsxs)("div",{className:"".concat(S?"relative grid grid-cols-1":"hidden"),children:[(0,i.jsx)("input",{value:k,placeholder:"Select type",className:"border border-[#D9D9D9] cursor-pointer rounded outline-none p-2 text-[#000000] text_size_8",onClick:()=>{a(!t)},readOnly:!0}),(0,i.jsx)("span",{className:"absolute right-2 top-2",children:(0,i.jsx)(Lt.BNo,{className:"text-xl text-dark_grey"})}),t&&(0,i.jsx)("div",{className:"absolute border top-10 border-[#D9D9D9] mt-1 w-full text-[15px] text-dark_grey p-1 bg-white z-50",onClick:()=>{a(!t)},children:["Offshore","HO","SBW","ORMC","BLNG"].map((t=>(0,i.jsx)("p",{className:"p-1 cursor-pointer ".concat(e.current===t?"bg-secondary border text-white":"hover:bg-grey hover:text-white"),onClick:()=>{t!==e.current&&(p(!0),(e=>{R(e)})(t),h(null),u(null),O([]),e.current=t)},children:t},t)))})]}),!S&&(0,i.jsx)(Wr,{placeholder:"".concat("Offshore"===(null===I||void 0===I?void 0:I.fileType)?"SAP ID":"HO"===(null===I||void 0===I?void 0:I.fileType)?"EMPLOYEE ID / BADGE NO":"SBW"===(null===I||void 0===I?void 0:I.fileType)||"ORMC"===(null===I||void 0===I?void 0:I.fileType)?"BADGE NO":"BLNG"===(null===I||void 0===I?void 0:I.fileType)?"FID":"Search..."),searchResult:e=>{A(e),console.log(e)},allEmpDetails:o,secondaryData:null===I||void 0===I?void 0:I.updatedAt,Position:"ViewTimeSheet"}),S&&(0,i.jsx)(ks,{handleFilterChange:e=>{l(e)},toggleDropdown:()=>{y(!v)},isOpen:v,setIsOpen:y})]})]}),S&&(0,i.jsx)(Rs,{visibleData:_,setVisibleData:O,newSearchFunction:L,message:g})]})})},Ps=Xt.Ik().shape({courseSelect:Xt.Yj().required("Course selection is required"),courseName:Xt.YO().of(Xt.Yj().notRequired()),company:Xt.YO().of(Xt.Yj().notRequired())}),_s=(Xt.Ik().shape({empID:Xt.Yj().required("Employee ID is required"),empBadgeNo:Xt.Yj().notRequired(),department:Xt.Yj().notRequired(),blastingBadgeNo:Xt.Yj().required("Blasting/Painting Badge Number is required"),blastingStartDate:Xt.Yj().notRequired(),blastingEndDate:Xt.Yj().notRequired(),blastingQulifiExp:Xt.Yj().notRequired(),name:Xt.Yj().notRequired(),position:Xt.Yj().notRequired(),blastingRemarks:Xt.Yj().notRequired(),blastingUpload:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF, image files, or valid URLs are allowed",(e=>e instanceof File?["application/pdf","image/jpeg","image/png"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired()}),Xt.Ik().shape({empID:Xt.Yj().required("Employee ID is required"),empBadgeNo:Xt.Yj().notRequired(),department:Xt.Yj().notRequired(),courseCode:Xt.Yj().notRequired(),courseName:Xt.Yj().notRequired(),company:Xt.Yj().notRequired(),orgiCertifiDate:Xt.Yj().notRequired(),name:Xt.Yj().notRequired(),eCertifiDate:Xt.Yj().notRequired(),certifiExpiry:Xt.Yj().required("Certifi Expiry is required"),trainingUpCertifi:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF, image files, or valid URLs are allowed",(e=>e instanceof File?["application/pdf","image/jpeg","image/png"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired()})),Os=(Xt.Ik().shape({empID:Xt.Yj().required("Employee ID is required"),empBadgeNo:Xt.Yj().notRequired(),department:Xt.Yj().notRequired(),weldingStampNor:Xt.Yj().required("welding Stamp Number is required"),wpsNumber:Xt.Yj().notRequired(),weldingProcess:Xt.Yj().notRequired(),weldingPosition:Xt.Yj().notRequired(),thicknessRange:Xt.Yj().notRequired(),WQExpiry:Xt.Yj().notRequired(),name:Xt.Yj().notRequired(),position:Xt.Yj().notRequired(),WQRNo:Xt.Yj().notRequired(),weldingCode:Xt.Yj().notRequired(),weldingMaterial:Xt.Yj().notRequired(),fillerMetal:Xt.Yj().notRequired(),diameterRange:Xt.Yj().notRequired(),WQRemarks:Xt.Yj().notRequired(),weldingUpload:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF, image files, or valid URLs are allowed",(e=>e instanceof File?["application/pdf"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired()}),Xt.Ik().shape({empID:Xt.Yj().required("Employee ID is required"),empBadgeNo:Xt.Yj().notRequired(),name:Xt.Yj().notRequired(),department:Xt.Yj().notRequired(),courseCode:Xt.Yj().required("Training Course Code is required"),courseName:Xt.Yj().notRequired(),company:Xt.Yj().notRequired(),traineeSD:Xt.Yj().notRequired(),traineeED:Xt.Yj().notRequired(),traineeStatus:Xt.Yj().notRequired(),MRNo:Xt.Yj().notRequired(),purchaseONo:Xt.Yj().notRequired(),traineeCourseFee:Xt.Yj().notRequired(),medicalName:Xt.Yj().notRequired(),medicalExpiry:Xt.Yj().notRequired(),medicalAppointDate:Xt.Yj().notRequired(),medicalReport:Xt.YO().of(Xt.gl().test("fileOrUrl","Only PDF, image files, or valid URLs are allowed",(e=>e instanceof File?["application/pdf","image/jpeg","image/png"].includes(e.type):"string"!==typeof e||bn(e))).notRequired()).notRequired()})),Ls=e=>{let{closeModal:t}=e;const{AddCourseData:a}=(()=>{const e=(0,ge.D)();return{AddCourseData:(0,r.useCallback)((async t=>{let{AddCFCre:a}=t;if(!a)throw new Error("Missing required parameters");const n={courseSelect:a.courseSelect,courseName:a.courseName,company:a.company};console.log(n);try{const t=await Promise.all([e.graphql({query:"\n  mutation CreateAddCourse(\n    $input: CreateAddCourseInput!\n    $condition: ModelAddCourseConditionInput\n  ) {\n    createAddCourse(input: $input, condition: $condition) {\n      id\n      courseSelect\n      courseName\n      company\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:n}})]);console.log(t,"successfully stored data")}catch(r){throw console.error("Error executing GraphQL requests:",r),r}}),[])}})(),{AddCourseDetails:n}=(0,r.useContext)(s.Y),{AddCUpdateFun:l}=(()=>{const e=(0,ge.D)();return{AddCUpdateFun:(0,r.useCallback)((async t=>{let{AddCFUpp:a}=t;if(!a)throw new Error("Missing required parameters");const n={id:a.id,courseSelect:a.courseSelect,courseName:a.courseName,company:a.company};console.log(n);try{const t=await Promise.all([e.graphql({query:"\n  mutation UpdateAddCourse(\n    $input: UpdateAddCourseInput!\n    $condition: ModelAddCourseConditionInput\n  ) {\n    updateAddCourse(input: $input, condition: $condition) {\n      id\n      courseSelect\n      courseName\n      company\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:n,limit:2e4}})]);console.log(t,"successfully Updated data")}catch(r){throw console.log(r),console.error("Error executing GraphQL requests:",r),r}}),[])}})(),{register:o,handleSubmit:d,setValue:c,formState:{errors:p}}=(0,it.mN)({resolver:(0,lt.t)(Ps)}),[m,u]=(0,r.useState)([""]),[h,g]=(0,r.useState)([""]),[f,v]=(0,r.useState)(""),[y,b]=(0,r.useState)(!1);return(0,i.jsx)("div",{className:"flex justify-center items-center",children:(0,i.jsxs)("section",{className:"w-[550px] h-[440px] overflow-y-auto p-5 bg-white shadow-lg rounded-lg scrollBar",children:[(0,i.jsx)("div",{className:"flex justify-end items-end",children:(0,i.jsx)("button",{onClick:t,className:"p-2",children:(0,i.jsx)(Lr.oxH,{className:"text-[32px] font-xs"})})}),(0,i.jsxs)("form",{onSubmit:d((async e=>{try{const t="string"===typeof e.courseSelect?e.courseSelect:"",r=null===n||void 0===n?void 0:n.find((e=>{const a="string"===typeof e.courseSelect?e.courseSelect:"";return t===a}));if(r){const t=[...new Set([...r.courseName,...e.courseName])],a=[...new Set([...r.company,...e.company])],n=(0,x.A)((0,x.A)({},e),{},{courseName:t,company:a,id:r.id});await l({AddCFUpp:n})}else{const t=(0,x.A)({},e);await a({AddCFCre:t}),v("Training Add Course Form Saved successfully"),b(!0)}}catch(t){console.error("Error submitting data:",t.message)}})),className:"p-7",children:[(0,i.jsxs)("div",{className:"mb-4 relative",children:[(0,i.jsx)("label",{className:"font-semibold",children:"Course Code:"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text"},o("courseSelect")),{},{className:"input-field"})),p.courseSelect&&(0,i.jsx)("p",{className:"text-[red] text-[13px] mt-1",children:p.courseSelect.message})]}),(0,i.jsxs)("div",{className:"mb-4 relative",children:[(0,i.jsx)("label",{className:"font-semibold",children:"Course Name:"}),m.map(((e,t)=>(0,i.jsxs)("div",{className:"flex items-center mb-2",children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text",value:m[t]},o("courseName[".concat(t,"]"))),{},{onChange:e=>{const a=[...m];a[t]=e.target.value,u(a),c("courseName[".concat(t,"]"),e.target.value)},className:"input-field"})),t>0&&(0,i.jsx)("button",{type:"button",onClick:()=>(e=>{const t=[...m];t.splice(e,1),u(t),c("courseName",t)})(t),className:"ml-2 text-medium_grey",children:(0,i.jsx)(Lt.vli,{})}),p.courseName&&p.courseName[t]&&(0,i.jsx)("p",{className:"text-[red] text-[13px] mt-1",children:p.courseName[t].message})]},t))),(0,i.jsx)("button",{type:"button",onClick:()=>{u((e=>[...e,""]))},className:"absolute top-10 -right-7 text-medium_grey text-[24px]",children:(0,i.jsx)(Ft.Oh0,{})})]}),(0,i.jsxs)("div",{className:"mb-4 relative",children:[(0,i.jsx)("label",{className:"font-semibold",children:"Training Company:"}),h.map(((e,t)=>(0,i.jsxs)("div",{className:"flex items-center mb-2",children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text",value:h[t]},o("company[".concat(t,"]"))),{},{onChange:e=>{const a=[...h];a[t]=e.target.value,g(a),c("company[".concat(t,"]"),e.target.value)},className:"input-field"})),t>0&&(0,i.jsx)("button",{type:"button",onClick:()=>(e=>{const t=[...h];t.splice(e,1),g(t),c("company",t)})(t),className:"ml-2 text-medium_grey",children:(0,i.jsx)(Lt.vli,{})}),p.company&&p.company[t]&&(0,i.jsx)("p",{className:"text-[red] text-[13px] mt-1",children:p.company[t].message})]},t))),(0,i.jsx)("button",{type:"button",onClick:()=>{g((e=>[...e,""]))},className:"absolute top-10 -right-7 text-medium_grey text-[24px]",children:(0,i.jsx)(Ft.Oh0,{})})]}),(0,i.jsx)("div",{className:"center py-2",children:(0,i.jsx)("button",{type:"submit",className:"primary_btn",children:"Save"})})]}),y&&(0,i.jsx)(Le,{text:f,notification:y,path:"/training"})]})})},Fs=()=>{const{empPIData:e,AddCourseDetails:t}=(0,r.useContext)(s.Y),{register:a,setValue:l,formState:{errors:o}}=(0,it.mN)({resolver:(0,lt.t)(Ps)}),[d,c]=(0,r.useState)(!0),[p,m]=(0,r.useState)(!1),[u,h]=(0,r.useState)(null),[g,f]=(0,r.useState)([]);(0,r.useEffect)((()=>{(()=>{try{const a=e.map((e=>{const a=t.find((t=>t.empID===e.empID));return a?(0,x.A)((0,x.A)({},e),a):null})).filter(Boolean);f(a)}catch(a){console.error("Error fetching data:",a)}})()}),[e,t]);return(0,i.jsxs)("section",{className:"p-10 center flex-col gap-16 bg-[#F8F8F8] mt-10",children:[(0,i.jsxs)("div",{className:" w-full flex items-center justify-center gap-5 ",children:[(0,i.jsx)(n.N_,{to:"/training/hr",className:"text-xl flex-1 text-grey",children:(0,i.jsx)(Lt.QVr,{})}),(0,i.jsx)("article",{className:"w-full  center gap-5 text-dark_grey ",children:(0,i.jsx)("p",{className:"text-center mt-2 text_size_2 relative after:absolute after:w-full after:h-1 after:bg-primary after:-bottom-2 after:left-0",children:"Add Course"})})]}),(0,i.jsx)("div",{className:"screen-size center  w-full h-full",children:(0,i.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-2xl w-full  max-h-[400px] h-full",children:[(0,i.jsx)("div",{className:"flex justify-end items-center py-2",children:(0,i.jsx)("button",{type:"button",className:"bg-primary font-bold py-2 px-5 text-dark_grey rounded-md",onClick:()=>m(!0),children:"Add Course"})}),(0,i.jsxs)("form",{children:[(0,i.jsxs)("div",{className:"mb-5",children:[(0,i.jsx)("label",{htmlFor:"courseSelect",className:"text_size_5",children:"Course Code:"}),(0,i.jsxs)("select",(0,x.A)((0,x.A)({},a("courseSelect")),{},{onChange:e=>{const a=e.target.value,n=t.find((e=>String(e.courseSelect)===String(a)));h(n||null),n?(l("courseName",n.courseName||""),l("company",n.company||"")):(l("courseName",""),l("company",""))},className:"input-field select-custom",children:[(0,i.jsx)("option",{value:"",children:"Select Course"}),t.map((e=>(0,i.jsx)("option",{value:e.courseSelect,children:e.courseSelect},e.courseSelect)))]}))]}),(0,i.jsxs)("div",{className:"mb-5",children:[(0,i.jsx)("label",{className:"text_size_5",children:"Course Name"}),(0,i.jsx)("select",(0,x.A)((0,x.A)({},a("courseName")),{},{className:"input-field select-custom",children:u&&Array.isArray(u.courseName)?u.courseName.map(((e,t)=>(0,i.jsx)("option",{value:e,children:e},t))):(0,i.jsx)("option",{value:(null===u||void 0===u?void 0:u.courseName)||"",children:(null===u||void 0===u?void 0:u.courseName)||"No Course Name Available"})}))]}),(0,i.jsxs)("div",{className:"mb-5",children:[(0,i.jsx)("label",{className:"text_size_5",children:"Training Company"}),(0,i.jsx)("select",(0,x.A)((0,x.A)({},a("company")),{},{className:"input-field select-custom",children:u&&Array.isArray(u.company)?u.company.map(((e,t)=>(0,i.jsx)("option",{value:e,children:e},t))):(0,i.jsx)("option",{value:(null===u||void 0===u?void 0:u.company)||"",children:(null===u||void 0===u?void 0:u.company)||"No Company Available"})}))]})]})]})}),p&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center border mt-20",children:(0,i.jsx)(Ls,{closeModal:()=>m(!1)})})]})},Ms=()=>{const{empPIData:e,workInfoData:t,AddCourseDetails:a,AddEmpReq:l}=(0,r.useContext)(s.Y);(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]);const{AddEmpData:o}=(()=>{const e=(0,ge.D)();return{AddEmpData:(0,r.useCallback)((async t=>{let{AddEmpValue:a}=t;if(!a)throw new Error("Missing required parameters");const n={empID:a.empID,MRNo:a.MRNo,medicalName:a.medicalName,medicalExpiry:a.medicalExpiry,medicalAppointDate:a.medicalAppointDate,medicalReport:[JSON.stringify(a.medicalReport)],courseCode:[a.courseCode],courseName:[a.courseName],company:[a.company],traineeSD:a.traineeSD,traineeED:a.traineeED,traineeStatus:a.traineeStatus,traineeCourseFee:a.traineeCourseFee,mediRequired:a.mediRequired};console.log(n);try{const t=await Promise.all([e.graphql({query:"\n  mutation CreateTrainingReq(\n    $input: CreateTrainingReqInput!\n    $condition: ModelTrainingReqConditionInput\n  ) {\n    createTrainingReq(input: $input, condition: $condition) {\n      id\n      empID\n      MRNo\n      medicalName\n      medicalExpiry\n      medicalAppointDate\n      medicalReport\n      traineeSD\n      traineeED\n      traineeStatus\n      traineeCourseFee\n      courseCode\n      courseName\n      company\n      mediRequired\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:n}})]);console.log(t,"successfully create data")}catch(r){throw console.error("Error executing GraphQL requests:",r),r}}),[])}})(),{TrReqUp:d}=(()=>{const e=(0,ge.D)();return{TrReqUp:(0,r.useCallback)((async t=>{let{TMRDataUp:a}=t;if(!a)throw new Error("Missing required parameters");const n={id:a.id,empID:a.empID,MRNo:a.MRNo,medicalName:a.medicalName,medicalExpiry:a.medicalExpiry,medicalAppointDate:a.medicalAppointDate,medicalReport:[JSON.stringify(a.medicalReport)],courseCode:[a.courseCode],courseName:[a.courseName],company:[a.company],traineeSD:a.traineeSD,traineeED:a.traineeED,traineeStatus:a.traineeStatus,traineeCourseFee:a.traineeCourseFee,mediRequired:a.mediRequired};console.log(n);try{const t=await Promise.all([e.graphql({query:"\n  mutation UpdateTrainingReq(\n    $input: UpdateTrainingReqInput!\n    $condition: ModelTrainingReqConditionInput\n  ) {\n    updateTrainingReq(input: $input, condition: $condition) {\n      id\n      empID\n      MRNo\n      medicalName\n      medicalExpiry\n      medicalAppointDate\n      medicalReport\n      traineeSD\n      traineeED\n      traineeStatus\n      traineeCourseFee\n      courseCode\n      courseName\n      company\n      mediRequired\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:n,limit:2e4}})]);console.log(t,"successfully update data")}catch(r){throw console.error("Error executing GraphQL requests:",r),r}}),[])}})(),{register:c,handleSubmit:p,setValue:m,getValues:u,watch:h,formState:{errors:g}}=(0,it.mN)({resolver:(0,lt.t)(Os),defaultValues:{mediRequired:!1}});(0,r.useEffect)((()=>{(async()=>{try{const n=e.map((e=>{const n=t?t.find((t=>t.empID===e.empID)):{},r=a?a.find((t=>t.empID===e.empID)):{},s=l?l.find((t=>t.empID===e.empID)):{};return(0,x.A)((0,x.A)((0,x.A)((0,x.A)({},e),n),r),s)})).filter(Boolean);S(n),I(n)}catch(n){console.log(n)}})()}),[e,t,a,l]);const f=h("empID"),[v,b]=(0,r.useState)(!1),[N,j]=(0,r.useState)([]),[D,w]=(0,r.useState)(!1),[A,S]=(0,r.useState)([]),[E,I]=(0,r.useState)([]),[C,k]=(0,r.useState)([]),[R,T]=(0,r.useState)(""),[P,_]=(0,r.useState)({medicalReport:null}),[O,L]=(0,r.useState)({medicalReport:[]}),F=h("medicalReport","");(0,r.useEffect)((()=>{w(u("mediRequired"))}),[u]);return(0,i.jsxs)("section",{className:"bg-[#F8F8F8] p-10 center flex-col w-full ",children:[(0,i.jsxs)("div",{className:"w-full flex items-center justify-between gap-5",children:[(0,i.jsx)(n.N_,{to:"/trainingReq",className:"text-xl flex-1 text-grey",children:(0,i.jsx)(Lt.QVr,{})}),(0,i.jsx)("article",{className:"flex-1 flex gap-5 text-dark_grey",children:(0,i.jsx)("h1",{className:"text-center mt-2 text_size_2 relative after:absolute after:w-full after:h-1 after:bg-primary after:-bottom-2 after:left-0",children:"Add Employee"})})]}),(0,i.jsxs)("section",{className:" mt-16 mb-14 w-full bg-white px-20 py-10",children:[(0,i.jsx)("div",{className:"flex-1 w-[30%] mt-5",children:(0,i.jsx)(Wn,{searchResult:e=>{["empID","empBadgeNo","name","MRNo","medicalName","medicalExpiry","medicalAppointDate","traineeSD","traineeED","traineeStatus","traineeCourseFee"].forEach((t=>{e[t]&&m(t,e[t])})),["department","courseCode","courseName","company"].forEach((t=>{const a=(e=>Array.isArray(e)?e[e.length-1]:e)(e[t]);a&&(m(t,a),"courseName"===t&&j((e=>(0,x.A)((0,x.A)({},e),{},{courseName:Array.isArray(a)?a:[a]}))),"company"===t&&j((e=>(0,x.A)((0,x.A)({},e),{},{company:Array.isArray(a)?a:[a]}))))})),["medicalReport"].forEach((t=>{if(e[t])try{const a=JSON.parse(null===e||void 0===e?void 0:e[t][0]);if(m(t,a),L((e=>(0,x.A)((0,x.A)({},e),{},{[t]:a}))),Array.isArray(a)&&a.length>0){const e=a[a.length-1],n=null!==e&&void 0!==e&&e.upload?e.upload.split("/").pop().split(".").slice(0,-1).join("."):"Unknown file";_((e=>(0,x.A)((0,x.A)({},e),{},{[t]:n})))}}catch(a){console.error("Error parsing upload field ".concat(t,":"),a)}}));const t=!!(null!==e&&void 0!==e&&e.medicalName||null!==e&&void 0!==e&&e.medicalExpiry);m("mediRequired",t),w(t)},newFormData:E,searchIcon2:(0,i.jsx)(y.zfp,{}),placeholder:"Employee Id",rounded:"rounded-lg",filteredEmployees:C,setFilteredEmployees:k})}),(0,i.jsxs)("form",{onSubmit:p((async e=>{try{const t=l?l.find((t=>t.empID===e.empID)):{};if(t){const a=(0,x.A)((0,x.A)({},e),{},{medicalReport:O.medicalReport,id:t.id});await d({TMRDataUp:a}),T("Training details Updated successfully"),b(!0)}else{const t=(0,x.A)((0,x.A)({},e),{},{medicalReport:O.medicalReport});await o({AddEmpValue:t}),T("Training details Saved successfully"),b(!0)}}catch(t){console.log(t)}})),children:[(0,i.jsx)("div",{className:"flex justify-end  items-center py-5 mt-2",children:(0,i.jsxs)("div",{className:"max-w-sm",children:[(0,i.jsx)("label",{className:"text_size_5",children:"Employee ID"})," ",(0,i.jsx)("br",{}),(0,i.jsx)("input",(0,x.A)({type:"text",className:"input-field"},c("empID"))),g.empID&&(0,i.jsx)("p",{className:"text-[red] text-[12px]",children:g.empID.message})]})}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text_size_5",children:"Employee Badge Number"}),(0,i.jsx)("input",(0,x.A)({type:"text",className:"input-field "},c("empBadgeNo"))),g.empBadgeNo&&(0,i.jsx)("p",{className:"text-[red] text-[13px] mt-1",children:g.empBadgeNo.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text_size_5",children:"Employee Name"}),(0,i.jsx)("input",(0,x.A)({type:"text",className:"input-field "},c("name")))]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text_size_5",children:"Department"}),(0,i.jsx)("input",(0,x.A)({type:"text",className:"input-field "},c("department")))]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text_size_5",children:"Material Requisition (MR) Number"}),(0,i.jsx)("input",(0,x.A)({type:"text",className:"input-field "},c("MRNo"))),g.MRNo&&(0,i.jsx)("p",{className:"text-[red] text-[13px] mt-1",children:g.MRNo.message})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{htmlFor:"courseSelect",className:"font-semibold",children:"Course Code"}),(0,i.jsxs)("select",(0,x.A)((0,x.A)({},c("courseCode")),{},{onChange:e=>{const t=e.target.value,n=a.find((e=>String(e.courseSelect)===String(t)));j(n||null),n&&(m("courseName",n.courseName||""),m("company",n.company||""))},className:"input-field select-custom",children:[(0,i.jsx)("option",{value:"",children:"Training Course Select"}),a.map((e=>(0,i.jsx)("option",{value:e.courseSelect,children:e.courseSelect},e.courseSelect)))]})),g.courseCode&&(0,i.jsx)("p",{className:"text-[red] text-[13px] mt-1",children:g.courseCode.message})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"text_size_5",children:"Course Name"}),(0,i.jsxs)("select",(0,x.A)((0,x.A)({},c("courseName")),{},{className:"input-field select-custom",children:[(0,i.jsx)("option",{children:"Select"}),N&&Array.isArray(N.courseName)?N.courseName.map(((e,t)=>(0,i.jsx)("option",{value:e,children:e},t))):(0,i.jsx)("option",{value:(null===N||void 0===N?void 0:N.courseName)||"",children:(null===N||void 0===N?void 0:N.courseName)||"No Course Name Available"})]})),g.courseName&&(0,i.jsx)("p",{className:"text-[red] text-[13px] mt-1",children:g.courseName.message})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"text_size_5",children:"Training Company"}),(0,i.jsxs)("select",(0,x.A)((0,x.A)({},c("company")),{},{className:"input-field select-custom",children:[(0,i.jsx)("option",{children:"Select"}),N&&Array.isArray(N.company)?N.company.map(((e,t)=>(0,i.jsx)("option",{value:e,children:e},t))):(0,i.jsx)("option",{value:(null===N||void 0===N?void 0:N.company)||"",children:(null===N||void 0===N?void 0:N.company)||"No Company Available"})]})),g.company&&(0,i.jsx)("p",{className:"text-[red] text-[13px] mt-1",children:g.company.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text_size_5",children:"Training Course Fee"}),(0,i.jsx)("input",(0,x.A)({type:"text",className:"input-field "},c("traineeCourseFee")))]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text_size_5",children:"Training Start Date"}),(0,i.jsx)("input",(0,x.A)({type:"date",className:"input-field "},c("traineeSD")))]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text_size_5",children:"Training End Date"}),(0,i.jsx)("input",(0,x.A)({type:"date",className:"input-field "},c("traineeED")))]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text_size_5",children:"Training Status"}),(0,i.jsxs)("select",(0,x.A)((0,x.A)({className:"input-field select-custom"},c("traineeStatus")),{},{children:[(0,i.jsx)("option",{value:"",children:"Select Status"}),(0,i.jsx)("option",{value:"Mandatory",children:"Mandatory"}),(0,i.jsx)("option",{value:"Supplementary",children:"Supplementary"})]})),g.traineeStatus&&(0,i.jsx)("p",{className:"text-[red] text-[13px] mt-1",children:g.traineeStatus.message})]})]}),(0,i.jsx)("div",{className:"col-span-2 flex items-center gap-5 my-5",children:(0,i.jsxs)("div",{className:"flex items-center gap-2 cursor-pointer",children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"checkbox",id:"mediRequired"},c("mediRequired")),{},{checked:u("mediRequired"),onChange:()=>{const e=!u("mediRequired");w(e),m("mediRequired",e)},className:"w-[14px] h-[14px] border bg-gray cursor-pointer appearance-none checked:bg-green"})),(0,i.jsx)("label",{htmlFor:"mediRequired",className:"cursor-pointer",children:"if Medical Required"})]})}),D&&(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-6 mb-10",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text_size_5",children:"Medical Name"}),(0,i.jsx)("input",(0,x.A)({type:"text",className:"input-field"},c("medicalName",{required:"Medical Name is required"}))),g.medicalName&&(0,i.jsx)("p",{className:"text-[red] text-[13px] mt-1",children:g.medicalName.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text_size_5",children:"Medical Appointment Date"}),(0,i.jsx)("input",(0,x.A)({type:"date",className:"input-field"},c("medicalAppointDate",{required:"Appointment date is required"}))),g.medicalAppointDate&&(0,i.jsx)("p",{className:"text-[red] text-[13px] mt-1",children:g.medicalAppointDate.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text_size_5",children:"Medical Expiry"}),(0,i.jsx)("input",(0,x.A)({type:"date",className:"input-field"},c("medicalExpiry",{required:"Medical Expiry is required"}))),g.medicalExpiry&&(0,i.jsx)("p",{className:"text-[red] text-[13px] mt-1",children:g.medicalExpiry.message})]}),(0,i.jsx)(Da,{label:"Upload Medical Report",onChangeFunc:e=>(async(e,t)=>{if(!f)return void alert("Please enter the Employee ID before uploading files.");const a=e.target.files[0];if(!a)return;if(!["application/pdf"].includes(a.type))return void alert("Upload must be a PDF file ");const n=h(t)||[];m(t,[...n,a]);try{await pt(a,t,L,f),_((e=>(0,x.A)((0,x.A)({},e),{},{[t]:a.name})))}catch(r){console.log(r)}})(e,"medicalReport"),register:c,name:"medicalReport",error:g,fileName:P.medicalReport||(M=F,"string"===typeof M&&M?M.split("/").pop():"")})]}),(0,i.jsx)("div",{className:"col-span-2 flex justify-center",children:(0,i.jsx)("button",{type:"submit",className:"primary_btn",children:"Submit"})})]})]}),v&&(0,i.jsx)(Le,{text:R,notification:v,path:"/trainingReq"})]});var M},qs=e=>{let{dropDownData:t,permissionData:a}=e;const[n,s]=(0,r.useState)([]),[l,o]=(0,r.useState)({Dashboard:[],Recruitment:[],User:[],Employee:[],Insurance:[],Training:[],TimeSheet:[],LeaveManagement:[],Notification:[],Report:[],BenefitsAndRewards:[]});(0,r.useEffect)((()=>{a&&o(a)}),[a]);const d=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(a.length>0){const e=a.every((e=>l[t]&&l[t].includes(e)));o(e?e=>(0,x.A)((0,x.A)({},e),{},{[t]:e[t].filter((e=>!a.includes(e)))}):e=>(0,x.A)((0,x.A)({},e),{},{[t]:[...e[t]||[],...a.filter((a=>!(e[t]||[]).includes(a)))]}))}else o((a=>(0,x.A)((0,x.A)({},a),{},{[t]:a[t]?a[t].includes(e)?a[t].filter((t=>t!==e)):[...a[t]||[],e]:[e]})))};(0,r.useEffect)((()=>{const e=Object.fromEntries(Object.entries(l).filter((e=>{let[t,a]=e;return a.length>0})));t(e)}),[l]);return(0,i.jsx)("section",{className:"w-full",children:[{Dashboard:["Employee count","Recent Notifications","Application Received","User Action","Birthday Reminder","New Joinee"]},{User:["User"]},{Recruitment:["Employee Requisition","Candidate","Apply Employee Requisition","Local CV","Non Local CV","Status","WorkPass Tracking","Hiring Job"]},{Employee:["All Employee","Employee Info","Work Info","Work Pass","Medical & Dependent Info","Insurance","Non-Local Accommodation in Brunei"]},{Insurance:["Insurance","Insurance Info","Insurance Claim"]},{Training:["HR","Training Requestor","BLNG","OME"]},{TimeSheet:["HO","SBW","ORMC","Offshore","BLNG","View Time Sheet","View Summary"]},{LeaveManagement:["Request Leave","History of leave","Employee Leave Balance","Request Tickets"]},{Notification:["Notification"]},{Report:["Recruitment & Mobilization","Resignation","Termination","Probation Review","Contract Expiry Review","Employment Pass Expiry","LD Expiry","Passport Expiry","Employment Medical","New Recruitment","Training Records","LBD KPI","Group H&S","Leave Passage"]},{BenefitsAndRewards:["BenefitsAndRewards"]}].map(((e,t)=>{const a=Object.keys(e)[0],r=e[a],o=r.every((e=>!!l[a]&&l[a].includes(e)));return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex items-center cursor-pointer py-1 px-2 justify-between",children:[(0,i.jsxs)("div",{onClick:()=>{return e=a,void(n.includes(e)?s(n.filter((t=>t!==e))):s([...n,e]));var e},className:"flex items-center",children:[n.includes(a)?(0,i.jsx)(Lr.q2p,{className:"text-2xl"}):(0,i.jsx)(Lr.c_e,{className:"text-2xl"}),(0,i.jsx)("p",{className:"font-semibold text-lg flex justify-between items-center px-2 w-full",children:a})]}),n.includes(a)&&(0,i.jsx)("span",{className:"text-dark_grey cursor-pointer",onClick:()=>d(null,a,r),children:o?(0,i.jsx)(Lt.A7C,{}):(0,i.jsx)(ta.H4D,{className:"text-lg"})})]}),n.includes(a)&&(0,i.jsx)("ul",{className:"pl-6 space-y-1",children:r.map(((e,t)=>(0,i.jsxs)("li",{onClick:()=>d(e,a),className:"flex justify-between items-center cursor-pointer p-2",children:[(0,i.jsx)("span",{children:e}),(0,i.jsx)("span",{className:"text-dark_grey",children:l[a]&&l[a].includes(e)?(0,i.jsx)(Lt.A7C,{}):(0,i.jsx)(ta.H4D,{className:"text-lg"})})]},t)))})]},t)}))})};var Us=a(7355);const Bs=(0,ge.D)(),Hs=()=>{var e,t,a,s,l,o,d,c,p,m,u,h,g,f,v,b,N,j,D,w,A,S,E,I,C,k,R,T,P,_,O,L,F,M,q,U;const[B,H]=(0,r.useState)(""),[W,Y]=(0,r.useState)(!1),[V,z]=(0,r.useState)([]),[J,G]=(0,r.useState)(null),$=(0,n.zy)(),K=null===(e=$.state)||void 0===e?void 0:e.editUserData,Q=null===(t=$.state)||void 0===t?void 0:t.addUserData,[Z,X]=(0,r.useState)(null),[ee,te]=(0,r.useState)(!1),[ae,ne]=(0,r.useState)([]),[re,se]=(0,r.useState)(""),ie=(null===K||void 0===K?void 0:K.userValue)||(null===Q||void 0===Q?void 0:Q.userValue),le=(null===K||void 0===K?void 0:K.workValue)||(null===Q||void 0===Q?void 0:Q.workValue);console.log(null===K||void 0===K||null===(a=K.storedValue)||void 0===a?void 0:a.data),(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]);const{register:oe,handleSubmit:de,setValue:ce,watch:pe,formState:{errors:me},reset:ue}=(0,it.mN)({resolver:(0,lt.t)(ot.h4),defaultValues:{password:B}});(0,r.useEffect)((()=>{var e,t;(async()=>{const e=(e=>{const t=new Uint8Array(e);window.crypto.getRandomValues(t);const a='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()_+{}:"<>?|[];,./-=';let n="";for(let r=0;r<e;r++)n+=a[t[r]%90];return n})(12);H(e)})();const a=function(e){var t,a,n;if(!e)return null;let r=null===e||void 0===e?void 0:e.replace(/=/g,":");r=null===(t=r)||void 0===t?void 0:t.replace(/([a-zA-Z]+):/g,'"$1":'),r=null===(a=r)||void 0===a?void 0:a.replace(/\[([^\]]+)\]/g,(function(e,t){let a=t.split(",").map((e=>'"'.concat(e.trim(),'"')));return"[".concat(a.join(", "),"]")})),r="{".concat(null===(n=r)||void 0===n?void 0:n.slice(1,-1),"}");try{return JSON.parse(r)}catch(s){return console.error("Error parsing JSON:",s),null}}(null===K||void 0===K||null===(e=K.storedValue)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.setPermissions[0]);G(a)}),[]);const xe=e=>Array.isArray(e)?e[e.length-1]:e;(0,r.useEffect)((()=>{var e,t,a,n,r,s,i,l;const o=null===Q||void 0===Q?void 0:Q.employeeValue.map((e=>{const t=le.find((t=>t.empID===e.empID));return(0,x.A)((0,x.A)({},e),t)})).filter((e=>null!==e));X(o),ce("password",B),ce("selectType",null===K||void 0===K||null===(e=K.storedValue)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.selectType),ce("contactNo",xe(null===K||void 0===K||null===(a=K.storedValue)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.contactNo)),ce("department",xe(null===K||void 0===K||null===(r=K.storedValue)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.department)),ce("position",xe(null===K||void 0===K||null===(i=K.storedValue)||void 0===i||null===(l=i.data)||void 0===l?void 0:l.position))}),[B,ce,K,Q,le]);const he=de((async e=>{try{const t=ie.some((t=>t.empID===e.empID)),a=await ie.filter((t=>t.empID===e.empID)).map((e=>e));if(t){const t={id:a[0].id,password:e.password,selectType:e.selectType,setPermissions:V,status:"Active"};await Bs.graphql({query:Te,variables:{input:t}}).then((e=>{se("User saved Successfully"),te(!0)})).catch((e=>{console.log(e)}))}else{const t=e.name.charAt(0).toUpperCase()+e.name.slice(1).toLowerCase(),a=e.empID,n=e.password,r=e.officialEmail;await(0,Us.H)({username:a,password:n,options:{userAttributes:{email:r},autoSignIn:!0}}).then((async s=>{Me("Verify Your Email to Activate Your Account","\n              <html>\n                <body>\n                  <p>Dear ".concat(t,",</p>\n                  <p>Please verify your email to activate your account before attempting to log in or change your password. <br/>\n                  You must complete the email verification process using the verification email sent to you earlier. <br/>\n                  Once verified, you can log in using the credentials provided below:\n                  </p>\n                  <p><strong>Username:</strong> ").concat(a," <br /><strong>Temporary Password:</strong> ").concat(n,'</p>\n                \n                  <p>Visit <a href="http://employee.adininworks.co"> http://employee.adininworks.co </a> to log in. <br />Please note that changing your password is mandatory for account security. <br />Update your password immediately after logging in for the first time.</p>\n                  <p><strong>Important:</strong> Ensure you verify your email first to avoid any issues during login or password changes.</p>\n                \n                  <p>Best regards,</p>\n                  <p>AWE Team</p>\n                </body>\n              </html>\n            '),"hr_no-reply@adininworks.com",r);const i={empID:e.empID,password:e.password,selectType:e.selectType,setPermissions:V,status:"Active"};await Bs.graphql({query:"\n  mutation CreateUser(\n    $input: CreateUserInput!\n    $condition: ModelUserConditionInput\n  ) {\n    createUser(input: $input, condition: $condition) {\n      id\n      empID\n      selectType\n      setPermissions\n      password\n      status\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:i}}).then((e=>{se("Created a User Successfully"),te(!0)})).catch((e=>{console.log(e)}))})).catch((e=>{alert(e)}))}ue(),z([]),G({})}catch(t){console.log(t)}}));return(0,i.jsxs)("div",{className:"flex items-center justify-center bg-[#F8F8F8] flex-col p-10",onClick:()=>{ne([])},children:[(0,i.jsxs)("div",{className:"w-full flex items-center justify-between gap-5",children:[(0,i.jsx)(n.N_,{to:"/user",className:"text-xl flex-1 text-grey",children:(0,i.jsx)(Lt.QVr,{})}),(0,i.jsx)("h2",{className:"flex-1 text-center mt-2 text_size_2 uppercase",children:(null===K||void 0===K||null===(s=K.storedValue)||void 0===s?void 0:s.title)||"Add New User"}),(0,i.jsx)("div",{className:"flex-1",children:"Edit User"!==(null===K||void 0===K||null===(l=K.storedValue)||void 0===l?void 0:l.title)&&(0,i.jsx)(Wn,{searchResult:e=>{ce("name",e.name),ce("officialEmail",e.officialEmail),ce("empID",e.empID),ce("userID",e.empID),ce("contactNo",xe(e.contactNo)),ce("department",xe(e.department)),ce("position",xe(e.position))},newFormData:Z,searchIcon2:(0,i.jsx)(y.zfp,{}),placeholder:"Employee Id",rounded:"rounded-lg",filteredEmployees:ae,setFilteredEmployees:ne})})]}),(0,i.jsxs)("form",{className:"bg-white py-10 my-16 px-14 w-full",onSubmit:he,children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-8",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text_size_5",children:"Name"}),(0,i.jsx)("input",(0,x.A)({type:"text",className:"input-field",value:(null===K||void 0===K||null===(o=K.storedValue)||void 0===o||null===(d=o.data)||void 0===d?void 0:d.name)||pe("name")||""},oe("name")))]}),(0,i.jsx)("p",{className:"text-[red] text-[12px] mt-1",children:null===(c=me.name)||void 0===c?void 0:c.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text_size_5",children:"Employee Id"}),(0,i.jsx)("input",(0,x.A)({type:"text",className:"input-field",value:(null===K||void 0===K||null===(p=K.storedValue)||void 0===p||null===(m=p.data)||void 0===m?void 0:m.empID)||pe("empID")||""},oe("empID")))]}),(0,i.jsx)("p",{className:"text-[red] text-[12px] mt-1",children:null===(u=me.empID)||void 0===u?void 0:u.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text_size_5",children:"Phone Number"}),(0,i.jsx)("input",(0,x.A)({type:"text",className:"input-field",value:pe("contactNo")||(null===K||void 0===K||null===(h=K.storedValue)||void 0===h||null===(g=h.data)||void 0===g?void 0:g.contactNoValue)||""},oe("contactNo")))]}),(0,i.jsx)("p",{className:"text-[red] text-[12px] mt-1",children:null===(f=me.contactNo)||void 0===f?void 0:f.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text_size_5",children:"Official Email Id"}),(0,i.jsx)("input",(0,x.A)({type:"officialEmail",className:"input-field",value:(null===K||void 0===K||null===(v=K.storedValue)||void 0===v||null===(b=v.data)||void 0===b?void 0:b.officialEmail)||pe("officialEmail")||""},oe("officialEmail")))]}),(0,i.jsx)("p",{className:"text-[red] text-[12px] mt-1",children:null===(N=me.officialEmail)||void 0===N?void 0:N.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text_size_5",children:"User ID"}),(0,i.jsx)("input",(0,x.A)({type:"text",className:"input-field",value:(null===K||void 0===K||null===(j=K.storedValue)||void 0===j||null===(D=j.data)||void 0===D?void 0:D.empID)||pe("userID")||""},oe("userID")))]}),(0,i.jsx)("p",{className:"text-[red] text-[12px] mt-1",children:null===(w=me.userID)||void 0===w?void 0:w.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text_size_5",children:"Temporary Password"}),(0,i.jsxs)("div",{className:"input-field flex items-center gap-2",children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({type:W?"text":"password",className:"outline-none w-full bg-[transparent]",value:(null===K||void 0===K||null===(A=K.storedValue)||void 0===A||null===(S=A.data)||void 0===S?void 0:S.password)||B},oe("password")),{},{readOnly:!0})),W?(0,i.jsx)("div",{className:"text-2xl text-dark_grey",onClick:()=>{Y(!W)},children:(0,i.jsx)(y.GNz,{})}):(0,i.jsx)("div",{className:"text-2xl text-dark_grey",onClick:()=>{Y(!W)},children:(0,i.jsx)(y.Rds,{})})]}),(0,i.jsx)("p",{className:"text-[red] text-[12px] mt-1",children:null===(E=me.password)||void 0===E?void 0:E.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text_size_5",children:"Position"}),(0,i.jsx)("input",(0,x.A)({type:"text",className:"input-field",value:pe("position")||(null===K||void 0===K||null===(I=K.storedValue)||void 0===I||null===(C=I.data)||void 0===C?void 0:C.positionValue)||(null===K||void 0===K||null===(k=K.employeeValue)||void 0===k||null===(R=k.data)||void 0===R?void 0:R.position)||""},oe("position")))]}),(0,i.jsx)("p",{className:"text-[red] text-[12px] mt-1",children:null===(T=me.position)||void 0===T?void 0:T.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text_size_5",children:"Department"}),(0,i.jsx)("input",(0,x.A)({type:"text",className:"input-field",value:pe("department")||(null===K||void 0===K||null===(P=K.storedValue)||void 0===P||null===(_=P.data)||void 0===_?void 0:_.departmentValue)||""},oe("department")))]}),(0,i.jsx)("p",{className:"text-[red] text-[12px] mt-1",children:null===(O=me.department)||void 0===O?void 0:O.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text_size_5",children:"Select Type"}),(0,i.jsxs)("select",(0,x.A)((0,x.A)({className:"input-field"},oe("selectType")),{},{children:[(0,i.jsx)("option",{value:(null===K||void 0===K||null===(L=K.storedValue)||void 0===L||null===(F=L.data)||void 0===F?void 0:F.selectType)||pe("selectType")||"",children:(null===K||void 0===K||null===(M=K.storedValue)||void 0===M||null===(q=M.data)||void 0===q?void 0:q.selectType)||"Select access"}),(0,i.jsx)("option",{value:"SuperAdmin",children:"SuperAdmin"}),(0,i.jsx)("option",{value:"GM",children:"GM"}),(0,i.jsx)("option",{value:"HR",children:"HR"}),(0,i.jsx)("option",{value:"Manager",children:"Manager"}),(0,i.jsx)("option",{value:"Supervisor",children:"Supervisor"}),(0,i.jsx)("option",{value:"Training Requestor",children:"Training Requestor"}),(0,i.jsx)("option",{value:"TimeKeeper",children:"TimeKeeper"}),(0,i.jsx)("option",{value:"QA \\ QC",children:"QA \\ QC"}),(0,i.jsx)("option",{value:"User",children:"User"}),(0,i.jsx)("option",{value:"Employee",children:"Employee"})]})),(0,i.jsx)("p",{className:"text-[red] text-[12px] mt-1",children:null===(U=me.selectType)||void 0===U?void 0:U.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text_size_5",children:"Set Permission"}),(0,i.jsx)("div",{className:"p-2 my-2 border border-[#dedbdb] rounded-md",children:(0,i.jsx)(qs,{dropDownData:e=>{z([e])},permissionData:J})})]})]}),(0,i.jsx)("div",{className:"mt-10 w-full center",children:(0,i.jsx)("button",{type:"submit",className:"p-3 text-white rounded-md primary_btn",children:"Submit"})})]}),ee&&(0,i.jsx)(Le,{text:re,notification:ee,path:"/user"})]})},Ws=()=>{const{searchResultData:e}=(0,n.KC)(),{SubmitMPData:t}=(()=>{const e=(0,ge.D)();return{SubmitMPData:(0,r.useCallback)((async t=>{let{SawpValue:a}=t;if(!a)throw new Error("Missing required parameters");const n={empID:a.empID,sawpEmpLtrReq:[a.sawpEmpLtrReq],sawpEmpLtrReci:[a.sawpEmpLtrReci],sawpEmpUpload:[a.sawpEmpUpload]};console.log(n);try{const t=await Promise.all([e.graphql({query:"\n  mutation CreateSawpDetails(\n    $input: CreateSawpDetailsInput!\n    $condition: ModelSawpDetailsConditionInput\n  ) {\n    createSawpDetails(input: $input, condition: $condition) {\n      id\n      empID\n      sawpEmpLtrReq\n      sawpEmpLtrReci\n      sawpEmpUpload\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:n}})]);console.log(t,"successfully stored data")}catch(r){throw console.error("Error executing GraphQL requests:",r),r}}),[])}})(),{SawpDetails:a}=(0,r.useContext)(s.Y),{SawpUpdateFun:l}=(()=>{const e=(0,ge.D)();return{SawpUpdateFun:(0,r.useCallback)((async t=>{let{SawpUpValue:a}=t;if(!a)throw new Error("Missing required parameters");const n={id:a.id,empID:a.empID,sawpEmpLtrReq:a.sawpEmpLtrReq,sawpEmpLtrReci:a.sawpEmpLtrReci,sawpEmpUpload:a.sawpEmpUpload};console.log(n);try{const t=await Promise.all([e.graphql({query:"\n  mutation UpdateSawpDetails(\n    $input: UpdateSawpDetailsInput!\n    $condition: ModelSawpDetailsConditionInput\n  ) {\n    updateSawpDetails(input: $input, condition: $condition) {\n      id\n      empID\n      sawpEmpLtrReq\n      sawpEmpLtrReci\n      sawpEmpUpload\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:n,limit:2e4}})]);console.log(t,"successfully Updated data")}catch(r){throw console.log(r),console.error("Error executing GraphQL requests:",r),r}}),[])}})(),[o,d]=(0,r.useState)(!1),[c,p]=(0,r.useState)(""),[m,u]=(0,r.useState)([]),[h,g]=(0,r.useState)([]),[f,v]=(0,r.useState)(""),[y,b]=(0,r.useState)({sawpEmpUpload:null}),[N,j]=(0,r.useState)({sawpEmpUpload:[]}),{register:D,handleSubmit:w,watch:A,setValue:S,control:E,formState:{errors:I}}=(0,it.mN)({resolver:(0,lt.t)(Ln),defaultValues:{sawpEmpLtrReq:[],sawpEmpLtrReci:[]}}),C=A("sawpEmpLtrReq"),k=A("sawpEmpLtrReci"),R=A("empID"),T=A("sawpEmpUpload",""),P=e=>{if("object"===typeof e&&e.upload){const t=e.upload,a=decodeURIComponent(t);return a.substring(a.lastIndexOf("/")+1)}try{const t=new URL(e).pathname,a=decodeURIComponent(t);return a.substring(a.lastIndexOf("/")+1)}catch(t){if("string"===typeof e){const t=decodeURIComponent(e);return t.substring(t.lastIndexOf("/")+1)}return}};(0,r.useEffect)((()=>{S("empID",e.empID),S("sawpEmpLtrReq",e.sawpEmpLtrReq||[]),u(e.sawpEmpLtrReq||[]),S("sawpEmpLtrReci",e.sawpEmpLtrReci||[]),g(e.sawpEmpLtrReci||[]);if(["sawpEmpLtrReci","sawpEmpLtrReq"].forEach((t=>{const a=(e=>Array.isArray(e)?e[e.length-1]:e)(e[t]);S(t,a)})),e&&e.sawpEmpUpload)try{const t=JSON.parse(e.sawpEmpUpload).map((e=>"string"===typeof e?JSON.parse(e):e));S("sawpEmpUpload",t),v(e.empID),j((e=>(0,x.A)((0,x.A)({},e),{},{sawpEmpUpload:t}))),b((e=>(0,x.A)((0,x.A)({},e),{},{sawpEmpUpload:t.length>0?P(t[t.length-1].upload):""})))}catch(t){console.error("Failed to parse ".concat(e.sawpEmpUpload,":"),t)}}),[e,S]);return(0,i.jsxs)("form",{onSubmit:w((async e=>{try{const n=a?a.find((t=>t.empID===e.empID)):{},r=e=>e?new Date(e).toLocaleDateString("en-CA"):null,s=r(e.sawpEmpLtrReq),i=r(e.sawpEmpLtrReci);if(n){const t=[...new Set([...n.sawpEmpLtrReq||[],s])],a=[...new Set([...n.sawpEmpLtrReci||[],i])],o=(0,x.A)((0,x.A)({},e),{},{sawpEmpLtrReq:t.map(r),sawpEmpLtrReci:a.map(r),sawpEmpUpload:JSON.stringify(N.sawpEmpUpload),id:n.id});await l({SawpUpValue:o}),p("SAWP Info Updated Successfully"),d(!0)}else{const a=(0,x.A)((0,x.A)({},e),{},{sawpEmpLtrReq:s,sawpEmpLtrReci:i,sawpEmpUpload:JSON.stringify(N.sawpEmpUpload)});await t({SawpValue:a}),p("SAWP Info Created Successfully"),d(!0)}}catch(n){console.error("Error submitting data:",n)}})),className:"mx-auto min-h-screen p-2 my-10 bg-[#F5F6F1CC]",children:[(0,i.jsx)("div",{className:"flex justify-end items-center",children:(0,i.jsx)("div",{className:"max-w-sm",children:(0,i.jsx)(ut,{label:"Employee ID",register:D,name:"empID",type:"text",placeholder:"Enter Employee ID",errors:I,watch:R})})}),(0,i.jsxs)("div",{className:"grid grid-cols-2 my-10 gap-5",children:[(0,i.jsx)(ut,{label:"Client Support Letter Requested Date",register:D,name:"sawpEmpLtrReq",type:"date",errors:I,control:E,watch:C}),(0,i.jsx)(ut,{label:"Client Support Letter Received Date",register:D,name:"sawpEmpLtrReci",type:"date",errors:I,control:E,watch:k})]}),(0,i.jsx)(Da,{label:"Upload File",onChangeFunc:e=>(async(e,t,a)=>{const n=e.target.files[0];if(!n)return;if(!a)return alert("Employee ID is required to upload files."),void window.location.reload();if(!["application/pdf"].includes(n.type))return void alert("Upload must be a PDF file");const r=A(t)||[];S(t,[...r,n]);try{await pt(n,t,j,a),b((e=>(0,x.A)((0,x.A)({},e),{},{[t]:n.name})))}catch(s){console.log(s)}})(e,"sawpEmpUpload",R),register:D,name:"sawpEmpUpload",error:I,fileName:y.sawpEmpUpload||(_=T,"string"===typeof _&&_?_.split("/").pop():"")}),(0,i.jsx)("div",{className:"center",children:(0,i.jsx)("button",{type:"submit",className:"mt-10 py-2 px-4 primary_btn",children:"Save"})}),o&&(0,i.jsx)(Le,{text:c,notification:o,path:"/sawp"})]});var _},Ys=()=>{const e=(0,ge.D)();return{UpdateMPData:(0,r.useCallback)((async t=>{let{DoeUpValue:a}=t;if(!a)throw new Error("Missing required parameters or empID");try{const t={id:a.id,empID:a.empID,doeEmpSubmit:a.doeEmpSubmit,doeEmpApproval:a.doeEmpApproval,doeEmpValid:a.doeEmpValid,doeEmpRefNo:a.doeEmpRefNo,doeEmpUpload:a.doeEmpUpload};await e.graphql({query:be,variables:{input:t,limit:2e4}})}catch(n){throw console.error("Error updating data:",n),n}}),[])}},Vs=()=>{const e=(0,ge.D)();return{CrerDoeFunData:(0,r.useCallback)((async t=>{let{DoeValue:a}=t;if(!a)throw new Error("Missing required parameters or empID");try{const t={empID:a.empID,doeEmpSubmit:a.doeEmpSubmit,doeEmpApproval:a.doeEmpApproval,doeEmpValid:a.doeEmpValid,doeEmpRefNo:a.doeEmpRefNo,doeEmpUpload:a.doeEmpUpload},n=await e.graphql({query:"\n  mutation CreateDNDetails(\n    $input: CreateDNDetailsInput!\n    $condition: ModelDNDetailsConditionInput\n  ) {\n    createDNDetails(input: $input, condition: $condition) {\n      id\n      empID\n      doeEmpSubmit\n      doeEmpApproval\n      doeEmpValid\n      doeEmpRefNo\n      doeEmpUpload\n      permitType\n      nlmsEmpSubmit\n      nlmsEmpSubmitRefNo\n      nlmsEmpApproval\n      nlmsRefNo\n      nlmsEmpValid\n      nlmsEmpUpload\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:t}});console.log("Data successfully updated:",n)}catch(n){throw console.error("Error updating data:",n),n}}),[e])}},zs=()=>{(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]);const{searchResultData:e}=(0,n.KC)(),{DNData:t}=(0,r.useContext)(s.Y),{CrerDoeFunData:a}=Vs(),{UpdateMPData:l}=Ys(),{register:o,handleSubmit:d,formState:{errors:c},setValue:p,watch:m}=(0,it.mN)({resolver:(0,lt.t)(Fn),doeEmpSubmit:[],doeEmpApproval:[],doeEmpValid:[]}),[u,h]=(0,r.useState)([]),[g,f]=(0,r.useState)([]),[v,y]=(0,r.useState)([]),[b,N]=(0,r.useState)(!1),[j,D]=(0,r.useState)(""),[w,A]=(0,r.useState)({doeEmpUpload:null}),[S,E]=(0,r.useState)({doeEmpUpload:[]}),I=m("doeEmpUpload",""),C=m("empID"),k=e=>{if("object"===typeof e&&e.upload){const t=e.upload,a=decodeURIComponent(t);return a.substring(a.lastIndexOf("/")+1)}try{const t=new URL(e).pathname,a=decodeURIComponent(t);return a.substring(a.lastIndexOf("/")+1)}catch(t){if("string"===typeof e){const t=decodeURIComponent(e);return t.substring(t.lastIndexOf("/")+1)}return}};(0,r.useEffect)((()=>{p("empID",e.empID);if(["doeEmpSubmit","doeEmpApproval","doeEmpValid","doeEmpRefNo"].forEach((t=>{return p(t,(a=e[t],Array.isArray(a)?a[a.length-1]:a));var a})),e&&e.doeEmpUpload)try{const t=JSON.parse(e.doeEmpUpload).map((e=>"string"===typeof e?JSON.parse(e):e));p("doeEmpUpload",t),E((e=>(0,x.A)((0,x.A)({},e),{},{doeEmpUpload:t}))),A((e=>(0,x.A)((0,x.A)({},e),{},{doeEmpUpload:t.length>0?k(t[t.length-1].upload):""})))}catch(t){console.error("Failed to parse ".concat(e.doeEmpUpload,":"),t)}}),[e,p]);return(0,i.jsxs)("form",{onSubmit:d((async e=>{try{const n=t.find((t=>t.empID===e.empID)),r=e=>e?new Date(e).toLocaleDateString("en-CA"):null,s=r(e.doeEmpSubmit),i=r(e.doeEmpApproval),o=r(e.doeEmpValid);if(n){const t=[...new Set([...n.doeEmpSubmit||[],s])],a=[...new Set([...n.doeEmpApproval||[],i])],d=[...new Set([...n.doeEmpValid||[],o])],c=(0,x.A)((0,x.A)({},e),{},{doeEmpSubmit:t.map(r),doeEmpApproval:a.map(r),doeEmpValid:d.map(r),doeEmpUpload:JSON.stringify(S.doeEmpUpload),id:n.id});await l({DoeUpValue:c}),D("DOE Info Updated Successfully"),N(!0)}else{const t=(0,x.A)((0,x.A)({},e),{},{doeEmpSubmit:s,doeEmpApproval:i,doeEmpValid:o,doeEmpUpload:JSON.stringify(S.doeEmpUpload)});await a({DoeValue:t}),D("DOE Info Created Successfully"),N(!0)}}catch(n){console.error("Error submitting data:",n)}})),className:"mx-auto min-h-screen p-2 my-10 bg-[#F5F6F1CC]",children:[(0,i.jsx)("div",{className:"flex justify-end items-center",children:(0,i.jsx)("div",{className:"max-w-sm",children:(0,i.jsx)(ut,{label:"Employee ID",register:o,name:"empID",type:"text",placeholder:"Enter Employee ID",errors:c})})}),(0,i.jsxs)("div",{className:"grid grid-cols-2 mt-10 gap-5 ",children:[(0,i.jsx)(ut,{label:"Date Of Submission",register:o,name:"doeEmpSubmit",type:"date",errors:c}),(0,i.jsx)(ut,{label:"Date Of Approval",register:o,name:"doeEmpApproval",type:"date",errors:c}),(0,i.jsx)(ut,{label:"Valid Until",register:o,name:"doeEmpValid",type:"date",errors:c}),(0,i.jsx)(ut,{label:"DOE Reference Number",register:o,name:"doeEmpRefNo",type:"text",errors:c}),(0,i.jsx)(Da,{label:"Upload File",onChangeFunc:e=>(async(e,t,a)=>{const n=e.target.files[0];if(!n)return;if(!a)return alert("Employee ID is required to upload files."),void window.location.reload();if(!["application/pdf"].includes(n.type))return void alert("Upload must be a PDF file");const r=m(t)||[];p(t,[...r,n]);try{await pt(n,t,E,a),A((e=>(0,x.A)((0,x.A)({},e),{},{[t]:n.name})))}catch(s){console.log(s)}})(e,"doeEmpUpload",C),name:"doeEmpUpload",register:o,error:c,fileName:w.doeEmpUpload||(R=I,"string"===typeof R&&R?R.split("/").pop():"")})]}),(0,i.jsx)("div",{className:"flex justify-center items-center my-10",children:(0,i.jsx)("button",{type:"submit",className:"primary_btn",children:"Save"})}),b&&(0,i.jsx)(Le,{text:j,notification:b,path:"/sawp/doe"})]});var R},Js=()=>{const e=(0,ge.D)();return{uploadNlmsFun:(0,r.useCallback)((async t=>{let{DoeValue:a}=t;if(!a)throw new Error("Missing required parameters or empID");try{const{nlmsEmpSubmit:t,nlmsEmpSubmitRefNo:n,nlmsEmpApproval:r,nlmsRefNo:s,permitType:i,nlmsEmpValid:l,nlmsEmpUpload:o,id:d}=a,c={id:d,nlmsEmpSubmit:t,nlmsEmpSubmitRefNo:n,nlmsEmpApproval:r,nlmsRefNo:s,permitType:i,nlmsEmpValid:l,nlmsEmpUpload:o},p=await e.graphql({query:be,variables:{input:c,limit:2e4}});console.log("Data successfully updated:",p)}catch(n){throw console.error("Error updating data:",n),n}}),[])}},Gs=()=>{const{searchResultData:e}=(0,n.KC)(),{DNData:t}=(0,r.useContext)(s.Y),{uploadNlmsFun:a}=Js(),[l,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(""),[p,m]=(0,r.useState)({nlmsEmpUpload:null}),[u,h]=(0,r.useState)({nlmsEmpUpload:[]}),{register:g,handleSubmit:f,watch:v,setValue:y,formState:{errors:b}}=(0,it.mN)({resolver:(0,lt.t)(Mn),nlmsEmpSubmit:[],nlmsEmpApproval:[],nlmsEmpValid:[]}),N=v("nlmsEmpUpload",""),j=v("empID");(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]);(0,r.useEffect)((()=>{y("empID",e.empID);if(["nlmsEmpApproval","nlmsEmpSubmit","nlmsEmpSubmitRefNo","nlmsEmpUpload","nlmsEmpValid","nlmsRefNo","permitType"].forEach((t=>y(t,((e,t)=>"nlmsEmpValid"===t||"nlmsEmpApproval"===t||"nlmsEmpValid"===t?e:Array.isArray(e)?e[e.length-1]:e)(e[t])))),null!==e&&void 0!==e&&e.nlmsEmpUpload)try{const t=JSON.parse(e.nlmsEmpUpload).map((e=>"string"===typeof e?JSON.parse(e):e));y("nlmsEmpUpload",t),h({nlmsEmpUpload:t}),m({nlmsEmpUpload:t.length>0?t[t.length-1].upload.split("/").pop():""})}catch(t){console.error("Error parsing nlmsEmpUpload:",t)}}),[e,y]);const D=e=>e?new Date(e).toLocaleDateString("en-CA"):null;return(0,i.jsxs)("form",{onSubmit:f((async e=>{try{const n=D(e.nlmsEmpSubmit),r=D(e.nlmsEmpApproval),s=D(e.nlmsEmpValid),i=t.find((t=>t.empID===e.empID)),l=[...new Set([...i.nlmsEmpSubmit||[],n])],d=[...new Set([...i.nlmsEmpApproval||[],r])],p=[...new Set([...i.nlmsEmpValid||[],s])],m=(0,x.A)((0,x.A)({},e),{},{nlmsEmpSubmit:l.map(D),nlmsEmpApproval:d.map(D),nlmsEmpValid:p.map(D),nlmsEmpUpload:JSON.stringify(u.nlmsEmpUpload),id:(null===i||void 0===i?void 0:i.id)||null});await a({DoeValue:m}),c("NLMS Info Saved Successfully"),o(!0)}catch(n){console.error("Error submitting data:",n)}})),className:"mx-auto min-h-screen p-2 my-10 bg-[#F5F6F1CC]",children:[(0,i.jsx)("div",{className:"flex justify-end items-center",children:(0,i.jsx)("div",{className:"max-w-sm",children:(0,i.jsx)(ut,{label:"Employee ID",register:g,name:"empID",type:"text",placeholder:"Enter Employee ID",errors:b})})}),(0,i.jsxs)("div",{className:"grid grid-cols-2 mt-10 gap-5",children:[(0,i.jsx)(ut,{label:"Type of Work Permit Application",register:g,name:"permitType",type:"select",options:Pt,errors:b}),(0,i.jsx)(ut,{label:"Date Of Submission",register:g,name:"nlmsEmpSubmit",type:"date",errors:b}),(0,i.jsx)(ut,{label:"Submission Reference Number",register:g,name:"nlmsEmpSubmitRefNo",type:"text",errors:b}),(0,i.jsx)(ut,{label:"Date Of Approval",register:g,name:"nlmsEmpApproval",type:"date",errors:b}),(0,i.jsx)(ut,{label:"LD Reference Number",register:g,name:"nlmsRefNo",type:"text",errors:b}),(0,i.jsx)(ut,{label:"Valid Until",register:g,name:"nlmsEmpValid",type:"date",errors:b}),(0,i.jsx)(Da,{label:"Upload File",onChangeFunc:e=>(async(e,t,a)=>{const n=e.target.files[0];if(!n)return;if(!a)return alert("Employee ID is required to upload files."),void window.location.reload();if(["application/pdf"].includes(n.type))try{await pt(n,t,h,a),m({[t]:n.name})}catch(r){console.error("Error uploading file:",r)}else alert("Upload must be a PDF File Only")})(e,"nlmsEmpUpload",j),name:"nlmsEmpUpload",register:g,error:b,fileName:p.nlmsEmpUpload||(e=>{if(null==e)return"";if("object"===typeof e&&e.upload){return e.upload.split("/").pop()}return"string"===typeof e&&e?e.split("/").pop():""})(N)})]}),(0,i.jsx)("div",{className:"flex justify-center items-center my-10",children:(0,i.jsx)("button",{type:"submit",className:"primary_btn",children:"Save"})}),l&&(0,i.jsx)(Le,{text:d,notification:l,path:"/sawp/nlms"})]})},$s=()=>{const e=(0,ge.D)();return{BGData:(0,r.useCallback)((async t=>{let{BJLValue:a}=t;if(!a)throw new Error("Missing required parameters");const n={empID:a.empID,bankSubmit:[a.bankSubmit],bankRece:[a.bankRece],bankRefNo:[a.bankRefNo],bankAmt:[a.bankAmt],bankValid:[a.bankValid],bankEndorse:[a.bankEndorse],bankEmpUpload:[a.bankEmpUpload]};console.log(n);try{const t=await Promise.all([e.graphql({query:Ne,variables:{input:n}})]);console.log(t,"successfully stored data")}catch(r){throw console.error("Error executing GraphQL requests:",r),r}}),[])}},Ks=()=>{const e=(0,ge.D)();return{UpdateBJLFun:(0,r.useCallback)((async t=>{let{BJLUpValue:a}=t;if(!a)throw new Error("Missing required parameters");const n={id:a.id,empID:a.empID,bankSubmit:a.bankSubmit,bankRece:a.bankRece,bankRefNo:[a.bankRefNo],bankAmt:[a.bankAmt],bankValid:a.bankValid,bankEndorse:a.bankEndorse,bankEmpUpload:[a.bankEmpUpload]};try{const t=await Promise.all([e.graphql({query:je,variables:{input:n,limit:2e4}})]);console.log(t,"successfully Updated data")}catch(r){throw console.log(r),console.error("Error executing GraphQL requests:",r),r}}),[])}},Qs=()=>{const{searchResultData:e}=(0,n.KC)(),{BGData:t}=$s(),{BJLData:a}=(0,r.useContext)(s.Y),{UpdateBJLFun:l}=Ks();(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]);const{register:o,handleSubmit:d,watch:c,formState:{errors:p},setValue:m}=(0,it.mN)({resolver:(0,lt.t)(qn),bankSubmit:[],bankRece:[],bankValid:[],bankEndorse:[]}),[u,h]=(0,r.useState)(!1),[g,f]=(0,r.useState)(""),[v,y]=(0,r.useState)({bankEmpUpload:null}),[b,N]=(0,r.useState)({bankEmpUpload:[]}),j=c("bankEmpUpload",""),D=c("empID"),w=e=>{if("object"===typeof e&&e.upload){const t=e.upload,a=decodeURIComponent(t);return a.substring(a.lastIndexOf("/")+1)}try{const t=new URL(e).pathname,a=decodeURIComponent(t);return a.substring(a.lastIndexOf("/")+1)}catch(t){if("string"===typeof e){const t=decodeURIComponent(e);return t.substring(t.lastIndexOf("/")+1)}return}};(0,r.useEffect)((()=>{m("empID",e.empID);if(["bankSubmit","bankRece","bankRefNo","bankAmt","bankValid","bankEndorse","bankEmpUpload"].forEach((t=>{const a=(e=>Array.isArray(e)?e[e.length-1]:e)(e[t]);m(t,a)})),e&&e.bankEmpUpload)try{const t=JSON.parse(e.bankEmpUpload).map((e=>"string"===typeof e?JSON.parse(e):e));console.log(t),m("bankEmpUpload",t),N((e=>(0,x.A)((0,x.A)({},e),{},{bankEmpUpload:t}))),y((e=>(0,x.A)((0,x.A)({},e),{},{bankEmpUpload:t.length>0?w(t[t.length-1].upload):""})))}catch(t){console.error("Failed to parse ".concat(e.bankEmpUpload,":"),t)}}),[e,m]);return(0,i.jsxs)("form",{onSubmit:d((async e=>{try{const n=a.find((t=>t.empID===e.empID)),r=e=>e?new Date(e).toLocaleDateString("en-CA"):null,s=r(e.bankEndorse),i=r(e.bankSubmit),o=r(e.bankRece),d=r(e.bankValid);if(n){const t=[...new Set([...n.bankEndorse||[],s])],a=[...new Set([...n.bankRece,o])],c=[...new Set([...n.bankValid,d])],p=[...new Set([...n.bankSubmit,i])],m=(0,x.A)((0,x.A)({},e),{},{bankEndorse:t.map(r),bankRece:a.map(r),bankSubmit:p.map(r),bankValid:c.map(r),bankEmpUpload:JSON.stringify(b.bankEmpUpload),id:n.id});await l({BJLUpValue:m}),f("Bank Guarantee Info Updated Successfully"),h(!0)}else{const a=(0,x.A)((0,x.A)({},e),{},{bankEndorse:s,bankRece:o,bankSubmit:i,bankValid:d,bankEmpUpload:JSON.stringify(b.bankEmpUpload)});await t({BJLValue:a}),f("Bank Guarantee Info Saved Successfully"),h(!0)}}catch(n){console.error("Error submitting data:",n)}})),className:"mx-auto min-h-screen p-2 my-10 bg-[#F5F6F1CC]",children:[(0,i.jsx)("div",{className:"flex justify-end items-center",children:(0,i.jsx)("div",{className:"max-w-sm",children:(0,i.jsx)(ut,{label:"Employee ID",register:o,name:"empID",type:"text",placeholder:"Enter Employee ID",errors:p})})}),(0,i.jsxs)("div",{className:"grid grid-cols-2 mt-10 gap-5",children:[(0,i.jsx)(ut,{label:"Date Of Submission",register:o,name:"bankSubmit",type:"date",errors:p}),(0,i.jsx)(ut,{label:"Date Received",register:o,name:"bankRece",type:"date",errors:p}),(0,i.jsx)(ut,{label:"BG Reference Number",register:o,name:"bankRefNo",type:"text",errors:p}),(0,i.jsx)(ut,{label:"Bank Guarantee Amount",register:o,name:"bankAmt",type:"text",errors:p}),(0,i.jsx)(ut,{label:"Valid Until",register:o,name:"bankValid",type:"date",errors:p}),(0,i.jsx)(ut,{label:"Date Endorsement Of BG",register:o,name:"bankEndorse",type:"date",errors:p}),(0,i.jsx)("div",{children:(0,i.jsx)(Da,{label:"Upload File",onChangeFunc:e=>(async(e,t,a)=>{const n=e.target.files[0];if(!n)return;if(!a)return alert("Employee ID is required to upload files."),void window.location.reload();if(!["application/pdf"].includes(n.type))return void alert("Upload must be a PDF file ");const r=c(t)||[];m(t,[...r,n]);try{await pt(n,t,N,a),y((e=>(0,x.A)((0,x.A)({},e),{},{[t]:n.name})))}catch(s){console.log(s)}})(e,"bankEmpUpload",D),register:o,error:p,fileName:v.bankEmpUpload||(A=j,"string"===typeof A&&A?A.split("/").pop():"")})})]}),(0,i.jsxs)("div",{className:"flex justify-center items-center my-10",children:[(0,i.jsx)("button",{type:"submit",className:"primary_btn",children:"Save"}),u&&(0,i.jsx)(Le,{text:g,notification:u,path:"/sawp/bankGuarantee"})]})]});var A},Zs=()=>{const{searchResultData:e}=(0,n.KC)();(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]);const{BJLData:t}=(0,r.useContext)(s.Y),{UpdateJitpaData:a}=(()=>{const e=(0,ge.D)();return{UpdateJitpaData:(0,r.useCallback)((async t=>{let{JitpaValue:a}=t;if(!a)throw new Error("Missing required parameters or empID");try{const{tbaPurchase:t,jitpaAmt:n,jpValid:r,jpEndorse:s,jpEmpUpload:i,id:l}=a,o={id:l,tbaPurchase:t,jitpaAmt:n,jpValid:r,jpEndorse:s,jpEmpUpload:i};await e.graphql({query:je,variables:{input:o,limit:2e4}})}catch(n){throw console.error("Error updating data:",n),n}}),[])}})(),{JitpaCreData:l}=(()=>{const e=(0,ge.D)();return{JitpaCreData:(0,r.useCallback)((async t=>{let{creJitpaValue:a}=t;if(!a)throw new Error("Missing required parameters");const n={tbaPurchase:[a.tbaPurchase],jitpaAmt:[a.jitpaAmt],jpValid:[a.jpValid],jpEndorse:[a.jpEndorse],jpEmpUpload:[a.jpEmpUpload],empID:a.empID};console.log(n);try{const t=await Promise.all([e.graphql({query:Ne,variables:{input:n}})]);console.log(t,"successfully stored data")}catch(r){throw console.error("Error executing GraphQL requests:",r),r}}),[])}})(),{register:o,handleSubmit:d,watch:c,formState:{errors:p},setValue:m}=(0,it.mN)({resolver:(0,lt.t)(Un)}),[u,h]=(0,r.useState)(!1),[g,f]=(0,r.useState)(""),[v,y]=(0,r.useState)({jpEmpUpload:null}),[b,N]=(0,r.useState)({jpEmpUpload:[]}),j=c("jpEmpUpload",""),D=e=>{if("object"===typeof e&&e.upload){const t=e.upload,a=decodeURIComponent(t);return a.substring(a.lastIndexOf("/")+1)}try{const t=new URL(e).pathname,a=decodeURIComponent(t);return a.substring(a.lastIndexOf("/")+1)}catch(t){if("string"===typeof e){const t=decodeURIComponent(e);return t.substring(t.lastIndexOf("/")+1)}return}};(0,r.useEffect)((()=>{m("empID",e.empID);if(["tbaPurchase","jitpaAmt","jpValid","jpEndorse","jpEmpUpload"].forEach((t=>{return m(t,(a=e[t],Array.isArray(a)?a[a.length-1]:a));var a})),e&&e.jpEmpUpload)try{const t=JSON.parse(e.jpEmpUpload).map((e=>"string"===typeof e?JSON.parse(e):e));m("jpEmpUpload",t),N((e=>(0,x.A)((0,x.A)({},e),{},{jpEmpUpload:t}))),y((e=>(0,x.A)((0,x.A)({},e),{},{jpEmpUpload:t.length>0?D(t[t.length-1].upload):""})))}catch(t){console.error("Failed to parse ".concat(e.jpEmpUpload,":"),t)}}),[e,m]);const w=c("empID");return(0,i.jsxs)("form",{onSubmit:d((async e=>{try{const n=t.find((t=>t.empID===e.empID)),r=e=>e?new Date(e).toLocaleDateString("en-CA"):null,s=r(e.tbaPurchase),i=r(e.jpValid),o=r(e.jpEndorse);if(n){const t=[...new Set([...n.tbaPurchase||[],s])],l=[...new Set([...n.jpEndorse||[],o])],d=[...new Set([...n.jpValid||[],i])],c=(0,x.A)((0,x.A)({},e),{},{jpValid:d.map(r),tbaPurchase:t.map(r),jpEndorse:l.map(r),jpEmpUpload:JSON.stringify(b.jpEmpUpload),id:n.id});await a({JitpaValue:c}),f("JITPA Info Updated Successfully"),h(!0)}else{const t=(0,x.A)((0,x.A)({},e),{},{jpValid:i,tbaPurchase:s,jpEndorse:o,jpEmpUpload:JSON.stringify(b.jpEmpUpload)});await l({creJitpaValue:t}),f("JITPA Info Saved Successfully"),h(!0)}}catch(n){console.error("Error submitting data:",n)}})),className:"mx-auto min-h-screen p-2 my-10 bg-[#F5F6F1CC]",children:[(0,i.jsx)("div",{className:"flex justify-end items-center",children:(0,i.jsx)("div",{className:"max-w-sm",children:(0,i.jsx)(ut,{label:"Employee ID",register:o,name:"empID",type:"text",placeholder:"Enter Employee ID",errors:p})})}),(0,i.jsxs)("div",{className:"grid grid-cols-2 mt-10 gap-5",children:[(0,i.jsx)(ut,{label:"TBA Purchase Date",register:o,name:"tbaPurchase",type:"date",errors:p}),(0,i.jsx)(ut,{label:"JITPA Amount",register:o,name:"jitpaAmt",type:"text",errors:p}),(0,i.jsx)(ut,{label:"Valid Until",register:o,name:"jpValid",type:"date",errors:p}),(0,i.jsx)(ut,{label:"Date Endorsement Of JITPA",register:o,name:"jpEndorse",type:"date",errors:p}),(0,i.jsx)("div",{children:(0,i.jsx)(Da,{label:"Upload File",onChangeFunc:e=>(async(e,t,a)=>{const n=e.target.files[0];if(!n)return;if(!a)return alert("Employee ID is required to upload files."),void window.location.reload();if(!["application/pdf"].includes(n.type))return void alert("Upload must be a PDF file");const r=c(t)||[];m(t,[...r,n]);try{await pt(n,t,N,a),y((e=>(0,x.A)((0,x.A)({},e),{},{[t]:n.name})))}catch(s){console.log(s)}})(e,"jpEmpUpload",w),name:"jpEmpUpload",register:o,error:p,fileName:v.jpEmpUpload||(A=j,"string"===typeof A&&A?A.split("/").pop():"")})})]}),(0,i.jsx)("div",{className:"flex justify-center items-center my-10",children:(0,i.jsx)("button",{type:"submit",className:"primary_btn",children:"Save"})}),u&&(0,i.jsx)(Le,{text:g,notification:u,path:"/sawp/jitpa"})]});var A},Xs=()=>{const{searchResultData:e}=(0,n.KC)();(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]);const{BJLData:t}=(0,r.useContext)(s.Y),{UpdateLDData:a}=(()=>{const e=(0,ge.D)();return{UpdateLDData:(0,r.useCallback)((async t=>{let{LDValue:a}=t;if(!a)throw new Error("Missing required parameters or empID");try{const{lbrReceiptNo:t,lbrDepoAmt:n,lbrDepoSubmit:r,lbrDepoUpload:s,id:i}=a,l={id:i,lbrReceiptNo:t,lbrDepoAmt:n,lbrDepoSubmit:r,lbrDepoUpload:s};await e.graphql({query:je,variables:{input:l,limit:2e4}})}catch(n){throw console.error("Error updating data:",n),n}}),[])}})(),{LabourCreData:l}=(()=>{const e=(0,ge.D)();return{LabourCreData:(0,r.useCallback)((async t=>{let{creLabpaValue:a}=t;if(!a)throw new Error("Missing required parameters");const n={lbrReceiptNo:[a.lbrReceiptNo],lbrDepoAmt:[a.lbrDepoAmt],lbrDepoSubmit:[a.lbrDepoSubmit],lbrDepoUpload:[a.lbrDepoUpload],empID:a.empID};console.log(n);try{const t=await Promise.all([e.graphql({query:Ne,variables:{input:n}})]);console.log(t,"successfully Save data")}catch(r){throw console.error("Error executing GraphQL requests:",r),r}}),[])}})(),{register:o,handleSubmit:d,watch:c,formState:{errors:p},setValue:m}=(0,it.mN)({resolver:(0,lt.t)(Bn)}),[u,h]=(0,r.useState)(!1),[g,f]=(0,r.useState)(""),[v,y]=(0,r.useState)([]),[b,N]=(0,r.useState)({lbrDepoUpload:null}),[j,D]=(0,r.useState)({lbrDepoUpload:[]}),w=c("lbrDepoUpload",""),A=e=>{if("object"===typeof e&&e.upload){const t=e.upload,a=decodeURIComponent(t);return a.substring(a.lastIndexOf("/")+1)}try{const t=new URL(e).pathname,a=decodeURIComponent(t);return a.substring(a.lastIndexOf("/")+1)}catch(t){if("string"===typeof e){const t=decodeURIComponent(e);return t.substring(t.lastIndexOf("/")+1)}return}};(0,r.useEffect)((()=>{m("empID",e.empID);if(["lbrReceiptNo","lbrDepoAmt","lbrDepoSubmit"].forEach((t=>{return m(t,(a=e[t],Array.isArray(a)?a[a.length-1]:a));var a})),e&&e.lbrDepoUpload)try{const t=JSON.parse(e.lbrDepoUpload).map((e=>"string"===typeof e?JSON.parse(e):e));m("lbrDepoUpload",t),D((e=>(0,x.A)((0,x.A)({},e),{},{lbrDepoUpload:t}))),N((e=>(0,x.A)((0,x.A)({},e),{},{lbrDepoUpload:t.length>0?A(t[t.length-1].upload):""})))}catch(t){console.error("Failed to parse ".concat(e.lbrDepoUpload,":"),t)}}),[e,m]);const S=c("empID");return(0,i.jsxs)("form",{onSubmit:d((async e=>{try{const n=t.find((t=>t.empID===e.empID)),r=e=>e?new Date(e).toLocaleDateString("en-CA"):null,s=r(e.lbrDepoSubmit);if(n){const t=[...new Set([...n.lbrDepoSubmit||[],s])],i=(0,x.A)((0,x.A)({},e),{},{lbrDepoSubmit:t.map(r),lbrDepoUpload:JSON.stringify(j.lbrDepoUpload),id:n.id});await a({LDValue:i}),f("Labour Info Updated Successfully"),h(!0)}else{const t=(0,x.A)((0,x.A)({},e),{},{lbrDepoSubmit:s,lbrDepoUpload:JSON.stringify(j.lbrDepoUpload)});await l({creLabpaValue:t}),f("Labour Info Saved Successfully"),h(!0)}}catch(n){console.error("Error submitting data:",n)}})),className:"mx-auto min-h-screen p-2 my-10 bg-[#F5F6F1CC]",children:[(0,i.jsx)("div",{className:"flex justify-end items-center",children:(0,i.jsx)("div",{className:"max-w-sm",children:(0,i.jsx)(ut,{label:"Employee ID",register:o,name:"empID",type:"text",placeholder:"Enter Employee ID",errors:p})})}),(0,i.jsxs)("div",{className:"grid grid-cols-2 mt-10 gap-5",children:[(0,i.jsx)(ut,{label:"Labour Deposit Receipt Number",register:o,name:"lbrReceiptNo",type:"text",errors:p}),(0,i.jsx)(ut,{label:"Deposit Amount",register:o,name:"lbrDepoAmt",type:"text",errors:p}),(0,i.jsx)(ut,{label:"Date Endorsement Of Labour Deposit",register:o,name:"lbrDepoSubmit",type:"date",errors:p}),(0,i.jsx)("div",{children:(0,i.jsx)(Da,{label:"Upload File",onChangeFunc:e=>(async(e,t,a)=>{const n=e.target.files[0];if(!n)return;if(!a)return alert("Employee ID is required to upload files."),void window.location.reload();if(!["application/pdf"].includes(n.type))return void alert("Upload must be a PDF file");const r=c(t)||[];m(t,[...r,n]);try{await pt(n,t,D,a),N((e=>(0,x.A)((0,x.A)({},e),{},{[t]:n.name})))}catch(s){console.log(s)}})(e,"lbrDepoUpload",S),name:"lbrDepoUpload",register:o,error:p,fileName:b.lbrDepoUpload||(E=w,"string"===typeof E&&E?E.split("/").pop():"")})})]}),(0,i.jsx)("div",{className:"center my-10",children:(0,i.jsx)("button",{type:"submit",className:"primary_btn",children:"Save"})}),u&&(0,i.jsx)(Le,{text:g,notification:u,path:"/sawp/labourDeposit"})]});var E},ei=()=>{const e=(0,ge.D)();return{ImmigrationData:(0,r.useCallback)((async t=>{let{ImmiValue:a}=t;if(!a)throw new Error("Missing required parameters");const n={empID:a.empID,ppLocation:a.ppLocation,arrivStampUpload:a.arrivStampUpload,immigEmpUpload:a.immigEmpUpload,reEntryUpload:a.reEntryUpload,arrivStampExp:a.arrivStampExp,immigRefNo:a.immigRefNo,ppSubmit:a.ppSubmit,empPassExp:a.empPassExp,empPassStatus:a.empPassStatus,airTktStatus:a.airTktStatus,reEntryVisa:a.reEntryVisa,immigApproval:a.immigApproval,reEntryVisaExp:a.reEntryVisaExp,remarkImmig:a.remarkImmig};console.log(n);try{const t=await Promise.all([e.graphql({query:"\n  mutation CreatePassportValid(\n    $input: CreatePassportValidInput!\n    $condition: ModelPassportValidConditionInput\n  ) {\n    createPassportValid(input: $input, condition: $condition) {\n      id\n      empID\n      ppLocation\n      arrivStampUpload\n      immigEmpUpload\n      reEntryUpload\n      arrivStampExp\n      immigRefNo\n      ppSubmit\n      empPassExp\n      empPassStatus\n      airTktStatus\n      reEntryVisa\n      immigApproval\n      reEntryVisaExp\n      remarkImmig\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:n}})]);console.log(t,"successfully stored data")}catch(r){throw console.error("Error executing GraphQL requests:",r),r}}),[])}},ti=()=>{const e=(0,ge.D)();return{UpdateImmigraData:(0,r.useCallback)((async t=>{let{UpImmiValue:a}=t;if(!a)throw new Error("Missing required parameters");const n={id:a.id,empID:a.empID,ppLocation:a.ppLocation,arrivStampUpload:a.arrivStampUpload,immigEmpUpload:a.immigEmpUpload,reEntryUpload:a.reEntryUpload,arrivStampExp:a.arrivStampExp,immigRefNo:a.immigRefNo,ppSubmit:a.ppSubmit,empPassExp:a.empPassExp,empPassStatus:a.empPassStatus,airTktStatus:a.airTktStatus,reEntryVisa:a.reEntryVisa,immigApproval:a.immigApproval,reEntryVisaExp:a.reEntryVisaExp,remarkImmig:a.remarkImmig};try{await Promise.all([e.graphql({query:"\n  mutation UpdatePassportValid(\n    $input: UpdatePassportValidInput!\n    $condition: ModelPassportValidConditionInput\n  ) {\n    updatePassportValid(input: $input, condition: $condition) {\n      id\n      empID\n      ppLocation\n      arrivStampUpload\n      immigEmpUpload\n      reEntryUpload\n      arrivStampExp\n      immigRefNo\n      ppSubmit\n      empPassExp\n      empPassStatus\n      airTktStatus\n      reEntryVisa\n      immigApproval\n      reEntryVisaExp\n      remarkImmig\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:n,limit:2e4}})])}catch(r){throw console.error("Error executing GraphQL requests:",r),r}}),[])}},ai=()=>{const{searchResultData:e}=(0,n.KC)();(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]);const{ImmigrationData:t}=ei(),{PPValidsData:a}=(0,r.useContext)(s.Y),{UpdateImmigraData:l}=ti(),{register:o,handleSubmit:d,watch:c,formState:{errors:p},setValue:m}=(0,it.mN)({resolver:(0,lt.t)(Hn),arrivStampExp:[],empPassExp:[],immigApproval:[],ppSubmit:[],reEntryVisaExp:[]}),[u,h]=(0,r.useState)(!1),[g,f]=(0,r.useState)(""),[v,y]=(0,r.useState)([]),[b,N]=(0,r.useState)([]),[j,D]=(0,r.useState)([]),[w,A]=(0,r.useState)([]),[S,E]=(0,r.useState)([]),[I,C]=(0,r.useState)({arrivStampUpload:null,immigEmpUpload:null,reEntryUpload:null}),[k,R]=(0,r.useState)({arrivStampUpload:[],immigEmpUpload:[],reEntryUpload:[]}),T=c("arrivStampUpload",""),P=c("immigEmpUpload",""),_=c("reEntryUpload",""),O=c("empID"),L=e=>"string"===typeof e&&e?e.split("/").pop():"",F=e=>{if("object"===typeof e&&e.upload){const t=e.upload,a=decodeURIComponent(t);return a.substring(a.lastIndexOf("/")+1)}try{const t=new URL(e).pathname,a=decodeURIComponent(t);return a.substring(a.lastIndexOf("/")+1)}catch(t){if("string"===typeof e){const t=decodeURIComponent(e);return t.substring(t.lastIndexOf("/")+1)}return}};(0,r.useEffect)((()=>{m("empID",e.empID);["ppLocation","arrivStampUpload","immigEmpUpload","reEntryUpload","arrivStampExp","immigRefNo","ppSubmit","empPassExp","empPassStatus","airTktStatus","reEntryVisa","immigApproval","reEntryVisaExp","remarkImmig"].forEach((t=>{return m(t,(a=e[t],Array.isArray(a)?a[a.length-1]:a));var a}));const t=t=>{if(e&&e[t])try{const a=JSON.parse(e[t]).map((e=>"string"===typeof e?JSON.parse(e):e));m(t,a),R((e=>(0,x.A)((0,x.A)({},e),{},{[t]:a}))),C((e=>(0,x.A)((0,x.A)({},e),{},{[t]:a.length>0?F(a[a.length-1].upload):""})))}catch(a){console.error("Failed to parse ".concat(e[t],":"),a)}};t("arrivStampUpload"),t("immigEmpUpload"),t("reEntryUpload")}),[e,m]);const M=async(e,t,a)=>{const n=e.target.files[0];if(!n)return;if(!["application/pdf"].includes(n.type))return void alert("Upload must be a PDF file");const r=c(t)||[];m(t,[...r,n]);try{await pt(n,t,R,a),C((e=>(0,x.A)((0,x.A)({},e),{},{[t]:n.name})))}catch(s){console.log(s)}};return(0,i.jsxs)("form",{onSubmit:d((async e=>{try{const n=a.find((t=>t.empID===e.empID)),r=e=>e?new Date(e).toLocaleDateString("en-CA"):null,s=r(e.arrivStampExp),i=r(e.ppSubmit),o=r(e.empPassExp),d=r(e.immigApproval),c=r(e.reEntryVisaExp);if(n){const t=[...new Set([...n.arrivStampExp||[],s])],a=[...new Set([...n.ppSubmit||[],i])],p=[...new Set([...n.empPassExp||[],o])],m=[...new Set([...n.immigApproval||[],d])],u=[...new Set([...n.reEntryVisaExp||[],c])],g=(0,x.A)((0,x.A)({},e),{},{immigRefNo:"IMMBD/1382",arrivStampExp:t.map(r),ppSubmit:a.map(r),empPassExp:p.map(r),immigApproval:m.map(r),reEntryVisaExp:u.map(r),arrivStampUpload:JSON.stringify(k.arrivStampUpload),immigEmpUpload:JSON.stringify(k.immigEmpUpload),reEntryUpload:JSON.stringify(k.reEntryUpload),id:n.id});await l({UpImmiValue:g}),f("Immigration Info Updated successfully"),h(!0)}else{const a=(0,x.A)((0,x.A)({},e),{},{immigRefNo:"IMMBD/1382",arrivStampExp:s,ppSubmit:i,empPassExp:o,immigApproval:d,reEntryVisaExp:c,arrivStampUpload:JSON.stringify(k.arrivStampUpload),immigEmpUpload:JSON.stringify(k.immigEmpUpload),reEntryUpload:JSON.stringify(k.reEntryUpload)});await t({ImmiValue:a}),f("Immigration Info Saved Successfully"),h(!0)}}catch(n){console.error("Error submitting data:",n)}})),className:"mx-auto min-h-screen p-2 my-10 bg-[#F5F6F1CC]",children:[(0,i.jsx)("div",{className:"flex justify-end items-center",children:(0,i.jsx)("div",{className:"max-w-sm",children:(0,i.jsx)(ut,{label:"Employee ID",register:o,name:"empID",type:"text",placeholder:"Enter Employee ID",errors:p})})}),(0,i.jsxs)("div",{className:"grid grid-cols-3 mt-10 gap-5",children:[(0,i.jsxs)("div",{className:"  ",children:[(0,i.jsx)("label",{className:"mb-1 text_size_6",children:"Original Passport Location"}),(0,i.jsxs)("select",(0,x.A)((0,x.A)({},o("ppLocation")),{},{className:"input-field select-custom",children:[(0,i.jsx)("option",{value:""}),(0,i.jsx)("option",{value:"HRD",children:"HRD"}),(0,i.jsx)("option",{value:"Immigration",children:"Immigration"}),(0,i.jsx)("option",{value:"Employee",children:"Employee"}),(0,i.jsx)("option",{value:"Vacation",children:"Vacation"})]})),p.ppLocation&&(0,i.jsx)("p",{className:"text-[red] text-[13px] mt-1",children:p.ppLocation.message})]}),(0,i.jsx)(ut,{label:"Date Of Arrival Stamping Expiry",register:o,name:"arrivStampExp",type:"date",errors:p}),(0,i.jsx)(Da,{label:"Upload File",onChangeFunc:e=>M(e,"arrivStampUpload",O),name:"arrivStampUpload",register:o,error:p,fileName:I.arrivStampUpload||L(T)})]}),(0,i.jsx)("hr",{className:"text-lite_grey mt-7"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 mt-10 gap-5",children:[(0,i.jsx)(ut,{label:"Immigration Reference Number",register:o,name:"immigRefNo",value:"IMMBD/1382",type:"text",errors:p}),(0,i.jsx)(ut,{label:"Passport Submit Date To Immigration Dept",register:o,name:"ppSubmit",type:"date",errors:p}),(0,i.jsx)(ut,{label:"Employment Pass Expiry",register:o,name:"empPassExp",type:"date",errors:p}),(0,i.jsx)(ut,{label:"Employment Pass Status",register:o,name:"empPassStatus",type:"text",errors:p}),(0,i.jsx)(Da,{label:"Upload File",onChangeFunc:e=>M(e,"immigEmpUpload"),register:o,name:"immigEmpUpload",error:p,fileName:I.immigEmpUpload||L(P)})]}),(0,i.jsx)("hr",{className:"text-lite_grey mt-5"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 mt-10 gap-5 ",children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{className:"mb-1 text_size_6 ",children:"Air Ticket Status"}),(0,i.jsxs)("select",(0,x.A)((0,x.A)({},o("airTktStatus")),{},{className:"input-field select-custom",children:[(0,i.jsx)("option",{value:""}),(0,i.jsx)("option",{value:"Company",children:"Company"}),(0,i.jsx)("option",{value:"Own",children:"Own"})]})),p.airTktStatus&&(0,i.jsx)("p",{className:"text-[red] text-[13px] mt-1",children:p.airTktStatus.message})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{className:"mb-1 text_size_6",children:"Re-entry Visa Application"}),(0,i.jsxs)("select",(0,x.A)((0,x.A)({},o("reEntryVisa")),{},{className:"input-field select-custom",children:[(0,i.jsx)("option",{value:""}),(0,i.jsx)("option",{value:"Single",children:"Single"}),(0,i.jsx)("option",{value:"Multiple",children:"Multiple"})]})),p.reEntryVisa&&(0,i.jsx)("p",{className:"text-[red] text-[13px] mt-1",children:p.reEntryVisa.message})]}),(0,i.jsx)(ut,{label:"Date Approved by Immigration Dept",register:o,name:"immigApproval",type:"date",errors:p}),(0,i.jsx)(ut,{label:"Re-Entry Visa Expiry",register:o,name:"reEntryVisaExp",type:"date",errors:p}),(0,i.jsx)(Da,{label:"Upload File",onChangeFunc:e=>M(e,"reEntryUpload"),register:o,name:"reEntryUpload",error:p,fileName:I.reEntryUpload||L(_)})]}),(0,i.jsxs)("div",{className:"mt-5",children:[(0,i.jsx)("label",{className:"mb-1 text_size_6",children:"Remarks for Immigration"}),(0,i.jsx)("textarea",(0,x.A)((0,x.A)({},o("remarkImmig")),{},{className:"resize-none w-full  p-2 mt-1 border bg-lite_skyBlue border-lite_grey rounded-md outline-none",rows:"4"})),p.remarkImmig&&(0,i.jsx)("p",{className:"text-[red] text-[13px] mt-1",children:p.remarkImmig.message})]}),(0,i.jsx)("div",{className:"center my-10",children:(0,i.jsx)("button",{type:"submit",className:"primary_btn",children:"Save"})}),u&&(0,i.jsx)(Le,{text:g,notification:u,path:"/sawp/immigration"})]})},ni=()=>(0,i.jsx)("div",{children:(0,i.jsx)(Es,{title:"HO"})}),ri=()=>(0,i.jsx)("div",{children:(0,i.jsx)(Es,{title:"SBW"})}),si=()=>(0,i.jsx)("div",{children:(0,i.jsx)(Es,{title:"ORMC"})}),ii=()=>{const{empPDData:e,IVSSDetails:t}=(0,r.useContext)(s.Y),[a,l]=(0,r.useState)(null),{setTempID:o}=ht(),[d,c]=(0,r.useState)([]),[p,m]=(0,r.useState)([]),[u,x]=(0,r.useState)(""),h=(0,n.Zp)(),[g,f]=(0,r.useState)([]),[v,b]=(0,r.useState)(!0),[N,j]=(0,r.useState)(null),D=null===e||void 0===e?void 0:e.map((e=>e.tempID)),w=null===t||void 0===t?void 0:t.map((e=>e.tempID)),A=null===D||void 0===D?void 0:D.filter((e=>null===w||void 0===w?void 0:w.includes(e))),S=null===e||void 0===e?void 0:e.filter((e=>!A.includes(e.tempID))).filter((e=>e.name&&e.name.toLowerCase().includes(u.toLowerCase())||e.position&&e.position.toLowerCase().includes(u.toLowerCase())||e.nationality&&e.nationality.toLowerCase().includes(u.toLowerCase())));(0,r.useEffect)((()=>{S&&S.length>0?(b(!1),j(null)):j("No data available.")}),[S]);return console.log("Candidates",p),(0,i.jsxs)("section",{className:"screen-size min-h-screen w-full my-5",children:[(0,i.jsxs)("div",{className:"mb-8 flex justify-between items-center",children:[(0,i.jsx)("div",{className:"flex-1",children:(0,i.jsx)("button",{className:"bg-[#faf362] py-2 px-3 rounded-lg text-[18px] font-semibold",children:"List Of All Candidates"})}),(0,i.jsx)("div",{className:"flex-1 flex justify-end ",children:(0,i.jsx)(aa,{newFormData:S,searchHandler:x,emptySearch:()=>console.log("Search cleared!"),searchIcon1:(0,i.jsx)(y.zfp,{}),placeholder:"Search",border:"rounded-full",shadow:"shadow-[0_1px_6px_1px_rgba(0,0,0,0.2)]"})})]}),(0,i.jsxs)("div",{className:"flex relative mb-8 ",children:[(0,i.jsx)("div",{className:" absolute top-1/2 right-14 transform -translate-y-1/2 text-2xl hover:text-3xl flex items-center cursor-pointer",onClick:()=>{1===d.length?((()=>{if(1===d.length){var e;const t=null===(e=S[d[0]])||void 0===e?void 0:e.tempID;m(t),o(t)}})(),h("/addCandidates",{})):d.length>1?alert("Please select only one row to edit."):alert("Please select a row before editing.")},disabled:0===d.length,children:(0,i.jsx)(Lt.uO9,{className:"mr-2"})}),(0,i.jsx)("div",{className:"absolute top-1/2 right-0 transform -translate-y-1/2 text-3xl hover:text-4xl cursor-pointer text-[#f42232cc] flex items-center",onClick:()=>{S.filter((e=>!d.includes(e.id)));c([])},children:(0,i.jsx)(ta.b6i,{className:"mr-2"})})]}),v?(0,i.jsx)("div",{className:"text-center py-10",children:"Loading..."}):N?(0,i.jsx)("div",{className:"text-center py-10",children:"".concat(N)}):(0,i.jsx)(ea,{columns:["Name","Gender","Nationality","Position","Experience","Email","Contact"],rowClickHandler:e=>{l(e.id)},data:S,selectedRows:d,onRowSelect:e=>{c(e),console.log("Updated selected rows:",e),console.log("All candidates data:",S);const t=e.map((e=>{var t;return null===(t=S[e])||void 0===t?void 0:t.tempID}));console.log("Selected TempIDs:",t)},edited:e=>{f(e)}})]})},li=(0,ge.D)(),oi=()=>{const[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(!1),[s,l]=(0,r.useState)(!1),[o,d]=(0,r.useState)(null),[c,p]=(0,r.useState)(null);(0,r.useEffect)((()=>{(async()=>{try{var e,a;const n=localStorage.getItem("userID");if(!n)throw new Error("User ID is not available in localStorage");const r=await li.graphql({query:fe.Kc,variables:{filter:{requestorID:{eq:n}}}}),s=(null===r||void 0===r||null===(e=r.data)||void 0===e||null===(a=e.listEmpRequisitions)||void 0===a?void 0:a.items)||[];t(s),p(null)}catch(n){console.error("Error fetching requisition data:",n),p("Failed to fetch requisition data"),t([])}})()}),[]);return(0,r.useEffect)((()=>(document.body.style.overflow=a||s?"hidden":"auto",()=>{document.body.style.overflow="auto"})),[a,s]),(0,i.jsx)("section",{className:" bg-[#F5F6F1]",children:(0,i.jsxs)("div",{className:"screen-size",children:[(0,i.jsxs)("div",{className:"flex justify-between my-8",children:[(0,i.jsx)("p",{className:"bg-[#faf362] py-2 px-3 rounded-lg text-[18px] font-semibold",children:"My Requisition List"}),(0,i.jsx)("button",{className:"hover:bg-[#f4bf71] border-2 border-[#f4bf71] py-2 px-3 rounded-lg text-[18px] font-semibold",onClick:()=>n(!0),children:"Apply New Requisition"})]}),c&&(0,i.jsx)("div",{className:"text-[red]",children:c}),e.length>0?(0,i.jsx)("div",{className:"h-[70vh] max-h-[calc(70vh-7rem)] w-full overflow-y-auto rounded-lg",children:(0,i.jsxs)("table",{className:"w-full",children:[(0,i.jsx)("thead",{className:"bg-[#939393] text-white sticky top-0 rounded-lg",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"py-4",children:"Position"}),(0,i.jsx)("th",{className:"py-4",children:"Project"}),(0,i.jsx)("th",{className:"py-4",children:"Quantity"}),(0,i.jsx)("th",{className:"py-4",children:"Submitted Date"}),(0,i.jsx)("th",{className:"py-4",children:"Form"}),(0,i.jsx)("th",{className:"py-4",children:"Status"}),(0,i.jsx)("th",{className:"py-4",children:"Remarks"})]})}),(0,i.jsx)("tbody",{className:"bg-white text-center",children:e.sort(((e,t)=>new Date(t.createdAt)-new Date(e.createdAt))).map((e=>{return(0,i.jsxs)("tr",{className:"shadow-[0_3px_6px_1px_rgba(0,0,0,0.2)] hover:bg-medium_blue",children:[(0,i.jsx)("td",{className:"py-4 max-w-[200px] text-ellipsis overflow-hidden",children:e.position}),(0,i.jsx)("td",{className:"py-4 max-w-[200px] text-ellipsis overflow-hidden",children:e.project}),(0,i.jsx)("td",{className:"py-4 ",children:e.quantity}),(0,i.jsx)("td",{className:"py-4 ",children:(0,v.GP)(new Date(e.createdAt),"dd-MM-yyyy")}),(0,i.jsx)("td",{className:"py-4",children:(0,i.jsx)("a",{href:"#",className:"text-[blue] font-semibold border-b-2 cursor-pointer",onClick:()=>(d(e),void l(!0)),children:"View"})}),(0,i.jsx)("td",{className:"py-4 font-semibold ".concat((t=e.status,"Rejected"===t?"text-[red]":"Approved"===t?"text-[#339933]":"Pending"===t?"text-dark_grey":"text-[#E8A317]")),children:e.status?e.status:"Pending"}),(0,i.jsx)("td",{className:"py-4 max-w-[200px] text-ellipsis overflow-hidden",children:e.remarkReq})]},e.id);var t}))})]})}):(0,i.jsx)("p",{children:"No requisition data available."}),a&&(0,i.jsx)("div",{className:"fixed inset-0 bg-grey bg-opacity-75 flex items-center justify-center z-50",children:(0,i.jsx)("div",{className:"bg-white p-8 rounded-lg shadow-lg w-[90%] max-w-xl",children:(0,i.jsx)(vr,{onClose:()=>n(!1)})})}),s&&o&&(0,i.jsx)(ma,{isVisible:s,onClose:()=>{d(null),l(!1)},isMdView:!1,selectedRequest:o})]})})};var di=a(9342);const ci=e=>{let{register:t,formData:a,onChange:n}=e;const[s,l]=r.useState(""),o=e=>{l(e.target.value)};return(0,i.jsxs)("form",{className:"w-full mx-auto mt-5",children:[(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("p",{className:"mb-4",children:"Please indicate any additional information or unusual circumstances considered relevant to the staff performance or assessment. Please specify accordingly."}),(0,i.jsx)("textarea",(0,x.A)((0,x.A)({},t("additionalInfo")),{},{value:a.additionalInfo,className:"w-full h-32 border p-2 rounded resize-none outline-none"}))]}),(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("h2",{className:"font-bold bg-black text-white p-2",children:"RECOMMENDATION"}),(0,i.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,i.jsxs)("label",{className:"flex items-center relative",children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"radio"},t("recommendation")),{},{value:"confirmed",checked:"confirmed"===s,onChange:o,className:"mr-2 w-6 h-6 border-2 bg-white appearance-none rounded-none"})),(0,i.jsxs)("span",{className:"radio-label flex items-center",children:["confirmed"===s&&(0,i.jsx)(di.RXm,{className:"text-[#4ad84a] text-[28px] absolute bottom-0 -left-0.5"}),"The appointment to be confirmed"]})]}),(0,i.jsxs)("label",{className:"flex items-center relative",children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"radio"},t("recommendation")),{},{value:"extended",checked:"extended"===s,onChange:o,className:"mr-2 w-6 h-6 border-2 border-gray-500 bg-white appearance-none rounded-none"})),(0,i.jsxs)("span",{className:"radio-label flex items-center",children:["extended"===s&&(0,i.jsx)(di.RXm,{className:"text-[#4ad84a] text-[28px] absolute bottom-0 -left-0.5"}),"The appointment to be extended for a further probationary period of",(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text"},t("extendProbED")),{},{className:"w-12 border-b outline-none text-center ml-2",placeholder:"0"}))," ","months"]})]}),(0,i.jsxs)("label",{className:"flex items-center relative",children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"radio"},t("recommendation")),{},{value:"terminated",checked:"terminated"===s,onChange:o,className:"mr-2 w-6 h-6 border-2 border-gray-500 bg-white appearance-none rounded-none"})),(0,i.jsxs)("span",{className:"radio-label flex items-center",children:["terminated"===s&&(0,i.jsx)(di.RXm,{className:"text-[#4ad84a] text-[28px] absolute bottom-0 -left-0.5"}),"The appointment to be terminated"]})]})]})]}),(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("p",{children:"Comments that you would like to include into the probation/employment confirmation letter:"}),(0,i.jsxs)("p",{className:"italic",children:["(It is ",(0,i.jsx)("strong",{children:"compulsory"})," for you to fill in your comment for the ",(0,i.jsx)("strong",{children:"staff level"})," considering his/her attitude, approach, and ability in performing the duties or responsibilities assigned.)"]})]}),(0,i.jsxs)("div",{className:"mt-20 space-y-16",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center space-x-8",children:[(0,i.jsxs)("div",{className:"flex justify-center items-center",children:[(0,i.jsx)("label",{className:"text-sm font-medium",children:"Name of Supervisor :"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text"},t("supervisorName")),{},{value:a.supervisorName,className:"border-b outline-none px-1"}))]}),(0,i.jsxs)("div",{className:"flex items-center space-x-10 border-b",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"radio",value:"Approved"},t("supervisorApproved")),{},{id:"approved",className:" h-4 w-4 form-checkbox"})),(0,i.jsx)("label",{htmlFor:"approved",className:"text-sm",children:"Approved"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"radio",value:"Reject"},t("supervisorApproved")),{},{id:"reject",className:" h-4 w-4 form-checkbox"})),(0,i.jsx)("label",{htmlFor:"reject",className:"text-sm",children:"Rejected"})]})]}),(0,i.jsx)("div",{className:"flex items-center space-x-2 border-b",children:(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"date"},t("supervisorDate")),{},{className:"outline-none"}))})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center space-x-8",children:[(0,i.jsxs)("div",{className:"flex justify-center items-center",children:[(0,i.jsx)("label",{className:"text-sm font-medium",children:"Name of Manager :"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text"},t("managerName")),{},{className:"border-b outline-none px-1"}))]}),(0,i.jsxs)("div",{className:"flex items-center space-x-10 border-b",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"radio",value:"Approved"},t("managerApproved")),{},{id:"approved",className:" h-4 w-4 form-checkbox"})),(0,i.jsx)("label",{htmlFor:"approved",className:"text-sm",children:"Approved"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"radio",value:"Reject"},t("managerApproved")),{},{id:"reject",className:" h-4 w-4 form-checkbox"})),(0,i.jsx)("label",{htmlFor:"reject",className:"text-sm",children:"Rejected"})]})]}),(0,i.jsx)("div",{className:"flex items-center space-x-2 border-b",children:(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"date"},t("managerDate")),{},{className:"outline-none"}))})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"w-[350px]",children:[(0,i.jsx)("p",{className:"font-semibold",children:"Concurred By GM :"}),(0,i.jsx)("p",{children:"(For Staff Category Only)"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-10 border-b",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"radio",value:"Approved"},t("gmApproved")),{},{id:"approved",className:" h-4 w-4 form-checkbox"})),(0,i.jsx)("label",{htmlFor:"approved",className:"text-sm",children:"Approved"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"radio",value:"Reject"},t("gmApproved")),{},{id:"reject",className:" h-4 w-4 form-checkbox"})),(0,i.jsx)("label",{htmlFor:"reject",className:"text-sm",children:"Rejected"})]})]}),(0,i.jsx)("div",{className:"flex items-center space-x-2 border-b",children:(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"date"},t("gmDate")),{},{className:"outline-none"}))})]})]}),(0,i.jsxs)("div",{className:"border pt-4 mt-5",children:[(0,i.jsx)("h3",{className:"font-bold underline p-2",children:"Human Resources Department"}),(0,i.jsx)("div",{children:(0,i.jsx)("p",{className:"font-semibold border-b p-2",children:"Received & Action By :"})}),(0,i.jsxs)("div",{className:"flex justify-evenly items-center border-b py-5",children:[(0,i.jsxs)("div",{className:"flex justify-center items-center",children:[(0,i.jsx)("label",{className:"text-sm font-medium",children:"Name :"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text"},t("hrName")),{},{className:"border-b outline-none px-1"}))]}),(0,i.jsx)("div",{className:"flex items-center space-x-2 border-b",children:(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"date"},t("hrDate")),{},{className:"outline-none"}))})]})]}),(0,i.jsx)("div",{className:"mt-8",children:(0,i.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded",children:"Submit"})})]})},pi=e=>{let{title:t,name:a,register:n}=e;const[s,l]=(0,r.useState)(""),o=e=>{l(e.target.value)};return(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("h3",{className:"font-semibold",children:t}),(0,i.jsxs)("div",{className:"mt-2",children:[(0,i.jsxs)("label",{className:"flex items-center relative",children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"radio",name:a},n(a)),{},{value:"exceeding",checked:"exceeding"===s,onChange:o,className:"mr-2 appearance-none w-5 h-5 border rounded-sm"})),"Exceeding expectations","exceeding"===s&&(0,i.jsx)(di.RXm,{className:"text-[#4ad84a] text-[28px] absolute -bottom-0.5 -left-0.5"})]}),(0,i.jsxs)("label",{className:"flex items-center relative mt-2",children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"radio",name:a},n(a)),{},{value:"meeting",checked:"meeting"===s,onChange:o,className:"mr-2 appearance-none w-5 h-5 border rounded-sm"})),"Meeting expectations","meeting"===s&&(0,i.jsx)(di.RXm,{className:"text-[#4ad84a] text-[28px] absolute -bottom-0.5 -left-0.5"})]}),(0,i.jsxs)("label",{className:"flex items-center relative mt-2",children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"radio",name:a},n(a)),{},{value:"notMeeting",checked:"notMeeting"===s,onChange:o,className:"mr-2 appearance-none w-5 h-5 border rounded-sm"})),"Not meeting expectations (provide details)","notMeeting"===s&&(0,i.jsx)(di.RXm,{className:"text-[#4ad84a] text-[28px] absolute -bottom-0.5 -left-0.5"})]})]})]})},mi=e=>{let{register:t}=e;return(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Employee Performance"}),(0,i.jsx)(pi,{title:"1) Communication and Inter-personal Skill",name:"communication",register:t}),(0,i.jsx)(pi,{title:"2) Quality of Work",name:"quality",register:t}),(0,i.jsx)(pi,{title:"3) Pace of Work",name:"pace",register:t}),(0,i.jsx)(pi,{title:"4) Initiative",name:"initiative",register:t}),(0,i.jsx)(pi,{title:"5) Attitude and professionalism",name:"attitude",register:t}),(0,i.jsx)(pi,{title:"6) Adaptability",name:"adaptability",register:t}),(0,i.jsx)(pi,{title:"7) Teamwork",name:"teamwork",register:t}),(0,i.jsx)(pi,{title:"8) Responsible and dependable",name:"responsibility",register:t}),(0,i.jsx)(pi,{title:"9) Diligent",name:"diligent",register:t}),(0,i.jsx)(pi,{title:"10) Commitment towards the job",name:"commitment",register:t})]})},ui=Xt.Ik({}),xi=(0,r.forwardRef)((()=>{const{empPIData:e,workInfoData:t,ProbFData:a}=(0,r.useContext)(s.Y);(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]);const{ProbFormsData:l}=(()=>{const e=(0,ge.D)();return{ProbFormsData:(0,r.useCallback)((async t=>{let{ProbValue:a}=t;if(!a)throw new Error("Missing required parameters");const n={empID:a.empID,adaptability:a.adaptability,additionalInfo:a.additionalInfo,attention:a.attention,attitude:a.attitude,commitment:a.commitment,communication:a.communication,deadline:a.deadline,diligent:a.diligent,extendProbED:a.extendProbED,extensionPeriod:a.extensionPeriod,gmApproved:a.gmApproved,gmDate:a.gmDate,hrDate:a.hrDate,hrName:a.hrName,initiative:a.initiative,managerApproved:a.managerApproved,managerDate:a.managerDate,managerName:a.managerName,pace:a.pace,quality:a.quality,recommendation:a.recommendation,responsibility:a.responsibility,supervisorApproved:a.supervisorApproved,supervisorDate:a.supervisorDate,supervisorName:a.supervisorName,teamwork:a.teamwork};console.log(n);try{const t=await Promise.all([e.graphql({query:"\n  mutation CreateProbForm(\n    $input: CreateProbFormInput!\n    $condition: ModelProbFormConditionInput\n  ) {\n    createProbForm(input: $input, condition: $condition) {\n      id\n      empID\n      adaptability\n      additionalInfo\n      attention\n      attitude\n      commitment\n      communication\n      deadline\n      diligent\n      extensionPeriod\n      gmDate\n      hrDate\n      hrName\n      initiative\n      managerDate\n      managerName\n      pace\n      quality\n      recommendation\n      responsibility\n      supervisorDate\n      supervisorName\n      teamwork\n      extendProbED\n      gmApproved\n      managerApproved\n      supervisorApproved\n      communicationDetails\n      qualityDetails\n      paceDetails\n      initiativeDetails\n      attitudeDetails\n      adaptabilityDetails\n      teamworkDetails\n      responsibilityDetails\n      diligentDetails\n      commitmentDetails\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:n}})]);console.log(t,"successfully stored data")}catch(r){throw console.error("Error executing GraphQL requests:",r),r}}),[])}})(),{UpdateProb:o}=(()=>{const e=(0,ge.D)();return{UpdateProb:(0,r.useCallback)((async t=>{let{PbFDataUp:a}=t;if(!a)throw new Error("Missing required parameters");const n={id:a.id,empID:a.empID,adaptability:a.adaptability,additionalInfo:a.additionalInfo,attention:a.attention,attitude:a.attitude,commitment:a.commitment,communication:a.communication,deadline:a.deadline,diligent:a.diligent,extendProbED:a.extendProbED,extensionPeriod:a.extensionPeriod,gmApproved:a.gmApproved,gmDate:a.gmDate,hrDate:a.hrDate,hrName:a.hrName,initiative:a.initiative,managerApproved:a.managerApproved,managerDate:a.managerDate,managerName:a.managerName,pace:a.pace,quality:a.quality,recommendation:a.recommendation,responsibility:a.responsibility,supervisorApproved:a.supervisorApproved,supervisorDate:a.supervisorDate,supervisorName:a.supervisorName,teamwork:a.teamwork};try{await Promise.all([e.graphql({query:"\n  mutation UpdateProbForm(\n    $input: UpdateProbFormInput!\n    $condition: ModelProbFormConditionInput\n  ) {\n    updateProbForm(input: $input, condition: $condition) {\n      id\n      empID\n      adaptability\n      additionalInfo\n      attention\n      attitude\n      commitment\n      communication\n      deadline\n      diligent\n      extensionPeriod\n      gmDate\n      hrDate\n      hrName\n      initiative\n      managerDate\n      managerName\n      pace\n      quality\n      recommendation\n      responsibility\n      supervisorDate\n      supervisorName\n      teamwork\n      extendProbED\n      gmApproved\n      managerApproved\n      supervisorApproved\n      communicationDetails\n      qualityDetails\n      paceDetails\n      initiativeDetails\n      attitudeDetails\n      adaptabilityDetails\n      teamworkDetails\n      responsibilityDetails\n      diligentDetails\n      commitmentDetails\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:n,limit:2e4}})])}catch(r){throw console.log(r),console.error("Error executing GraphQL requests:",r),r}}),[])}})();console.log(a),(0,r.useEffect)((()=>{(async()=>{try{const n=e.map((e=>{const n=t?t.find((t=>t.empID===e.empID)):{},r=a?a.find((t=>t.empID===e.empID)):{};return(0,x.A)((0,x.A)((0,x.A)({},e),n),r)})).filter(Boolean);m(n),h(n)}catch(n){console.log(n)}})()}),[e,t,a]);const d=(0,n.zy)(),{employeeData:c}=d.state||{},[p,m]=(0,r.useState)([]),[u,h]=(0,r.useState)([]),[g,f]=(0,r.useState)({probData:{adaptability:"",additionalInfo:"",attention:"",attitude:"",commitment:"",communication:"",deadline:"",diligent:"",extensionPeriod:"",gmDate:"",hrDate:"",hrName:"",initiative:"",managerDate:"",managerName:"",pace:"",quality:"",recommendation:"",responsibility:"",supervisorDate:"",supervisorName:"",teamwork:"",extendProbED:"",gmApproved:"",managerApproved:"",supervisorApproved:"",communicationDetails:"",qualityDetails:"",paceDetails:"",initiativeDetails:"",attitudeDetails:"",adaptabilityDetails:"",teamworkDetails:"",responsibilityDetails:"",diligentDetails:"",commitmentDetails:""}}),[v,y]=(0,r.useState)(!1),[b,N]=(0,r.useState)(""),{register:j,handleSubmit:D,setValue:w,formState:{errors:A}}=(0,it.mN)({resolver:(0,lt.t)(ui),defaultValues:g});(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]),(0,r.useEffect)((()=>{(async()=>{try{const n=e.map((e=>{const n=(null===t||void 0===t?void 0:t.find((t=>t.empID===e.empID)))||{},r=(null===a||void 0===a?void 0:a.find((t=>t.empID===e.empID)))||{};return(0,x.A)((0,x.A)((0,x.A)({},e),n),r)}));m(n)}catch(n){console.error("Error fetching data:",n)}})()}),[e,t,a]),(0,r.useEffect)((()=>{if(console.log("Effect triggered"),a.length>0){console.log("ProbFData has data:",a);const e=a.find((e=>e.empID===(null===c||void 0===c?void 0:c.empID)));console.log("Contract data found:",e),e?(console.log("Setting form data..."),f({probData:{adaptability:e.adaptability||"",additionalInfo:e.additionalInfo||"",attention:e.attention||"",attitude:e.attitude||"",commitment:e.commitment||"",communication:e.communication||"",deadline:e.deadline||"",diligent:e.diligent||"",extensionPeriod:e.extensionPeriod||"",gmDate:e.gmDate||"",hrDate:e.hrDate||"",hrName:e.hrName||"",initiative:e.initiative||"",managerDate:e.managerDate||"",managerName:e.managerName||"",pace:e.pace||"",quality:e.quality||"",recommendation:e.recommendation||"",responsibility:e.responsibility||"",supervisorDate:e.supervisorDate||"",supervisorName:e.supervisorName||"",teamwork:e.teamwork||"",extendProbED:e.extendProbED||"",gmApproved:e.gmApproved||"",managerApproved:e.managerApproved||"",supervisorApproved:e.supervisorApproved||"",communicationDetails:e.communicationDetails||"",qualityDetails:e.qualityDetails||"",paceDetails:e.paceDetails||"",initiativeDetails:e.initiativeDetails||"",attitudeDetails:e.attitudeDetails||"",adaptabilityDetails:e.adaptabilityDetails||"",teamworkDetails:e.teamworkDetails||"",responsibilityDetails:e.responsibilityDetails||"",diligentDetails:e.diligentDetails||"",commitmentDetails:e.commitmentDetails||""}}),console.log("Form data set:",{probData:{adaptability:g.probData.adaptability,attention:g.probData.attention}})):console.log("No matching contract data found")}else console.log("No data in ProbFData")}),[a,null===c||void 0===c?void 0:c.empID]);const S=e=>{const{name:t,value:a}=e.target;f((e=>(0,x.A)((0,x.A)({},e),{},{probData:(0,x.A)((0,x.A)({},e.probData),{},{[t]:a})})))};return(0,i.jsxs)("form",{onSubmit:D((async e=>{try{const t=a.find((t=>t.empID===e.empID));if(t){const a=(0,x.A)((0,x.A)({},e),{},{id:t.id});await o({PbFDataUp:a}),N("Probation Form Updated successfully")}else{const t=(0,x.A)({},e);await l({ProbValue:t}),N("Probation Form Saved successfully")}y(!0)}catch(t){console.error("Error submitting form:",t)}})),className:"p-10 bg-white shadow-md w-full px-20 mx-auto",children:[(0,i.jsx)("section",{className:"center mb-16",children:(0,i.jsx)("div",{className:"max-w-[400px] w-full",children:(0,i.jsx)("img",{className:"w-full",src:he.A,alt:"Logo not found"})})}),(0,i.jsxs)("div",{className:"mb-10",children:[(0,i.jsxs)("p",{className:"text-md mt-2",children:["For the attention of:"," ",(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text",name:"attention"},j("attention")),{},{value:g.probData.attention,onChange:S,className:"border-b border-black focus:outline-none px-1"}))]}),(0,i.jsxs)("p",{className:"text-md mt-3",children:["Deadline submit to Human Resources Department by"," ",(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text"},j("deadline")),{},{value:g.deadline,onChange:S,className:"border-b border-black outline-none px-1"}))]})]}),(0,i.jsxs)("div",{className:"w-full mx-auto mb-10",children:[(0,i.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Employee Details:"}),(0,i.jsx)("table",{className:"w-full border border-black",children:(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{className:"border",children:[(0,i.jsx)("td",{className:"p-2 border-r border-b font-semibold",children:"Employee Name"}),(0,i.jsx)("td",{className:"p-2 border-b",children:(0,i.jsx)("input",(0,x.A)((0,x.A)({},j("name")),{},{defaultValue:(null===c||void 0===c?void 0:c.name)||"-",className:"w-full outline-none"}))})]}),(0,i.jsxs)("tr",{className:"border",children:[(0,i.jsx)("td",{className:"p-2 border-r border-b font-semibold",children:"Employee ID"}),(0,i.jsx)("td",{className:"p-2 border-b",children:(0,i.jsx)("input",(0,x.A)((0,x.A)({},j("empID")),{},{defaultValue:(null===c||void 0===c?void 0:c.empID)||"",className:"w-full outline-none"}))})]}),(0,i.jsxs)("tr",{className:"border",children:[(0,i.jsx)("td",{className:"p-2 border-r border-b font-semibold",children:"Badge Number"}),(0,i.jsx)("td",{className:"p-2 border-b",children:(0,i.jsx)("input",(0,x.A)((0,x.A)({},j("empBadgeNo")),{},{defaultValue:(null===c||void 0===c?void 0:c.empBadgeNo)||"",className:"w-full outline-none"}))})]}),(0,i.jsxs)("tr",{className:"border",children:[(0,i.jsx)("td",{className:"p-2 border-r border-b font-semibold",children:"Department"}),(0,i.jsx)("td",{className:"p-2 border-b",children:(0,i.jsx)("input",(0,x.A)((0,x.A)({},j("department")),{},{defaultValue:(null===c||void 0===c?void 0:c.department)||"",className:"w-full outline-none"}))})]}),(0,i.jsxs)("tr",{className:"border",children:[(0,i.jsx)("td",{className:"p-2 border-r border-b font-semibold",children:"Position"}),(0,i.jsx)("td",{className:"p-2 border-b",children:(0,i.jsx)("input",(0,x.A)((0,x.A)({},j("position")),{},{defaultValue:(null===c||void 0===c?void 0:c.position)||"",className:"w-full outline-none"}))})]}),(0,i.jsxs)("tr",{className:"border",children:[(0,i.jsx)("td",{className:"p-2 border-r border-b font-semibold",children:"Date Joined"}),(0,i.jsx)("td",{className:"p-2 border-b",children:(0,i.jsx)("input",(0,x.A)((0,x.A)({},j("doj")),{},{defaultValue:(null===c||void 0===c?void 0:c.doj)||"",className:"w-full outline-none"}))})]}),(0,i.jsxs)("tr",{className:"border",children:[(0,i.jsx)("td",{className:"p-2 border-r border-b font-semibold",children:"Probation End Date"}),(0,i.jsx)("td",{className:"p-2 border-b",children:(0,i.jsx)("input",(0,x.A)((0,x.A)({},j("probationEnd")),{},{defaultValue:(null===c||void 0===c?void 0:c.probationEndDate)||"-",className:"w-full outline-none"}))})]})]})})]}),(0,i.jsx)(mi,{register:j}),(0,i.jsx)(ci,{register:j,formData:g,onChange:S}),(0,i.jsx)("div",{className:"flex items-center justify-center mt-8",children:(0,i.jsx)("button",{type:"submit",className:"primary_btn",children:"Save"})})]})})),hi=[{id:1,location:"Offshore"},{id:2,location:"Head Office"},{id:3,location:"ORMC"},{id:4,location:"SBW"},{id:5,location:"BLNG"},{id:6,location:"Crest Centurion 2"},{id:7,location:"DAY TRIPPING"},{id:8,location:"Icon Aliza"},{id:9,location:"Icon Valiant"},{id:10,location:"Khalifa"},{id:11,location:"Masshor Princess"},{id:12,location:"MV Falgout"},{id:13,location:"Accounts"},{id:14,location:"HR"},{id:15,location:"Purchasing"},{id:16,location:"Corporate"},{id:17,location:"CPT"}],gi=[{id:"712a1c4b-88a8-49f3-aa13-880879a7b168",empID:"AWE085",leaveType:"Sick Leave",fromDate:"2024-09-03",toDate:"2024-09-04",days:2,applyTo:["Manager","Supervisor"],reason:"for vacation",medicalCertificate:null,supervisorName:"Rose",supervisorEmpID:"AWE026",supervisorStatus:"Approved",supervisorDate:"2024-12-04T16:28:26.887Z",supervisorRemarks:"",managerName:"Arjun",managerEmpID:"AWE765",managerStatus:"Approved",managerDate:"2024-12-04T16:31:02.182Z",managerRemarks:"",empStatus:"Pending",empDate:null,empRemarks:null,createdAt:"2024-12-04T16:27:44.356Z",updatedAt:"2024-12-04T16:31:02.038Z",__typename:"LeaveStatus"},{id:"712a1c4b-88a8-49f3-aa13-880879a7b168",empID:"7308",leaveType:"Unpaid Authorise Leave",fromDate:"2024-10-05",toDate:"2024-10-06",days:2,applyTo:["Manager","Supervisor"],reason:"for vacation",medicalCertificate:null,supervisorName:"Rose",supervisorEmpID:"AWE026",supervisorStatus:"Approved",supervisorDate:"2024-12-04T16:28:26.887Z",supervisorRemarks:"",managerName:"Arjun",managerEmpID:"AWE765",managerStatus:"Approved",managerDate:"2024-12-04T16:31:02.182Z",managerRemarks:"",empStatus:"Pending",empDate:null,empRemarks:null,createdAt:"2024-12-04T16:27:44.356Z",updatedAt:"2024-12-04T16:31:02.038Z",__typename:"LeaveStatus"},{id:"712a1c4b-88a8-49f3-aa13-880879a7b168",empID:"7308",leaveType:"Annual Leave",fromDate:"2024-10-12",toDate:"2024-10-12",days:.5,applyTo:["Manager","Supervisor"],reason:"for vacation",medicalCertificate:null,supervisorName:"Rose",supervisorEmpID:"AWE026",supervisorStatus:"Approved",supervisorDate:"2024-12-04T16:28:26.887Z",supervisorRemarks:"",managerName:"Arjun",managerEmpID:"AWE765",managerStatus:"Approved",managerDate:"2024-12-04T16:31:02.182Z",managerRemarks:"",empStatus:"Pending",empDate:null,empRemarks:null,createdAt:"2024-12-04T16:27:44.356Z",updatedAt:"2024-12-04T16:31:02.038Z",__typename:"LeaveStatus"},{id:"39c6cb04-30df-4f67-81ef-dfdca46bc6ee",empID:"3099",leaveType:"Compassionate Leave",fromDate:"2024-10-17",toDate:"2024-10-20",days:4,applyTo:["Manager","Supervisor"],reason:"dfhadfh",medicalCertificate:"public/medicalCertificates/AWE028/passport -1.jpg",supervisorName:"Rose",supervisorEmpID:"AWE026",supervisorStatus:"Approved",supervisorDate:"2024-12-05T07:44:54.685Z",supervisorRemarks:"",managerName:"Arjun",managerEmpID:"AWE765",managerStatus:"Approved",managerDate:"2024-12-05T07:45:27.439Z",managerRemarks:"",empStatus:"Pending",empDate:null,empRemarks:null,createdAt:"2024-12-05T07:44:16.713Z",updatedAt:"2024-12-05T07:45:27.457Z",__typename:"LeaveStatus"},{id:"39c6cb04-30df-4f67-81ef-dfdca46bc6ee",empID:"352",leaveType:"Compassionate Leave",fromDate:"2024-10-12",toDate:"2024-10-14",days:3,applyTo:["Manager","Supervisor"],reason:"dfhadfh",medicalCertificate:"public/medicalCertificates/AWE028/passport -1.jpg",supervisorName:"Rose",supervisorEmpID:"AWE026",supervisorStatus:"Approved",supervisorDate:"2024-12-05T07:44:54.685Z",supervisorRemarks:"",managerName:"Arjun",managerEmpID:"AWE765",managerStatus:"Approved",managerDate:"2024-12-05T07:45:27.439Z",managerRemarks:"",empStatus:"Pending",empDate:null,empRemarks:null,createdAt:"2024-12-05T07:44:16.713Z",updatedAt:"2024-12-05T07:45:27.457Z",__typename:"LeaveStatus"}],fi={CompanyHolidays2025:[{name:"New Year's Day",date:"Monday, 1st October 2024"},{name:"Isra\u2019 Mi\u2019raj",date:"Tuesday, 5th October 2024"},{name:"Chinese New Year",date:"Wednesday, 11th September 2024"},{name:"41st National Day Negara Brunei Darussalam",date:"Thursday, 7th October 2024",note:"In lieu of Sunday, 23rd February 2025"},{name:"1st Day of Ramadhan",date:"Friday, 5th October 2024",note:"In lieu of Sunday, 2nd March 2025"},{name:"Anniversary of the Revelation of the Quran",date:"Tuesday, 18th March 2025"},{name:"Hari Raya Aidil Fitri",dates:["Monday, 31st March 2025","Tuesday, 1st April 2025","Wednesday, 2nd April 2025"]},{name:"Hari Raya Aidil Adha",date:"Saturday, 7th June 2025"},{name:"First Day of Hijrah 1447",date:"Friday, 27th June 2025"},{name:"His Majesty the Sultan\u2019s 79th Birthday",date:"Tuesday, 15th July 2025"},{name:"Maulud-Prophet Muhammad\u2019s Birthday",date:"Friday, 5th September 2025"},{name:"Christmas Day",date:"Thursday, 25th December 2025"}],notes:"*Dates subject to alteration"},vi=["__typename","createdAt","updatedAt"],yi=(0,ge.D)(),bi=e=>{const t={empBadgeNo:(null===e||void 0===e?void 0:e.badgeNo)||"",sapNo:(null===e||void 0===e?void 0:e.sapNo)||"",date:(e=>{const[t,a,n]=e.split("-"),r=parseInt(a,10),s=parseInt(t,10);return console.log("".concat(r,"/").concat(s,"/").concat(n)),"".concat(r,"/").concat(s,"/").concat(n)})((null===e||void 0===e?void 0:e.workingHrsKey)||""),jobcode:(null===e||void 0===e?void 0:e.jobcode)||"",workingHrs:(null===e||void 0===e?void 0:e.workingHrs)||"",location:(null===e||void 0===e?void 0:e.location)||"",ot:(null===e||void 0===e?void 0:e.overtimeHrs)||""};console.log(t);const a=t.empBadgeNo?t.empBadgeNo:t.sapNo;async function n(e){let a=[],n=null;const r={and:[{empBadgeNo:{eq:t.empBadgeNo||null},fidNo:{eq:t.sapNo||null},date:{eq:t.date},companyName:{eq:t.location}}]};do{const t=await yi.graphql({query:e,variables:{filter:r,nextToken:n}}),s=t.data[Object.keys(t.data)[0]].items;a=[...a,...s],n=t.data[Object.keys(t.data)[0]].nextToken}while(n);return a}console.log(a);!async function(){const[e]=await Promise.all([n(fe.Oy)]),a=e;function r(e){const t=e.match(/-?\d+(\.\d+)?/g);return t?t[t.length-1]:null}console.log(a);const s=a&&a.length>0&&a.map((e=>{try{if(Array.isArray(e.empWorkInfo)){const a=e.empWorkInfo.map((e=>"string"===typeof e?JSON.parse(e):e));console.log(a);const n=a.flat().map((e=>e.JOBCODE===t.jobcode?(console.log(t.workingHrs),(0,x.A)((0,x.A)({},e),{},{WORKINGHRS:r(t.workingHrs),OVERTIMEHRS:t.ot})):e));return console.log(n),(0,x.A)((0,x.A)({},e),{},{verify:"Yes",empWorkInfo:[JSON.stringify(n)]})}}catch(a){console.error("Assign Updated WorkingHrs",a)}}));(async e=>{console.log(e);try{if(e&&e.length>0)for(var t of e){console.log(t);const{__typename:e,createdAt:a,updatedAt:n}=t,r=(0,Hr.A)(t,vi);await yi.graphql({query:ye,variables:{input:r}}).then((e=>{console.log(e),console.log("Updated Successfully...")})).catch((e=>{console.log(e)}))}}catch(a){console.log("Update Method",a)}})(s),console.log(s)}()},Ni=(e,t,a,n)=>{const[s,i]=(0,r.useState)(null),[l,o]=(0,r.useState)(null),d=(0,ge.D)(),[c,p]=(0,r.useState)(null),[m,u]=(0,r.useState)(null);return(0,r.useEffect)((()=>{(async()=>{i(!1),o(!1),n(null);try{if(e&&t&&a){const n=localStorage.getItem("userType");u(n);let m=null,x=[];do{var r,s,l,c;const e={and:[{status:{eq:"Approved"}},{companyName:{eq:a}}]},t=await d.graphql({query:fe.Oy,variables:{filter:e,limit:500,nextToken:m}}),n=(null===t||void 0===t||null===(r=t.data)||void 0===r||null===(s=r.listTimeSheets)||void 0===s?void 0:s.items)||[];m=null===t||void 0===t||null===(l=t.data)||void 0===l||null===(c=l.listTimeSheets)||void 0===c?void 0:c.nextToken,x=[...x,...n.filter((e=>null!==e&&void 0!==e))]}while(m);console.log(x);const h=x.filter((a=>((e,t,a)=>{const n=new Date(e),r=new Date(t),s=new Date(a);return console.log(n.toLocaleDateString()," : ",r.toLocaleDateString()," --- ",n.toLocaleDateString()," : ",s.toLocaleDateString()),n>=r&&n<=s})(a.date,e,t)));console.log("Filtered DATA : ",h),h&&h.length>0?(i(!0),p(h),o(!1)):o(!0)}}catch(m){console.log("ERROR : ",m)}})()}),[e,t,a]),{convertedStringToArrayObj:c,getPosition:m,loading:s,emptyTableMess:l,setEmptyTableMess:o,setLoading:i}};a(557);const ji=(0,ge.D)(),Di=["sapNo"],wi=(0,ge.D)(),Ai=e=>{let{convertedStringToArrayObj:t,ProcessedDataFunc:a,dummyHolidayList:n,dummyLeaveStatus:s,dayCounts:i}=e;const{getStartDate:l,getEndDate:o}=ht();try{const e=async e=>{let t=[],a=null;do{const n=await wi.graphql({query:e,variables:{nextToken:a}}),r=n.data[Object.keys(n.data)[0]].items;t=[...t,...r],a=n.data[Object.keys(n.data)[0]].nextToken}while(a);return t};(0,r.useEffect)((()=>{const r=async()=>{const[r,s,o]=await Promise.all([e(fe.it),e(fe.bJ),e(fe._n)]),d=r.map((e=>{const t=(null===s||void 0===s?void 0:s.map((e=>{const{sapNo:t}=e;return(0,Hr.A)(e,Di)}))).find((t=>t.empID===e.empID));return t?(0,x.A)((0,x.A)({},e),t):null})).filter((e=>null!==e));null===t||void 0===t||t.forEach((e=>{try{if(!(Array.isArray(e.empWorkInfo)&&e.empWorkInfo.length>0))return e.empWorkInfo=e.empWorkInfo;e.empWorkInfo=e.empWorkInfo.map((e=>{try{return JSON.parse(e)}catch(t){return null}})).map((e=>e))[0]}catch(t){return e.empWorkInfo=e.empWorkInfo}}));const c=o.filter((e=>"Approved"===e.managerStatus)),p=Object.values(null===(m=t||[])||void 0===m?void 0:m.reduce(((e,t)=>{const a=t.empBadgeNo?"empBadgeNo-".concat(t.empBadgeNo):"fidNo-".concat(t.fidNo);return e[a]||(e[a]={empBadgeNo:t.empBadgeNo||null,fidNo:t.fidNo||null,data:[]}),e[a].data.push(t),e}),{}));var m;console.log("grouped : ",p);const u=function(e){const t=new Map,a=[];return e.forEach((e=>{e.data.forEach((n=>{Array.isArray(n.empWorkInfo)&&n.empWorkInfo?n.empWorkInfo.forEach((a=>{const r=(null===a||void 0===a?void 0:a.LOCATION)||"",s=(null===a||void 0===a?void 0:a.JOBCODE)||"",i=new Date(n.date),l="".concat(i.getFullYear(),"-").concat(i.getMonth()+1),o="".concat(e.empBadgeNo,"-").concat(e.fidNo,"-").concat(r,"-").concat(s,"-").concat(l);t.has(o)||t.set(o,{empBadgeNo:e.empBadgeNo||null,fidNo:e.fidNo||null,data:[]});t.get(o).data.push((0,x.A)((0,x.A)({},n),{},{empWorkInfo:[a]}))})):a.push({empBadgeNo:e.empBadgeNo,fidNo:e.fidNo||null,data:[(0,x.A)((0,x.A)({},n),{},{empWorkInfo:[]})]})}))})),[...Array.from(t.values()),...a]}(p.map((e=>{var t;const a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.reduce(((e,t)=>{const a=new Date(t.date),n="".concat(a.getMonth()+1,"/").concat(a.getFullYear());return e[n]||(e[n]=[]),e[n].push(t),e}),{});return Object.entries(a).map((t=>{let[a,n]=t;return{empBadgeNo:e.empBadgeNo||null,fidNo:e.fidNo||null,data:n||null}}))})).flat());console.log(u);const h=d.flatMap((e=>{const t=c.filter((t=>e.empID===t.empID));return t.length>0?t.map((t=>(0,x.A)((0,x.A)({},e),t))):[e]}));console.log(h);const g=h.filter((e=>u.some((t=>{const a=e.empBadgeNo&&t.empBadgeNo&&String(e.empBadgeNo)===String(t.empBadgeNo),n=e.sapNo&&t.fidNo&&String(e.sapNo)===String(t.fidNo);return!(!a&&!n)&&t.data.some((t=>{const a=new Date(e.toDate),n=new Date(t.date);return a.getFullYear()===n.getFullYear()&&a.getMonth()===n.getMonth()}))}))));console.log("filteredData : ",g);const f={"Annual Leave":"AL","Compassionate Leave":"CL","Unpaid Authorise Leave":"UAL","Sick Leave":"SL"},v=e=>["HAL","HCL","HUAL","HSL"].some((t=>{var a;return null===e||void 0===e||null===(a=e.startsWith)||void 0===a?void 0:a.call(e,t)})),y=(e,t,a,n)=>{const r=new Date(e),s=new Date(t),i={};for(;r<=s;){i["".concat(r.getDate(),"-").concat(r.getMonth()+1,"-").concat(r.getFullYear())]=n?"H".concat(a,"4"):a,r.setDate(r.getDate()+1)}return i},b=(e=>{const t={};return e.forEach((e=>{const{empID:a,empBadgeNo:n,fidNo:r,leaveType:s,fromDate:i,toDate:l,days:o}=e;t[a]||(t[a]={empBadgeNo:n,fidNo:r,leaveCounts:{},dateDifferences:[]}),v(f[s])?t[a].leaveCounts[s]=(t[a].leaveCounts[s]||0)+.5:"Compassionate Leave"===s&&.5===o||(t[a].leaveCounts[s]=(t[a].leaveCounts[s]||0)+1),t[a].dateDifferences.push({leaveType:s,fromDate:i,toDate:l,listDate:y(i,l,f[s],.5===o),daysDifference:o})})),Object.values(t).forEach((e=>{e.dateDifferences.forEach((t=>{let{listDate:a}=t;Object.values(a).forEach((t=>{if(v(t)){const a=Object.keys(f).find((e=>t.includes(f[e])));e.leaveCounts[a]=(e.leaveCounts[a]||0)+.5}}))}))})),Object.values(t)})(g);console.log("leaveCount_ : ",b),console.log("seperatedGroupedData : ",u);const N=n.CompanyHolidays2025.flatMap((e=>e.dates||[e.date])).map((e=>{const t=e.split(",")[1].trim(),[a,n,r]=t.split(" "),s=a.replace(/\D/g,""),i=new Date("".concat(n," 1, 2000")).getMonth()+1;return"".concat(r,"-").concat(i,"-").concat(s)}));console.log(N);const j=u.map((e=>{const t=b.find((t=>e.empBadgeNo&&t.empBadgeNo&&e.empBadgeNo===t.empBadgeNo||e.fidNo&&t.sapNo&&e.fidNo===t.sapNo?t:void 0)),a=null===d||void 0===d?void 0:d.find((t=>e.empBadgeNo&&t.empBadgeNo&&e.empBadgeNo===t.empBadgeNo||e.fidNo&&t.sapNo&&e.fidNo===t.sapNo?t:void 0)),n=e.data.find((e=>e)),r=n.empWorkInfo.map((e=>null===e||void 0===e?void 0:e.LOCATION)),s=n.empWorkInfo.map((e=>null===e||void 0===e?void 0:e.JOBCODE)),o=Array.from({length:i},((e,t)=>{const a=new Date(l);return a.setDate(l.getDate()+t),a})).reduce(((n,r)=>{var s,i;const l=r.getMonth()+1,o="".concat(r.getDate(),"-").concat(l,"-").concat(r.getFullYear()),d=e.data.find((e=>{let{date:t}=e;return new Date(t).getDate()===r.getDate()})),c=new Intl.DateTimeFormat("en-BN",{weekday:"long"}).format(r),p=null===d||void 0===d||null===(s=d.empWorkInfo[0])||void 0===s?void 0:s.WORKINGHRS,m=N.some((e=>{const t=new Date(e);return"".concat(t.getDate(),"-").concat(t.getMonth()+1,"-").concat(t.getFullYear())===o}));let u=null;t&&t.dateDifferences.forEach((e=>{e.listDate.hasOwnProperty(o)&&(u=e.listDate[o])}));null===a||void 0===a||null===(i=a.salaryType[(null===a||void 0===a?void 0:a.salaryType.length)-1])||void 0===i||i.toLowerCase();if(p){const e=parseFloat(p);if(e<((null===d||void 0===d?void 0:d.normalWorkHrs)||0)){const t=(((null===d||void 0===d?void 0:d.normalWorkHrs)||0)-e).toFixed(1);n[o]="x(".concat(t,")").concat(e)}else n[o]=e.toString()}else if(m)n[o]="PH";else if(u)n[o]=u;else if("Saturday"===c){var x;const e=parseFloat(null===d||void 0===d?void 0:d.normalWorkHrs)/2;console.log(null===a||void 0===a?void 0:a.salaryType);const t=null===a||void 0===a||null===(x=a.salaryType[(null===a||void 0===a?void 0:a.salaryType.length)-1])||void 0===x?void 0:x.toLowerCase(),r=["daily","day","d"];!p&&["monthly","month","m"].includes(t)?n[o]="PHD":!p&&r.includes(t)?n[o]="OFF":e===parseInt(p)?n[o]="HPHD":n[o]=p}else n[o]="Sunday"===c?"":"A";return n}),{});return t?(0,x.A)((0,x.A)({},e),{},{workingHrs:o,leaveCounts:t.leaveCounts,newDate:n.date,location:null===r||void 0===r?void 0:r[0],jobcode:null===s||void 0===s?void 0:s[0]}):(0,x.A)((0,x.A)({},e),{},{workingHrs:o,leaveCounts:{},newDate:n.date,location:null===r||void 0===r?void 0:r[0],jobcode:null===s||void 0===s?void 0:s[0]})}));console.log(j);const D=await(async e=>{const t=["OFF","PH","PHD","A"];return e.forEach(((a,n)=>{e.forEach(((e,t)=>{n!==t&&a.empBadgeNo===e.empBadgeNo&&a.jobcode!==e.jobcode&&Object.keys(a.workingHrs).forEach((t=>{const n=a.workingHrs[t],r=e.workingHrs[t],s=/^x\(\d+(\.\d+)?\)\d+(\.\d+)?$/;s.test(n)&&!s.test(r)?e.workingHrs[t]="0":!s.test(n)&&s.test(r)&&(a.workingHrs[t]="0")}))}));const r=((e,t)=>{const a=Object.values(e);return null===t||void 0===t?void 0:t.reduce(((e,t)=>(e[t]=null===a||void 0===a?void 0:a.filter((e=>e===t)).length,e)),{})})(a.workingHrs,t),s=(()=>{let e={AL:0,CL:0,UAL:0,SL:0};for(const t in a.workingHrs){const n=a.workingHrs[t];null!==n&&void 0!==n&&n.startsWith("HAL")?e.AL+=.5:"AL"===n?e.AL+=1:null!==n&&void 0!==n&&n.startsWith("HCL")?e.CL+=.5:"CL"===n?e.CL+=1:null!==n&&void 0!==n&&n.startsWith("HSL")?e.SL+=.5:"SL"===n?e.SL+=1:null!==n&&void 0!==n&&n.startsWith("HUAL")?e.UAL+=.5:"UAL"===n&&(e.UAL+=1)}return e})();a.hollydayCounts=r,a.leaveCounts=s})),e})(j),w=await(async e=>{const t=await Promise.all(e.map((async e=>{const t=e.data.find((e=>e));if(t&&t.assignBy){const a=await(e=>{async function t(e){let t=[],a=null;do{const n=await ji.graphql({query:e,variables:{nextToken:a}}),r=n.data[Object.keys(n.data)[0]].items;t=[...t,...r],a=n.data[Object.keys(n.data)[0]].nextToken}while(a);return t}const a=async function(){try{const[a]=await Promise.all([t(fe.it)]);return null===a||void 0===a?void 0:a.find((t=>t.empID===e))}catch(a){}}();return console.log(a),a})(t.assignBy);return(0,x.A)((0,x.A)({},e),{},{timeKeeper:(null===a||void 0===a?void 0:a.name)||null})}return(0,x.A)((0,x.A)({},e),{},{timeKeeper:null})})));return t})(D),A=null===w||void 0===w?void 0:w.map((e=>{var t;const a=null===d||void 0===d?void 0:d.find((t=>{const a=t.empBadgeNo&&e.empBadgeNo&&String(t.empBadgeNo)===String(e.empBadgeNo),n=t.sapNo&&e.fidNo&&String(t.sapNo)===String(e.fidNo);return a||n})),n=a?(e=>{let{empID:t,name:a,sapNo:n,empBadgeNo:r,workHrs:s,workMonth:i,salaryType:l,days:o}=e;return{empID:t,name:a,sapNo:n,empBadgeNo:r,workHrs:s,workMonth:i,salaryType:l,days:o}})(a):{},r=(e.data.find((e=>e.date)),null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.map((e=>e.empName))),s=null===e||void 0===e?void 0:e.leaveCounts,o=null===e||void 0===e?void 0:e.workingHrs,c=null===e||void 0===e?void 0:e.newDate,p=null===e||void 0===e?void 0:e.location,m=null===e||void 0===e?void 0:e.hollydayCounts,u=null===e||void 0===e?void 0:e.timeKeeper,h=Array.from({length:i},((e,t)=>{const a=new Date(l);return a.setDate(l.getDate()+t),a})).reduce(((t,a)=>{var n,r;const s="".concat(a.getDate(),"-").concat(a.getMonth()+1,"-").concat(a.getFullYear()),i=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.find((e=>{let{date:t}=e;const n=new Date(t);return n.getDate()===a.getDate()&&n.getMonth()===a.getMonth()&&n.getFullYear()===a.getFullYear()}));console.log(i);const l=null!==i&&void 0!==i&&null!==(r=i.empWorkInfo[0])&&void 0!==r&&r.OVERTIMEHRS?parseInt(null===i||void 0===i?void 0:i.empWorkInfo[0].OVERTIMEHRS):null;return t[s]=null!==l||void 0!==l?l:0,t}),{}),g=e.data.map((e=>{var t;let{empWorkInfo:a}=e;return null===(t=a[0])||void 0===t?void 0:t.JOBCODE}));return(0,x.A)((0,x.A)({empName:r,jobcode:g[0]||"",dateForSelectMY:c},n),{},{OVERTIMEHRS:h,empLeaveCount:s,hollydayCounts:m,workingHrs:o,location:p,timeKeeper:u})})).filter(Boolean);console.log(A),await a(A)};t&&t.length>0?r():a(null)}),[t])}catch(d){console.log("ERROR : ",d)}},Si=e=>{let{summaryObject:t,toggleEditViewSummaryFunc:a,FinalEditedData:n}=e;const[s,l]=(0,r.useState)({badgeNo:(null===t||void 0===t?void 0:t.empBadgeNo)||"",empName:(null===t||void 0===t?void 0:t.empName)||"",sapNo:(null===t||void 0===t?void 0:t.sapNo)||"",location:(null===t||void 0===t?void 0:t.location)||"",jobcode:(null===t||void 0===t?void 0:t.jobcode)||"",NWHPD:(null===t||void 0===t?void 0:t.workHrs)||"",workingHrs:(null===t||void 0===t?void 0:t.workingHrs)||"",overtimeHrs:(null===t||void 0===t?void 0:t.ot)||"",workingHrsKey:(null===t||void 0===t?void 0:t.workingHrsKey)||""}),o=e=>{const{name:t,value:a}=e.target;l((0,x.A)((0,x.A)({},s),{},{[t]:a}))};return(0,i.jsx)("section",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,i.jsxs)("div",{className:"bg-white w-[90%] max-w-[550px] rounded-lg shadow-lg p-7 ",children:[(0,i.jsxs)("div",{className:" flex items-center justify-between pb-5 ",children:[(0,i.jsx)("img",{className:"max-w-[220px] w-full",src:he.A,alt:"not found"}),(0,i.jsx)(zr.j55,{className:"text-2xl  text-dark_grey cursor-pointer ",onClick:()=>{a()}})]}),(0,i.jsx)("header",{className:"flex justify-between items-center pb-4 border-b",children:(0,i.jsx)("h2",{className:"text-dark_grey text_size_2",children:"Edit Access"})}),(0,i.jsx)("main",{className:"mt-4",children:(0,i.jsxs)("form",{className:"grid grid-cols-1 gap-4",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium ",children:"Badge No."}),(0,i.jsx)("input",{type:"text",className:"mt-1 block w-full border border-dark_grey outline-none rounded text-sm py-1.5 px-3",name:"badgeNo",value:s.badgeNo,onChange:o,readOnly:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium ",children:"Sap No."}),(0,i.jsx)("input",{type:"text",className:"mt-1 block w-full border border-dark_grey outline-none rounded text-sm py-1.5 px-3",name:"sapNo",value:s.sapNo,onChange:o,readOnly:!0})]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium ",children:["Employee Name"," "]}),(0,i.jsx)("input",{type:"text",className:"mt-1 block w-full border border-dark_grey outline-none rounded text-sm py-1.5 px-3",name:"empName",value:s.empName,onChange:o,readOnly:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium ",children:" Location"}),(0,i.jsx)("input",{type:"text",className:"mt-1 block w-full border border-dark_grey outline-none rounded text-sm py-1.5 px-3",name:"location",value:s.location,onChange:o,readOnly:!0})]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium ",children:"Jobcode"}),(0,i.jsx)("input",{type:"text",className:"mt-1 block w-full border border-dark_grey outline-none rounded text-sm py-1.5 px-3",name:"jobcode",value:s.jobcode,onChange:o,readOnly:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium ",children:"Normal Working Hours Per Day"}),(0,i.jsx)("input",{type:"text",className:"mt-1 block w-full border border-dark_grey outline-none rounded text-sm py-1.5 px-3",name:"NWHPD",value:s.NWHPD,onChange:o,readOnly:!0})]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium ",children:"Actual working Hours"}),(0,i.jsx)("input",{type:"text",className:"mt-1 block w-full border border-dark_grey outline-none rounded text-sm py-1.5 px-3",name:"workingHrs",value:s.workingHrs,onChange:o})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium ",children:"Overtime Hours"}),(0,i.jsx)("input",{type:"text",className:"mt-1 block w-full border border-dark_grey outline-none rounded text-sm py-1.5 px-3",name:"overtimeHrs",value:s.overtimeHrs,onChange:o})]})]})]})}),(0,i.jsx)("footer",{className:"flex justify-center mt-6 space-x-3",children:(0,i.jsx)("button",{className:"px-5 py-2 bg-[#FEF116] text_size_5 text-dark_grey rounded",onClick:()=>{n(s),a()},children:"Verify"})})]})})},Ei=e=>{let{LocationData:t,secondaryData:a,data:n,searchResult:r,resetTableFunc:s}=e;const{setStartDate:l,setEndDate:o,setSelectedLocation:d}=ht();return(0,i.jsxs)("div",{className:"flex  justify-between items-center w-full mb-5",children:[(0,i.jsxs)("div",{className:"flex justify-start gap-4 ",children:[(0,i.jsxs)("div",{className:"relative grid grid-cols-1 ",children:[(0,i.jsx)("label",{className:"text_size_6",children:"Start Date"}),(0,i.jsx)("input",{type:"date",className:"border border-[#D9D9D9] rounded outline-none p-2 text-[#000000] text-sm",onChange:e=>l(e.target.value)})]}),(0,i.jsxs)("div",{className:"relative grid grid-cols-1 ",children:[(0,i.jsx)("label",{className:"text_size_6",children:"End Date"}),(0,i.jsx)("input",{type:"date",className:"border border-[#D9D9D9] rounded outline-none p-2 text-[#000000] text-sm",onChange:e=>o(e.target.value)})]})]}),(0,i.jsxs)("div",{className:"flex justify-end gap-4 mt-6",children:[(0,i.jsx)("div",{className:"relative grid grid-cols-1 ",children:(0,i.jsx)(Jr,{newFormData:t,searchResult:async e=>{s(),e.location&&d(e.location)},placeholder:"Search Location",rounded:"rounded",searchIcon2:(0,i.jsx)(Lt.BNo,{})})}),(0,i.jsx)(Wr,{allEmpDetails:n,searchResult:r,secondaryData:a,placeholder:"SAP ID / BADGE",Position:"viewSummary"})]})]})};var Ii=a(5239),Ci=a.n(Ii),ki=a(7762);const Ri=e=>{const t=document.getElementById(e);if(!t)return void console.error("Element with ID ".concat(e," not found"));const a=t.parentElement,n=a.style.height;a.style.height="auto",Ci()(t,{useCORS:!0,scale:2}).then((e=>{a.style.height=n;const t=e.toDataURL("image/png"),r=new ki.default({orientation:"portrait",unit:"mm",format:"a4"}),s=r.internal.pageSize.getWidth()-10-10,i=r.internal.pageSize.getHeight()-10-10,l=e.width,o=e.height,d=Math.min(s/l,i/o),c=10+(s-l*d)/2,p=10+(i-o*d)/2;r.addImage(t,"PNG",c,p,l*d,o*d),r.save("products.pdf")})).catch((e=>{console.error("Error generating PDF:",e)}))},Ti=e=>{let{dayCounts:t,data:a,LocationData:s,secondaryData:l,searchResult:o,loading:d,emptyTableMess:c,resetTableFunc:p,toggleEditViewSummaryFunc:m,editViewSummaryObject:u}=e;const{selectedLocation:x,getStartDate:h,startDate:g,endDate:f}=ht();return(0,i.jsx)("div",{className:"bg-[#fafaf6] h-screen",children:(0,i.jsxs)("div",{className:"screen-size p-4",children:[(0,i.jsxs)("header",{className:"my-5 flex justify-between",children:[(0,i.jsx)("div",{className:"flex items-center ",children:(0,i.jsx)(n.N_,{to:"/timeSheet",className:"text-xl flex-1 text-grey",children:(0,i.jsx)(Lt.QVr,{})})}),(0,i.jsx)("header",{className:"flex justify-center text_size_2 py-5 text-dark_grey ",children:(0,i.jsx)("p",{children:"View Summary"})}),(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsx)("button",{className:"rounded text_size_5 text-dark_grey bg-primary  py-2  px-7",onClick:()=>{(()=>{const e=document.getElementById("downloadTable");if(!e)return void console.error("Table with the given ID not found");const t=window.open("","","height=600,width=800");t.document.write("<html><head><title>Print Table</title>"),t.document.write("<style>"),t.document.write("\n      body { font-family: Arial, sans-serif; margin: 20px; }\n      table { width: 100%; border-collapse: collapse; }\n      th, td { padding: 8px; text-align: left; border: 1px solid black; }\n      th { background-color: #f2f2f2; }\n    "),t.document.write("</style>"),t.document.write("</head><body>"),t.document.body.appendChild(e.cloneNode(!0)),t.document.write("</body></html>"),t.document.close(),t.print()})()},children:"Print"})})]}),(0,i.jsx)(Ei,{LocationData:s,secondaryData:l,searchResult:o,resetTableFunc:p}),(0,i.jsx)("div",{className:"overflow-auto max-h-[60vh]",children:(0,i.jsxs)("table",{className:"min-w-full text-sm bg-white ",id:"downloadTable",children:[(0,i.jsx)("thead",{className:"bg-[#949393]",children:(0,i.jsxs)("tr",{className:" text-white",children:[(0,i.jsx)("th",{className:"border px-2 py-2 border-dark_grey min-w-[200px] max-w-[400px]",rowSpan:"2",children:"Employee Name"}),(0,i.jsx)("th",{className:"border px-2 py-2 border-dark_grey",rowSpan:"2",children:"Project"}),Array.from({length:t},((e,t)=>{const a=new Date(h);return a.setDate(h.getDate()+t),(0,i.jsx)("th",{className:"border px-2 py-2 border-dark_grey",children:a.getDate()},a.toDateString())})),(0,i.jsx)("th",{className:"border  px-2 py-2 border-dark_grey",children:"NH"}),(0,i.jsx)("th",{className:"border  px-2 py-2 border-dark_grey",children:"ND"}),(0,i.jsx)("th",{className:"border  px-2 py-2 border-dark_grey",children:"PH"}),(0,i.jsx)("th",{className:"border  px-2 py-2 border-dark_grey",children:"PH-D"}),(0,i.jsx)("th",{className:"border  px-2 py-2 border-dark_grey",children:"AL/CL"}),(0,i.jsx)("th",{className:"border  px-2 py-2 border-dark_grey",children:"SL"}),(0,i.jsx)("th",{className:"border  px-2 py-2 border-dark_grey",children:"OFF"}),(0,i.jsx)("th",{className:"border  px-2 py-2 border-dark_grey",children:"A"}),(0,i.jsx)("th",{className:"border  px-2 py-2 border-dark_grey",children:"UAL"}),(0,i.jsx)("th",{className:"border  px-2 py-2 border-dark_grey",children:"OT"}),(0,i.jsx)("th",{className:"border  px-2 py-2 border-dark_grey",children:"Verified"}),(0,i.jsx)("th",{className:"border  px-2 py-2 border-dark_grey",children:"Updater"})]})}),(0,i.jsx)("tbody",{children:d&&a&&(null===a||void 0===a?void 0:a.length)>0?a.map(((e,a)=>{var n,s,l,o,d,c,p,x,g,f,v,y,b,N,j;const D=Object.values((null===e||void 0===e?void 0:e.OVERTIMEHRS)||{}).reduce(((e,t)=>e+parseInt(t||0)),0),w=function(e){let t=0;try{for(const a in e){const n=e[a],r=/^x\((\d+(\.\d+)?)\)(\d+(\.\d+)?)$/,s=null===n||void 0===n?void 0:n.match(r);if(s){t+=parseFloat(s[3]);continue}const i=/^\d+(\.\d+)?$/;if(null!==n&&void 0!==n&&n.match(i)){t+=parseFloat(n);continue}const l=/^H[A-Z]*\d+$/;null!==n&&void 0!==n&&n.match(l)&&(t+=parseFloat(null===n||void 0===n?void 0:n.replace(/[^0-9]/g,"")))}return t}catch(a){console.log(a," : ERROR")}}(null===e||void 0===e?void 0:e.workingHrs)||0,A=Number(w.toFixed(2)),S=A/parseFloat(null===e||void 0===e?void 0:e.workHrs)||0,E=Number(S.toFixed(2));return(0,i.jsxs)(r.Fragment,{children:[(0,i.jsxs)("tr",{children:[(0,i.jsxs)("td",{className:"border px-2 py-3 text-center",rowSpan:"2",children:[(0,i.jsx)("span",{children:e.name||""}),(0,i.jsx)("br",{}),(0,i.jsx)("span",{children:"Badge# : ".concat(e.empBadgeNo||""," | SapID : ").concat(e.sapNo||"")}),(0,i.jsx)("br",{}),(0,i.jsx)("span",{children:"Hours/Day : ".concat(e.workHrs&&e.workHrs.length>0?e.workHrs:"","  ")}),(0,i.jsx)("span",{children:"Days/Month : ".concat(e.workMonth&&e.workMonth.length>0?e.workMonth:"")}),(0,i.jsx)("br",{}),(0,i.jsx)("span",{children:"SalaryType : ".concat(null!==e&&void 0!==e&&e.salaryType&&(null===e||void 0===e?void 0:e.salaryType.length)>0?null===e||void 0===e?void 0:e.salaryType[(null===e||void 0===e||null===(n=e.salaryType)||void 0===n?void 0:n.length)-1]:"")})]}),(0,i.jsx)("td",{className:"border px-2 py-1",rowSpan:"2",children:e.jobcode}),Array.from({length:t},((t,a)=>{var n;const r=new Date(h);r.setDate(h.getDate()+a);const s="".concat(r.getDate(),"-").concat(r.getMonth()+1,"-").concat(r.getFullYear());return(0,i.jsxs)("td",{className:"border px-2 py-1 border-dark_grey cursor-pointer",onClick:()=>{var t,a;m();const n={empName:null===e||void 0===e?void 0:e.name,sapNo:e.sapNo,empBadgeNo:null===e||void 0===e?void 0:e.empBadgeNo,location:null===e||void 0===e?void 0:e.location,jobcode:e.jobcode,workingHrs:null===e||void 0===e||null===(t=e.workingHrs)||void 0===t?void 0:t[s],ot:null===e||void 0===e||null===(a=e.OVERTIMEHRS)||void 0===a?void 0:a[s],workHrs:e.workHrs&&e.workHrs.length>0?e.workHrs:"",workMonth:e.workMonth&&e.workMonth.length>0?e.workMonth:"",workingHrsKey:s};console.log(n),u(n)},children:[(null===e||void 0===e||null===(n=e.workingHrs)||void 0===n?void 0:n[s])||""," "]},s)})),(0,i.jsx)("td",{className:"border px-2 py-1",rowSpan:"2",children:A}),(0,i.jsx)("td",{className:"border px-2 py-1",rowSpan:"2",children:E}),(0,i.jsx)("td",{className:"border px-2 py-1",rowSpan:"2",children:(null===e||void 0===e||null===(s=e.hollydayCounts)||void 0===s?void 0:s.PH)||0}),(0,i.jsx)("td",{className:"border px-2 py-1",rowSpan:"2",children:(null===e||void 0===e||null===(l=e.hollydayCounts)||void 0===l?void 0:l.PHD)||0}),(0,i.jsx)("td",{className:"border px-2 py-1",rowSpan:"2",children:"".concat((null===e||void 0===e||null===(o=e.empLeaveCount)||void 0===o?void 0:o.AL)||0," /\n                               ").concat((null===e||void 0===e||null===(d=e.empLeaveCount)||void 0===d?void 0:d.CL)||0," ")}),(0,i.jsx)("td",{className:"border px-2 py-1",rowSpan:"2",children:(null===(c=e.empLeaveCount)||void 0===c?void 0:c.SL)||0}),(0,i.jsx)("td",{className:"border px-2 py-1",rowSpan:"2",children:(null===e||void 0===e||null===(p=e.hollydayCounts)||void 0===p?void 0:p.OFF)||0}),(0,i.jsx)("td",{className:"border px-2 py-1",rowSpan:"2",children:(null===e||void 0===e||null===(x=e.hollydayCounts)||void 0===x?void 0:x.A)||0}),(0,i.jsx)("td",{className:"border px-2 py-1",rowSpan:"2",children:(null===e||void 0===e||null===(g=e.empLeaveCount)||void 0===g?void 0:g.UAL)||0}),(0,i.jsx)("td",{className:"border px-2 py-1",rowSpan:"2",children:D||0}),(0,i.jsx)("td",{className:"border px-2 py-1",rowSpan:"2",children:"yes"}),(0,i.jsx)("td",{className:"border px-2 py-1",rowSpan:"2",children:null===e||void 0===e?void 0:e.timeKeeper})]}),(0,i.jsx)("tr",{children:Array.from({length:t},((t,a)=>{var n;const r=new Date(h);r.setDate(h.getDate()+a);const s="".concat(r.getDate(),"-").concat(r.getMonth()+1,"-").concat(r.getFullYear());return(0,i.jsxs)("td",{className:"border px-2 py-1 border-dark_grey",children:[(null===e||void 0===e||null===(n=e.OVERTIMEHRS)||void 0===n?void 0:n[s])||"0"," "]},s)}))}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"border px-2 py-1",colSpan:1,children:" "}),Array.from({length:t+1},((e,t)=>{const a=t+1;return(0,i.jsx)("td",{className:"".concat(0===t?"border":"border-b"," text-center py-1"),children:(0,i.jsx)("input",{className:"".concat(0===t&&"hidden"," py-10"),type:"checkbox",onChange:()=>{}})},a)})),(0,i.jsx)("td",{className:"border px-2 py-1",children:""}),(0,i.jsx)("td",{className:"border px-2 py-1",children:""}),(0,i.jsx)("td",{className:"border px-2 py-1",children:""}),(0,i.jsx)("td",{className:"border px-2 py-1",children:""}),(0,i.jsx)("td",{className:"border px-2 py-1",children:""}),(0,i.jsx)("td",{className:"border px-2 py-1",children:""}),(0,i.jsx)("td",{className:"border px-2 py-1",children:""}),(0,i.jsx)("td",{className:"border px-2 py-1",children:""}),(0,i.jsx)("td",{className:"border px-2 py-1",children:""}),(0,i.jsx)("td",{className:"border px-2 py-1",children:""}),(0,i.jsx)("td",{className:"border px-2 py-1"}),(0,i.jsx)("td",{className:"border px-2 py-1"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"border px-2 py-1",colSpan:1,children:"Total"}),Array.from({length:t+1},((e,t)=>{const a=t+1;return(0,i.jsx)("td",{className:"".concat(0===t?"border":"border-b")},a)})),(0,i.jsx)("td",{className:"border px-2 py-1",children:A}),(0,i.jsx)("td",{className:"border px-2 py-1",children:E}),(0,i.jsx)("td",{className:"border px-2 py-1",children:(null===e||void 0===e||null===(f=e.hollydayCounts)||void 0===f?void 0:f.PH)||0}),(0,i.jsx)("td",{className:"border px-2 py-1",children:(null===e||void 0===e||null===(v=e.hollydayCounts)||void 0===v?void 0:v.PHD)||0}),(0,i.jsx)("td",{className:"border px-2 py-1",children:"".concat(e.empLeaveCount.AL||0," /\n                               ").concat(e.empLeaveCount.CL||0)}),(0,i.jsx)("td",{className:"border px-2 py-1",children:(null===(y=e.empLeaveCount)||void 0===y?void 0:y.SL)||0}),(0,i.jsx)("td",{className:"border px-2 py-1",children:(null===e||void 0===e||null===(b=e.hollydayCounts)||void 0===b?void 0:b.OFF)||0}),(0,i.jsx)("td",{className:"border px-2 py-1",children:(null===e||void 0===e||null===(N=e.hollydayCounts)||void 0===N?void 0:N.A)||0}),(0,i.jsx)("td",{className:"border px-2 py-1",children:(null===e||void 0===e||null===(j=e.empLeaveCount)||void 0===j?void 0:j.UAL)||0}),(0,i.jsx)("td",{className:"border px-2 py-1",children:D}),(0,i.jsx)("td",{className:"border px-2 py-1"}),(0,i.jsx)("td",{className:"border px-2 py-1"})]})]},a)})):(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"50",className:"px-6 py-3 text-center text-dark_ash text_size_5",children:(0,i.jsx)("p",{className:"px-6 py-6",children:!g||!f&&!1===d?"Your table is currently empty. Set a date range to view employee records.":g&&f&&!x&&!1===d?"Please choose a location to filter records within the selected date range.":g&&f&&x&&!0===d?"Processing your request... This may take a moment.":!0===c?"No records available. Try selecting different dates or locations.":"Processing your request... This may take a moment."})})})})]})}),(0,i.jsx)("footer",{className:"flex justify-center py-10 space-x-10",children:(0,i.jsx)("button",{className:" rounded text_size_5 text-dark_grey bg-primary px-3 py-2 w-[180px]",onClick:()=>{Ri("downloadTable")},children:"Download"})})]})})},Pi=()=>{const[e,t]=(0,r.useState)(null),[a,n]=(0,r.useState)(null),[s,l]=(0,r.useState)(null),[o,d]=(0,r.useState)(null),{startDate:c,endDate:p,selectedLocation:m,getStartDate:u,setGetStartDate:h,getEndDate:g,setGetEndDate:f}=ht();console.log(c,p,m);const v=async e=>{t(e),n(e)},{convertedStringToArrayObj:y,loading:b,emptyTableMess:N,setEmptyTableMess:j,setLoading:D}=Ni(c,p,m,v);(0,r.useEffect)((()=>{c&&(h(new Date(c.replace(/-/g,"/"))),j(!1)),p&&(f(new Date(p.replace(/-/g,"/"))),j(!1))}),[c,p]);const w=(0,r.useCallback)((e=>{e&&t(e)}),[]),A=(0,r.useCallback)((()=>{j(!1),D(!1)}),[]),S=()=>{l(!s)},E=Math.ceil((g-u)/864e5)+1;return(0,i.jsxs)("div",{children:[(0,i.jsx)(Ai,{convertedStringToArrayObj:y,ProcessedDataFunc:v,dummyHolidayList:fi,dummyLeaveStatus:gi,dayCounts:E}),(0,i.jsx)(Ti,{dayCounts:E,data:e,LocationData:hi,secondaryData:a,searchResult:w,loading:b,emptyTableMess:N,resetTableFunc:A,toggleEditViewSummaryFunc:S,editViewSummaryObject:e=>{e&&d(e)}}),s&&(0,i.jsx)(Si,{toggleEditViewSummaryFunc:S,summaryObject:o,FinalEditedData:a=>{bi(a);const{badgeNo:r,jobcode:s,location:i,workingHrsKey:l,workingHrs:o,overtimeHrs:d}=a,c=e.map((e=>e.empBadgeNo===r&&e.jobcode===s&&e.location===i&&e.workingHrs.hasOwnProperty(l)?(0,x.A)((0,x.A)({},e),{},{workingHrs:(0,x.A)((0,x.A)({},e.workingHrs),{},{[l]:o}),OVERTIMEHRS:(0,x.A)((0,x.A)({},e.OVERTIMEHRS),{},{[l]:d})}):e));t(c),n(c)}})]})},_i=()=>{const[e,t]=(0,r.useState)([]),[a,s]=(0,r.useState)("insurance"),[l,o]=(0,r.useState)([]),d=(0,n.Zp)(),c=(0,n.zy)();(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]);const p=(e,t)=>{s(e),d(t)};return(0,r.useEffect)((()=>{const e=c.pathname;s("/insuranceHr"===e?"insurance":"/insuranceHr/groupHS"===e?"groupHS":"/insuranceHr/workmenComp"===e?"workmenComp":"/insuranceHr/travelling"===e?"travelling":"/insuranceHr/personalAcci"===e?"personalAcci":"/insuranceHr/insuranceClaim"===e?"insuranceClaim":"insurance")}),[c]),(0,i.jsx)("section",{className:"w-full bg-[#F5F6F1]",children:(0,i.jsxs)("div",{className:"relative mx-auto p-5 h-full",children:[(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)("p",{className:"flex-1 text-center mt-2 text_size_2 uppercase",children:"Insurance Info"})}),(0,i.jsxs)("div",{className:"flex justify-between border-b m-4 text-[16px] font-semibold",children:[(0,i.jsx)("button",{className:"py-2 px-4 focus:outline-none ".concat("insurance"===a?"border-b-8 border-yellow":""),onClick:()=>p("insurance","/insuranceHr"),children:"Insurance Type"}),(0,i.jsx)("button",{className:"py-2 px-4 focus:outline-none ".concat("groupHS"===a?"border-b-8 border-yellow":""),onClick:()=>p("groupHS","/insuranceHr/groupHS"),children:"GroupH&S"}),(0,i.jsx)("button",{className:"py-2 px-4 focus:outline-none ".concat("workmenComp"===a?"border-b-8 border-yellow":""),onClick:()=>p("workmenComp","/insuranceHr/workmenComp"),children:"Workmen Compensation"}),(0,i.jsx)("button",{className:"py-2 px-4 focus:outline-none ".concat("travelling"===a?"border-b-8 border-yellow":""),onClick:()=>p("travelling","/insuranceHr/travelling"),children:"Travelling"}),(0,i.jsx)("button",{className:"py-2 px-4 focus:outline-none ".concat("personalAcci"===a?"border-b-8 border-yellow":""),onClick:()=>p("personalAcci","/insuranceHr/personalAcci"),children:"Personal Accident"}),(0,i.jsx)("button",{className:"py-2 px-4 focus:outline-none ".concat("insuranceClaim"===a?"border-b-8 border-yellow":""),onClick:()=>p("insuranceClaim","/insuranceHr/insuranceClaim"),children:"Insurance Claim"})]}),(0,i.jsx)("div",{children:(0,i.jsx)(n.sv,{context:{activeNavTab:a,handleNext:()=>{switch(a){case"insurance":d("/insuranceHr"),s("insurance");break;case"groupHS":d("/insuranceHr/groupHS"),s("groupHS");break;case"workmenComp":d("/insuranceHr/workmenComp"),s("workmenComp");break;case"travelling":d("/insuranceHr/travelling"),s("travelling");break;case"personalAcci":d("/insuranceHr/personalAcci"),s("personalAcci");break;case"insuranceClaim":d("/insuranceHr/insuranceClaim"),s("insuranceClaim")}},searchResultData:l}})})]})})},Oi=e=>{let{register:t,errors:a,index:n}=e;return(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-5 flex-wrap",children:[(0,i.jsx)(ut,{label:"Clainmant Name",register:t,name:"insuranceClaims[".concat(n,"].claimantName"),type:"text",errors:a}),(0,i.jsx)(ut,{label:"Date Reported to Insurance Company",register:t,name:"insuranceClaims[".concat(n,"].dateReported"),type:"date",errors:a}),(0,i.jsx)(ut,{label:"Date of Payment Received ",register:t,name:"insuranceClaims[".concat(n,"].paymentReceived"),type:"date",errors:a}),(0,i.jsx)(ut,{label:"Date Paid to Employee ",register:t,name:"insuranceClaims[".concat(n,"].datePaid"),type:"date",errors:a})]})},Li=()=>{var e;(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]);const{insuranceClaimsData:t,empPIData:a,dropDownVal:n}=(0,r.useContext)(s.Y),[l,o]=(0,r.useState)([]),{SubmitICData:d}=(()=>{const e=(0,ge.D)();return{SubmitICData:(0,r.useCallback)((async t=>{let{ICValuse:a}=t;if(!a)throw new Error("Missing required parameters");const n={empID:a.empID,insuranceClaims:JSON.stringify(a.insuranceClaims)};console.log(n);try{const t=await Promise.all([e.graphql({query:"\n  mutation CreateInsClaim(\n    $input: CreateInsClaimInput!\n    $condition: ModelInsClaimConditionInput\n  ) {\n    createInsClaim(input: $input, condition: $condition) {\n      id\n      empID\n      insuranceClaims\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:n}})]);console.log(t,"successfully stored data")}catch(r){throw console.error("Error executing GraphQL requests:",r),r}}),[])}})(),{InsClaimUpData:c}=(()=>{const e=(0,ge.D)();return{InsClaimUpData:(0,r.useCallback)((async t=>{let{ICValuse:a}=t;if(!a)throw new Error("Missing required parameters");const n={empID:a.empID,insuranceClaims:JSON.stringify(a.insuranceClaims),id:a.id};console.log(n,"updated");try{const t=await Promise.all([e.graphql({query:"\n  mutation UpdateInsClaim(\n    $input: UpdateInsClaimInput!\n    $condition: ModelInsClaimConditionInput\n  ) {\n    updateInsClaim(input: $input, condition: $condition) {\n      id\n      empID\n      insuranceClaims\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:n,limit:2e4}})]);console.log(t,"successfully Updated data")}catch(r){throw console.error("Error executing GraphQL requests:",r),r}}),[])}})(),[p,m]=(0,r.useState)(!1),[u,h]=(0,r.useState)([]),[g,f]=(0,r.useState)(""),{register:v,handleSubmit:b,formState:{errors:N},setValue:j,watch:D}=(0,it.mN)({resolver:(0,lt.t)(On),defaultValues:{insuranceClaims:[{}]}}),[w,A]=(0,r.useState)([{id:Date.now()}]),[S,E]=(0,r.useState)({}),[I,C]=(0,r.useState)({insuranceClaims:[]}),[k,R]=(0,r.useState)(w),[T,P]=(0,r.useState)(""),_=(0,r.useRef)(!0),O=null===(e=n[0])||void 0===e?void 0:e.insuClaimDD.map((e=>({value:e,label:e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")})));(0,r.useEffect)((()=>{(async()=>{try{const e=a.map((e=>{const a=t?t.find((t=>t.empID===e.empID)):{};return(0,x.A)((0,x.A)({},e),a)})).filter(Boolean);h(e)}catch(e){console.error("Error fetching data:",e)}})()}),[a,t]);const L=D("empID"),F=e=>e.split("/").pop().split(".").slice(0,-1).join(".");return(0,i.jsxs)("div",{className:"bg-[#F5F6F1CC] mx-auto p-2 py-10",onClick:()=>{o([])},children:[(0,i.jsx)("div",{className:"flex ",children:(0,i.jsx)(Wn,{searchResult:e=>{console.log(e,"result"),j("empID",null===e||void 0===e?void 0:e.empID);const t=null===e||void 0===e?void 0:e.insuranceClaims;if(console.log(t),t)try{const e=JSON.parse(t);_.current?(e&&e.length>0&&(R(e),j("insuranceClaims",e),e.forEach(((e,t)=>{if(null!==e&&void 0!==e&&e.claimUpload){const a=e.claimUpload,n=JSON.parse(a).map((e=>"string"===typeof e?JSON.parse(e):e));C((e=>{const a=[...e.insuranceClaims];return a[t]=n,(0,x.A)((0,x.A)({},e),{},{insuranceClaims:a})})),E((e=>(0,x.A)((0,x.A)({},e),{},{[t]:n.length>0?F(n[n.length-1].upload):""})))}}))),_.current=!1):e&&e.length>0&&(R(e),j("insuranceClaims",e))}catch(a){console.error("Error parsing insuranceClaims data:",a)}},newFormData:u,searchIcon2:(0,i.jsx)(y.zfp,{}),placeholder:"Employee Id",rounded:"rounded-lg",filteredEmployees:l,setFilteredEmployees:o})}),(0,i.jsxs)("form",{className:"flex flex-col gap-5",onSubmit:b((async e=>{try{const a=t.find((t=>t.empID===e.empID));if(a){const t=(0,x.A)((0,x.A)({},e),{},{insuranceClaims:e.insuranceClaims.map(((e,t)=>(0,x.A)((0,x.A)({},e),{},{claimUpload:JSON.stringify(I.insuranceClaims[t])||[]}))),id:a.id});await c({ICValuse:t}),P("Dependent Insurance Info Updated successfully"),m(!0)}else{const t=(0,x.A)((0,x.A)({},e),{},{insuranceClaims:e.insuranceClaims.map(((e,t)=>(0,x.A)((0,x.A)({},e),{},{claimUpload:JSON.stringify(I.insuranceClaims[t])||[]})))});await d({ICValuse:t}),P("Insurance claim saved successfully"),m(!0)}}catch(a){console.error("Error submitting data:",a)}})),children:[(0,i.jsx)("div",{className:"flex justify-end items-center",children:(0,i.jsxs)("div",{className:"max-w-sm",children:[(0,i.jsx)("label",{className:"text_size_6",children:"Employee ID"}),(0,i.jsx)("input",(0,x.A)({type:"text",className:"input-field",placeholder:"Enter Employee ID"},v("empID"))),N.empID&&(0,i.jsx)("p",{className:"text-[red] text-[12px]",children:N.empID.message})]})}),(0,i.jsx)("button",{type:"button",onClick:()=>{const e={id:Date.now()};R((t=>[...t,e]))},className:"absolute  right-3 mt-28 text-medium_grey text-[25px]",children:(0,i.jsx)(br.tN3,{className:"mr-1"})}),k&&k.length>0&&k.map(((e,t)=>{var a,n,r;return(0,i.jsxs)("div",{className:"flex flex-col gap-5 border-b py-10",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[(0,i.jsx)(ut,{label:"Type of Insurance Claim",register:v,name:"insuranceClaims[".concat(t,"].claimType"),type:"select",options:O,errors:null===(a=N.insuranceClaims)||void 0===a?void 0:a[t]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"mb-1 text_size_6",children:"Insurance Claim For"}),(0,i.jsxs)("select",(0,x.A)((0,x.A)({},v("insuranceClaims[".concat(t,"].claimInfo"))),{},{className:"input-field select-custom",children:[(0,i.jsx)("option",{value:""}),(0,i.jsx)("option",{value:"Employee",children:"Employee"}),(0,i.jsx)("option",{value:"Spouse",children:"Spouse"}),(0,i.jsx)("option",{value:"Child",children:"Child"})]})),(null===(n=N.insuranceClaims)||void 0===n||null===(r=n[t])||void 0===r?void 0:r.depenInfo)&&(0,i.jsx)("p",{className:"text-[red] text-xs mt-1",children:N.insuranceClaims[t].depenInfo.message})]})]}),(0,i.jsx)(Oi,{register:v,errors:N,index:t}),(0,i.jsx)("div",{className:"grid grid-cols-3 gap-10",children:(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"flex items-center px-3 py-3 text_size_7 p-2.5 bg-lite_skyBlue border border-[#dedddd] rounded-md cursor-pointer",children:["Upload",(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"file"},v("insuranceClaims[".concat(t,"].claimUpload"))),{},{onChange:e=>(async(e,t,a)=>{if(!L)return alert("Please enter the Employee ID before uploading files."),void(window.location.href="/insuranceAdd/dependentInsurance");const n=e.target.files[0];if(!n)return;if(["application/pdf"].includes(n.type)){j("insuranceClaims[".concat(a,"].claimUpload"),n);try{await pt(n,t,C,L,a),E((e=>(0,x.A)((0,x.A)({},e),{},{[a]:n.name})))}catch(r){console.log(r)}}else alert("Upload must be a PDF file")})(e,"insuranceClaims",t),accept:"application/pdf",className:"hidden"})),(0,i.jsx)(ft.gwN,{className:"ml-1"})]}),(0,i.jsx)("p",{className:"text-secondary text-xs pt-1",children:S[t]}),(null===N||void 0===N?void 0:N.claimUpload)&&(0,i.jsx)("p",{className:"text-red text-sm",children:N.claimUpload.message})]})}),t>0&&(0,i.jsx)("button",{type:"button",onClick:()=>(e=>{const t=k.filter(((t,a)=>a!==e));R(t),j("insuranceClaims",t)})(t),className:"text-red mt-2  flex justify-end items-end text-[25px]",children:(0,i.jsx)(br.prK,{})})]},t)})),(0,i.jsx)("div",{className:"md:col-span-2 flex justify-center mt-10",children:(0,i.jsx)("button",{type:"submit",className:"primary_btn",children:"Save"})}),p&&(0,i.jsx)(Le,{text:T,notification:p,path:"/insuranceHr/insuranceClaim"})]})]})};var Fi=a(6897);Ke.EA.workerSrc=new URL(a(1886),a.b).toString();const Mi=()=>{const e=(0,ge.D)(),[t,a]=(0,r.useState)({groupHSUpload:null}),[n,s]=(0,r.useState)({groupHSUpload:[]}),[l,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)([]),[p,m]=(0,r.useState)(!0),[u,g]=(0,r.useState)(!1),[f,v]=(0,r.useState)(""),[y,b]=(0,r.useState)(null),[N,j]=(0,r.useState)(1),[D,w]=(0,r.useState)(null),[A,S]=(0,r.useState)(""),{register:E,handleSubmit:I,setValue:C,watch:k,formState:{errors:R,setError:T}}=(0,it.mN)({resolver:(0,lt.t)(Rn)}),P=e=>{const t=new Date(e),a=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getFullYear();return"".concat(a,"/").concat(n,"/").concat(r)},_=(0,r.useRef)(),O=(0,dn.useReactToPrint)({content:()=>_.current,onBeforePrint:()=>console.log("Preparing to print PDF..."),onAfterPrint:()=>console.log("Print complete"),pageStyle:"\n        @page {\n            /* Adjust the margin as necessary */\n          height:  714px;\n          padding: 22px, 0px, 22px, 0px;     \n        }\n      "}),L=()=>{b(null)},F=e=>(0,i.jsx)(i.Fragment,{children:e.map(((e,t)=>(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4 border border-gray-200",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("span",{className:"uppercase font-semibold text-sm",children:["Uploaded on: ",P(e.date)]}),(0,i.jsx)("button",{onClick:()=>(async e=>{try{const t=await(0,h.I)({path:e});S(t.url.href),b(e)}catch(t){console.error("Error fetching the file URL:",t)}})(e.upload),className:"text-dark_grey font-semibold text-sm",children:"View Document"})]}),y===e.upload&&e.upload.endsWith(".pdf")&&(0,i.jsx)("div",{className:"py-6 fixed inset-0 bg-grey bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"relative bg-white rounded-lg shadow-lg w-[40vw] max-h-full flex flex-col",children:[(0,i.jsx)("div",{ref:_,className:"flex-grow overflow-y-auto",children:(0,i.jsx)(Qe.Worker,{workerUrl:"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js",children:(0,i.jsx)(Qe.Viewer,{fileUrl:A||""})})}),(0,i.jsx)("div",{className:"absolute top-2 right-2",children:(0,i.jsx)("button",{onClick:L,className:"bg-red-600 text-black px-3 py-1 rounded-full text-sm hover:bg-red-800",children:(0,i.jsx)(Lt.QCr,{})})}),(0,i.jsxs)("div",{className:"flex items-center justify-center gap-6 py-4",children:[(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:[(0,i.jsx)("a",{href:A,download:!0,children:"Download"}),(0,i.jsx)(Lt.WCW,{className:"ml-2 mt-1"})]})}),(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{onClick:O,className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:["Print",(0,i.jsx)(Lt.n4o,{className:"ml-2 mt-1"})]})})]})]})}),y===e.upload&&!e.upload.endsWith(".pdf")&&(0,i.jsxs)("div",{className:"relative mt-4",children:[(0,i.jsx)("div",{children:(0,i.jsx)("img",{src:A,alt:"Document Preview",className:"w-full h-auto"})}),(0,i.jsx)("div",{className:"absolute top-2 right-2",children:(0,i.jsx)("button",{onClick:()=>b(null),className:"bg-red-600 text-black px-3 py-1 rounded-full text-sm hover:bg-red-800",children:(0,i.jsx)(Lt.QCr,{})})}),(0,i.jsxs)("div",{className:"flex items-center justify-center gap-6 py-4",children:[(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:[(0,i.jsx)("a",{href:A,download:!0,children:"Download"}),(0,i.jsx)(Lt.WCW,{className:"ml-2 mt-1"})]})}),(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{onClick:O,className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:["Print",(0,i.jsx)(Lt.n4o,{className:"ml-2 mt-1"})]})})]})]})]},t)))}),M=(e,t)=>{const a=e.length>0?(e=>{try{const t=JSON.parse(e);return Array.isArray(t)?t.map((e=>(e.upload&&(e.fileName=e.upload.split("/").pop()),e))):[]}catch(t){return console.error("Error parsing document data:",t),[]}})(e[0]):[],n=Array.isArray(a)&&a.length>0;return(0,i.jsxs)("div",{className:"py-4 ",children:[(0,i.jsx)("h6",{className:"uppercase text_size_5 my-3",children:t}),n?F(a):(0,i.jsx)("p",{className:"text-dark_grey font-semibold text-sm",children:"No documents and images available"})]})};return(0,r.useEffect)((()=>{(async()=>{try{const t=await e.graphql({query:fe.CT}),a=t.data.listGroupHandS.items.filter((e=>new Date(e.groupHSExp)>=new Date));c(a),m(!1)}catch(t){console.error("Error fetching insurance data:",t),T("insuranceData",{message:"Error fetching data"}),m(!1)}})()}),[]),(0,i.jsxs)("section",{children:[(0,i.jsxs)("form",{onSubmit:I((async t=>{try{const a=(0,x.A)((0,x.A)({},t),{},{groupHSUpload:JSON.stringify(n.groupHSUpload)});await e.graphql({query:"\n  mutation CreateGroupHandS(\n    $input: CreateGroupHandSInput!\n    $condition: ModelGroupHandSConditionInput\n  ) {\n    createGroupHandS(input: $input, condition: $condition) {\n      id\n      groupHSExp\n      groupHSNo\n      groupHSUpload\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:a}});o(!0)}catch(a){console.error("Error submitting data:",a)}})),className:"mx-auto py-5 px-10 my-10 bg-[#F5F6F1CC]",children:[(0,i.jsx)("h3",{className:"mb-5 text-lg font-bold",children:"Group H&S Insurance"}),(0,i.jsx)("div",{className:"relative mb-5",children:(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4 items-center",children:[(0,i.jsx)(ut,{name:"groupHSNo",type:"text",placeholder:"Enter H&S Policy Number",label:"Policy Number",register:E,errors:R}),(0,i.jsx)(ut,{name:"groupHSExp",type:"date",label:"Expiry Date",register:E,errors:R}),(0,i.jsxs)("div",{className:"mb-2 relative",children:[(0,i.jsx)(Da,{label:"Upload File",onChangeFunc:e=>(async(e,t)=>{const n=e.target.files[0];if(!n)return;if(!["application/pdf"].includes(n.type))return void alert("Upload must be a PDF file ");const r=k(t)||[];C(t,[...r,n]);try{await pt(n,t,s),a((e=>(0,x.A)((0,x.A)({},e),{},{[t]:n.name})))}catch(i){console.log(i)}})(e,"groupHSUpload"),register:E,name:"groupHSUpload",error:R}),(0,i.jsx)("div",{className:"absolute",children:t.groupHSUpload&&(0,i.jsx)("span",{className:"text-sm text-grey ",children:t.groupHSUpload})})]})]})}),(0,i.jsx)("div",{className:"center my-10",children:(0,i.jsx)("button",{type:"submit",className:"primary_btn",children:"Save"})})]}),l&&(0,i.jsx)(Le,{text:"Group H&S Saved Successfully",notification:l,path:"/insuranceHr/groupHS"}),(0,i.jsxs)("div",{className:"mt-10",children:[(0,i.jsx)("p",{className:"text-xl font-bold mb-10 p-3 rounded-lg border-2 border-[#FEF116] bg-[#FFFEF4] w-[250px]",children:"View Insurance Info"}),p?(0,i.jsx)("p",{children:"Loading..."}):d.length>0?(0,i.jsx)("div",{className:" h-[400px] overflow-y-auto scrollBar",children:(0,i.jsxs)("table",{className:"w-full text-center ",children:[(0,i.jsx)("thead",{className:"bg-[#939393] text-white ",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"pl-4 py-4 rounded-tl-lg",children:"Policy Number"}),(0,i.jsx)("th",{className:"pl-4 py-4",children:"Expiry Date"}),(0,i.jsx)("th",{className:"pl-4 py-4 rounded-tr-lg",children:"Uploaded File"})]})}),(0,i.jsx)("tbody",{className:"bg-white cursor-pointer  ",children:d.map(((e,t)=>(0,i.jsxs)("tr",{className:"shadow-[0_3px_6px_1px_rgba(0,0,0,0.2)] hover:bg-medium_blue ",children:[(0,i.jsx)("td",{className:"pl-4 py-4",children:e.groupHSNo}),(0,i.jsx)("td",{className:"py-4 px-4",children:P((null===e||void 0===e?void 0:e.groupHSExp)||"N/A")}),(0,i.jsx)("td",{className:"pl-4 py-4",children:M(e.groupHSUpload,"PDF File")})]},t)))})]})}):(0,i.jsx)("p",{className:"text-center mt-10",children:"No insurance information available."})]}),u&&(0,i.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4 border border-gray-200",children:[(0,i.jsx)("button",{onClick:()=>g(!1),className:"absolute top-2 right-2",children:(0,i.jsx)(Lt.QCr,{size:20})}),f.endsWith(".pdf")?(0,i.jsxs)(Qe.Worker,{workerUrl:"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js",file:f,onLoadSuccess:e=>{let{numPages:t}=e;w(t)},children:[(0,i.jsx)(Fi.A,{pageNumber:N}),(0,i.jsxs)("div",{className:"text-center mt-2",children:[(0,i.jsx)("button",{onClick:()=>j((e=>Math.max(e-1,1))),disabled:N<=1,children:"Previous"}),(0,i.jsxs)("span",{children:[N," / ",D]}),(0,i.jsx)("button",{onClick:()=>j((e=>Math.min(e+1,D))),disabled:N>=D,children:"Next"})]})]}):(0,i.jsx)("img",{src:f,alt:"popup view",className:"w-full h-auto"})]})})]})};var qi=a(6749);Ke.EA.workerSrc=new URL(a(1886),a.b).toString();const Ui=()=>{const e=(0,ge.D)(),[t,a]=(0,r.useState)(!1),[n,s]=(0,r.useState)([]),[l,o]=(0,r.useState)(!0),[d,c]=(0,r.useState)(null),[p,m]=(0,r.useState)({workmenComUp:null}),[u,g]=(0,r.useState)({workmenComUp:[]}),[f,v]=(0,r.useState)(!1),[y,b]=(0,r.useState)(""),[N,j]=(0,r.useState)(null),[D,w]=(0,r.useState)(1),[A,S]=(0,r.useState)(null),[E,I]=(0,r.useState)(""),[C,k]=(0,r.useState)(""),[R,T]=(0,r.useState)(""),P=(0,r.useRef)(),{register:_,handleSubmit:O,watch:L,setValue:F,formState:{errors:M}}=(0,it.mN)({resolver:(0,lt.t)(Tn)}),q=e=>{const t=new Date(e),a=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getFullYear();return"".concat(a,"/").concat(n,"/").concat(r)};(0,r.useEffect)((()=>{(async()=>{try{const t=await e.graphql({query:fe.WQ}),a=t.data.listWorkMen.items.filter((e=>new Date(e.workmenCompExp)>=new Date));s(a),o(!1)}catch(d){console.error("Error fetching insurance data:",d),c("insuranceData",{message:"Error fetching data"}),o(!1)}})()}),[]);const U=async e=>{let{numPages:t,document:a}=e,n=0,r=0;for(let i=1;i<=t;i++){const e=(await a.getPage(i)).getViewport({scale:1});n+=e.width,r+=e.height}const s=r/t;T(n/t),k(s)};console.log("h"),console.log("hello");const B=async()=>{const e=E,t=window.open("","","height=600,width=800");t.document.write("<html><head><title>Print PDF</title>"),t.document.write("\n      <style>\n        body {\n         \n          color: black; /* Ensure black text is printed */\n        }\n        canvas {\n          margin: 10px 0;\n          box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n          image-rendering: -webkit-optimize-contrast; /* Improve rendering of colors */\n           font-family: 'Arial', sans-serif; /* Font style */\n        }\n      </style>\n    "),t.document.write("</head><body>");const a=document.createElement("div");a.id="container",t.document.body.appendChild(a);try{const n=await qi.getDocument(e).promise;for(let e=1;e<=n.numPages;e++){const t=await n.getPage(e),r=t.getViewport({scale:1.5}),s=document.createElement("canvas"),i=s.getContext("2d");s.width=r.width,s.height=r.height,a.appendChild(s);const l={canvasContext:i,viewport:r};await t.render(l).promise}t.document.write("</body></html>"),t.document.close(),t.print()}catch(d){console.error("Error printing PDF:",d)}},H=C;(0,r.useEffect)((()=>{H&&console.log("Ready to print, PDF dimensions are set.")}),[H]);const W=()=>{j(null)};console.log(C);const Y=e=>(0,i.jsx)(i.Fragment,{children:e.map(((e,t)=>(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4 border border-gray-200",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("span",{className:"uppercase font-semibold text-sm",children:["Uploaded on: ",q(e.date)]}),(0,i.jsx)("button",{onClick:()=>(async e=>{try{const t=await(0,h.I)({path:e});I(t.url.href),j(e)}catch(d){console.error("Error fetching the file URL:",d)}})(e.upload),className:"text-dark_grey font-semibold text-sm",children:"View Document"})]}),N===e.upload&&e.upload.endsWith(".pdf")&&(0,i.jsx)("div",{className:"py-6 fixed inset-0 bg-grey bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"relative bg-white rounded-lg shadow-lg w-[40vw] max-h-full flex flex-col",children:[(0,i.jsx)("div",{className:"flex-grow overflow-y-auto",children:(0,i.jsx)("div",{ref:P,children:(0,i.jsx)(Qe.Worker,{workerUrl:"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js",children:(0,i.jsx)(Qe.Viewer,{fileUrl:E||"",onLoadSuccess:U})})})}),(0,i.jsx)("div",{className:"absolute top-2 right-2",children:(0,i.jsx)("button",{onClick:W,className:"bg-red-600 text-black px-3 py-1 rounded-full text-sm hover:bg-red-800",children:(0,i.jsx)(Lt.QCr,{})})}),(0,i.jsxs)("div",{className:"flex items-center justify-center gap-6 py-4",children:[(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:[(0,i.jsx)("a",{href:E,download:!0,children:"Download"}),(0,i.jsx)(Lt.WCW,{className:"ml-2 mt-1"})]})}),(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{onClick:B,className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:["Print",(0,i.jsx)(Lt.n4o,{className:"ml-2 mt-1"})]})})]})]})}),N===e.upload&&!e.upload.endsWith(".pdf")&&(0,i.jsxs)("div",{className:"relative mt-4",children:[(0,i.jsx)("div",{children:(0,i.jsx)("img",{src:E,alt:"Document Preview",className:"w-full h-auto"})}),(0,i.jsx)("div",{className:"absolute top-2 right-2",children:(0,i.jsx)("button",{onClick:()=>j(null),className:"bg-red-600 text-black px-3 py-1 rounded-full text-sm hover:bg-red-800",children:(0,i.jsx)(Lt.QCr,{})})}),(0,i.jsxs)("div",{className:"flex items-center justify-center gap-6 py-4",children:[(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:[(0,i.jsx)("a",{href:E,download:!0,children:"Download"}),(0,i.jsx)(Lt.WCW,{className:"ml-2 mt-1"})]})}),(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{onClick:B,className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:["Print",(0,i.jsx)(Lt.n4o,{className:"ml-2 mt-1"})]})})]})]})]},t)))}),V=(e,t)=>{const a=e.length>0?(e=>{try{const t=JSON.parse(e);return Array.isArray(t)?t.map((e=>(e.upload&&(e.fileName=e.upload.split("/").pop()),e))):[]}catch(d){return console.error("Error parsing document data:",d),[]}})(e[0]):[],n=Array.isArray(a)&&a.length>0;return(0,i.jsxs)("div",{className:"py-4",children:[(0,i.jsx)("h6",{className:"uppercase text_size_5 my-3",children:t}),n?Y(a):(0,i.jsx)("p",{className:"text-dark_grey font-semibold text-sm",children:"No documents and images available"})]})};return(0,i.jsxs)("section",{children:[(0,i.jsxs)("form",{onSubmit:O((async t=>{try{const n=(0,x.A)((0,x.A)({},t),{},{workmenComUp:JSON.stringify(u.workmenComUp)});await e.graphql({query:"\n  mutation CreateWorkMen(\n    $input: CreateWorkMenInput!\n    $condition: ModelWorkMenConditionInput\n  ) {\n    createWorkMen(input: $input, condition: $condition) {\n      id\n      empStatusType\n      workmenCompExp\n      workmenCompNo\n      workmenComUp\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:n}});a(!0)}catch(d){console.error("Error submitting data:",d)}})),className:"mx-auto py-5 px-10 my-10 bg-[#F5F6F1CC]",children:[(0,i.jsx)("h3",{className:"mb-5 text-lg font-bold",children:"Workmen Compensation Insurance"}),(0,i.jsx)("div",{className:"relative mb-5",children:(0,i.jsxs)("div",{className:"grid grid-cols-4 gap-4 items-center",children:[(0,i.jsx)(ut,{name:"empStatusType",label:"Employee Type",register:_,type:"select",options:[{value:"OffShore",label:"OffShore"},{value:"OnShore",label:"OnShore"},{value:"General",label:"General"}],errors:M}),(0,i.jsx)(ut,{name:"workmenCompNo",label:"Policy Number",type:"text",placeholder:"Enter Workmen Comp Policy No",register:_,errors:M}),(0,i.jsx)(ut,{name:"workmenCompExp",label:"Expiry Date",type:"date",register:_,errors:M}),(0,i.jsxs)("div",{className:"mb-2 relative",children:[(0,i.jsx)(Da,{label:"Upload File",onChangeFunc:e=>(async(e,t)=>{const a=e.target.files[0];if(!a)return;if(!["application/pdf"].includes(a.type))return void alert("Upload must be a PDF file ");const n=L(t)||[];F(t,[...n,a]);try{await pt(a,t,g),m((e=>(0,x.A)((0,x.A)({},e),{},{[t]:a.name})))}catch(r){console.log(r)}})(e,"workmenComUp"),register:_,name:"workmenComUp",error:M}),(0,i.jsx)("div",{className:"absolute",children:p.workmenComUp&&(0,i.jsx)("span",{className:"text-sm text-grey ",children:p.workmenComUp})})]})]})}),(0,i.jsx)("div",{className:"center my-10",children:(0,i.jsx)("button",{type:"submit",className:"primary_btn",children:"Save"})})]}),t&&(0,i.jsx)(Le,{text:"Workmen Compensation Saved Successfully",notification:t,path:"/insuranceHr/workmenComp"}),(0,i.jsxs)("div",{className:"mt-10",children:[(0,i.jsx)("p",{className:"text-xl font-bold mb-10 p-3 rounded-lg border-2 border-[#FEF116] bg-[#FFFEF4] w-[250px]",children:"View Insurance Info"}),n.length>0?(0,i.jsx)("div",{className:" h-[400px] overflow-y-auto scrollBar",children:(0,i.jsxs)("table",{className:"w-full text-center",children:[(0,i.jsx)("thead",{className:"bg-[#939393] text-white",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"pl-4 py-4 rounded-tl-lg",children:"Employee Type"}),(0,i.jsx)("th",{className:"pl-4 py-4",children:"Policy Number"}),(0,i.jsx)("th",{className:"pl-4 py-4",children:"Expiry Date"}),(0,i.jsx)("th",{className:"pl-4 py-4 rounded-tr-lg",children:"Uploaded File"})]})}),(0,i.jsx)("tbody",{className:"bg-white cursor-pointer",children:n.map(((e,t)=>(0,i.jsxs)("tr",{className:"shadow-[0_3px_6px_1px_rgba(0,0,0,0.2)] hover:bg-medium_blue",children:[(0,i.jsx)("td",{className:"pl-4 py-4",children:e.empStatusType}),(0,i.jsx)("td",{className:"pl-4 py-4",children:e.workmenCompNo}),(0,i.jsx)("td",{className:"py-4 px-4",children:q((null===e||void 0===e?void 0:e.workmenCompExp)||"N/A")}),(0,i.jsx)("td",{className:"pl-4 py-4",children:V(e.workmenComUp,"PDF File")})]},t)))})]})}):(0,i.jsx)("p",{className:"text-center mt-10",children:"No insurance information available."})]}),f&&(0,i.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4 border border-gray-200",children:[(0,i.jsx)("button",{onClick:()=>v(!1),className:"absolute top-2 right-2",children:(0,i.jsx)(Lt.QCr,{size:20})}),y.endsWith(".pdf")?(0,i.jsxs)(Qe.Worker,{workerUrl:"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js",file:y,onLoadSuccess:U,children:[(0,i.jsx)(Fi.A,{pageNumber:D}),(0,i.jsxs)("div",{className:"text-center mt-2",children:[(0,i.jsx)("button",{onClick:()=>w((e=>Math.max(e-1,1))),disabled:D<=1,children:"Previous"}),(0,i.jsxs)("span",{children:[D," / ",A]}),(0,i.jsx)("button",{onClick:()=>w((e=>Math.min(e+1,A))),disabled:D>=A,children:"Next"})]})]}):(0,i.jsx)("img",{src:y,alt:"popup view",className:"w-full h-auto"})]})})]})};Ke.EA.workerSrc=new URL(a(1886),a.b).toString();const Bi=()=>{const e=(0,ge.D)(),[t,a]=(0,r.useState)({travelUp:null}),[n,s]=(0,r.useState)({travelUp:[]}),[l,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)([]),[p,m]=(0,r.useState)(!0),[u,g]=(0,r.useState)(null),f=(0,r.useRef)(),[v,y]=(0,r.useState)(!1),[b,N]=(0,r.useState)(""),[j,D]=(0,r.useState)(null),[w,A]=(0,r.useState)(1),[S,E]=(0,r.useState)(null),[I,C]=(0,r.useState)(""),{register:k,handleSubmit:R,watch:T,setValue:P,formState:{errors:_}}=(0,it.mN)({resolver:(0,lt.t)(Pn)}),O=e=>{const t=new Date(e),a=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getFullYear();return"".concat(a,"/").concat(n,"/").concat(r)},L=(0,dn.useReactToPrint)({content:()=>f.current,onBeforePrint:()=>console.log("Preparing to print PDF..."),onAfterPrint:()=>console.log("Print complete"),pageStyle:"\n      @page {\n          /* Adjust the margin as necessary */\n        height:  714px;\n        padding-top: 87px  \n      }\n    "}),F=()=>{D(null)},M=e=>(0,i.jsx)(i.Fragment,{children:e.map(((e,t)=>(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4 border border-gray-200",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("span",{className:"uppercase font-semibold text-sm",children:["Uploaded on: ",O(e.date)]}),(0,i.jsx)("button",{onClick:()=>(async e=>{try{const t=await(0,h.I)({path:e});C(t.url.href),D(e)}catch(u){console.error("Error fetching the file URL:",u)}})(e.upload),className:"text-dark_grey font-semibold text-sm",children:"View Document"})]}),j===e.upload&&e.upload.endsWith(".pdf")&&(0,i.jsx)("div",{className:"py-6 fixed inset-0 bg-grey bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"relative bg-white rounded-lg shadow-lg w-[40vw] max-h-full flex flex-col",children:[(0,i.jsx)("div",{ref:f,className:"flex-grow overflow-y-auto",children:(0,i.jsx)(Qe.Worker,{workerUrl:"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js",children:(0,i.jsx)(Qe.Viewer,{fileUrl:I||""})})}),(0,i.jsx)("div",{className:"absolute top-2 right-2",children:(0,i.jsx)("button",{onClick:F,className:"bg-red-600 text-black px-3 py-1 rounded-full text-sm hover:bg-red-800",children:(0,i.jsx)(Lt.QCr,{})})}),(0,i.jsxs)("div",{className:"flex items-center justify-center gap-6 py-4",children:[(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:[(0,i.jsx)("a",{href:I,download:!0,children:"Download"}),(0,i.jsx)(Lt.WCW,{className:"ml-2 mt-1"})]})}),(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{onClick:L,className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:["Print",(0,i.jsx)(Lt.n4o,{className:"ml-2 mt-1"})]})})]})]})}),j===e.upload&&!e.upload.endsWith(".pdf")&&(0,i.jsxs)("div",{className:"relative mt-4",children:[(0,i.jsx)("div",{children:(0,i.jsx)("img",{src:I,alt:"Document Preview",className:"w-full h-auto"})}),(0,i.jsx)("div",{className:"absolute top-2 right-2",children:(0,i.jsx)("button",{onClick:()=>D(null),className:"bg-red-600 text-black px-3 py-1 rounded-full text-sm hover:bg-red-800",children:(0,i.jsx)(Lt.QCr,{})})}),(0,i.jsxs)("div",{className:"flex items-center justify-center gap-6 py-4",children:[(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:[(0,i.jsx)("a",{href:I,download:!0,children:"Download"}),(0,i.jsx)(Lt.WCW,{className:"ml-2 mt-1"})]})}),(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{onClick:L,className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:["Print",(0,i.jsx)(Lt.n4o,{className:"ml-2 mt-1"})]})})]})]})]},t)))}),q=(e,t)=>{const a=e.length>0?(e=>{try{const t=JSON.parse(e);return Array.isArray(t)?t.map((e=>(e.upload&&(e.fileName=e.upload.split("/").pop()),e))):[]}catch(u){return console.error("Error parsing document data:",u),[]}})(e[0]):[],n=Array.isArray(a)&&a.length>0;return(0,i.jsxs)("div",{className:"py-4",children:[(0,i.jsx)("h6",{className:"uppercase text_size_5 my-3",children:t}),n?M(a):(0,i.jsx)("p",{className:"text-dark_grey font-semibold text-sm",children:"No documents and images available"})]})};return(0,r.useEffect)((()=>{(async()=>{try{const t=await e.graphql({query:fe.wQ}),a=t.data.listTravelIns.items.filter((e=>new Date(e.travelExp)>=new Date));c(a),m(!1)}catch(u){console.error("Error fetching insurance data:",u),g("insuranceData",{message:"Error fetching data"}),m(!1)}})()}),[]),(0,i.jsxs)("section",{children:[(0,i.jsxs)("form",{onSubmit:R((async t=>{try{const a=(0,x.A)((0,x.A)({},t),{},{travelUp:JSON.stringify(n.travelUp)});await e.graphql({query:"\n  mutation CreateTravelIns(\n    $input: CreateTravelInsInput!\n    $condition: ModelTravelInsConditionInput\n  ) {\n    createTravelIns(input: $input, condition: $condition) {\n      id\n      travelExp\n      travelNo\n      travelUp\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:a}});o(!0)}catch(u){console.error("Error submitting data:",u)}})),className:"mx-auto py-5 px-10 my-10 bg-[#F5F6F1CC]",children:[(0,i.jsx)("h3",{className:"mb-5 text-lg font-bold",children:"Travelling Insurance"}),(0,i.jsx)("div",{className:"relative mb-10",children:(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4 items-center",children:[(0,i.jsx)(ut,{name:"travelNo",type:"text",placeholder:"Enter Travelling Policy Number",label:"Policy Number",register:k,errors:_,className:"mt-2 p-[12px] bg-lite_skyBlue border border-[#dedddd] outline-none rounded"}),(0,i.jsx)(ut,{name:"travelExp",type:"date",label:"Expiry Date",register:k,errors:_,className:"mt-2 p-2.5 bg-lite_skyBlue border border-[#dedddd] outline-none rounded"}),(0,i.jsxs)("div",{className:"mb-2 relative",children:[(0,i.jsx)(Da,{label:"Upload File",onChangeFunc:e=>(async(e,t)=>{const n=e.target.files[0];if(!n)return;if(!["application/pdf"].includes(n.type))return void alert("Upload must be a PDF file ");const r=T(t)||[];P(t,[...r,n]);try{await pt(n,t,s),a((e=>(0,x.A)((0,x.A)({},e),{},{[t]:n.name})))}catch(i){console.log(i)}})(e,"travelUp"),register:k,name:"travelUp",error:_}),(0,i.jsx)("div",{className:"absolute",children:t.travelUp&&(0,i.jsx)("span",{className:"text-sm text-grey ",children:t.travelUp})})]})]})}),(0,i.jsx)("div",{className:"center my-10",children:(0,i.jsx)("button",{type:"submit",className:"primary_btn",children:"Save"})})]}),l&&(0,i.jsx)(Le,{text:"Travelling Info Saved Successfully",notification:l,path:"/insuranceHr/travelling"}),(0,i.jsxs)("div",{className:"mt-20",children:[(0,i.jsx)("p",{className:"text-xl font-bold mb-10 p-3 rounded-lg border-2 border-[#FEF116] bg-[#FFFEF4] w-[250px]",children:"View Insurance Info"}),p?(0,i.jsx)("p",{children:"Loading..."}):d.length>0?(0,i.jsx)("div",{className:" h-[400px] overflow-y-auto scrollBar",children:(0,i.jsxs)("table",{className:"w-full text-center",children:[(0,i.jsx)("thead",{className:"bg-[#939393] text-white",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"pl-4 py-4 rounded-tl-lg",children:"Policy Number"}),(0,i.jsx)("th",{className:"pl-4 py-4",children:"Expiry Date"}),(0,i.jsx)("th",{className:"pl-4 py-4 rounded-tr-lg",children:"Uploaded File"})]})}),(0,i.jsx)("tbody",{className:"bg-white cursor-pointer",children:d.map(((e,t)=>(0,i.jsxs)("tr",{className:"shadow-[0_3px_6px_1px_rgba(0,0,0,0.2)] hover:bg-medium_blue",children:[(0,i.jsx)("td",{className:"pl-4 py-4",children:e.travelNo}),(0,i.jsx)("td",{className:"py-4 px-4",children:O((null===e||void 0===e?void 0:e.travelExp)||"N/A")}),(0,i.jsx)("td",{className:"pl-4 py-4",children:q(e.travelUp,"PDF File")})]},t)))})]})}):(0,i.jsx)("p",{className:"text-center mt-10",children:"No insurance information available."})]}),v&&(0,i.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4 border border-gray-200",children:[(0,i.jsx)("button",{onClick:()=>y(!1),className:"absolute top-2 right-2",children:(0,i.jsx)(Lt.QCr,{size:20})}),b.endsWith(".pdf")?(0,i.jsxs)(Qe.Worker,{workerUrl:"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js",file:b,onLoadSuccess:e=>{let{numPages:t}=e;E(t)},children:[(0,i.jsx)(Fi.A,{pageNumber:w}),(0,i.jsxs)("div",{className:"text-center mt-2",children:[(0,i.jsx)("button",{onClick:()=>A((e=>Math.max(e-1,1))),disabled:w<=1,children:"Previous"}),(0,i.jsxs)("span",{children:[w," / ",S]}),(0,i.jsx)("button",{onClick:()=>A((e=>Math.min(e+1,S))),disabled:w>=S,children:"Next"})]})]}):(0,i.jsx)("img",{src:b,alt:"popup view",className:"w-full h-auto"})]})})]})};a(1975),a(6601);Ke.EA.workerSrc=new URL(a(1886),a.b).toString();const Hi=()=>{const e=(0,ge.D)(),[t,a]=(0,r.useState)({perAccUp:null}),[n,s]=(0,r.useState)({perAccUp:[]}),[l,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)("auto"),[p,m]=(0,r.useState)([]),[u,g]=(0,r.useState)(!0),[f,v]=(0,r.useState)(null),y=(0,r.useRef)(),[b,N]=(0,r.useState)(!1),[j,D]=(0,r.useState)(""),[w,A]=(0,r.useState)(null),[S,E]=(0,r.useState)(1),[I,C]=(0,r.useState)(null),[k,R]=(0,r.useState)(""),[T,P]=(0,r.useState)(!0),[_,O]=(0,r.useState)(""),[L,F]=(0,r.useState)(""),{register:M,handleSubmit:q,control:U,watch:B,setValue:H,formState:{errors:W}}=(0,it.mN)({resolver:(0,lt.t)(_n)});console.log("J");const Y=e=>{const t=new Date(e),a=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getFullYear();return"".concat(a,"/").concat(n,"/").concat(r)};(0,r.useEffect)((()=>{(async()=>{try{const t=await e.graphql({query:fe.vL}),a=t.data.listPersonalAccidents.items.filter((e=>new Date(e.perAccExp)>=new Date));m(a),g(!1)}catch(f){console.error("Error fetching insurance data:",f),v("insuranceData",{message:"Error fetching data"}),g(!1)}})()}),[]);(0,r.useEffect)((()=>{const e=setTimeout((()=>{if(y.current){const e=y.current.offsetHeight;console.log("Measured PDF height:",e),e>0&&(O("".concat(e,"px")),P(!1))}}),500);return()=>clearTimeout(e)}),[y,T,_,L]);const V=()=>{T?alert("PDF is still loading, please wait..."):z()},z=(0,dn.useReactToPrint)({content:()=>y.current,onBeforePrint:()=>console.log("Preparing to print PDF..."),onAfterPrint:()=>console.log("Print complete"),pageStyle:"\n      @page {\n        height: ".concat(_,"; /* Dynamically set height */\n        margin: 0; /* Adjust margins as needed */\n      }\n    ")}),J=e=>(0,i.jsx)(i.Fragment,{children:e.map(((e,t)=>(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4 border border-gray-200",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("span",{className:"uppercase font-semibold text-sm",children:["Uploaded on: ",Y(e.date)]}),(0,i.jsx)("button",{onClick:()=>(async e=>{try{const t=await(0,h.I)({path:e});R(t.url.href),A(e)}catch(f){console.error("Error fetching the file URL:",f)}})(e.upload),className:"text-dark_grey font-semibold text-sm",children:"View Document"})]}),w===e.upload&&e.upload.endsWith(".pdf")&&(0,i.jsxs)("div",{className:"mt-4  ",children:[(0,i.jsxs)("div",{className:"relative bg-white max-w-3xl mx-auto p-6 rounded-lg shadow-lg",children:[T&&(0,i.jsx)("div",{className:"absolute inset-0 bg-white bg-opacity-80 flex items-center justify-center z-10",children:(0,i.jsx)("p",{className:"text-lg font-semibold",children:"Loading PDF..."})}),(0,i.jsx)("div",{ref:y,className:"flex justify-center",children:(0,i.jsx)(Qe.Worker,{workerUrl:"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js",children:(0,i.jsx)(Qe.Viewer,{fileUrl:k||"",onDocumentLoadSuccess:()=>console.log("PDF loaded successfully")})})}),(0,i.jsx)("div",{className:"absolute top-2 right-2",children:(0,i.jsx)("button",{onClick:()=>A(null),className:"bg-red-600 text-black px-3 py-1 rounded-full text-sm hover:bg-red-800",children:(0,i.jsx)(Lt.QCr,{})})})]}),(0,i.jsxs)("div",{className:"flex items-center justify-center gap-6 py-4",children:[(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:[(0,i.jsx)("a",{href:k,download:!0,children:"Download"}),(0,i.jsx)(Lt.WCW,{className:"ml-2 mt-1"})]})}),(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{onClick:V,className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:["Print",(0,i.jsx)(Lt.n4o,{className:"ml-2 mt-1"})]})})]})]}),w===e.upload&&!e.upload.endsWith(".pdf")&&(0,i.jsxs)("div",{className:"relative mt-4",children:[(0,i.jsx)("div",{children:(0,i.jsx)("img",{src:k,alt:"Document Preview",className:"w-full h-auto"})}),(0,i.jsx)("div",{className:"absolute top-2 right-2",children:(0,i.jsx)("button",{onClick:()=>A(null),className:"bg-red-600 text-black px-3 py-1 rounded-full text-sm hover:bg-red-800",children:(0,i.jsx)(Lt.QCr,{})})}),(0,i.jsxs)("div",{className:"flex items-center justify-center gap-6 py-4",children:[(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:[(0,i.jsx)("a",{href:k,download:!0,children:"Download"}),(0,i.jsx)(Lt.WCW,{className:"ml-2 mt-1"})]})}),(0,i.jsx)("div",{className:"mt-2 flex",children:(0,i.jsxs)("button",{onClick:V,className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",children:[T?"Loading...":"Print PDF",(0,i.jsx)(Lt.n4o,{className:"ml-2 mt-1"})]})})]})]})]},t)))}),G=(e,t)=>{const a=e.length>0?(e=>{try{const t=JSON.parse(e);return Array.isArray(t)?t.map((e=>(e.upload&&(e.fileName=e.upload.split("/").pop()),e))):[]}catch(f){return console.error("Error parsing document data:",f),[]}})(e[0]):[],n=Array.isArray(a)&&a.length>0;return(0,i.jsxs)("div",{className:"py-4",children:[(0,i.jsx)("h6",{className:"uppercase text_size_5 my-3",children:t}),n?J(a):(0,i.jsx)("p",{className:"text-dark_grey font-semibold text-sm",children:"No documents and images available"})]})};return(0,i.jsxs)("section",{children:[(0,i.jsxs)("form",{onSubmit:q((async t=>{try{const a=(0,x.A)((0,x.A)({},t),{},{perAccUp:JSON.stringify(n.perAccUp)});await e.graphql({query:"\n  mutation CreatePersonalAccident(\n    $input: CreatePersonalAccidentInput!\n    $condition: ModelPersonalAccidentConditionInput\n  ) {\n    createPersonalAccident(input: $input, condition: $condition) {\n      id\n      perAccExp\n      perAccNo\n      perAccUp\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:a}});o(!0)}catch(f){console.error("Error submitting data:",f)}})),className:"mx-auto py-5 px-10 my-10 bg-[#F5F6F1CC]",children:[(0,i.jsx)("h3",{className:"mb-5 text-lg font-bold",children:"Personal Accident Insurance"}),(0,i.jsx)("div",{className:"relative mb-5",children:(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4 items-center",children:[(0,i.jsx)(ut,{name:"perAccNo",type:"text",placeholder:"Enter Personal Accident Policy Number",label:"Policy Number",register:M,errors:W}),(0,i.jsx)(ut,{name:"perAccExp",type:"date",label:"Expiry Date",register:M,errors:W}),(0,i.jsxs)("div",{className:"mb-2 relative",children:[(0,i.jsx)(Da,{label:"Upload File",onChangeFunc:e=>(async(e,t)=>{const n=e.target.files[0];if(!n)return;if(!["application/pdf"].includes(n.type))return void alert("Upload must be a PDF file");const r=B(t)||[];H(t,[...r,n]);try{await pt(n,t,s),a((e=>(0,x.A)((0,x.A)({},e),{},{[t]:n.name})))}catch(i){console.log(i)}})(e,"perAccUp"),register:M,name:"perAccUp",error:W}),(0,i.jsx)("div",{className:"absolute",children:t.perAccUp&&(0,i.jsx)("span",{className:"text-sm text-grey",children:t.perAccUp})})]})]})}),(0,i.jsx)("div",{className:"center my-10",children:(0,i.jsx)("button",{type:"submit",className:"primary_btn",children:"Save"})})]}),l&&(0,i.jsx)(Le,{text:"Personal Accident Saved Successfully",notification:l,path:"/insuranceHr/personalAcci"}),(0,i.jsxs)("div",{className:"mt-20",children:[(0,i.jsx)("p",{className:"text-xl font-bold mb-10 p-3 rounded-lg border-2 border-[#FEF116] bg-[#FFFEF4] w-[250px]",children:"View Insurance Info"}),p.length>0?(0,i.jsx)("div",{className:" h-[400px] overflow-y-auto scrollBar",children:(0,i.jsxs)("table",{className:"w-full text-center",children:[(0,i.jsx)("thead",{className:"bg-[#939393] text-white",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"pl-4 py-4 rounded-tl-lg",children:"Policy Number"}),(0,i.jsx)("th",{className:"pl-4 py-4",children:"Expiry Date"}),(0,i.jsx)("th",{className:"pl-4 py-4 rounded-tr-lg",children:"Uploaded File"})]})}),(0,i.jsx)("tbody",{className:"bg-white cursor-pointer",children:p.map(((e,t)=>(0,i.jsxs)("tr",{className:"shadow-[0_3px_6px_1px_rgba(0,0,0,0.2)] hover:bg-medium_blue",children:[(0,i.jsx)("td",{className:"pl-4 py-4",children:e.perAccNo}),(0,i.jsx)("td",{className:"py-4 px-4",children:Y((null===e||void 0===e?void 0:e.perAccExp)||"N/A")}),(0,i.jsx)("td",{className:"pl-4 py-4",children:G(e.perAccUp,"PDF File")})]},t)))})]})}):(0,i.jsx)("p",{className:"text-center mt-10",children:"No insurance information available."})]}),b&&(0,i.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4 border border-gray-200",children:[(0,i.jsx)("button",{onClick:()=>N(!1),className:"absolute top-2 right-2",children:(0,i.jsx)(Lt.QCr,{size:20})}),j.endsWith(".pdf")?(0,i.jsxs)(Qe.Worker,{workerUrl:"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js",file:j,onLoadSuccess:e=>{let{numPages:t}=e;C(t)},children:[(0,i.jsx)(Fi.A,{pageNumber:S}),(0,i.jsxs)("div",{className:"text-center mt-2",children:[(0,i.jsx)("button",{onClick:()=>E((e=>Math.max(e-1,1))),disabled:S<=1,children:"Previous"}),(0,i.jsxs)("span",{children:[S," / ",I]}),(0,i.jsx)("button",{onClick:()=>E((e=>Math.min(e+1,I))),disabled:S>=I,children:"Next"})]})]}):(0,i.jsx)("img",{src:j,alt:"popup view",className:"w-full h-auto"})]})})]})};var Wi=a(9722);const Yi=()=>{const{SubmitJobData:e}=(()=>{const e=(0,ge.D)();return{SubmitJobData:(0,r.useCallback)((async t=>{let{jobValue:a}=t;if(!a||!a.jobTitle)throw new Error("Job title is required.");try{const t=e=>{if(!e)return null;const t=new Date(e),a=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();return"".concat(a,"/").concat(n,"/").concat(r)},n=t(a.startDate),r=t(a.expiryDate),s={jobTitle:a.jobTitle,exper:a.experience,location:a.location,quantityPerson:a.quantity,startDate:n,expiryDate:r,jobContent:a.jobDesc,uploadJobDetails:a.uploadJobDetails};console.log(s),await e.graphql({query:"\n  mutation CreateHiringJob(\n    $input: CreateHiringJobInput!\n    $condition: ModelHiringJobConditionInput\n  ) {\n    createHiringJob(input: $input, condition: $condition) {\n      id\n      jobTitle\n      exper\n      location\n      quantityPerson\n      startDate\n      expiryDate\n      jobContent\n      uploadJobDetails\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:s}})}catch(n){throw console.error("Error updating data:",n),n}}),[e])}})(),{hiringJob:t}=ir(),[a,s]=(0,r.useState)(!1),[l,o]=(0,r.useState)("");(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]);const{register:d,handleSubmit:c,watch:p,setValue:m,formState:{errors:u}}=(0,it.mN)({resolver:(0,lt.t)(ot._K)}),[h,g]=(0,r.useState)(null),[f,v]=(0,r.useState)({}),y=p("jobTitle"),b=c((t=>{console.log(t);try{const a=(0,x.A)((0,x.A)({},t),{},{uploadJobDetails:(null===h||void 0===h?void 0:h.uploadJobDetails)||null});e({jobValue:a}),o("Posted Job successfully"),s(!0)}catch(a){console.log(a)}}));return(0,i.jsxs)("section",{className:"bg-[#F5F6F1CC] mx-auto p-10",children:[(0,i.jsxs)("div",{className:"w-full flex items-center gap-5 mb-10",children:[(0,i.jsx)(n.N_,{to:"/hiringJob",className:"text-xl text-grey",children:(0,i.jsx)(Lt.QVr,{})}),(0,i.jsx)("h6",{className:"text-center flex-1 mt-2 text_size_2 uppercase",children:"Job Details"})]}),(0,i.jsxs)("div",{className:"form-group flex flex-col gap-6",children:[(0,i.jsx)("div",{className:"grid grid-cols-2 gap-5 ",children:null===t||void 0===t?void 0:t.map(((e,t)=>(0,i.jsx)("div",{children:(0,i.jsx)(ut,{label:e.label,name:e.name,type:e.type,register:d,errors:u})},t)))}),(0,i.jsxs)("div",{className:"md:col-span-2 form-group",children:[(0,i.jsx)("label",{className:"mb-1 text_size_5",children:"Job description"}),(0,i.jsx)("textarea",(0,x.A)((0,x.A)({},d("jobDesc")),{},{className:"resize-none w-full p-2 mt-1 border bg-lite_skyBlue border-lite_grey rounded-md outline-none",rows:"1"})),u.jobDesc&&(0,i.jsx)("p",{className:"text-[red] text-[13px] mt-1",children:u.jobDesc.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text_size_5 mb-2",children:"Upload Job Document"}),(0,i.jsxs)("label",{className:"flex items-center px-3 py-2 p-2.5 bg-lite_skyBlue w-72 border border-[#dedddd] rounded-md cursor-pointer",children:[(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"file"},d("uploadJobDetails")),{},{onChange:e=>(async(e,t)=>{if(!y)return alert("Please enter the Job Title before uploading files."),void(window.location.href="/postJob");let a=e.target.files[0];if(["application/pdf","image/jpeg","image/png","image/jpg"].includes(a.type)){if(m(t,a),a)try{v((e=>({uploadJobDetails:a.name})));const e="https://71n903ao01.execute-api.ap-southeast-1.amazonaws.com/adininfile/commonfiles/recruitment%2FapplyJob.jpg",t=await fetch(e,{method:"PUT",body:a});console.log(t,"Res File upload")}catch(n){console.log(n)}}else alert("Upload must be a PDF file or an image (JPG, JPEG, PNG)")})(e,"uploadJobDetails"),className:"hidden",accept:".pdf, .jpg, .jpeg, .png"})),(0,i.jsxs)("span",{className:"ml-2 flex p-1 text-grey gap-10",children:[(0,i.jsx)(ft.gwN,{})," PDF"]})]}),(0,i.jsx)("p",{className:"text-xs mt-1 text-grey",children:null===f||void 0===f?void 0:f.uploadJobDetails})]}),(0,i.jsx)("div",{className:"w-full center",children:(0,i.jsx)("button",{className:"primary_btn",onClick:b,children:"Post"})})]}),a&&(0,i.jsx)(Le,{text:l,notification:a,path:"/hiringJob"})]})},Vi=()=>{(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]);const{hiringData:e}=(0,r.useContext)(s.Y),t=e.sort(((e,t)=>new Date(t.createdAt)-new Date(e.createdAt))),a=["Job Title","Experience","Job Description","Location","Quantity","Start Date","Expiry Date","Status"],l=e=>"Completed"===e?"text-[green]":"text-[#E8A317]";return(0,i.jsxs)("section",{className:"bg-[#F5F6F1CC] mx-auto p-10 min-h-screen ",children:[(0,i.jsxs)("div",{className:"mb-5 flex justify-between",children:[" ",(0,i.jsx)("span",{className:"bg-[#faf362] py-2 px-3 rounded-lg text-[18px] font-semibold",children:"Hiring Job"}),(0,i.jsxs)(n.N_,{to:"/postJob",className:"bg-primary py-2 px-5 text-zinc font-semibold text-lg flex items-center gap-5",children:[(0,i.jsx)("span",{className:"text-xl",children:"+"})," Create Job"]})]})," ",(0,i.jsxs)("table",{className:"w-full text-left",children:[(0,i.jsx)("thead",{className:"bg-[#939393] text-white",children:(0,i.jsx)("tr",{children:a.map(((e,t)=>(0,i.jsx)("th",{className:"pl-4 py-4",children:e},t)))})}),(0,i.jsx)("tbody",{className:"bg-white cursor-pointer",children:t&&t.length>0?t.map(((e,t)=>{const a=(e=>{if(!e)return"Live";const t=e.replace(/[-/]/g,"-"),[a,n,r]=t.split("-"),s=new Date(r,n-1,a),i=new Date;return s<new Date(i.getFullYear(),i.getMonth(),i.getDate())?"Completed":"Live"})(null===e||void 0===e?void 0:e.expiryDate);return(0,i.jsxs)("tr",{className:"shadow-[0_3px_6px_1px_rgba(0,0,0,0.2)]",children:[(0,i.jsx)("td",{className:" pl-4 py-4",children:(null===e||void 0===e?void 0:e.jobTitle)||"N/A"}),(0,i.jsx)("td",{className:" pl-4 py-4",children:(null===e||void 0===e?void 0:e.exper)||"N/A"}),(0,i.jsx)("td",{className:" pl-4 py-4  break-words overflow-x-auto",children:(null===e||void 0===e?void 0:e.jobContent)||"N/A"}),(0,i.jsx)("td",{className:" pl-4 py-4",children:(null===e||void 0===e?void 0:e.location)||"N/A"}),(0,i.jsx)("td",{className:" pl-4 py-4",children:(null===e||void 0===e?void 0:e.quantityPerson)||"N/A"}),(0,i.jsx)("td",{className:" pl-4 py-4",children:(null===e||void 0===e?void 0:e.startDate)||"N/A"}),(0,i.jsx)("td",{className:" pl-4 py-4",children:(null===e||void 0===e?void 0:e.expiryDate)||"N/A"}),(0,i.jsx)("td",{className:" pl-4 py-4 ".concat(l(a)),children:a})]},t)})):(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:a.length,className:"px-2  py-4 text-center",children:"No job postings available."})})})]})]})},zi=()=>{const e=(0,ge.D)(),[t,a]=(0,r.useState)(!1),[n,s]=(0,r.useState)([]),[l,o]=(0,r.useState)(!0),[d,c]=(0,r.useState)(null),{register:p,handleSubmit:m,control:u,formState:{errors:x}}=(0,it.mN)({resolver:(0,lt.t)(kn),defaultValues:{insDetails:[{company:""}]}}),{fields:h,append:g,remove:f}=(0,it.jz)({control:u,name:"insDetails"});return(0,r.useEffect)((()=>{(async()=>{try{const t=await e.graphql({query:fe.Yv}),a=(e=>{const t={};return e.forEach((e=>{t[e.typeIns]?t[e.typeIns]=[...new Set([...t[e.typeIns],...e.insDetails])]:t[e.typeIns]=e.insDetails})),Object.entries(t).map((e=>{let[t,a]=e;return{typeIns:t,insDetails:a}}))})(t.data.listInsuranceTypes.items);s(a),o(!1)}catch(d){console.error("Error fetching insurance data:",d),c("Error fetching data"),o(!1)}})()}),[]),(0,i.jsxs)("section",{children:[(0,i.jsxs)("form",{onSubmit:m((async t=>{try{const n={typeIns:t.typeIns,insDetails:t.insDetails.map((e=>e.company))};await e.graphql({query:"\n  mutation CreateInsuranceType(\n    $input: CreateInsuranceTypeInput!\n    $condition: ModelInsuranceTypeConditionInput\n  ) {\n    createInsuranceType(input: $input, condition: $condition) {\n      id\n      typeIns\n      insDetails\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:n}});a(!0)}catch(d){console.error("Error submitting data:",d)}})),className:"mx-auto  pt-2 px-10 mt-10 bg-[#F5F6F1CC]",children:[(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsx)("div",{className:"grid grid-cols-2 gap-x-14",children:(0,i.jsx)(ut,{name:"typeIns",type:"text",placeholder:"Enter Insurance Type",label:"Insurance Type",register:p,errors:x})}),(0,i.jsx)("div",{className:"flex justify-end items-end",children:(0,i.jsxs)("button",{type:"button",onClick:()=>{g({company:""})},className:"mt-4 flex items-center text-medium_grey text-[25px]",children:[(0,i.jsx)(Ft.Oh0,{})," ",(0,i.jsx)("span",{className:"text-[16px]",children:" Add Company"})]})}),(0,i.jsx)("div",{className:"grid grid-cols-2 gap-x-14",children:h.map(((e,t)=>(0,i.jsxs)("div",{className:"mb-2 relative",children:[(0,i.jsx)(ut,{name:"insDetails.".concat(t,".company"),type:"text",placeholder:"Enter Insurance Company",label:"Insurance Company",register:p,errors:x}),h.length>1&&0!==t&&(0,i.jsx)("button",{type:"button",onClick:()=>f(t),className:"absolute top-10 -right-10 text-medium_grey text-[25px]",children:(0,i.jsx)(Lt.vli,{})})]},e.id)))})]}),(0,i.jsx)("div",{className:"flex justify-center items-center mt-10",children:(0,i.jsx)("button",{type:"submit",className:"primary_btn",children:"Save"})})]}),t&&(0,i.jsx)(Le,{text:"Insurance Type Saved Successfully",notification:t,path:"/insuranceHr"}),l&&(0,i.jsx)("p",{className:"text-center mt-10",children:"Loading insurance data..."}),d&&(0,i.jsx)("p",{className:"text-center mt-10 text-red-600",children:d}),(0,i.jsxs)("div",{className:"mt-20",children:[(0,i.jsx)("p",{className:"text-xl font-bold mb-10 p-3 rounded-lg border-2 border-[#FEF116] bg-[#FFFEF4] w-[250px]",children:"View Insurance Info"}),n.length>0?(0,i.jsx)("div",{className:" h-[400px] overflow-y-auto scrollBar",children:(0,i.jsxs)("table",{className:"w-full text-center",children:[(0,i.jsx)("thead",{className:" bg-[#939393] text-white",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"pl-4 py-4 rounded-tl-lg",children:"Insurance Type"}),(0,i.jsx)("th",{className:"pl-4 py-4 rounded-tr-lg",children:"Insurance Companies"})]})}),(0,i.jsx)("tbody",{className:"bg-white cursor-pointer",children:n.map(((e,t)=>(0,i.jsxs)("tr",{className:"shadow-[0_3px_6px_1px_rgba(0,0,0,0.2)] hover:bg-medium_blue",children:[(0,i.jsx)("td",{className:"pl-4 py-4",children:e.typeIns}),(0,i.jsx)("td",{className:"pl-4 py-4",children:e.insDetails.map(((e,t)=>(0,i.jsx)("div",{children:e},t)))})]},t)))})]})}):(0,i.jsx)("p",{className:"text-center mt-10",children:"No insurance information available."})]})]})};var Ji=a(9223),Gi=a.n(Ji),$i=a(2450);const Ki=e=>{let{details:t,popupAll:a,onClose:n}=e;const[s,l]=(0,r.useState)({}),o=["medicalReport","blastingUpload","trainingUpCertifi","weldingUpload"];return(0,r.useEffect)((()=>{(async()=>{const e={};for(const r of a)if(o.includes(r.key)){const a=t[r.key];if(a){const t=JSON.parse(a);if(Array.isArray(t)&&t.length>0){const a=t[t.length-1].upload;try{const t=await(0,h.I)({path:a});e[r.key]=t.url.href}catch(n){console.error("Error fetching URL for ".concat(r.key,":"),n)}}}}l(e)})()}),[t,a]),(0,i.jsx)("div",{className:"fixed top-0 w-full left-0 bg-black bg-opacity-50 z-[9999] py-7 min-h-screen flex items-center justify-center ",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 w-[40%] overflow-y-auto scrollBar",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center pb-3 ",children:[(0,i.jsx)("div",{className:"w-full center",children:(0,i.jsx)("img",{src:he.A,alt:"Logo",className:"max-w-[200px] "})}),(0,i.jsx)("button",{onClick:n,className:"rounded-md",children:(0,i.jsx)(Lr.oxH,{className:"text-[32px] font-xs"})})]}),(0,i.jsx)("h2",{className:"text-xl mt-2 font-bold underline text-center mb-7",children:"Candidate Details"}),(0,i.jsx)("div",{className:" shadow-md rounded-md px-10",children:(0,i.jsx)("article",{className:"flex flex-col",children:a.map(((e,a)=>(0,i.jsx)("article",{className:"mb-2 flex flex-col",children:(0,i.jsxs)("article",{className:"flex justify-between text-[14px]",children:[(0,i.jsx)("p",{className:"flex-1 text-start font-medium",children:e.header}),(0,i.jsx)("p",{className:"flex-1 text-center",children:":"}),(0,i.jsx)("p",{className:"flex-1 text-start",children:o.includes(e.key)&&s[e.key]?(0,i.jsx)("a",{href:s[e.key],rel:"noopener noreferrer",className:"text-blue underline",children:"Download"}):Array.isArray(t[e.key])&&0===t[e.key].length||!t[e.key]?"N/A":t[e.key]})]})},a)))})})]})})},Qi=e=>{let{mergering:t,columns:a,popupAll:n}=e;const[s,l]=(0,r.useState)(!1),[o,d]=(0,r.useState)(null),[c,p]=(0,r.useState)(""),[m,u]=(0,r.useState)(1),[x,h]=(0,r.useState)(30),[g,f]=(0,r.useState)([]),v=(0,r.useMemo)((()=>t.filter((e=>{const t=e.empID?e.empID.toLowerCase():"",a=e.name?e.name.toLowerCase():"",n=c.toLowerCase();return t.includes(n)||a.includes(n)}))),[t,c]);(0,r.useEffect)((()=>{const e=(m-1)*x,t=v.slice(e,e+x);f(t)}),[v,m,x]);return(0,i.jsxs)("section",{children:[(0,i.jsxs)("div",{className:"relative flex justify-end items-end mt-14",children:[(0,i.jsx)("input",{type:"text",placeholder:"Search by empID or name",value:c,onChange:e=>{p(e.target.value)},className:"py-2 px-4 mr-5 rounded-lg shadow-[0_1px_6px_1px_rgba(0,0,0,0.2)] outline-none"}),(0,i.jsx)("div",{className:"absolute top-1/2 right-8 transform -translate-y-1/2",children:(0,i.jsx)("img",{src:ln,alt:"Search Icon",className:"w-4 h-4"})})]}),(0,i.jsxs)("div",{className:"overflow-x-auto mt-16 w-full rounded-md",children:[(0,i.jsx)("div",{className:"w-full px-4 max-h-[calc(90vh-7rem)] overflow-y-auto scrollBar",children:(0,i.jsxs)("table",{className:"w-full rounded-xl table-auto",children:[(0,i.jsx)("thead",{className:"bg-[#939393] text-center sticky top-0",children:(0,i.jsxs)("tr",{children:[a.map(((e,t)=>(0,i.jsx)("th",{className:"py-4 px-2 text-white",children:e.header},t))),(0,i.jsx)("th",{className:"py-4 px-4 text-white",children:"View"})]})}),(0,i.jsx)("tbody",{className:"bg-white text-center text-sm font-semibold text-dark_grey ",children:g.length>0?g.map(((e,t)=>(0,i.jsxs)("tr",{className:"shadow cursor-pointer",children:[a.map(((t,a)=>(0,i.jsx)("td",{className:"py-4 px-4",children:e[null===t||void 0===t?void 0:t.key]||"N/A"},a))),(0,i.jsx)("td",{className:"py-4 px-4 text-dark_skyBlue underline cursor-pointer",onClick:()=>(d(e),void l(!0)),children:"View"})]},t))):(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:a.length+1,className:"py-4 text-center",children:"No results found."})})})]})}),s&&o&&(0,i.jsx)(Ki,{details:o,popupAll:n,onClose:()=>{l(!1),d(null)}})]}),(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsx)("div",{className:"flex justify-between mt-12 px-10",children:(0,i.jsx)(la,{currentPage:m,totalPages:Math.ceil(v.length/x),onPageChange:e=>{e>=1&&e<=Math.ceil(v.length/x)&&u(e)}})})})]})},Zi=()=>{const{empPIData:e,workInfoData:t,trainingCertifi:a,AddEmpReq:l}=(0,r.useContext)(s.Y),[o,d]=(0,r.useState)([]),[c,p]=(0,r.useState)([]),[m,u]=(0,r.useState)(""),[h,g]=(0,r.useState)(""),[f,v]=(0,r.useState)(!0),[y,b]=(0,r.useState)(null);(0,r.useEffect)((()=>{if(e&&t&&a&&l){const n=e.map((e=>{const n=l.find((t=>t.empID===e.empID)),r=t.find((t=>t.empID===e.empID)),s=a.find((t=>t.empID===e.empID));return n?(0,x.A)((0,x.A)((0,x.A)((0,x.A)({},e),n),r),s):null})).filter((e=>null!==e)).sort(((e,t)=>e.empID.localeCompare(t.empID)));d(n),p(n),v(!1)}else b("Data not fully available."),v(!1)}),[e,t,a,l]);const N={addTraining:[{header:"Employee ID",key:"empID"},{header:"Employee Badge No",key:"empBadgeNo"},{header:"Name",key:"name"},{header:"Department",key:"department"},{header:"Material Requisition ",key:"MRNo"},{header:"Medical Name",key:"medicalName"},{header:"Medical Expiry",key:"medicalExpiry"},{header:"Medical Appointment Date",key:"medicalAppointDate"},{header:"Course",key:"courseCode"},{header:"Course Name",key:"courseName"},{header:"Company",key:"company"},{header:"Start Date",key:"traineeSD"},{header:"End Date",key:"traineeED"},{header:"Status",key:"traineeStatus"},{header:"Training Course Fee",key:"traineeCourseFee"}]},j=(e,t)=>{const a=e.target.value;"startDate"===t&&u(a),"endDate"===t&&g(a);const n="startDate"===t?new Date(a):m?new Date(m):null,r="endDate"===t?new Date(a):h?new Date(h):null,s=o.filter((e=>{const t=new Date(e.traineeSD);return n&&r?t>=n&&t<=r:n?t>=n:!r||t<=r}));p(s)},D=e=>{if(!e)return"N/A";const t=new Date(e),a=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getFullYear();return"".concat(a,"/").concat(n,"/").concat(r)};if(f)return(0,i.jsx)("div",{children:"Loading..."});if(y)return(0,i.jsxs)("div",{children:["Error: ",y]});const w=c.map((e=>(0,x.A)((0,x.A)({},e),{},{department:Array.isArray(e.department)?e.department[e.department.length-1]:"-",medicalExpiry:D(e.medicalExpiry),medicalAppointDate:D(e.medicalAppointDate),traineeSD:D(e.traineeSD),traineeED:D(e.traineeED)})));return(0,i.jsx)("section",{className:"bg-[#F8F8F8] w-full",children:(0,i.jsxs)("div",{className:" mx-auto p-5 h-full",children:[(0,i.jsxs)("div",{className:"w-full flex items-center justify-between gap-5 my-5",children:[(0,i.jsx)(n.N_,{to:"/trainingReq",className:"text-xl text-grey",children:(0,i.jsx)(ia.QVr,{})}),(0,i.jsx)("article",{className:"flex-1 center gap-5 text-dark_grey",children:(0,i.jsx)("h1",{className:"text-center mt-2 text_size_2 relative after:absolute after:w-full after:h-1 after:bg-primary after:-bottom-2 after:left-0",children:"Add Employee View"})})]}),(0,i.jsx)("div",{className:"px-4 relative ",children:(0,i.jsxs)("div",{className:"absolute z-20 -top-1 flex items-center gap-5",children:[(0,i.jsxs)("div",{className:" flex items-center  gap-5 w-full ",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"start-date",className:"block text-[16px] font-medium",children:"Start Date"}),(0,i.jsx)("input",{id:"start-date",type:"date",value:m,onChange:e=>j(e,"startDate"),className:"outline-none text-grey border rounded-md p-2"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"end-date",className:"block text-[16px] font-medium",children:"End Date"}),(0,i.jsx)("input",{id:"end-date",type:"date",value:h,onChange:e=>j(e,"endDate"),className:"outline-none text-grey border rounded-md p-2"})]})]}),(0,i.jsx)("div",{className:" mt-5 vertical-center p-5 ",children:(0,i.jsx)("button",{className:"bg-[#FEF116] text-dark_grey w-[126px] p-2 rounded",onClick:()=>{const e="Employee Report",t=c.map((e=>N.addTraining.map((t=>e[t.key]||"N/A")))),a=new(Gi().Workbook),n=a.addWorksheet("".concat(e)),r=n.addRow(N.addTraining.map((e=>e.header)));n.columns=N.addTraining.map((e=>({header:e.header,width:e.header.length<20?20:e.header.length}))),r.eachCell((e=>{e.font={bold:!0,size:12,color:{argb:"f9f9f9"}},e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"787878"}},e.alignment={horizontal:"left"}})),t.forEach((e=>{n.addRow(e)})),a.xlsx.writeBuffer().then((t=>{const a=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,$i.saveAs)(a,"".concat(e,".xlsx"))}))},children:"Download"})})]})}),(0,i.jsx)(Qi,{mergering:w,columns:N.addTraining,popupAll:[{header:"Employee ID",key:"empID"},{header:"Employee Badge No",key:"empBadgeNo"},{header:"Name",key:"name"},{header:"Material Requisition ",key:"MRNo"},{header:"Medical Name",key:"medicalName"},{header:"Medical Expiry",key:"medicalExpiry"},{header:"Medical Appointment Date",key:"medicalAppointDate"},{header:"Course",key:"courseCode"},{header:"Course Name",key:"courseName"},{header:"Company",key:"company"},{header:"Start Date",key:"traineeSD"},{header:"End Date",key:"traineeED"},{header:"Status",key:"traineeStatus"},{header:"Training Course Fee",key:"traineeCourseFee"},{header:"Upload Report",key:"medicalReport"}]})]})})},Xi=()=>{const{empPIData:e,trainingCertifi:t,AddEmpReq:a,workInfoData:l}=(0,r.useContext)(s.Y),[o,d]=(0,r.useState)(""),[c,p]=(0,r.useState)(""),[m,u]=(0,r.useState)([]),[h,g]=(0,r.useState)([]),[f,v]=(0,r.useState)(!0),[y,b]=(0,r.useState)(null),N={trainCertifi:[{header:"Employee ID",key:"empID"},{header:"Name",key:"name"},{header:"Department",key:"department"},{header:"Certificate Expiry",key:"certifiExpiry"},{header:"E-certificate Date",key:"eCertifiDate"}]},j=(e,t)=>{const a=e.target.value;"startDate"===t&&d(a),"endDate"===t&&p(a);const n="startDate"===t?new Date(a):o?new Date(o):null,r="endDate"===t?new Date(a):c?new Date(c):null,s=m.filter((e=>{const t=new Date(e.certifiExpiry);return n&&r?t>=n&&t<=r:n?t>=n:!r||t<=r}));g(s)},D=e=>{if(!e)return"N/A";const t=new Date(e),a=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getFullYear();return"".concat(a,"/").concat(n,"/").concat(r)};if((0,r.useEffect)((()=>{(()=>{if(e&&t&&a&&l)try{const n=e.map((e=>{const n=t.find((t=>t.empID===e.empID)),r=a.find((t=>t.empID===e.empID)),s=l.find((t=>t.empID===e.empID));return(0,x.A)((0,x.A)((0,x.A)((0,x.A)({},e),n),r),s)})).filter(Boolean),r=n.map((e=>Object.fromEntries(Object.entries(e).map((e=>{let[t,a]=e;if(Array.isArray(a)){return[t,a[a.length-1]]}return[t,a]}))))).filter((e=>{const t=e.department||"",a=e.certifiExpiry||"";return"Offshore"===t&&a}));u(r),g(r),v(!1)}catch(n){console.error("Error merging and filtering data:",n),b("Error merging and filtering data."),v(!1)}else b("Required data is missing."),v(!1)})()}),[e,t,a,l]),f)return(0,i.jsx)("div",{children:"Loading..."});if(y)return(0,i.jsxs)("div",{children:["Error: ",y]});const w=h.map((e=>(0,x.A)((0,x.A)({},e),{},{certifiExpiry:D(e.certifiExpiry),orgiCertifiDate:D(e.orgiCertifiDate),eCertifiDate:D(e.eCertifiDate)})));return(0,i.jsxs)("section",{className:"bg-[#F8F8F8] mx-auto p-5 h-full w-full",children:[(0,i.jsxs)("div",{className:"w-full flex items-center justify-between gap-5 my-5",children:[(0,i.jsx)(n.N_,{to:"/training",className:"text-xl text-grey",children:(0,i.jsx)(ia.QVr,{})}),(0,i.jsx)("article",{className:"flex-1 flex justify-center gap-5 text-dark_grey",children:(0,i.jsx)("h1",{className:"text-center mt-2 text_size_2 relative after:absolute after:w-full after:h-1 after:bg-primary after:-bottom-2 after:left-0",children:"OME Training Certificates"})})]}),(0,i.jsx)("div",{className:"px-4 relative ",children:(0,i.jsx)("div",{className:"absolute z-20 top-3 flex items-center gap-5",children:(0,i.jsxs)("div",{className:" flex items-center  gap-5 w-full ",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"start-date",className:"block text-[16px] font-medium",children:"Start Date"}),(0,i.jsx)("input",{id:"start-date",type:"date",value:o,onChange:e=>j(e,"startDate"),className:"outline-none text-grey border rounded-md p-2"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"end-date",className:"block text-[16px] font-medium",children:"End Date"}),(0,i.jsx)("input",{id:"end-date",type:"date",value:c,onChange:e=>j(e,"endDate"),className:"outline-none text-grey border rounded-md p-2"})]})]})})}),(0,i.jsx)(Qi,{mergering:w,columns:null===N||void 0===N?void 0:N.trainCertifi,popupAll:[{header:"Employee ID",key:"empID"},{header:"Employee Badge No",key:"empBadgeNo"},{header:"Name",key:"name"},{header:"Department",key:"department"},{header:"Course",key:"courseCode"},{header:"Course Name",key:"courseName"},{header:"Company",key:"company"},{header:"Purchase Order No",key:"poNo"},{header:"Expiry Condition",key:"addDescretion"},{header:"Date E-certificate",key:"eCertifiDate"},{header:"Training Certificate Expiry",key:"certifiExpiry"},{header:"Original Certificate",key:"orgiCertifiDate"},{header:"Upload File",key:"trainingUpCertifi"}]})]})},el=e=>{let{AfterFilter:t,name:a}=e;const[n,s]=(0,r.useState)(!1),[l,o]=(0,r.useState)("All"),d=e=>{o(e),s(!1)};return(0,r.useEffect)((()=>{t(l)}),[l]),(0,i.jsx)("section",{className:"",children:(0,i.jsxs)("div",{className:"center gap-3 border relative rounded-md p-3 text-sm text-secondary border-[#CDCDCD]",onClick:()=>{s(!n)},children:[(0,i.jsx)(y.NDY,{}),(0,i.jsx)("p",{children:a}),n&&(0,i.jsx)("div",{className:" top-10 absolute left-0 w-32 shadow-lg bg-white z-50 ",children:(0,i.jsxs)("div",{className:"py-1 shadow-md  flex flex-col bg-white",children:[(0,i.jsx)("button",{onClick:()=>d("All"),className:" w-full text-left px-4 py-2 text-sm text-dark_grey hover:bg-lite_grey hover:text-white ",children:"All"}),(0,i.jsx)("button",{onClick:()=>d("Pending"),className:" w-full text-left px-4 py-2 text-sm text-dark_grey hover:bg-lite_grey hover:text-white ",children:"Pending"}),(0,i.jsx)("button",{onClick:()=>{d("Approved")},className:"   w-full text-left px-4 py-2 text-sm text-dark_grey hover:bg-lite_grey hover:text-white",children:"Approved"}),(0,i.jsx)("button",{onClick:()=>d("Rejected"),className:" w-full text-left px-4 py-2 text-sm text-dark_grey hover:bg-lite_grey hover:text-white",children:"Rejected"})]})})]})})},tl=e=>{let{userType:t}=e;const a=(0,n.zy)();return(0,i.jsxs)("section",{className:"flex text-center items-center py-3 text_size_5",children:[(0,i.jsx)(n.N_,{to:"/leaveManagement",className:"pr-2 relative after:absolute after:-bottom-1 after:left-0 after:w-[90%] after:h-1 cursor-pointer ".concat("/leaveManagement"===a.pathname?"after:bg-primary":""),children:"Request Leave"})," ",(0,i.jsx)(n.N_,{to:"/leaveManagement/historyLeave",className:"px-1 relative after:absolute after:-bottom-2 after:left-0 after:w-[90%] after:h-1 cursor-pointer ".concat("/leaveManagement/historyLeave"===a.pathname?"after:bg-primary":""),children:"History of leave"})," ",(0,i.jsx)(n.N_,{to:"/leaveManagement/leaveBalance",className:"px-1 relative after:absolute after:-bottom-2 after:left-0 after:w-[90%] after:h-1 cursor-pointer ".concat("/leaveManagement/leaveBalance"===a.pathname?"after:bg-primary":""),children:"Employee Leave Balance"})," ",("HR"===t||"SuperAdmin"===t)&&(0,i.jsxs)(i.Fragment,{children:[" ",(0,i.jsx)(n.N_,{to:"/leaveManagement/requestTickets",className:"px-1 relative after:absolute after:-bottom-2 after:left-0 after:w-[90%] after:h-1 cursor-pointer ".concat("/leaveManagement/requestTickets"===a.pathname?"after:bg-primary":""),children:"Request Tickets"})]})]})},al=()=>{const{handleClickForToggle:e,handleViewClick:t,userType:a,mergedData:l,userID:o,loading:d}=(0,n.KC)(),{empPIData:c}=(0,r.useContext)(s.Y),[p,m]=(0,r.useState)(""),[u,x]=(0,r.useState)([]),[g,f]=(0,r.useState)([]),[v,b]=(0,r.useState)([]),[N,j]=(0,r.useState)(""),[D,w]=(0,r.useState)("All"),[A,S]=(0,r.useState)(1),[E,I]=(0,r.useState)(30),[C,k]=(0,r.useState)({searchError:!1,dateError:!1,noResults:!1});(0,r.useEffect)((()=>{let e=l.filter((e=>"Supervisor"===a&&"Cancelled"!==(null===e||void 0===e?void 0:e.empStatus)?e.supervisorEmpID===o:"Manager"!==a||"Approved"!==e.supervisorStatus&&e.supervisorEmpID||"Cancelled"===(null===e||void 0===e?void 0:e.empStatus)?("SuperAdmin"===a||"HR"===a)&&"Cancelled"!==(null===e||void 0===e?void 0:e.empStatus):e.managerEmpID===o)).sort(((e,t)=>new Date(t.leaveStatusCreatedAt)-new Date(e.leaveStatusCreatedAt)));"All"!==D&&(e=e.filter((e=>("Manager"===a?e.managerStatus:"Supervisor"===a?e.supervisorStatus:null)===D))),N&&(e=e.filter((e=>{const t=new Date(N),a=e.supervisorDate?new Date(e.supervisorDate):null,n=e.managerDate?new Date(e.managerDate):null,r=He(t),s=He(a),i=He(n);return s===r||i===r}))),f(e),x(e)}),[l,a,o,D,N]);const R=(A-1)*E,T=["S. No","Employee ID","Name","Received Date","Supervisor"!==a&&"Manager"!==a&&"Supervisor Name","Manager"!==a&&"Supervisor Approved Date","Manager"!==a&&"Supervisor"!==a&&"Manager Name","Supervisor"!==a&&"Manager Approved Date","Documents","Submitted Form","SuperAdmin"!==a&&"HR"!==a&&"Status"].filter(Boolean);(0,r.useEffect)((()=>{const e=(A-1)*E;let t=g;if(v.length>0){const e=new Set(v.map((e=>e.empID)));t=t.filter((t=>e.has(t.empID)))}const a=t.slice(e,e+E);x(a),0===v&&k({searchError:!0})}),[A,E,g,v]);const P=Math.ceil((v.length>0?v.length:g.length)/E);return d?(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"flex items-center justify-center h-[60vh]",children:(0,i.jsx)("p",{className:"text-sm font-semibold",children:"Loading..."})})}):(0,i.jsxs)("section",{className:"flex flex-col w-full mt-4",children:[(0,i.jsxs)("section",{className:"flex flex-wrap justify-between items-center mb-5",children:[(0,i.jsx)("div",{className:"",children:(0,i.jsx)(tl,{userType:a})}),(0,i.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,i.jsx)(aa,{allEmpDetails:g,searchIcon2:(0,i.jsx)(y.zfp,{}),placeholder:"Employee ID",searchUserList:x,border:"rounded-md"}),(0,i.jsx)("div",{className:"py-2  text_size_5 bg-white border rounded-md text-grey border-lite_grey flex items-center px-3 gap-2",children:(0,i.jsx)("input",{type:"date",name:"selectedDate",className:"text-grey outline-none",value:N||"",onChange:e=>{const t=e.target.value;j(t),b([]),S(1),k({searchError:!1,dateError:!1,noResults:!1})}})}),("Supervisor"===a||"Manager"===a)&&(0,i.jsx)(el,{name:D,AfterFilter:e=>{w(e),S(1),k({searchError:!1,dateError:!1,noResults:!1})}})]})]}),(0,i.jsx)("div",{className:"leaveManagementTable h-[70vh] max-h-[calc(70vh-7rem)] w-full overflow-y-auto rounded-xl ",children:u&&u.length>0?(0,i.jsxs)("table",{className:"w-full font-semibold text-sm text-center",children:[(0,i.jsx)("thead",{className:"bg-[#939393] sticky top-0 rounded-t-lg",children:(0,i.jsx)("tr",{children:T.map(((e,t)=>(0,i.jsx)("th",{className:"px-4 py-5 text-[15px] text-white",children:e},t)))})}),(0,i.jsx)("tbody",{children:u&&u.length>0?u.map(((n,r)=>{var s,l;const o=R+r+1,d=c.filter((e=>e.empID===n.managerEmpID)),u=c.filter((e=>e.empID===n.supervisorEmpID));return(0,i.jsxs)("tr",{className:"text-center text-sm shadow-[0_3px_6px_1px_rgba(0,0,0,0.2)] hover:bg-medium_blue",children:[(0,i.jsx)("td",{className:"py-3",children:o}),(0,i.jsx)("td",{className:"py-3",children:n.empID}),(0,i.jsx)("td",{className:"py-3",children:n.empName||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:He(n.leaveStatusCreatedAt)}),"Supervisor"!==a&&"Manager"!==a&&(0,i.jsx)("td",{className:"py-3",children:(null===(s=u[0])||void 0===s?void 0:s.name)||"N/A"}),"Manager"!==a&&(0,i.jsx)("td",{className:"py-3",children:He(n.supervisorDate)||"N/A"}),"Manager"!==a&&"Supervisor"!==a&&(0,i.jsx)("td",{className:"py-3",children:(null===(l=d[0])||void 0===l?void 0:l.name)||"N/A"}),"Supervisor"!==a&&(0,i.jsx)("td",{className:"py-3",children:He(n.managerDate)||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:(0,i.jsx)("a",{href:p,onClick:e=>{n.medicalCertificate?(async e=>{try{const t=await(0,h.I)({path:e});m(t.url.href)}catch(t){console.error("Error fetching the file URL:",t)}})(n.medicalCertificate):e.preventDefault()},download:!0,className:n.medicalCertificate?"border-b-2 border-[orange] text-[orange]":"",children:n.medicalCertificate?"Download":"N/A"})}),(0,i.jsx)("td",{className:"py-3 cursor-pointer",children:(0,i.jsx)("button",{className:"border-b-2 border-[blue] text-[blue]",onClick:()=>{e(),t(n,"LM")},children:n["submitted Form"]||"View"})}),(0,i.jsx)("td",{className:"font-semibold ".concat((x=n.managerStatus,"Rejected"===x?"text-[red]":"Approved"===x?"text-[#339933]":"text-[#E8A317]")),children:"Supervisor"===a&&n.supervisorStatus||"Manager"===a&&n.managerStatus})]},r);var x})):(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:T.length,className:"text-center py-4",children:C.searchError?(0,i.jsx)("p",{children:"No matching results found for your search"}):C.dateError?(0,i.jsx)("p",{children:"No records found for the selected date"}):(0,i.jsx)("p",{children:"No data available "})})})})]}):(0,i.jsx)("div",{className:"text-center mt-6 py-20",children:(0,i.jsx)("p",{children:"No matching results found for your search"})})}),(0,i.jsx)("div",{className:"ml-20 flex justify-center",children:(0,i.jsx)("div",{className:"w-[60%] flex justify-start mt-10 px-10",children:u&&u.length>0&&(0,i.jsx)(la,{currentPage:A,totalPages:P,onPageChange:e=>{e>=1&&e<=P&&S(e)}})})})]})},nl=()=>{const{userType:e,mergedData:t,userID:a,loading:s}=(0,n.KC)(),[l,o]=(0,r.useState)([]),[d,c]=(0,r.useState)([]),[p,m]=(0,r.useState)([]),[u,x]=(0,r.useState)(""),[h,g]=(0,r.useState)(1),[f,v]=(0,r.useState)(30),[b,N]=(0,r.useState)({searchError:!1,dateError:!1,noResults:!1}),j=(h-1)*f;(0,r.useEffect)((()=>{let n=t.filter((t=>"Supervisor"===e&&"Cancelled"!==(null===t||void 0===t?void 0:t.empStatus)&&"Approved"===t.managerStatus?t.supervisorEmpID===a:"Manager"!==e||"Approved"!==t.supervisorStatus&&t.supervisorEmpID||"Cancelled"===(null===t||void 0===t?void 0:t.empStatus)||"Approved"!==t.managerStatus?"SuperAdmin"===e||"HR"===e:t.managerEmpID===a)).sort(((e,t)=>new Date(t.leaveStatusCreatedAt)-new Date(e.leaveStatusCreatedAt)));u&&(n=n.filter((e=>{const t=new Date(u),a=e.empLeaveEndDate?new Date(e.empLeaveEndDate):null,n=e.empLeaveStartDate?new Date(e.empLeaveStartDate):null,r=He(t),s=He(a),i=He(n);return s===r||i===r}))),c(n),o(n)}),[t,e,a,u]);const D=["S.No","Employee ID","Name","Leave Type","Start Date","End Date","Reason","SuperAdmin"!==e&&"Status"];(0,r.useEffect)((()=>{const e=(h-1)*f;let t=d;if(p.length>0){const e=new Set(p.map((e=>e.empID)));t=t.filter((t=>e.has(t.empID)))}const a=t.slice(e,e+f);o(a)}),[h,f,d,p]);const w=Math.ceil((p.length>0?p.length:d.length)/f);return s?(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"flex items-center justify-center h-[60vh]",children:(0,i.jsx)("p",{className:"text-sm font-semibold",children:"Loading..."})})}):(0,i.jsxs)("section",{className:"py-5 w-full",children:[(0,i.jsxs)("section",{className:"flex flex-wrap justify-between items-center mb-5",children:[(0,i.jsx)("div",{className:"",children:(0,i.jsx)(tl,{userType:e})}),(0,i.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,i.jsx)(aa,{allEmpDetails:d,searchIcon2:(0,i.jsx)(y.zfp,{}),placeholder:"Employee ID",searchUserList:o,border:"rounded-md"}),(0,i.jsx)("div",{className:"py-2  text_size_5 bg-white border rounded-md text-grey border-lite_grey flex items-center px-3 gap-2",children:(0,i.jsx)("input",{type:"date",name:"selectedDate",className:"text-grey outline-none",value:u||"",onChange:e=>{const t=e.target.value;x(t),m([]),g(1),N({searchError:!1,dateError:!1,noResults:!1})}})})]})]}),(0,i.jsx)("div",{className:"leaveManagementTable h-[70vh] max-h-[calc(70vh-7rem)] max-w-[100%] overflow-x-auto rounded-xl",children:l&&l.length>0?(0,i.jsxs)("table",{className:"w-full font-semibold text-sm",children:[(0,i.jsx)("thead",{className:"bg-[#939393] sticky top-0 rounded-t-lg ",children:(0,i.jsx)("tr",{className:"",children:D.map(((e,t)=>(0,i.jsx)("th",{className:"px-4 py-5 text-[15px] text-white",children:e},t)))})}),(0,i.jsx)("tbody",{children:l&&l.map(((t,a)=>{const n=j+a+1;return(0,i.jsxs)("tr",{className:"text-center text-sm shadow-[0_3px_6px_1px_rgba(0,0,0,0.2)] hover:bg-medium_blue",children:[(0,i.jsx)("td",{className:"py-3",children:n}),(0,i.jsx)("td",{className:"py-3",children:t.empID}),(0,i.jsx)("td",{className:"py-3",children:t.empName||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:t.empLeaveType}),(0,i.jsx)("td",{className:"py-3",children:He(t.empLeaveStartDate)}),(0,i.jsx)("td",{className:"py-3",children:He(t.empLeaveEndDate)}),(0,i.jsx)("td",{className:"py-3 w-[20%] break-words overflow-hidden",children:t.reason}),(0,i.jsx)("td",{className:"font-semibold ".concat((r="Manager"===e?t.managerStatus:"Supervisor"===e?t.supervisorStatus:t.managerStatus,"Rejected"===r?"text-[red]":"Approved"===r?"text-[green]":"Pending"===r?"text-dark_grey":"text-[#E8A317]")),children:"Manager"===e?t.managerStatus||"not found":"Supervisor"===e||"HR"===e?t.supervisorStatus||"not found":""})]},a);var r}))})]}):(0,i.jsx)("div",{className:"text-center mt-6 py-20",children:(0,i.jsx)("p",{children:u?"No leave history found for ".concat(new Date(u).toLocaleDateString("en-GB")):"No matching results found for your search."})})}),(0,i.jsx)("div",{className:"ml-20 flex justify-center",children:(0,i.jsx)("div",{className:"w-[60%] flex justify-start mt-10 px-10",children:l&&l.length>0&&(0,i.jsx)(la,{currentPage:h,totalPages:w,onPageChange:e=>{e>=1&&e<=w&&g(e)}})})})]})},rl=e=>{let{handleClosePopup:t,mergedData:a,empDetails:n}=e;const[s,l]=(0,r.useState)(""),[o,d]=(0,r.useState)(""),[c,p]=(0,r.useState)({}),m=(0,r.useRef)(),u=(e,t)=>{const a=e.target.value;"startDate"===t?l(a):"endDate"===t&&d(a)},x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{total:t?null:e,taken:0,waitingLeave:0,remaining:t?null:e}},h=e=>{const t=new Date(e);return t.setHours(0,0,0,0),t};(0,r.useEffect)((()=>{(async()=>{const e=a.reduce(((e,t)=>{var a;e[t.empID]||(e[t.empID]={gender:t.gender,empId:t.empID,employeeName:t.empName,empBadgeNo:t.empBadgeNo,position:t.position,department:t.department,doj:t.doj,annualLeaveBal:t.empPervAnnualLeaveBal,compassionateLeave:x(0,!0),unPaidAuthorisedLeave:x(0,!0),annualLeave:x((a=Number(Array.isArray(t.annualLeave)&&t.annualLeave.length>0?t.annualLeave[t.annualLeave.length-1]:"string"===typeof t.annualLeave?parseFloat(t.annualLeave):0)+Number(t.empPervAnnualLeaveBal||0),parseFloat(a.toFixed(2)))),marriageLeave:x(Number(t.marriageLeave)||0),hospitalisationLeave:x(Number(t.hospitalLeave)),maternityLeave:x(Number(t.maternityLeave)),sickLeave:x(Number(t.sickLeave)),paternityLeave:x(Number(t.paternityLeave)||0),compensateLeave:x(0,!0)});const n={"Compassionate Leave":"compassionateLeave","Annual Leave":"annualLeave","Marriage Leave":"marriageLeave","Hospitalisation Leave":"hospitalisationLeave","Maternity Leave":"maternityLeave","Sick Leave":"sickLeave","Paternity Leave":"paternityLeave","Unpaid Authorize Leave":"unPaidAuthorisedLeave","Compensate Leave":"compensateLeave"}[t.empLeaveType],r=t.empLeaveStartDate,i=t.empLeaveEndDate,l=h(s),d=h(o),c=h(r),p=h(i);let m=!1;var u;if(s&&o?(c>=l&&c<=d&&(m=!0),p>=l&&p<=d&&(m=!0),c<=l&&p>=d&&(m=!0)):(u=t.empLeaveStartDate,m=(new Date).getFullYear()===new Date(u).getFullYear()),m&&n&&("Approved"===t.managerStatus&&"Cancelled"!==t.empStatus?e[t.empID][n].taken+=Number(t.leaveDays)||0:"Pending"===t.managerStatus&&"Rejected"!==t.supervisorStatus&&"Cancelled"!==t.empStatus&&(e[t.empID][n].waitingLeave+=Number(t.leaveDays)||0),!["compassionateLeave","unPaidAuthorisedLeave","compensateLeave"].includes(n))){const a=e[t.empID][n].total||0,r=e[t.empID][n].taken||0,s=e[t.empID][n].waitingLeave||0,i=Math.floor(a-(r+s));e[t.empID][n].remaining=i}return e}),{})[n.empID];p(e),console.log(c)})()}),[a,s,o,n]),console.log(c,"SM");const g=(0,dn.useReactToPrint)({content:()=>m.current,onBeforePrint:()=>console.log("Preparing print..."),onAfterPrint:()=>console.log("Print complete"),pageStyle:"print"});return(0,i.jsx)("section",{className:"fixed top-0 left-0 bg-grey z-50 w-full h-full flex flex-col items-center justify-center",children:(0,i.jsxs)("div",{className:"bg-white w-[70%] flex flex-col overflow-y-auto",children:[(0,i.jsxs)("div",{className:"py-10 px-10 flex justify-between items-center  gap-5 w-full",children:[(0,i.jsxs)("section",{className:"flex items-center gap-5 w-full ",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"start-date",className:"block text-[16px] font-medium",children:"Start Date"}),(0,i.jsx)("div",{className:"text_size_5 bg-white border py-2 rounded-md text-grey border-lite_grey flex items-center px-3 gap-2",children:(0,i.jsx)("input",{id:"start-date",type:"date",value:s,onChange:e=>u(e,"startDate"),className:"outline-none text-grey"})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"end-date",className:"block text-[16px] font-medium",children:"End Date"}),(0,i.jsx)("div",{className:"text_size_5 bg-white border py-2 rounded-md text-grey border-lite_grey flex items-center px-3 gap-2",children:(0,i.jsx)("input",{id:"end-date",type:"date",value:o,onChange:e=>u(e,"endDate"),className:"outline-none text-grey"})})]})]}),(0,i.jsx)("div",{children:(0,i.jsx)("button",{className:"text-4xl cursor-pointer text-grey",onClick:t,"aria-label":"Close Popup",children:(0,i.jsx)(Lr.oxH,{})})})]}),(0,i.jsxs)("div",{ref:m,id:"leaveSummary",className:"bg-white px-10 rounded-lg",children:[(0,i.jsxs)("div",{className:"flex flex-col justify-between items-center mb-2",children:[(0,i.jsx)("article",{className:"flex items-center justify-between w-full",children:(0,i.jsx)("div",{className:"flex-1 center",children:(0,i.jsx)("img",{className:"max-w-[240px] w-full",src:he.A,alt:"Company logo"})})}),(0,i.jsx)("p",{className:"text-center text-dark_grey text-lg font-semibold pt-3",children:(()=>{if(s&&o){const e=new Date(s).toLocaleDateString("en-US",{month:"long",year:"numeric"}),t=new Date(o).toLocaleDateString("en-US",{month:"long",year:"numeric"});return"".concat(e," - ").concat(t)}const e=new Date,t=e.toLocaleDateString("en-US",{month:"long"}),a=e.getFullYear();return"".concat(t," ").concat(a)})()}),(0,i.jsxs)("h2",{className:"uppercase text-xl text-center w-full font-medium mt-2",children:["Leave Summary for"," ",(0,i.jsx)("span",{className:"font-semibold italic",children:(null===c||void 0===c?void 0:c.employeeName)||"N/A"})]})]}),(0,i.jsxs)("div",{className:"mb-5",children:[(0,i.jsxs)("article",{className:"mb-3",children:[(0,i.jsxs)("h3",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Employee ID:"})," ",(null===c||void 0===c?void 0:c.empId)||"N/A"]}),(0,i.jsxs)("h3",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Badge No:"})," ",(null===c||void 0===c?void 0:c.empBadgeNo)||"N/A"]}),(0,i.jsxs)("h4",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Date of Join:"})," ",null!==c&&void 0!==c&&c.doj?(e=>{const[t,a,n]=null===e||void 0===e?void 0:e.split("-");"".concat(n,"/").concat(a,"/").concat(t);return"".concat(n,"/").concat(a,"/").concat(t)})(c.doj):"N/A"]}),(0,i.jsxs)("h4",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Position:"})," ",(null===c||void 0===c?void 0:c.position)||"N/A"]}),(0,i.jsxs)("h4",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Department:"})," ",(null===c||void 0===c?void 0:c.department)||"N/A"]})]}),(0,i.jsxs)("table",{className:"min-w-full bg-white text-sm font-semibold border",children:[(0,i.jsx)("thead",{className:"bg-gray-100",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"border px-4 py-2 text-sm",children:"Leave Type"}),(0,i.jsx)("th",{className:"border px-4 py-2 text-sm",children:"Total Leave"}),(0,i.jsx)("th",{className:"border px-4 py-2 text-sm",children:"Days Taken"}),(0,i.jsx)("th",{className:"border px-4 py-2 text-sm",children:"Waiting Approval"}),(0,i.jsx)("th",{className:"border px-4 py-2 text-sm",children:"Remaining Leave"})]})}),(0,i.jsx)("tbody",{children:["annualLeave","sickLeave","hospitalisationLeave","maternityLeave","paternityLeave","compensateLeave","compassionateLeave","marriageLeave","unPaidAuthorisedLeave"].map((e=>{const t=(null===c||void 0===c?void 0:c[e])||{},a=["compassionateLeave","unPaidAuthorisedLeave","compensateLeave"].includes(e);return console.log("Gender:",null===c||void 0===c?void 0:c.gender),"maternityLeave"===e&&"Female"!==(null===c||void 0===c?void 0:c.gender)||"paternityLeave"===e&&"Male"!==(null===c||void 0===c?void 0:c.gender)?(console.log("Skipping ".concat(e," for ").concat(null===c||void 0===c?void 0:c.gender)),null):(console.log("Rendering row for ".concat(e," for ").concat(null===c||void 0===c?void 0:c.gender)),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"border px-4 py-2",children:(n=e,n.replace(/Leave/g,"").replace(/^./,(e=>e.toUpperCase())).trim())}),(0,i.jsx)("td",{className:"border px-4 text-center py-2",children:a?"-":t.total||0}),(0,i.jsx)("td",{className:"border px-4 text-center py-2",children:t.taken||0}),(0,i.jsx)("td",{className:"border px-4 text-center py-2",children:t.waitingLeave||0}),(0,i.jsx)("td",{className:"border px-4 text-center py-2",children:a?"-":void 0!==t.remaining&&t.remaining>=0?t.remaining:0})]},e));var n}))})]}),(0,i.jsxs)("p",{className:"font-normal py-5",children:["Previous Year Annual Leave Balance: ",null===c||void 0===c?void 0:c.annualLeaveBal]})]})]}),(0,i.jsx)("div",{className:"flex items-center justify-center gap-40 py-5",children:(0,i.jsx)("button",{className:"bg-primary text-dark_grey text_size_3 rounded-md px-4 py-2 flex gap-2",onClick:g,children:"Print"})})]})})},sl=()=>{const{mergedData:e,userType:t,loading:a}=(0,n.KC)(),[s,l]=(0,r.useState)(!1),[o,d]=(0,r.useState)([]),[c,p]=(0,r.useState)([]),[m,u]=(0,r.useState)([]),[x,h]=(0,r.useState)(1),[g,f]=(0,r.useState)(30),[v,b]=(0,r.useState)([]),[N,j]=(0,r.useState)([]),[D,w]=(0,r.useState)(!1),A=["S.No","Employee ID","Employee Name","Employee BadgeNo","Date of Join","Position","Department","Summary"];console.log("DATA EMO LEAVE",e),(0,r.useEffect)((()=>{const a=localStorage.getItem("userID"),n=new Map;e.forEach((e=>{const t=e.empID,a=new Date(Math.max(new Date(e.leaveDetailsCreatedAt).getTime(),new Date(e.leaveDetailsUpdatedAt).getTime()));(!n.has(t)||a>new Date(Math.max(new Date(n.get(t).leaveDetailsCreatedAt).getTime(),new Date(n.get(t).leaveDetailsUpdatedAt).getTime())))&&n.set(t,e)}));const r=Array.from(n.values()).filter((e=>"Manager"===t?e.managerEmpID===a:"Supervisor"===t?e.supervisorEmpID===a:"SuperAdmin"===t||"HR"===t));p(r),b(r)}),[e,t]);(0,r.useEffect)((()=>{const e=(x-1)*g,t=o.length>0?o:c;if(0===t.length)return void u([]);const a=t.sort(((e,t)=>{const a=/\d+$/,n=e.empID.match(a)?e.empID.match(a)[0].padStart(5,"0"):"",r=t.empID.match(a)?t.empID.match(a)[0].padStart(5,"0"):"",s=e.empID.replace(a,"").toLowerCase(),i=t.empID.replace(a,"").toLowerCase();return s!==i?s.localeCompare(i):n.localeCompare(r)})).slice(e,e+g);u(a)}),[x,g,c,o]);const S=Math.ceil((o.length>0?o.length:c.length)/g),E=(x-1)*g;return a?(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"flex items-center justify-center h-[60vh]",children:(0,i.jsx)("p",{className:"text-sm font-semibold",children:"Loading..."})})}):(0,i.jsxs)("section",{className:"relative w-full",children:[(0,i.jsxs)("div",{className:"flex flex-wrap justify-between items-center mb-5",children:[(0,i.jsx)("div",{className:"",children:(0,i.jsx)(tl,{userType:t})}),(0,i.jsx)(aa,{allEmpDetails:c,searchIcon2:(0,i.jsx)(y.zfp,{}),placeholder:"Employee ID",searchUserList:async e=>{try{const t=await e;d(t||[]),w(!0),h(1)}catch(t){console.error("Error search data",t),d([]),w(!0)}},border:"rounded-md"})]}),(0,i.jsx)("div",{className:"leaveManagementTable h-[70vh] max-h-[calc(70vh-7rem)] w-full overflow-y-auto rounded-xl",children:D&&0===o.length?(0,i.jsx)("div",{className:"text-center mt-6 py-20",children:(0,i.jsx)("p",{className:"text-red-500 font-medium",children:"No matching results found for your search."})}):m.length>0?(0,i.jsxs)("table",{className:"w-full font-semibold text-sm",children:[(0,i.jsx)("thead",{className:"bg-[#939393] sticky top-0 rounded-t-lg",children:(0,i.jsx)("tr",{children:A.map(((e,t)=>(0,i.jsx)("th",{className:"px-4 py-5 text-[15px] text-white",children:e},t)))})}),(0,i.jsx)("tbody",{children:m&&m.length>0?m.map(((e,t)=>{const a=E+t+1;return(0,i.jsxs)("tr",{className:"text-center text-sm shadow-[0_3px_6px_1px_rgba(0,0,0,0.2)] hover:bg-medium_blue",children:[(0,i.jsx)("td",{className:"py-3",children:a}),(0,i.jsx)("td",{className:"py-3",children:e.empID}),(0,i.jsx)("td",{className:"py-3",children:e.empName||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:e.empBadgeNo||"N/A"}),(0,i.jsx)("td",{className:"py-3",children:He(e.doj)||"N/A"}),(0,i.jsxs)("td",{className:"py-3",children:[" ",Array.isArray(e.position)&&e.position[e.position.length-1]||"N/A"]}),(0,i.jsxs)("td",{className:"py-3",children:[" ",Array.isArray(e.department)&&e.department[e.department.length-1]||"N/A"]}),(0,i.jsx)("td",{className:"py-3",children:(0,i.jsx)("button",{onClick:()=>{j(e),l(!0),console.log(e)},className:"border-b-2 text-[blue]",children:"View"})})]},t)})):(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:A.length,className:"text-center py-4",children:"No data available"})})})]}):(0,i.jsx)("div",{className:"text-center mt-6 py-20",children:(0,i.jsx)("p",{className:"text-gray-600",children:"No leave data available for employees."})})}),s&&(0,i.jsx)(rl,{handleClosePopup:()=>{l(!1)},mergedData:e,formatDate:He,empDetails:N}),(0,i.jsx)("div",{className:"center my-10",children:(0,i.jsx)("div",{children:(0,i.jsx)(la,{currentPage:x,totalPages:S,onPageChange:e=>{e>=1&&e<=S&&h(e)}})})})]})},il=()=>{const{handleViewClick:e,handleClickForToggle:t,userType:a}=(0,n.KC)(),[s,l]=(0,r.useState)([]),[o,d]=(0,r.useState)([]),[c,p]=(0,r.useState)([]),[m,u]=(0,r.useState)(1),[h,g]=(0,r.useState)(30),[f,v]=(0,r.useState)([]),[b,N]=(0,r.useState)(""),[j,D]=(0,r.useState)("All"),{ticketMerged:w,loading:A}=_e(),[S,E]=(0,r.useState)({date:"",search:[],status:"All"}),[I,C]=(0,r.useState)({noResults:!1,searchError:!1,dateError:!1});(0,r.useEffect)((()=>{if(!S.date&&0===S.search.length&&"All"===S.status){const e=[...w].sort(((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)));return v(e),void C({noResults:!1,searchError:!1,dateError:!1})}let e=[...w],t=!1,a=!1,n=!1,r=!1;if("All"!==S.status&&(e=e.filter((e=>e.hrStatus===S.status))),S.date){t=!0;const a=new Date(S.date);a.setHours(0,0,0,0),e=e.filter((e=>{const t=null!==e&&void 0!==e&&e.departureDate?new Date(e.departureDate):null,r=null!==e&&void 0!==e&&e.arrivalDate?new Date(e.arrivalDate):null,s=null!==e&&void 0!==e&&e.createdAt?new Date(e.createdAt):null;t&&t.setHours(0,0,0,0),r&&r.setHours(0,0,0,0),s&&s.setHours(0,0,0,0);const i=[t,r,s].some((e=>e&&e.getTime()===a.getTime()));return i&&(n=!0),i}))}S.search.length>0&&(a=!0,e=e.filter((e=>{const t=S.search.some((t=>t.empID===e.empID));return t&&(r=!0),t}))),v(e),p([]),u(1);const s=0===e.length;C({noResults:s,searchError:!r,dateError:t&&!n})}),[S,w]),(0,r.useEffect)((()=>{if(!f.length)return void p([]);const e=(m-1)*h,t=[...f].sort(((e,t)=>{const a=/\d+$/,n=e.empID.match(a)?e.empID.match(a)[0].padStart(5,"0"):"",r=t.empID.match(a)?t.empID.match(a)[0].padStart(5,"0"):"",s=e.empID.replace(a,"").toLowerCase(),i=t.empID.replace(a,"").toLowerCase();return s!==i?s.localeCompare(i):n.localeCompare(r)})).slice(e,e+h);p(t)}),[m,h,f]);const k=Math.ceil(f.length/h),R=(m-1)*h,T=["S.No","Emp ID","Name","Department","Position","Date Join","Departure date","Arrival date","Submitted form","SuperAdmin"!==a&&"Status"];return(0,r.useEffect)((()=>{const e=w.sort(((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)));d(e),v(e)}),[w]),A?(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"flex items-center justify-center h-[60vh]",children:(0,i.jsx)("p",{className:"text-sm font-semibold",children:"Loading..."})})}):(console.log(A),(0,i.jsxs)("section",{className:"w-full",children:[(0,i.jsxs)("div",{className:"flex justify-between flex-wrap mb-5",children:[(0,i.jsx)("div",{children:(0,i.jsx)(tl,{userType:a})}),(0,i.jsxs)("div",{className:"flex  flex-wrap items-center gap-2",children:[(0,i.jsx)("div",{children:(0,i.jsx)(aa,{allEmpDetails:o,searchIcon2:(0,i.jsx)(y.zfp,{}),placeholder:"Employee ID",searchUserList:async e=>{try{const t=await e;l(t),0===t.length?(v([]),p([]),C((e=>(0,x.A)((0,x.A)({},e),{},{searchError:!0,noResults:!0})))):(E((e=>(0,x.A)((0,x.A)({},e),{},{search:t}))),C((e=>(0,x.A)((0,x.A)({},e),{},{searchError:!1,noResults:!1}))))}catch(t){console.error("Error search data",t),v([]),p([]),C((e=>(0,x.A)((0,x.A)({},e),{},{searchError:!0,noResults:!0})))}},border:"rounded-md"})}),(0,i.jsx)("div",{className:"text_size_5 bg-white border py-2 rounded-md text-grey border-lite_grey flex items-center px-3 gap-2",children:(0,i.jsx)("input",{type:"date",name:"selectedDate",className:"text-grey outline-none",value:b||"",onChange:e=>{const t=e.target.value;N(t),E((e=>(0,x.A)((0,x.A)({},e),{},{date:t})))}})}),"HR"===a&&(0,i.jsx)("div",{children:(0,i.jsx)(el,{name:j,AfterFilter:e=>{D(e),E((t=>(0,x.A)((0,x.A)({},t),{},{status:e})))}})})]})]}),(0,i.jsx)("div",{className:"leaveManagementTable h-[70vh] max-h-[calc(70vh-7rem)] w-full overflow-y-auto rounded-xl ",children:I.noResults?(0,i.jsx)("div",{className:"text-center mt-6 py-20",children:(0,i.jsx)("p",{children:"No matching results found for your search."})}):c&&c.length>0?(0,i.jsxs)("table",{className:"w-full font-semibold text-sm",children:[(0,i.jsx)("thead",{className:"bg-[#939393] sticky top-0 rounded-t-lg",children:(0,i.jsx)("tr",{className:"px-6",children:T.map(((e,t)=>(0,i.jsx)("th",{className:"py-5 text-[15px] text-white",children:e},t)))})}),(0,i.jsx)("tbody",{children:c.map(((n,r)=>{const s=R+r+1;return(0,i.jsxs)("tr",{className:"text-center text-sm shadow-[0_3px_6px_1px_rgba(0,0,0,0.2)] hover:bg-medium_blue",children:[(0,i.jsx)("td",{className:"border-b-2  border-[#CECECE] py-5",children:s}),(0,i.jsx)("td",{className:"border-b-2  border-[#CECECE] py-5",children:null===n||void 0===n?void 0:n.empID}),(0,i.jsx)("td",{className:"border-b-2  border-[#CECECE] py-5",children:(null===n||void 0===n?void 0:n.empName)||"N/A"}),(0,i.jsx)("td",{className:"border-b-2 border-[#CECECE] py-5",children:Array.isArray(n.department)&&n.department[n.department.length-1]||"N/A"}),(0,i.jsx)("td",{className:"border-b-2 border-[#CECECE] py-5",children:Array.isArray(n.position)&&n.position[n.position.length-1]||"N/A"}),(0,i.jsx)("td",{className:"border-b-2  border-[#CECECE] py-5",children:He(n.createdAt)}),(0,i.jsx)("td",{className:"border-b-2  border-[#CECECE] py-5",children:He(n.departureDate)}),(0,i.jsx)("td",{className:"border-b-2  border-[#CECECE] py-5",children:He(n.arrivalDate)}),(0,i.jsx)("td",{className:"border-b-2  border-[#CECECE] cursor-pointer py-5",children:(0,i.jsx)("span",{className:"border-b-2 text-[blue] ",onClick:()=>{t(),e(n,"Tickets")},children:"View"})}),"SuperAdmin"!==a&&(0,i.jsx)("td",{className:"border-b-2 border-[#CECECE] py-5 ".concat("Rejected"===n.hrStatus?"text-[red]":"Approved"===n.hrStatus?"text-[#339933]":"Pending"===n.hrStatus?"text-[#E8A317]":""),children:n.hrStatus})]},r)}))})]}):(0,i.jsx)("div",{className:"text-center mt-6 py-20",children:(0,i.jsx)("p",{children:"All"!==S.status?'No tickets found with status "'.concat(S.status,'".'):I.dateError?"No tickets found for the selected date.":"No tickets available."})})}),(0,i.jsx)("div",{className:"center pt-10",children:(0,i.jsx)("div",{children:(0,i.jsx)(la,{currentPage:m,totalPages:k,onPageChange:e=>{e>=1&&e<=k&&u(e)}})})})]}))},ll=e=>{var t;let{data:a,loading:n,setTableData:s,message:l}=e;(0,r.useEffect)((()=>{if(!1===n){const e=document.querySelectorAll("tbody tr"),t=Array.from(e).map((e=>{const t=e.querySelectorAll("td");return Array.from(t).map((e=>e.innerText))}));(()=>{setTimeout((()=>{t&&s(t)}),1e3)})()}}),[n,a]);const o=e=>{try{const[t,a,n]=e.split("/");return"".concat(a,"/").concat(t,"/").concat(n)}catch(t){}},d=e=>{try{const t=String(e),a=new Date(t),n=a.getDate(),r=a.getMonth()+1,s=a.getFullYear(),i=(null===t||void 0===t?void 0:t.split(" ")[1])+" "+(null===t||void 0===t?void 0:t.split(" ")[2]);return"".concat(n,"/").concat(r,"/").concat(s," ").concat(i)}catch(t){}};return(0,i.jsx)("tbody",{children:!1===n&&a&&(null===a||void 0===a?void 0:a.length)>0?a.map(((e,t)=>(e=>{var a,n;return(0,i.jsxs)("tr",{className:"text-dark_grey h-[53px]  bg-white text-sm rounded-sm shadow-md text-start border-b-2 border-[#CECECE]",children:[(0,i.jsx)("td",{className:"text-start px-4 flex-1",children:t+1}),(0,i.jsx)("td",{className:"text-start px-4 flex-1",children:null===e||void 0===e?void 0:e.fidNo}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:null===e||void 0===e?void 0:e.empName}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:o(null===e||void 0===e?void 0:e.date)}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:d((null===e||void 0===e||null===(a=e.inTime)||void 0===a?void 0:a.replace(/[\[\]]/g,""))||"")}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:d((null===e||void 0===e||null===(n=e.outTime)||void 0===n?void 0:n.replace(/[\[\]]/g,""))||"")}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.avgDailyTD)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.totalHrs)||""}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:null===e||void 0===e?void 0:e.aweSDN}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.normalWorkHrs)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.actualWorkHrs)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:(null===e||void 0===e?void 0:e.totalOT)||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:null===e||void 0===e?void 0:e.remarks})]},t)})(e))):null!==(t=(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"100%",className:"text-center text-dark_ash text_size_5 bg-white",children:(0,i.jsx)("p",{className:"p-5",children:l||"Please wait few seconds"})})}))&&void 0!==t?t:(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"50",className:"text-center text-dark_ash text_size_5 bg-white"})})})},ol=e=>{var t;let{data:a,loading:n,setTableData:s,message:l}=e;(0,r.useEffect)((()=>{if(!1===n){const e=document.querySelectorAll("tbody tr"),t=Array.from(e).map((e=>{const t=e.querySelectorAll("td");return Array.from(t).map((e=>e.innerText))}));(()=>{setTimeout((()=>{t&&s(t)}),1e3)})()}}),[n,a]);const o=e=>{try{const[t,a,n]=e.split("/");return"".concat(a,"/").concat(t,"/").concat(n)}catch(t){}};return(0,i.jsx)("tbody",{children:!1===n&&a&&(null===a||void 0===a?void 0:a.length)>0?a.map(((e,t)=>{return a=e,(0,i.jsxs)("tr",{className:"text-dark_grey h-[53px] bg-white text-sm rounded-sm shadow-md text-start border-b-2 border-[#CECECE]",children:[(0,i.jsx)("td",{className:"text-start px-4 flex-1",children:t+1}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.ctr}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.empDept}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.empID}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.empBadgeNo}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.empName}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:o(a.date)}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.onAM}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.offAM}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.onPM}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.offPM}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.inTime}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.outTime}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.totalInOut||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.allDayHrs||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.netMins||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.totalHrs||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.normalWorkHrs||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.actualWorkHrs||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.otTime||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.remarks})]},t);var a})):null!==(t=(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"100%",className:"text-center text-dark_ash text_size_5 bg-white",children:(0,i.jsx)("p",{className:"p-5",children:l||"Please wait few seconds."})})}))&&void 0!==t?t:(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"15",className:"text-center text-dark_ash text_size_5 bg-white"})})})},dl=e=>{var t;let{data:a,loading:n,setTableData:s,message:l}=e;(0,r.useEffect)((()=>{if(!1===n){const e=document.querySelectorAll("tbody tr"),t=Array.from(e).map((e=>{const t=e.querySelectorAll("td");return Array.from(t).map((e=>e.innerText))}));(()=>{setTimeout((()=>{t&&s(t)}),1e3)})()}}),[n,a]);const o=e=>{try{const[t,a,n]=e.split("/");return"".concat(a,"/").concat(t,"/").concat(n)}catch(t){}};return(0,i.jsx)("tbody",{children:!1===n&&a&&(null===a||void 0===a?void 0:a.length)>0?a.map(((e,t)=>{return a=e,(0,i.jsxs)("tr",{className:"text-dark_grey h-[53px] bg-white text-sm rounded-sm shadow-md text-start border-b-2 border-[#CECECE]",children:[(0,i.jsx)("td",{className:"text-start px-4 flex-1",children:t+1}),(0,i.jsx)("td",{className:"text-start px-4 flex-1",children:a.empName}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.fidNo}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.companyName}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:o(a.date)}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.totalNT}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.totalOT}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.totalNTOT||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.normalWorkHrs||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.actualWorkHrs||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.otTime||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.remarks})]},t);var a})):null!==(t=(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"100%",className:"text-center text-dark_ash text_size_5 bg-white",children:(0,i.jsx)("p",{className:"p-5",children:l||"Please wait few seconds..."})})}))&&void 0!==t?t:(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"100%",className:"text-center text-dark_ash text_size_5 bg-white"})})})},cl=e=>{var t;let{data:a,loading:n,setTableData:s,message:l}=e;(0,r.useEffect)((()=>{if(!1===n){const e=document.querySelectorAll("tbody tr"),t=Array.from(e).map((e=>{const t=e.querySelectorAll("td");return Array.from(t).map((e=>e.innerText))}));(()=>{setTimeout((()=>{t&&s(t)}),1e3)})()}}),[n,a]);const o=e=>{try{const[t,a,n]=e.split("/");return"".concat(a,"/").concat(t,"/").concat(n)}catch(t){}};return(0,i.jsx)("tbody",{children:!1===n&&a&&(null===a||void 0===a?void 0:a.length)>0?a.map(((e,t)=>{return a=e,(0,i.jsxs)("tr",{className:"text-dark_grey h-[53px] bg-white text-sm rounded-sm shadow-md text-start border-b-2 border-[#CECECE]",children:[(0,i.jsx)("td",{className:"text-start px-4 flex-1",children:t+1}),(0,i.jsx)("td",{className:"text-start px-4 flex-1",children:a.empName}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.empDept}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.empBadgeNo}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:o(a.date)}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.inTime}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.outTime}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.totalInOut}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.allDayHrs}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.netMins}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.totalHrs}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.normalWorkHrs||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.actualWorkHrs||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.otTime||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.remarks})]},t);var a})):null!==(t=(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"100%",className:"text-center text-dark_ash text_size_5 bg-white",children:(0,i.jsx)("p",{className:"p-5",children:l||"Please wait few seconds."})})}))&&void 0!==t?t:(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"100%",className:"text-center text-dark_ash text_size_5 bg-white"})})})},pl=e=>{var t;let{data:a,loading:n,setTableData:s,message:l}=e;(0,r.useEffect)((()=>{if(!1===n){const e=document.querySelectorAll("tbody tr"),t=Array.from(e).map((e=>{const t=e.querySelectorAll("td");return Array.from(t).map((e=>e.innerText))}));(()=>{setTimeout((()=>{t&&s(t)}),1e3)})()}}),[n,a]);const o=e=>{try{const[t,a,n]=e.split("/");return"".concat(a,"/").concat(t,"/").concat(n)}catch(t){}};return(0,i.jsx)("tbody",{children:!1===n&&a&&(null===a||void 0===a?void 0:a.length)>0?a.map(((e,t)=>{return a=e,(0,i.jsxs)("tr",{className:"text-dark_grey h-[53px] bg-white text-sm rounded-sm shadow-md text-start border-b-2 border-[#CECECE]",children:[(0,i.jsx)("td",{className:"text-start px-4 flex-1",children:t+1}),(0,i.jsx)("td",{className:"text-start px-4 flex-1",children:a.empName}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.empDept}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.empBadgeNo}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:o(a.date)}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.inTime}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.outTime}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.totalInOut}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.allDayHrs}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.netMins}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.totalHrs}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.normalWorkHrs||0}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.actualWorkHrs}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.otTime}),(0,i.jsx)("td",{className:"text-center px-4 flex-1",children:a.remarks})]},t);var a})):null!==(t=(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"100%",className:"text-center text-dark_ash text_size_5 bg-white",children:(0,i.jsx)("p",{className:"p-5",children:l||"Please wait few seconds."})})}))&&void 0!==t?t:(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"100%",className:"text-center text-dark_ash text_size_5 bg-white"})})})},ml=e=>{var t,a;let{}=e;const[s,l]=(0,r.useState)(!0),[o,d]=(0,r.useState)(""),[c,p]=(0,r.useState)(null),[m,u]=(0,r.useState)(null),[x,h]=(0,r.useState)(null),[g,f]=(0,r.useState)(null),{showListTimeSheet:v,timeSheetFileData:y,startDate:b,endDate:N,searchQuery:j}=(localStorage.getItem("timeSheetData"),ht()),D=(0,n.Zp)();(0,r.useLayoutEffect)((()=>{if(!0===v){const e=window.location.pathname;"/viewTsheetDetails"!==e&&"/viewTsheetDetails/"!==e||D("/viewTimesheet")}}),[]),(0,r.useEffect)((()=>{y&&localStorage.setItem("timeSheetData",null===y||void 0===y?void 0:y.updatedAt)}),[y]);const w=Vr(g);console.log(w);const{handleScroll:A,visibleData:S,setVisibleData:E}=as(m,"TimeKeeper");return console.log(x),(0,r.useEffect)((()=>{if(!x||0===x.length)return u([]),E([]),l(!1),void d("No matching results found.");let e=[...x];if(j&&(e=j,E(e)),b&&N){console.log(b&&N);const t=new Date(b),a=new Date(N);e=e.filter((e=>{const n=new Date(e.date.split("/").reverse().join("-"));return n>=t&&n<=a}))}u(e),E(e.length>0?e:[]),l(!1)}),[x,b,N,j]),(0,r.useEffect)((()=>{y&&y&&(u(null),h(null),E([]),u(null===y||void 0===y?void 0:y.updatedAt),h(null===y||void 0===y?void 0:y.updatedAt),f(null===y||void 0===y?void 0:y.fileType))}),[y]),(0,r.useEffect)((()=>{setTimeout((()=>{l(!1)}),3e3)}),[m]),(0,i.jsxs)("section",{className:"h-screen bg-[#fafaf6]",children:[(0,i.jsx)(Ts,{}),(0,i.jsx)("div",{className:"screen-size",children:(0,i.jsx)("div",{className:"table-container",onScroll:A,children:(0,i.jsxs)("table",{className:"styled-table w-[100%]",children:[(0,i.jsx)("thead",{className:"sticky-header",children:(0,i.jsxs)("tr",{className:"text_size_7",children:["HO"!==g&&(0,i.jsx)("td",{className:"px-5 text-center",children:"S No."}),null!==(t=null===w||void 0===w||null===(a=w.tableHeader)||void 0===a?void 0:a.map(((e,t)=>(0,i.jsx)("td",{className:"px-4 flex-1 text-center",children:e},t))))&&void 0!==t?t:(0,i.jsx)("td",{colSpan:"100%",className:"text-center",children:"No headers available"})]})}),"BLNG"===g&&(0,i.jsx)(ll,{data:S,loading:s,setTableData:p,message:o}),"HO"===g&&(0,i.jsx)(ol,{data:S,loading:s,setTableData:p,message:o}),"SBW"===g&&(0,i.jsx)(pl,{data:S,loading:s,setTableData:p,message:o}),"ORMC"===g&&(0,i.jsx)(cl,{data:S,loading:s,setTableData:p,message:o}),"Offshore"===g&&(0,i.jsx)(dl,{data:S,loading:s,setTableData:p,message:o})]})})}),(0,i.jsx)("div",{className:"flex justify-center p-7",children:(0,i.jsx)("button",{className:"rounded px-3 py-2 bg-[#FEF116] text_size_5 text-dark_grey",onClick:()=>{((e,t)=>{try{if(e&&t){const a=document.querySelectorAll("table thead tr"),n=Array.from(a).map((e=>{const t=e.querySelectorAll("td");return Array.from(t).map((e=>e.innerText))})),r=new(Gi().Workbook),s=r.addWorksheet("".concat(e)),i=s.addRow(n[0]);i.height=30,s.columns=n[0].map((e=>({header:e,width:e.length<20?20:e.length})));const l={style:"thin",color:{argb:"FF000000"}};i.eachCell((e=>{e.font={bold:!0,size:12,color:{argb:"f9f9f9"}},e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"78716c"}},e.alignment={horizontal:"left"}})),t.forEach((e=>{s.addRow(e)})),s.eachRow(((e,t)=>{1!==t&&e.eachCell((e=>{e.font={size:12,color:{argb:"FF000000"}},e.alignment={horizontal:"left"}})),e.border={top:l,left:l,bottom:l,right:l}})),r.xlsx.writeBuffer().then((t=>{const a=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,$i.saveAs)(a,"".concat(e,".xlsx"))}))}}catch(a){}})(g||"TimeSheet",c)},children:"Download"})})]})},ul=e=>{let{tableBody:t,tableHead:a,title:s,allData:l,handleViewDetails:o,handleDate:d}=e;const[c,p]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[x,h]=(0,r.useState)(""),[g,f]=(0,r.useState)(1),v=e=>{if(!e)return null;const[t,a,n]=e.split("-");return new Date("".concat(n,"-").concat(a,"-").concat(t))},y=null===t||void 0===t?void 0:t.filter((e=>{const t=c.toLowerCase(),a=String(e.name||"").toLowerCase().includes(t)||String(e.empID||"").toLowerCase().includes(t)||String(e.empBadgeNo||"").toLowerCase().includes(t)||String(e.department||"").toLowerCase().includes(t)||String(e.position||"").toLowerCase().includes(t);if(m&&x){const e=v(l.doj);if(!e)return!1;const t=v(m),n=v(x);return!(!t||!n)&&(a&&e>=t&&e<=n)}return a})),b=Math.ceil(y.length/30),N=y.slice(30*(g-1),30*g),j=e=>{e>=1&&e<=b&&f(e)};return(0,i.jsxs)("div",{className:"w-full px-7",children:[(0,i.jsxs)("div",{className:"w-full flex items-center justify-between gap-5 ",children:[(0,i.jsx)(n.N_,{to:"/reports",className:"text-xl flex-1 text-grey ",children:(0,i.jsx)(Lt.QVr,{})}),(0,i.jsx)("div",{className:"flex-1",children:(0,i.jsx)("h1",{className:"text-xl flex  font-bold center my-10 uppercase ",children:s})}),(0,i.jsx)("div",{className:"text-center flex flex-col flex-1 gap-4 items-end",children:(0,i.jsx)("input",{type:"text",placeholder:"Search Result",value:c,onChange:e=>p(e.target.value),className:"outline-none rounded-lg px-4 py-2 shadow-md border border-[#C5C5C5]"})})]}),(0,i.jsxs)("div",{className:"flex justify-between items-end w-full",children:[(0,i.jsxs)("div",{className:"flex justify-center items-center gap-5",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"start-date",className:"block text-[16px] font-medium",children:"Start Date"}),(0,i.jsx)("input",{id:"start-date",type:"date",onChange:e=>d(e,"startDate"),className:"outline-none text-grey border rounded-md p-2"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"end-date",className:"block text-[16px] font-medium",children:"End Date"}),(0,i.jsx)("input",{id:"end-date",type:"date",onChange:e=>d(e,"endDate"),className:"outline-none text-grey border rounded-md p-2"})]})]}),(0,i.jsx)("div",{className:"text-center",children:(0,i.jsx)("button",{onClick:()=>{const e=e=>e.replace(/([A-Z])/g," $1").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/_/g," ").toUpperCase(),t=y.map((t=>{const a={};for(const[n,r]of Object.entries(t)){const t=e(n);Array.isArray(r)?a[t]=r.join(", "):a[t]=r}return a})),a=ws.Wp.json_to_sheet(t),n=[];t.forEach((e=>{Object.entries(e).forEach(((e,t)=>{let[a,r]=e;const s=r?r.toString().length:0;(!n[t]||s>n[t])&&(n[t]=s)}))}));const r=n.map((e=>({wpx:Math.max(7*e,120)})));a["!cols"]=r,console.log("Generated Excel Worksheet with Auto Column Widths:",a);const s=ws.Wp.book_new();ws.Wp.book_append_sheet(s,a,"Sheet1"),console.log("Generated Workbook:",s),ws._h(s,"FilteredTable.xlsx")},class:"bg-[#FEF116] text-dark_grey w-[126px] p-3 rounded",children:"Download"})})]}),(null===N||void 0===N?void 0:N.length)>0?(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"w-full overflow-x-auto overflow-y-auto h-[500px] scrollbar-hide shadow-lg my-5",children:(0,i.jsxs)("table",{className:" border-collapse w-full ",children:[(0,i.jsx)("thead",{className:"w-full",children:(0,i.jsx)("tr",{className:"bg-[#C5C5C5] rounded-sm",children:a.map(((e,t)=>(0,i.jsx)("th",{className:"px-6 py-5 text-[15px] text-secondary w-full",children:(0,i.jsx)("span",{className:"w-[120px] center uppercase",children:e})},t)))})}),(0,i.jsx)("tbody",{className:"bg-white",children:N.map(((e,t)=>(0,i.jsxs)("tr",{className:"text-sm border-b-2 border-[#CECECE]",children:[Object.entries(e).map(((e,t)=>{let[a,n]=e;const r="expAndValid"===a&&"EXPIRED"===n;return(0,i.jsx)("td",{className:"border-b-2 text-center border-[#CECECE] p-2 ".concat(r?"text-[red]":""),children:Array.isArray(n)?"".concat(n[n.length-1]):"".concat(n)},t)})),"Probation Review"===s&&(0,i.jsx)("td",{className:"underline text-center border-[#CECECE] p-2 cursor-pointer text-[blue]",onClick:()=>o(e),children:"View Details"}),"Recruitment & Mobilization"===s&&(0,i.jsx)("td",{className:"underline text-center border-[#CECECE] p-2 cursor-pointer text-[blue]",onClick:()=>o(e),children:"View Details"}),"Contract Expiry Review"===s&&(0,i.jsx)("td",{className:"underline text-center border-[#CECECE] p-2 cursor-pointer text-[blue]",onClick:()=>o(e),children:"View Details"})]},t)))})]})})}):(0,i.jsx)("div",{className:"text-center mt-10",children:"No Report List Available Here"}),(0,i.jsx)("div",{className:"flex justify-center w-full my-5",children:(0,i.jsx)("div",{className:"flex justify-center gap-6 w-3/5 items-center",children:b>1&&(0,i.jsxs)("div",{className:"flex justify-center gap-4 my-4",children:[(0,i.jsxs)("button",{onClick:()=>j(g-1),disabled:1===g,className:"flex items-center gap-2 border border-[#5A5858] text-sm text-dark_grey rounded-lg hover:bg-gray-200 px-5 py-2 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors duration-200",children:[(0,i.jsx)(Lt.QVr,{className:"text-[16px]"}),(0,i.jsx)("span",{children:"Previous"})]}),(()=>{const e=[];if(b<=4)for(let t=1;t<=b;t++)e.push(t);else{let t=Math.max(g-1,1),a=t+3;a>b&&(a=b,t=Math.max(a-3,1));for(let n=t;n<=a;n++)e.push(n)}return e})().map((e=>(0,i.jsx)("button",{onClick:()=>j(e),className:"w-8 h-8 p-4 flex items-center justify-center text-sm font-medium rounded-full ".concat(g===e?"bg-[indigo] shadow-md text-white":"bg-gray-200 text-dark_grey"),children:e},e))),(0,i.jsxs)("button",{onClick:()=>j(g+1),disabled:g===b,className:"flex items-center gap-2 border border-[#5A5858] text-sm text-dark_grey rounded-lg  px-5 py-2 ",children:[(0,i.jsx)("span",{children:"Next"}),(0,i.jsx)(Lt.Z0P,{className:"text-[16px]"})]})]})})})]})},xl=()=>{const e=(0,n.zy)(),{allData:t,title:a}=e.state||{},[s,l]=(0,r.useState)(null),[o,d]=(0,r.useState)([]),[c,p]=(0,r.useState)([]),[m,u]=(0,r.useState)(""),[x,h]=(0,r.useState)(""),[g]=(0,r.useState)(["Emp ID","Employee Badge","Employee Name","Gender","Date of Birth","Date of Joined","Nationality","Position","Contact No","Type of Application: Local/LPA/SAWP","CV Received Form","Brunei I/C No","Brunei I/C Expiry","Malaysian IC No","Passport No","Passport Expiry","Employee Pass Expiry","Department","Contract Start Date","Contract End Date","Previous Company Name","View All Details"]),f=e=>{if(!e)return"-";const t=new Date(e);if(isNaN(t.getTime()))return"-";const a=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();return"".concat(a,"-").concat(n,"-").concat(r)},v=e=>Array.isArray(e)?e.map((e=>({empID:e.empID||"-",empBadgeNo:e.empBadgeNo||"-",name:e.name||"-",gender:e.gender||"-",dateOfBirth:f(e.dob)||"-",dateOfJoin:f(e.doj)||"-",nationality:e.nationality||"-",position:e.position||"-",contactNo:e.contactNo||"-",contractType:e.contractType||"-",cvReceived:e.cvReceived||"-",BruneiIcNo:e.bwnIcNo||"-",BruneiIcExpiry:Array.isArray(e.bwnIcExpiry)?f(e.bwnIcExpiry[e.bwnIcExpiry.length-1]):"-",MalaysianIcNo:e.myIcNo||"-",PassportNo:e.ppNo||"-",PassportExpiry:Array.isArray(e.ppExpiry)?f(e.ppExpiry[e.ppExpiry.length-1]):"-",employeePassExpiry:Array.isArray(e.empPassExp)?f(e.empPassExp[e.empPassExp.length-1]):"-",department:e.department||"-",contractStart:Array.isArray(e.contractStart)?f(e.contractStart[e.contractStart.length-1]):"-",contractEnd:Array.isArray(e.contractEnd)?f(e.contractEnd[e.contractEnd.length-1]):"-",PreviousEmployment:e.preEmp||"-"}))):[];(0,r.useEffect)((()=>{t&&d(v(t))}),[t]);return(0,i.jsxs)("div",{children:[(0,i.jsx)(ul,{tableBody:c.length?c:o,tableHead:g,title:a,handleDate:(e,a)=>{const n=e.target.value;"startDate"===a&&u(n),"endDate"===a&&h(n);const r="startDate"===a?new Date(n):m?new Date(m):null,s="endDate"===a?new Date(n):x?new Date(x):null,i=t.filter((e=>{const t=e.doj?new Date(e.doj):null;return!(!t||isNaN(t.getTime()))&&(r&&s?t>=r&&t<=s:r?t>=r:!s||t<=s)})).map((e=>({empID:e.empID||"-",empBadgeNo:e.empBadgeNo||"-",name:e.name||"-",gender:e.gender||"-",dateOfBirth:f(e.dob)||"-",dateOfJoin:f(e.doj)||"-",nationality:e.nationality||"-",position:e.position||"-",contactNo:e.contactNo||"-",contractType:e.contractType||"-",cvReceived:e.cvReceived||"-",BruneiIcNo:e.bwnIcNo||"-",BruneiIcExpiry:Array.isArray(e.bwnIcExpiry)?f(e.bwnIcExpiry[e.bwnIcExpiry.length-1]):"-",MalaysianIcNo:e.myIcNo||"-",PassportNo:e.ppNo||"-",PassportExpiry:Array.isArray(e.ppExpiry)?f(e.ppExpiry[e.ppExpiry.length-1]):"-",employeePassExpiry:Array.isArray(e.empPassExp)?f(e.empPassExp[e.empPassExp.length-1]):"-",department:e.department||"-",contractStart:Array.isArray(e.contractStart)?f(e.contractStart[e.contractStart.length-1]):"-",contractEnd:Array.isArray(e.contractEnd)?f(e.contractEnd[e.contractEnd.length-1]):"-",PreviousEmployment:e.preEmp||"-"})));p(i)},handleViewDetails:e=>{const a=t.find((t=>t.empID===e.empID));l(a?v([a]):null)}}),s&&(0,i.jsx)("div",{className:"fixed inset-0 center z-50 bg-black bg-opacity-50",children:(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-1/2 max-h-[80vh] overflow-y-auto scrollBar",children:[(0,i.jsxs)("section",{className:"flex justify-between gap-10 items-center mb-5",children:[(0,i.jsx)("div",{className:"w-full flex-1 center",children:(0,i.jsx)("img",{className:"max-w-[200px]",src:he.A,alt:"Logo"})}),(0,i.jsx)("button",{className:"text-[24px] rounded",onClick:()=>{l(null)},children:(0,i.jsx)(b.RQJ,{})})]}),(0,i.jsx)("h2",{className:"text-xl font-semibold underline text-center mb-5",children:"Recruitment & Mobilization"}),s[0]&&(0,i.jsx)("div",{className:"flex flex-col justify-evenly pl-20 ",children:(0,i.jsxs)("table",{className:"table-auto w-full text-left ",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"px-4 py-2 font-medium",children:"Field Name"}),(0,i.jsx)("th",{className:"px-4 py-2 font-medium",children:":"}),(0,i.jsx)("th",{className:"px-4 py-2 font-medium",children:"Value"})]})}),(0,i.jsx)("tbody",{children:Object.entries(s[0]).map((e=>{let[t,a]=e;return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"px-4 py-2 font-medium",children:(n=t,n.replace(/([A-Z])/g," $1").replace(/_/g," ").replace(/^\w/,(e=>e.toUpperCase())))}),(0,i.jsx)("td",{className:"px-4 py-2",children:":"}),(0,i.jsx)("td",{className:"px-4 py-2",children:a})]},t);var n}))})]})})]})})]})},hl=()=>{const e=(0,n.zy)(),{allData:t,title:a}=e.state||{},[s,l]=(0,r.useState)([]),[o,d]=(0,r.useState)([]),[c,p]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[x,h]=(0,r.useState)(["Emp ID","Badge No","Name","Date of join","Nationality","Department","Position","Date of Resignation","Reason of Resignation"]),g=(e,t)=>{if(Array.isArray(e)){if(0===e.length)return"-";const a=e[e.length-1];return g(a,t)}if(!e)return"-";const a=new Date(e);if(isNaN(a.getTime()))return"-";const n=String(a.getDate()).padStart(2,"0"),r=String(a.getMonth()+1).padStart(2,"0"),s=a.getFullYear();return"".concat(n,"-").concat(r,"-").concat(s)};(0,r.useEffect)((()=>{const e=(e=>null===e||void 0===e?void 0:e.filter((e=>null===e||void 0===e?void 0:e.resignDate)).map((e=>({empID:e.empID||"-",empBadgeNo:e.empBadgeNo||"-",name:e.name||"-",doj:e.doj||"-",nationality:e.nationality||"-",department:e.department||"-",position:e.position||"-",resignDate:g(e.resignDate)||"-",reasonResign:e.reasonResign||"-"}))))(t);l(e)}),[t]);return(0,i.jsx)("div",{children:(0,i.jsx)(ul,{tableBody:o.length?o:s,tableHead:x,title:a,handleDate:(e,a)=>{const n=e.target.value;"startDate"===a&&p(n),"endDate"===a&&u(n);const r="startDate"===a?new Date(n):c?new Date(c):null,s="endDate"===a?new Date(n):m?new Date(m):null,i=t.filter((e=>{const t=e.resignDate?new Date(e.resignDate):null;return!(!t||isNaN(t.getTime()))&&(r&&s?t>=r&&t<=s:r?t>=r:!s||t<=s)})).map((e=>({empID:e.empID||"-",empBadgeNo:e.empBadgeNo||"-",name:e.name||"-",doj:e.doj||"-",nationality:e.nationality||"-",department:e.department||"-",position:e.position||"-",resignDate:g(e.resignDate)||"-",reasonResign:e.reasonResign||"-"})));d(i)}})})},gl=()=>((0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]),(0,i.jsxs)("section",{className:"min-h-screen p-10 bg-[#F5F6F1CC] flex flex-col gap-16",children:[(0,i.jsx)("div",{className:"w-full flex items-center justify-between gap-5",children:(0,i.jsx)(n.N_,{to:"/training",className:"text-xl flex-1 text-grey",children:(0,i.jsx)(ia.QVr,{})})}),(0,i.jsxs)("div",{className:" flex gap-16",children:[(0,i.jsx)(P,{img:O,text1:"Add",fontSize:"text_size_5 ",borderColor:"border-[#7DA2F2]",bgColor:"bg-white",link:"/trainingReq/add"}),(0,i.jsx)(P,{img:_,text1:"VIEW",fontSize:"text_size_5 ",borderColor:"border-[#B240FF]",bgColor:"bg-white",link:"/trainingReq/view"})]})]})),fl=()=>{const{empPIData:e,trainingCertifi:t,AddEmpReq:a,workInfoData:l}=(0,r.useContext)(s.Y),[o,d]=(0,r.useState)(""),[c,p]=(0,r.useState)(""),[m,u]=(0,r.useState)([]),[h,g]=(0,r.useState)([]),[f,v]=(0,r.useState)(!0),[y,b]=(0,r.useState)(null),N={trainCertifi:[{header:"Employee ID",key:"empID"},{header:"Name",key:"name"},{header:"Department",key:"department"},{header:"Certificate Expiry",key:"certifiExpiry"},{header:"E-certificate Date",key:"eCertifiDate"}]},j=(e,t)=>{const a=e.target.value;"startDate"===t&&d(a),"endDate"===t&&p(a);const n="startDate"===t?new Date(a):o?new Date(o):null,r="endDate"===t?new Date(a):c?new Date(c):null,s=m.filter((e=>{const t=new Date(e.certifiExpiry);return n&&r?t>=n&&t<=r:n?t>=n:!r||t<=r}));g(s)},D=e=>{if(!e)return"N/A";const t=new Date(e);if(isNaN(t))return"Invalid Date";const a=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getFullYear();return"".concat(a,"/").concat(n,"/").concat(r)};if((0,r.useEffect)((()=>{(()=>{if(e&&t&&a&&l)try{const n=e.map((e=>{const n=t.find((t=>t.empID===e.empID)),r=a.find((t=>t.empID===e.empID)),s=l.find((t=>t.empID===e.empID));return(0,x.A)((0,x.A)((0,x.A)((0,x.A)({},e),n),r),s)})).filter(Boolean),r=n.map((e=>Object.fromEntries(Object.entries(e).map((e=>{let[t,a]=e;if(Array.isArray(a)){return[t,a[a.length-1]]}return[t,a]}))))).filter((e=>{const t=e.department||"",a=e.certifiExpiry||"";return"BLNG"===t&&a}));u(r),g(r),v(!1)}catch(n){b("Error merging and filtering data."),v(!1)}else b("Required data is missing."),v(!1)})()}),[e,t,a,l]),f)return(0,i.jsx)("div",{children:"Loading..."});if(y)return(0,i.jsxs)("div",{children:["Error: ",y]});const w=h.map((e=>(0,x.A)((0,x.A)({},e),{},{certifiExpiry:D(e.certifiExpiry),orgiCertifiDate:D(e.orgiCertifiDate),eCertifiDate:D(e.eCertifiDate)})));return(0,i.jsxs)("section",{className:"bg-[#F8F8F8] mx-auto p-5 h-full w-full",children:[(0,i.jsxs)("div",{className:"w-full flex items-center justify-between gap-5 my-5 ",children:[(0,i.jsx)(n.N_,{to:"/training",className:"text-xl  text-grey",children:(0,i.jsx)(ia.QVr,{})}),(0,i.jsx)("article",{className:"flex-1 flex gap-5 text-dark_grey justify-center",children:(0,i.jsx)("h1",{className:"text-center mt-2 text_size_2 relative after:absolute after:w-full after:h-1 after:bg-primary after:-bottom-2 after:left-0",children:"BLNG Training Certificates"})})]}),(0,i.jsx)("div",{className:"px-4 relative ",children:(0,i.jsx)("div",{className:"absolute z-20 top-3 flex items-center gap-5",children:(0,i.jsxs)("div",{className:" flex items-center  gap-5 w-full ",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"start-date",className:"block text-[16px] font-medium",children:"Start Date"}),(0,i.jsx)("input",{id:"start-date",type:"date",value:o,onChange:e=>j(e,"startDate"),className:"outline-none text-grey border rounded-md p-2"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"end-date",className:"block text-[16px] font-medium",children:"End Date"}),(0,i.jsx)("input",{id:"end-date",type:"date",value:c,onChange:e=>j(e,"endDate"),className:"outline-none text-grey border rounded-md p-2"})]})]})})}),(0,i.jsx)(Qi,{mergering:w,columns:null===N||void 0===N?void 0:N.trainCertifi,popupAll:[{header:"Employee ID",key:"empID"},{header:"Employee Badge No",key:"empBadgeNo"},{header:"Name",key:"name"},{header:"Department",key:"department"},{header:"Course",key:"courseCode"},{header:"Course Name",key:"courseName"},{header:"Company",key:"company"},{header:"Purchase Order No",key:"poNo"},{header:"Expiry Condition",key:"addDescretion"},{header:"Date E-certificate",key:"eCertifiDate"},{header:"Training Certificate Expiry",key:"certifiExpiry"},{header:"Original Certificate",key:"orgiCertifiDate"},{header:"Upload File",key:"trainingUpCertifi"}]})]})},vl=()=>((0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]),(0,i.jsxs)("section",{className:"min-h-screen p-10 bg-[#F5F6F1CC] flex flex-col gap-16",children:[(0,i.jsx)("div",{className:"w-full flex items-center justify-between gap-5",children:(0,i.jsx)(n.N_,{to:"/training",className:"text-xl flex-1 text-grey",children:(0,i.jsx)(ia.QVr,{})})}),(0,i.jsxs)("div",{className:" flex gap-16",children:[(0,i.jsx)(P,{img:O,text1:"Add Course",fontSize:"text_size_5 ",borderColor:"border-[#7DA2F2]",bgColor:"bg-white",link:"/training/AcTc"}),(0,i.jsx)(P,{img:O,text1:"Training Certificate",fontSize:"text_size_5 ",borderColor:"border-[#7DA2F2]",bgColor:"bg-white",link:"/training/trainingCertify"}),(0,i.jsx)(P,{img:_,text1:"Head Office",fontSize:"text_size_5 ",borderColor:"border-[#B240FF]",bgColor:"bg-white",link:"/training/tcView"})]})]})),yl=()=>{const{empPIData:e,trainingCertifi:t,AddEmpReq:a,workInfoData:l}=(0,r.useContext)(s.Y),o={trainCertifi:[{header:"Employee ID",key:"empID"},{header:"Name",key:"name"},{header:"Department",key:"department"},{header:"Certificate Expiry",key:"certifiExpiry"},{header:"E-certificate Date",key:"eCertifiDate"}]},d=e=>{if(!e)return"N/A";const t=new Date(e);if(isNaN(t))return"Invalid Date";const a=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getFullYear();return"".concat(a,"/").concat(n,"/").concat(r)},[c,p]=(0,r.useState)([]),[m,u]=(0,r.useState)([]),[h,g]=(0,r.useState)(!0),[f,v]=(0,r.useState)(null);if((0,r.useEffect)((()=>{(()=>{if(e&&t&&a&&l)try{const n=e.map((e=>{const n=t.find((t=>t.empID===e.empID)),r=a.find((t=>t.empID===e.empID)),s=l.find((t=>t.empID===e.empID));return(0,x.A)((0,x.A)((0,x.A)((0,x.A)({},e),n),r),s)})).filter(Boolean),r=n.map((e=>Object.fromEntries(Object.entries(e).map((e=>{let[t,a]=e;if(Array.isArray(a)){return[t,a[a.length-1]]}return[t,a]}))))).filter((e=>{const t=e.department||"",a=e.certifiExpiry||"";return"BLNG"!==t&&"Offshore"!==t&&a}));p(r),u(r),g(!1)}catch(n){v("Error merging and filtering data."),g(!1)}else v("Required data is missing."),g(!1)})()}),[e,t,a,l]),h)return(0,i.jsx)("div",{children:"Loading..."});if(f)return(0,i.jsxs)("div",{children:["Error: ",f]});const y=c.map((e=>(0,x.A)((0,x.A)({},e),{},{department:Array.isArray(e.department)&&e.department.length>0?e.department[e.department.length-1]:e.department||"-",certifiExpiry:d(e.certifiExpiry),orgiCertifiDate:d(e.orgiCertifiDate),eCertifiDate:d(e.eCertifiDate)})));return(0,i.jsxs)("section",{className:"bg-[#F8F8F8] mx-auto p-5 h-full w-full",children:[(0,i.jsxs)("div",{className:"w-full flex items-center justify-between gap-5 my-5 ",children:[(0,i.jsx)(n.N_,{to:"/training/hr",className:"text-xl  text-grey",children:(0,i.jsx)(ia.QVr,{})}),(0,i.jsx)("article",{className:"flex-1 flex gap-5 text-dark_grey justify-center",children:(0,i.jsx)("h1",{className:"text-center mt-2 text_size_2 relative after:absolute after:w-full after:h-1 after:bg-primary after:-bottom-2 after:left-0",children:"View Training Certificates"})})]}),(0,i.jsx)(Qi,{mergering:y,columns:null===o||void 0===o?void 0:o.trainCertifi,popupAll:[{header:"Employee ID",key:"empID"},{header:"Employee Badge No",key:"empBadgeNo"},{header:"Name",key:"name"},{header:"Department",key:"department"},{header:"Course",key:"courseCode"},{header:"Course Name",key:"courseName"},{header:"Company",key:"company"},{header:"Purchase Order No",key:"poNo"},{header:"Expiry Condition",key:"addDescretion"},{header:"Date E-certificate",key:"eCertifiDate"},{header:"Training Certificate Expiry",key:"certifiExpiry"},{header:"Original Certificate",key:"orgiCertifiDate"},{header:"Upload File",key:"trainingUpCertifi"}]})]})},bl=()=>{const{empPIData:e,workInfoData:t,trainingCertifi:a,AddEmpReq:l}=(0,r.useContext)(s.Y);(0,r.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]);const{TCData:o}=(()=>{const e=(0,ge.D)();return{TCData:(0,r.useCallback)((async t=>{let{TCValue:a}=t;if(!a)throw new Error("Missing required parameters");const n={empID:a.empID,certifiExpiry:[a.certifiExpiry],eCertifiDate:[a.eCertifiDate],trainingUpCertifi:[JSON.stringify(a.trainingUpCertifi)],orgiCertifiDate:[a.orgiCertifiDate],poNo:[a.poNo],addDescretion:[a.addDescretion]};console.log(n);try{const t=await Promise.all([e.graphql({query:"\n  mutation CreateTrainingCertificates(\n    $input: CreateTrainingCertificatesInput!\n    $condition: ModelTrainingCertificatesConditionInput\n  ) {\n    createTrainingCertificates(input: $input, condition: $condition) {\n      id\n      empID\n      certifiExpiry\n      eCertifiDate\n      trainingUpCertifi\n      orgiCertifiDate\n      poNo\n      addDescretion\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:n}})]);console.log(t,"successfully stored data")}catch(r){throw console.error("Error executing GraphQL requests:",r),r}}),[])}})(),{TCDataFunUp:d}=(()=>{const e=(0,ge.D)();return{TCDataFunUp:(0,r.useCallback)((async t=>{let{TCDataUp:a}=t;if(!a)throw new Error("Missing required parameters");const n={id:a.id,empID:a.empID,certifiExpiry:[a.certifiExpiry],eCertifiDate:[a.eCertifiDate],trainingUpCertifi:[JSON.stringify(a.trainingUpCertifi)],orgiCertifiDate:[a.orgiCertifiDate],poNo:[a.poNo],addDescretion:[a.addDescretion]};try{await Promise.all([e.graphql({query:"\n  mutation UpdateTrainingCertificates(\n    $input: UpdateTrainingCertificatesInput!\n    $condition: ModelTrainingCertificatesConditionInput\n  ) {\n    updateTrainingCertificates(input: $input, condition: $condition) {\n      id\n      empID\n      certifiExpiry\n      eCertifiDate\n      trainingUpCertifi\n      orgiCertifiDate\n      poNo\n      addDescretion\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:n,limit:2e4}})])}catch(r){throw console.log(r),console.error("Error executing GraphQL requests:",r),r}}),[])}})(),[c,p]=(0,r.useState)(!1),[m,u]=(0,r.useState)([]),[h,g]=(0,r.useState)([]),[f,v]=(0,r.useState)([]),[b,N]=(0,r.useState)(""),[j,D]=(0,r.useState)({trainingUpCertifi:null}),[w,A]=(0,r.useState)({trainingUpCertifi:[]});(0,r.useEffect)((()=>{(async()=>{try{const n=e.map((e=>{const n=t?t.find((t=>t.empID===e.empID)):{},r=a?a.find((t=>t.empID===e.empID)):{},s=l?l.find((t=>t.empID===e.empID)):{};return(0,x.A)((0,x.A)((0,x.A)((0,x.A)({},e),n),r),s)})).filter(Boolean);u(n),g(n)}catch(n){console.log(n)}})()}),[e,t,a,l]);const{register:S,handleSubmit:E,setValue:I,watch:C,formState:{errors:k}}=(0,it.mN)({resolver:(0,lt.t)(_s)}),R=C("empID"),T=C("trainingUpCertifi","");return(0,i.jsxs)("section",{className:"space-y-5 bg-[#F8F8F8]  mt-10 py-5 px-8 rounded-xl  text_size_6 text-dark_grey",children:[(0,i.jsxs)("div",{className:" w-full flex items-center justify-center gap-5 my-10",children:[(0,i.jsx)(n.N_,{to:"/training/hr",className:"text-xl flex-1 text-grey",children:(0,i.jsx)(ia.QVr,{})}),(0,i.jsx)("article",{className:"w-full  center gap-5 text-dark_grey ",children:(0,i.jsx)("p",{className:"text-center mt-2 text_size_2 relative after:absolute after:w-full after:h-1 after:bg-primary after:-bottom-2 after:left-0",children:"Training Certificate"})})]}),(0,i.jsxs)("div",{className:"mt-16 mb-16 w-full rounded-md bg-white px-20 py-10",children:[(0,i.jsx)("div",{className:"flex-1 w-[30%] mt-5",children:(0,i.jsx)(Wn,{searchResult:e=>{console.log("Search result:",e);["empID","empBadgeNo","name","position"].forEach((t=>{e[t]&&I(t,e[t])})),["department","courseCode","courseName","company","certifiExpiry","eCertifiDate","orgiCertifiDate","poNo","addDescretion"].forEach((t=>{const a=(e=>Array.isArray(e)?e[e.length-1]:e)(e[t]);a&&I(t,a)})),["trainingUpCertifi"].forEach((t=>{if(e[t])try{const a=JSON.parse(null===e||void 0===e?void 0:e[t][0]);if(I(t,a),A((e=>(0,x.A)((0,x.A)({},e),{},{[t]:a}))),Array.isArray(a)&&a.length>0){const e=a[a.length-1],n=null!==e&&void 0!==e&&e.upload?e.upload.split("/").pop().split(".").slice(0,-1).join("."):"Unknown file";D((e=>(0,x.A)((0,x.A)({},e),{},{[t]:n})))}}catch(a){console.error("Error parsing upload field ".concat(t,":"),a)}}))},newFormData:h,searchIcon2:(0,i.jsx)(y.zfp,{}),placeholder:"Employee Id",rounded:"rounded-lg",filteredEmployees:f,setFilteredEmployees:v})}),(0,i.jsxs)("form",{onSubmit:E((async e=>{try{const t=a?a.find((t=>t.empID===e.empID)):{};if(t){const a=(0,x.A)((0,x.A)({},e),{},{trainingUpCertifi:w.trainingUpCertifi,id:t.id});await d({TCDataUp:a}),N("Training Certificate Details Updated successfully"),p(!0)}else{const t=(0,x.A)((0,x.A)({},e),{},{trainingUpCertifi:w.trainingUpCertifi});await o({TCValue:t}),N("Training Certificate Details Saved successfully"),p(!0)}}catch(t){console.log(t)}})),children:[(0,i.jsx)("div",{className:"flex justify-end  items-center py-5 mt-2",children:(0,i.jsxs)("div",{className:"max-w-sm",children:[(0,i.jsx)("label",{className:"text_size_5",children:"Employee ID"})," ",(0,i.jsx)("br",{}),(0,i.jsx)("input",(0,x.A)({type:"text",className:"input-field"},S("empID"))),k.empID&&(0,i.jsx)("p",{className:"text-[red] text-[12px]",children:k.empID.message})]})}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-6 ",children:[(0,i.jsxs)("div",{className:"mb-2",children:[(0,i.jsx)("label",{className:"text_size_5",children:"Employee Name"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text"},S("name")),{},{className:"input-field"}))]}),(0,i.jsxs)("div",{className:"mb-2",children:[(0,i.jsx)("label",{className:"text_size_5",children:"Employee Badge Number"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text"},S("empBadgeNo")),{},{className:"input-field"}))]}),(0,i.jsx)(ut,{label:"Department",register:S,name:"department",type:"text",errors:k}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{htmlFor:"courseSelect",className:"font-semibold",children:"Select Course:"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text"},S("courseCode")),{},{className:"input-field"}))]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"text_size_5",children:"Training Course Name"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text"},S("courseName")),{},{className:"input-field"}))]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"text_size_5",children:"Training Company"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({type:"text"},S("company")),{},{className:"input-field"}))]}),(0,i.jsxs)("div",{className:"mb-2",children:[" ",(0,i.jsx)("label",{className:"text_size_5",children:"Purchase Order (PO) Number"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({},S("poNo")),{},{className:"input-field",type:"text"})),k.poNo&&(0,i.jsx)("p",{className:"text-[red] text-[13px] mt-1",children:k.poNo.message})]}),(0,i.jsxs)("div",{className:"mb-2",children:[" ",(0,i.jsx)("label",{className:"text_size_5",children:"Expiry Condition"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({},S("addDescretion")),{},{className:"input-field",type:"text"})),k.addDescretion&&(0,i.jsx)("p",{className:"text-[red] text-[13px] mt-1",children:k.addDescretion.message})]}),(0,i.jsxs)("div",{className:"mb-2",children:[" ",(0,i.jsx)("label",{className:"text_size_5",children:"Date received E-certificate"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({},S("eCertifiDate")),{},{className:"input-field",type:"date"})),k.eCertifiDate&&(0,i.jsx)("p",{className:"text-[red] text-[13px] mt-1",children:k.eCertifiDate.message})]}),(0,i.jsxs)("div",{className:"mb-2",children:[" ",(0,i.jsx)("label",{className:"text_size_5",children:"Date received Original Certificate"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({},S("orgiCertifiDate")),{},{className:"input-field",type:"date"})),k.orgiCertifiDate&&(0,i.jsx)("p",{className:"text-[red] text-[13px] mt-1",children:k.orgiCertifiDate.message})]}),(0,i.jsxs)("div",{className:"mb-2",children:[(0,i.jsx)("label",{className:"text_size_5",children:"Training Certificate Expiry"}),(0,i.jsx)("input",(0,x.A)((0,x.A)({},S("certifiExpiry")),{},{className:"input-field",type:"date"})),k.certifiExpiry&&(0,i.jsx)("p",{className:"text-[red] text-[13px] mt-1",children:k.certifiExpiry.message})]}),(0,i.jsx)(Da,{label:"Upload File",onChangeFunc:e=>(async(e,t)=>{if(!R)return void alert("Please enter the Employee ID before uploading files.");const a=e.target.files[0];if(!a)return;if(!["application/pdf"].includes(a.type))return void alert("Upload must be a PDF file ");const n=C(t)||[];I(t,[...n,a]);try{await pt(a,t,A,R),D((e=>(0,x.A)((0,x.A)({},e),{},{[t]:a.name})))}catch(r){console.log(r)}})(e,"trainingUpCertifi"),register:S,name:"trainingUpCertifi",error:k,fileName:j.trainingUpCertifi||(P=T,"string"===typeof P&&P?P.split("/").pop():"")})]}),(0,i.jsx)("div",{className:"center py-5",children:(0,i.jsx)("button",{type:"submit",className:"primary_btn",children:"Submit"})})]})]}),c&&(0,i.jsx)(Le,{text:b,notification:c,path:"/training/hr"})]});var P},Nl=()=>{const{IDData:e}=(0,r.useContext)(s.Y),{SubmitEIData:t}=tr(),{UpdateEIValue:a}=ar();console.log(e);return(0,i.jsxs)("div",{className:"flex flex-col gap-40",children:["IDDetailsMD",(0,i.jsx)("button",{onClick:async()=>{},children:"Click Here"})]})},jl=()=>{const[e,t]=(0,r.useState)(null),{empPIData:a}=(0,r.useContext)(s.Y),{SubmitEIData:n}=tr(),{UpdateEIValue:l}=ar();console.log(a);return(0,i.jsxs)("div",{className:"flex flex-col gap-40",children:["EmpPersonalinfoMD",(0,i.jsx)("button",{onClick:async()=>{try{const e=await Wi.A.get("https://commonfiles.s3.ap-southeast-1.amazonaws.com/BulkDataFiles/PersonalInfo+Prod/EmpPersonnelInfo+10.csv",{responseType:"arraybuffer"}),t=new Uint8Array(e.data);console.log(t);const r=ws.LF(t,{type:"array"}),s=r.SheetNames[0],i=r.Sheets[s],o=ws.Wp.sheet_to_json(i,{header:1}),d=o.slice(1).map((e=>{let t={};return o[0].forEach(((a,n)=>{let r=e[n];"dob"!==a||isNaN(r)||(r=(e=>{const t=new Date(Date.UTC(1900,0,1)),a=e-2;return new Date(t.getTime()+24*a*60*60*1e3)})(r).toISOString().split("T")[0]),"familyDetails"===a&&(r=JSON.stringify(r)),t[a]=void 0!==r?String(r):r})),t}));for(const c of d){if(!c.empID)continue;c.empID&&(c.empID=String(c.empID)),console.log(c);const e=a.find((e=>{var t,a;return(null===e||void 0===e||null===(t=e.empID)||void 0===t?void 0:t.toString().toLowerCase())===(null===c||void 0===c||null===(a=c.empID)||void 0===a?void 0:a.toString().toLowerCase())}));if(e){console.log(c,"update");const t=(0,x.A)((0,x.A)({},c),{},{PITableID:e.id});await l({collectValue:t})}else console.log(c,"create"),await n({empValue:c})}}catch(e){console.error("Error fetching Excel file:",e)}},children:"Click Here"})]})},Dl=()=>{const{workInfoData:e}=(0,r.useContext)(s.Y),{SubmitWIData:t}=sr(),{WIUpdateData:a}=lr();console.log(e);return(0,i.jsxs)("div",{className:"flex flex-col gap-40",children:["WorkInfoMD",(0,i.jsx)("button",{onClick:async()=>{try{const n=await Wi.A.get("https://commonfiles.s3.ap-southeast-1.amazonaws.com/BulkDataFiles/EmpWorkInfo/EmpWorkInfo+5.csv",{responseType:"arraybuffer"}),r=new Uint8Array(n.data);console.log(r);const s=ws.LF(r,{type:"array"}),i=s.SheetNames[0],l=s.Sheets[i],o=ws.Wp.sheet_to_json(l,{header:1}),d=["doj","contractStart","contractEnd","probationEnd","probationStart","upgradeDate"],c=o.slice(1).map((e=>{let t={};return o[0].forEach(((a,n)=>{let r=e[n];d.includes(a)&&!isNaN(r)&&(r=(e=>{const t=new Date(Date.UTC(1900,0,1)),a=e-2;return new Date(t.getTime()+24*a*60*60*1e3)})(r).toISOString().split("T")[0]),t[a]=void 0!==r?String(r):r})),t}));for(const p of c){if(!p.empID)continue;p.empID&&(p.empID=String(p.empID)),console.log(p);const n=e.find((e=>e.empID===p.empID));if(n){console.log(p,"update");const e=(0,x.A)((0,x.A)({},p),{},{workInfoDataRecord:n});await a({workInfoUpValue:e})}else console.log(p,"create"),await t({workInfoValue:p})}}catch(n){console.error("Error fetching Excel file:",n)}},children:"Click Here"})]})},wl=()=>{const{EmpInsuranceData:e}=(0,r.useContext)(s.Y),{SubmitMPData:t}=Nr(),{UpdateEIDataSubmit:a}=jr();console.log(e);return(0,i.jsxs)("div",{className:"flex flex-col gap-40",children:["EmpInsuranceMD",(0,i.jsx)("button",{onClick:async()=>{try{const n=await Wi.A.get("https://commonfiles.s3.ap-southeast-1.amazonaws.com/BulkDataFiles/EmpInsurance+Prod/EmpInsurance.csv",{responseType:"arraybuffer"}),r=new Uint8Array(n.data);console.log(r);const s=ws.LF(r,{type:"array"}),i=s.SheetNames[0],l=s.Sheets[i],o=ws.Wp.sheet_to_json(l,{header:1}),d=["doj","contractStart","contractEnd","probationEnd","probationStart","upgradeDate"],c=o.slice(1).map((e=>{let t={};return o[0].forEach(((a,n)=>{let r=e[n];d.includes(a)&&!isNaN(r)&&(r=(e=>{const t=new Date(Date.UTC(1900,0,1)),a=e-2;return new Date(t.getTime()+24*a*60*60*1e3)})(r).toISOString().split("T")[0]),t[a]=void 0!==r?String(r):r})),t}));for(const p of c){if(!p.empID)continue;p.empID&&(p.empID=String(p.empID)),console.log(p);const n=e.find((e=>e.empID===p.empID));if(n){console.log(p,"update");const e=(0,x.A)((0,x.A)({},p),{},{id:n.id});await a({empInsValue:e})}else console.log(p,"create"),await t({empInsValue:p})}}catch(n){console.error("Error fetching Excel file:",n)}},children:"Click Here"})]})},Al=()=>{const{leaveDetailsData:e}=(0,r.useContext)(s.Y),{SubmitWIData:t}=sr(),{WIUpdateData:a}=lr();console.log(e);return(0,i.jsxs)("div",{className:"flex flex-col gap-40",children:["LeaveDetailsMD",(0,i.jsx)("button",{onClick:async()=>{try{const n=await Wi.A.get("https://commonfiles.s3.ap-southeast-1.amazonaws.com/BulkDataFiles/EmpLeaveDetails+Prod/EmpLeaveDetails+4.csv",{responseType:"arraybuffer"}),r=new Uint8Array(n.data);console.log(r);const s=ws.LF(r,{type:"array"}),i=s.SheetNames[0],l=s.Sheets[i],o=ws.Wp.sheet_to_json(l,{header:1}),d=["dateLeavePass","annualLeaveDate","sickLeaveDate"],c=o.slice(1).map((e=>{let t={};return o[0].forEach(((a,n)=>{let r=e[n];d.includes(a)&&!isNaN(r)&&(r=(e=>{const t=new Date(Date.UTC(1900,0,1)),a=e-2;return new Date(t.getTime()+24*a*60*60*1e3)})(r).toISOString().split("T")[0]),t[a]=void 0!==r?String(r):r})),t}));for(const p of c){p.empID&&(p.empID=String(p.empID)),console.log(p);const n=e.find((e=>e.empID===p.empID));if(n){console.log(p,"update");const e=(0,x.A)((0,x.A)({},p),{},{leaveDetailsDataRecord:n});await a({workInfoUpValue:e})}else console.log(p,"create"),await t({workInfoValue:p})}}catch(n){console.error("Error fetching Excel file:",n)}},children:"Click Here"})]})},Sl=()=>{const{NLAData:e}=(0,r.useContext)(s.Y),{NLADatas:t}=Ir(),{NLAUpdateFun:a}=Cr();console.log(e);return(0,i.jsxs)("div",{className:"flex flex-col gap-40",children:["NonLocalAccMD",(0,i.jsx)("button",{onClick:async()=>{try{const n=await Wi.A.get("https://commonfiles.s3.ap-southeast-1.amazonaws.com/BulkDataFiles/Non-Local+Accommodation/EmployeeNonLocalAccom.csv",{responseType:"arraybuffer"}),r=new Uint8Array(n.data);console.log(r);const s=ws.LF(r,{type:"array"}),i=s.SheetNames[0],l=s.Sheets[i],o=ws.Wp.sheet_to_json(l,{header:1}),d=o.slice(1).map((e=>{let t={};return o[0].forEach(((a,n)=>{let r=e[n];t[a]=void 0!==r?String(r):r})),t}));for(const c of d){if(!c.empID)continue;c.empID&&(c.empID=String(c.empID));const n=e.find((e=>e.empID===c.empID));if(n){console.log(c,"update");const e=(0,x.A)((0,x.A)({},c),{},{IDTable:n.id});await a({NLAValue:e})}else console.log(c,"create"),await t({NLACreValue:c})}}catch(n){console.error("Error fetching Excel file:",n)}},children:"Click Here"})]})},El=()=>{const{DNData:e}=(0,r.useContext)(s.Y),{CrerDoeFunData:t}=Vs(),{UpdateMPData:a}=Ys();console.log(e);return(0,i.jsxs)("div",{className:"flex flex-col gap-40",children:["DNDetailsMD",(0,i.jsx)("button",{onClick:async()=>{try{const n=await Wi.A.get("https://commonfiles.s3.ap-southeast-1.amazonaws.com/BulkDataFiles/DNDetails+Prod/DNDetails+2.csv",{responseType:"arraybuffer"}),r=new Uint8Array(n.data);console.log(r);const s=ws.LF(r,{type:"array"}),i=s.SheetNames[0],l=s.Sheets[i],o=ws.Wp.sheet_to_json(l,{header:1}),d=["doeEmpValid","nlmsEmpValid","doeEmpSubmit","doeEmpApproval","nlmsEmpApproval","nlmsEmpSubmit"],c=o.slice(1).map((e=>{let t={};return o[0].forEach(((a,n)=>{let r=e[n];d.includes(a)&&!isNaN(r)&&(r=(e=>{const t=new Date(Date.UTC(1900,0,1)),a=e-2;return new Date(t.getTime()+24*a*60*60*1e3)})(r).toISOString().split("T")[0]),t[a]=void 0!==r?String(r):r})),t}));for(const p of c){if(!p.empID)continue;p.empID&&(p.empID=String(p.empID)),console.log(p);const n=e.find((e=>e.empID===p.empID));if(n){console.log(p,"update");const e=(0,x.A)((0,x.A)({},p),{},{id:n.id});await a({DoeUpValue:e})}else console.log(p,"create"),await t({DoeValue:p})}}catch(n){console.error("Error fetching Excel file:",n)}},children:"Click Here"})]})},Il=()=>{const{terminateData:e}=(0,r.useContext)(s.Y),{SubmitWIData:t}=sr(),{WIUpdateData:a}=lr();console.log(e);return(0,i.jsxs)("div",{className:"flex flex-col gap-40",children:["TerminatedMD",(0,i.jsx)("button",{onClick:async()=>{try{const n=await Wi.A.get("https://commonfiles.s3.ap-southeast-1.amazonaws.com/BulkDataFiles/TerminationInfo+Prod/TerminationInfo.csv",{responseType:"arraybuffer"}),r=new Uint8Array(n.data);console.log(r);const s=ws.LF(r,{type:"array"}),i=s.SheetNames[0],l=s.Sheets[i],o=ws.Wp.sheet_to_json(l,{header:1}),d=["termiDate","resignDate"],c=o.slice(1).map((e=>{let t={};return o[0].forEach(((a,n)=>{let r=e[n];d.includes(a)&&(r=void 0),t[a]=r})),t}));for(const p of c){if(!p.empID)continue;p.empID&&(p.empID=String(p.empID)),console.log(p.empID);const n=e.find((e=>e.empID===p.empID));if(n){console.log(p,"update");const e=(0,x.A)((0,x.A)({},p),{},{workInfoDataRecord:n});await a({workInfoUpValue:e})}else console.log(p,"create"),await t({workInfoValue:p})}}catch(n){console.error("Error fetching Excel file:",n)}},children:"Click Here"})]})},Cl=()=>{const{BJLData:e}=(0,r.useContext)(s.Y),{BGData:t}=$s(),{UpdateBJLFun:a}=Ks();console.log(e);return(0,i.jsxs)("div",{className:"flex flex-col gap-40",children:["BJLDetailsMD",(0,i.jsx)("button",{onClick:async()=>{try{const n=await Wi.A.get("https://commonfiles.s3.ap-southeast-1.amazonaws.com/BulkDataFiles/BJLDetails+Prod/BJLDetails.csv",{responseType:"arraybuffer"}),r=new Uint8Array(n.data);console.log(r);const s=ws.LF(r,{type:"array"}),i=s.SheetNames[0],l=s.Sheets[i],o=ws.Wp.sheet_to_json(l,{header:1}),d=["jpValid","bankValid","bankSubmit","bankRece","bankEndorse","jpEndorse","tbaPurchase","lbrDepoSubmit"],c=o.slice(1).map((e=>{let t={};return o[0].forEach(((a,n)=>{let r=e[n];d.includes(a)&&!isNaN(r)&&(r=(e=>{const t=new Date(Date.UTC(1900,0,1)),a=e-2;return new Date(t.getTime()+24*a*60*60*1e3)})(r).toISOString().split("T")[0]),t[a]=void 0!==r?String(r):r})),t}));for(const p of c){p.empID&&(p.empID=String(p.empID)),console.log(p);const n=e.find((e=>e.empID===p.empID));if(n){console.log(p,"update");const e=(0,x.A)((0,x.A)({},p),{},{id:n.id});await a({BJLUpValue:e})}else console.log(p,"create"),await t({BJLValue:p})}}catch(n){console.error("Error fetching Excel file:",n)}},children:"Click Here"})]})},kl=()=>{const e=(0,n.zy)(),{allData:t,title:a}=e.state||{},[s,l]=(0,r.useState)([]),[o,d]=(0,r.useState)([]),[c,p]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[x,h]=(0,r.useState)(["Emp ID","Employee Badge No","Name","Date of join","Nationality","Department","Position","Date of Termination","Reason of Termination"]),g=(e,t)=>{if(Array.isArray(e)){if(0===e.length)return"-";const a=e[e.length-1];return g(a,t)}if(!e)return"-";const a=new Date(e);if(isNaN(a.getTime()))return"-";const n=String(a.getDate()).padStart(2,"0"),r=String(a.getMonth()+1).padStart(2,"0"),s=a.getFullYear();return"".concat(n,"-").concat(r,"-").concat(s)};(0,r.useEffect)((()=>{var e;l(null===(e=t)||void 0===e?void 0:e.filter((e=>e.termiDate)).map((e=>({empID:e.empID||"-",empBadgeNo:e.empBadgeNo||"-",name:e.name||"-",doj:e.doj||"-",nationality:e.nationality||"-",position:e.position||"-",department:e.department||"-",termiDate:g(e.termiDate)||"-",reasonTerminate:e.reasonTerminate||"-"}))))}),[t]);return(0,i.jsx)("div",{children:(0,i.jsx)(ul,{tableBody:o.length?o:s,tableHead:x,title:a,handleDate:(e,a)=>{const n=e.target.value;"startDate"===a&&p(n),"endDate"===a&&u(n);const r="startDate"===a?new Date(n):c?new Date(c):null,s="endDate"===a?new Date(n):m?new Date(m):null,i=t.filter((e=>{const t=e.termiDate?new Date(e.termiDate):null;return!(!t||isNaN(t.getTime()))&&(r&&s?t>=r&&t<=s:r?t>=r:!s||t<=s)})).map((e=>({empID:e.empID||"-",empBadgeNo:e.empBadgeNo||"-",name:e.name||"-",doj:e.doj||"-",nationality:e.nationality||"-",position:e.position||"-",department:e.department||"-",termiDate:g(e.termiDate)||"-",reasonTerminate:e.reasonTerminate||"-"})));d(i)}})})},Rl=()=>{const e=(0,n.zy)(),{allData:t,title:a}=e.state||{},[s,l]=(0,r.useState)([]),[o,d]=(0,r.useState)([]),[c,p]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[x]=(0,r.useState)(["Emp ID","Employee Badge","Name","Date of Join","Department","Work Position","Probation Expiry Date","Deadline to Return to HRD","Probation Form"]),[h,g]=(0,r.useState)(null),f=(0,n.Zp)(),v=e=>{if(Array.isArray(e)){if(0===e.length)return"-";const t=e[e.length-1];return v(t)}if(!e)return"-";const t=new Date(e);if(isNaN(t.getTime()))return"-";const a=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();return"".concat(a,"-").concat(n,"-").concat(r)},y=e=>{const t=new Date(e);return t.setDate(t.getDate()-7),t.toISOString().split("T")[0]};(0,r.useEffect)((()=>{if(t&&Array.isArray(t)){const e=(e=>{const t=new Date,a=new Date(t.getFullYear(),t.getMonth()+1),n=new Date(t.getFullYear(),t.getMonth()+2,0);return e.filter((e=>{const t=e.probationEnd||[],r=t[t.length-1];if(!r)return!1;const s=new Date(r);return s>=a&&s<=n})).map((e=>{const t=e.probationEnd||[],a=t[t.length-1],n=e.contractStart||[];return n[n.length-1],{empID:e.empID||"-",empBadgeNo:e.empBadgeNo||"-",name:e.name||"-",doj:v(e.doj)||"-",department:e.department||"-",position:e.position||"-",probationEndDate:v(a)||"-",deadline:a?y(a):"-"}}))})(t);l(e)}else console.warn("Invalid or missing allData:")}),[t]);const N=()=>{g(null)};return(0,i.jsxs)("div",{children:[(0,i.jsx)(ul,{tableBody:o.length?o:s,tableHead:x,title:a,handleDate:(e,a)=>{const n=e.target.value;"startDate"===a&&p(n),"endDate"===a&&u(n);const r="startDate"===a?new Date(n):c?new Date(c):null,s="endDate"===a?new Date(n):m?new Date(m):null,i=t.filter((e=>{const t=e.resignDate?new Date(e.resignDate):null;return!(!t||isNaN(t.getTime()))&&(r&&s?t>=r&&t<=s:r?t>=r:!s||t<=s)})).map((e=>({empID:e.empID||"-",empBadgeNo:e.empBadgeNo||"-",name:e.name||"-",doj:e.doj||"-",nationality:e.nationality||"-",department:e.department||"-",position:e.position||"-",resignDate:v(e.resignDate)||"-",reasonResign:e.reasonResign||"-"})));d(i)},handleViewDetails:e=>{console.log("Person State:",e),g(e)}}),h&&(0,i.jsx)("div",{className:"fixed inset-0 center z-50 bg-black bg-opacity-50",children:(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-1/3",children:[(0,i.jsxs)("section",{className:"flex justify-between gap-10 items-center mb-5",children:[(0,i.jsx)("div",{className:"w-full flex-1  center",children:(0,i.jsx)("img",{className:"max-w-[200px] ",src:he.A,alt:"Logo"})}),(0,i.jsx)("button",{className:"text-[24px] rounded",onClick:N,children:(0,i.jsx)(b.RQJ,{})})]}),(0,i.jsx)("h2",{className:"text-xl font-semibold underline text-center mb-5",children:"Person Details"}),(0,i.jsxs)("p",{className:"flex justify-between mb-2",children:[(0,i.jsx)("strong",{children:"Name:"})," ",h.name]}),(0,i.jsxs)("p",{className:"flex justify-between mb-2",children:[(0,i.jsx)("strong",{children:"Emp ID:"})," ",h.empID]}),(0,i.jsxs)("p",{className:"flex justify-between mb-2",children:[(0,i.jsx)("strong",{children:"Emp Badge No:"})," ",h.empBadgeNo]}),(0,i.jsxs)("p",{className:"flex justify-between mb-2",children:[(0,i.jsx)("strong",{children:"Position:"})," ",h.position]}),(0,i.jsxs)("p",{className:"flex justify-between mb-2",children:[(0,i.jsx)("strong",{children:"Department:"})," ",h.department]}),(0,i.jsxs)("p",{className:"flex justify-between mb-2",children:[(0,i.jsx)("strong",{children:"Date Of Join:"})," ",h.doj]}),(0,i.jsxs)("p",{className:"flex justify-between mb-2",children:[(0,i.jsx)("strong",{children:"Probation End Date:"})," ",h.probationEndDate]}),(0,i.jsx)("div",{className:"flex justify-evenly items-center p-3",children:(0,i.jsx)("button",{className:"mt-4 bg-green text-white px-4 py-2 rounded",onClick:()=>{N(),h&&f("/probForm",{state:{employeeData:h}})},children:"Go to Probation Form"})})]})})]})},Tl=(0,ge.D)(),Pl=e=>{let{contentRef:t}=e;const{contractForm:a}=(()=>{const[e,t]=(0,r.useState)(!1),[a,n]=(0,r.useState)(!1),[s,i]=(0,r.useState)(null);return{contractForm:async e=>{t(!0),n(!1),i(null);try{const t=await Tl.graphql({query:"\n  mutation CreateContractForm(\n    $input: CreateContractFormInput!\n    $condition: ModelContractFormConditionInput\n  ) {\n    createContractForm(input: $input, condition: $condition) {\n      id\n      empID\n      conAttn\n      depHead\n      hrManager\n      genManager\n      remarks\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:e}});console.log("API Response:",t),n(!0)}catch(a){console.error("Error during API call:",a),i(a)}finally{t(!1)}},isLoading:e,notification:a,error:s}})(),{contractDetails:l}=(()=>{const e=(0,ge.D)();return{contractDetails:(0,r.useCallback)((async t=>{let{ContractValue:a}=t;if(!a)throw new Error("Missing required parameters or empID");try{const{conAttn:t,depHead:n,hrManager:r,genManager:s,remarks:i,id:l}=a,o={conAttn:t,depHead:n,hrManager:r,genManager:s,remarks:i,id:l},d=await e.graphql({query:"\n  mutation UpdateContractForm(\n    $input: UpdateContractFormInput!\n    $condition: ModelContractFormConditionInput\n  ) {\n    updateContractForm(input: $input, condition: $condition) {\n      id\n      empID\n      conAttn\n      depHead\n      hrManager\n      genManager\n      remarks\n      createdAt\n      updatedAt\n      __typename\n    }\n  }\n",variables:{input:o,limit:2e4}});console.log("Data successfully updated:",d)}catch(n){throw console.error("Error updating data:",n),n}}),[])}})(),{contractForms:o,workInfoData:d,empPIData:c}=(0,r.useContext)(s.Y),p=(0,n.zy)(),{employeeData:m}=p.state||{},[u,h]=(0,r.useState)(""),[g,f]=(0,r.useState)(""),[v,y]=(0,r.useState)(!1),[b,N]=(0,r.useState)({managerEmpID:"",managerOfficialMail:"",hrEmail:"hr_no-reply@adininworks.com",genManagerEamil:""}),[j,D]=(0,r.useState)({contract:{empID:"",conAttn:"",depHead:"",hrManager:"",genManager:"",remarks:""}});console.log(d,"WF DATA");const w=e=>{const{name:t,value:a}=e.target;D((e=>(0,x.A)((0,x.A)({},e),{},{contract:(0,x.A)((0,x.A)({},e.contract),{},{[t]:a})})))};(0,r.useEffect)((()=>{const e=localStorage.getItem("userID");h(e);const t=localStorage.getItem("userType");f(t)}),[]),(0,r.useEffect)((()=>{if(d.length>0&&null!==m&&void 0!==m&&m.empID){const e=d.find((e=>e.empID===m.empID));if(e){const t=e.manager;if(N((e=>(0,x.A)((0,x.A)({},e),{},{managerEmpID:t}))),t&&t.length>0){const e=c.find((e=>e.empID===String(t[0])));e&&N((t=>(0,x.A)((0,x.A)({},t),{},{managerOfficialMail:e.officialEmail})))}}}}),[d,null===m||void 0===m?void 0:m.empID,c]),console.log("hello world ---- working");const A=d.filter((e=>e.position.includes("GENERAL MANAGER")));console.log("LIST",A),console.log(b),(0,r.useEffect)((()=>{if(o.length>0){const e=o.find((e=>e.empID===(null===m||void 0===m?void 0:m.empID)));e&&D({contract:{conAttn:e.conAttn,depHead:e.depHead,hrManager:e.hrManager,genManager:e.genManager,remarks:e.remarks}})}}),[o,null===m||void 0===m?void 0:m.empID]);const S="Contract Form approved",E="Dear Hari employee Arjun contract period is expired...",I="hr_no-reply@adininworks.com";return(0,i.jsx)("div",{id:"capture-section",className:"container mx-auto p-8",ref:t,children:(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("button",{onClick:()=>{y(!v)},id:"edit-button",className:"absolute top-0 right-0 p-2 border rounded-full",children:v?(0,i.jsx)("span",{className:"text-xl",children:"\u274c"}):(0,i.jsx)("span",{className:"text-xl",children:"\u270f"})}),(0,i.jsx)("div",{className:"text-center text-lg font-bold uppercase mb-4",children:"Contract Completion Form for the Month of January 2024"}),(0,i.jsxs)("div",{className:"mb-16 mt-10",children:[(0,i.jsx)("label",{className:"font-semibold",children:"Attention:"}),v?(0,i.jsx)("input",{type:"text",name:"conAttn",value:j.contract.conAttn,onChange:w,className:"ml-2 border-b-2 border-black focus:outline-none"}):(0,i.jsx)("span",{children:j.contract.conAttn}),!v&&(0,i.jsx)("div",{className:"border-b-2 border-black w-52 ml-[9%]"})]}),(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"min-w-full table-auto border-collapse border border-black",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"border border-black p-2",children:"No."}),(0,i.jsx)("th",{className:"border border-black p-2",children:"Employee Name"}),(0,i.jsx)("th",{className:"border border-black p-2",children:"Badge No."}),(0,i.jsx)("th",{className:"border border-black p-2",children:"Position"}),(0,i.jsx)("th",{className:"border border-black p-2",children:"Department"}),(0,i.jsx)("th",{className:"border border-black p-2",children:"Nationality"}),(0,i.jsx)("th",{className:"border border-black p-2",children:"Date Of Join"}),(0,i.jsx)("th",{className:"border border-black p-2",children:"Contract Start Date"}),(0,i.jsx)("th",{className:"border border-black p-2",children:"Contract End Date"}),(0,i.jsx)("th",{className:"border border-black p-2",children:"LD Expiry"}),(0,i.jsx)("th",{className:"border border-black p-2",children:"Duration of Renewal Contract"})]})}),(0,i.jsx)("tbody",{children:[...Array(1)].map(((e,t)=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"border border-black p-2",children:t+1}),(0,i.jsx)("td",{className:"border border-black p-2",children:null===m||void 0===m?void 0:m.name}),(0,i.jsx)("td",{className:"border border-black p-2",children:null===m||void 0===m?void 0:m.empBadgeNo}),(0,i.jsx)("td",{className:"border border-black p-2",children:null===m||void 0===m?void 0:m.position}),(0,i.jsx)("td",{className:"border border-black p-2",children:null===m||void 0===m?void 0:m.department}),(0,i.jsx)("td",{className:"border border-black p-2",children:null===m||void 0===m?void 0:m.nationality}),(0,i.jsx)("td",{className:"border border-black p-2",children:null===m||void 0===m?void 0:m.doj}),(0,i.jsx)("td",{className:"border border-black p-2",children:null===m||void 0===m?void 0:m.contractStartDate}),(0,i.jsx)("td",{className:"border border-black p-2",children:null===m||void 0===m?void 0:m.contractEndDate}),(0,i.jsx)("td",{className:"border border-black p-2",children:(null===m||void 0===m?void 0:m.ldEx)||"N/A"}),(0,i.jsx)("td",{className:"border border-black p-2",children:null===m||void 0===m?void 0:m.balanceMonths})]},t)))})]})}),(0,i.jsx)("div",{className:"mt-7",children:(0,i.jsx)("p",{className:"font-semibold",children:"Notes: Deadline return to HRD after one week from the date received of Contract Completion Report"})}),(0,i.jsxs)("div",{className:"mt-7",children:[(0,i.jsx)("label",{className:"text-sm font-semibold",children:"Remarks:"}),v?(0,i.jsx)("textarea",{type:"text",name:"remarks",value:j.contract.remarks,onChange:w,className:"border w-full text-sm font-semibold rounded resize-none outline-none"}):(0,i.jsx)("span",{children:j.contract.remarks})]}),(0,i.jsxs)("div",{className:"mt-20 flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("p",{className:"font-semibold mb-10",children:"Recommended By:"}),v?(0,i.jsx)("input",{type:"text",name:"depHead",value:j.contract.depHead,onChange:w,className:"border-b-2 border-black w-52 mx-auto"}):(0,i.jsx)("span",{children:j.contract.depHead}),!v&&(0,i.jsx)("div",{className:"border-b-2 border-black w-52 mx-auto"}),(0,i.jsx)("p",{className:"mt-3",children:"Department Head"})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("p",{className:"font-semibold mb-10",children:"Acknowledged & Checked By:"}),v?(0,i.jsx)("input",{type:"text",name:"hrManager",value:j.contract.hrManager,onChange:w,className:"border-b-2 border-black w-52 mx-auto"}):(0,i.jsx)("span",{children:j.contract.hrManager}),!v&&(0,i.jsx)("div",{className:"border-b-2 border-black w-52 mx-auto"}),(0,i.jsx)("p",{className:"mt-3",children:"HRM"})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("p",{className:"font-semibold mb-10",children:"Approved By:"}),v?(0,i.jsx)("input",{type:"text",name:"genManager",value:j.contract.genManager,onChange:w,className:"border-b-2 border-black w-52 mx-auto"}):(0,i.jsx)("span",{children:j.contract.genManager}),!v&&(0,i.jsx)("div",{className:"border-b-2 border-black w-52 mx-auto"}),(0,i.jsx)("p",{className:"mt-3",children:"GM"})]})]}),v&&(0,i.jsx)("div",{className:"mt-8 text-center",children:(0,i.jsx)("button",{onClick:()=>{(async()=>{const e=o.find((e=>e.empID===(null===m||void 0===m?void 0:m.empID))),t={empID:(null===m||void 0===m?void 0:m.empID)||"",conAttn:j.contract.conAttn,depHead:j.contract.depHead,hrManager:j.contract.hrManager,genManager:j.contract.genManager,remarks:j.contract.remarks};try{if(e){const t={id:e.id,conAttn:j.contract.conAttn,depHead:j.contract.depHead,hrManager:j.contract.hrManager,genManager:j.contract.genManager,remarks:j.contract.remarks};await l({ContractValue:t}),console.log("Updated Data",t),"HR"===g&&Me(S,E,I,j.contract.managerOfficialMail)}else await a(t),"Manager"===g&&Me(S,E,I,"hariharanofficial2812@gmail.com"),console.log("Create Data",t)}catch(n){console.log("error",n)}})(),y(!1)},className:"bg-grey text-white px-4 py-2 rounded",children:"Save"})})]})})},_l=()=>{const e=(0,n.Zp)(),t=(0,n.zy)(),{allData:a,title:s}=t.state||{},[l,o]=(0,r.useState)([]),[d,c]=(0,r.useState)(null),[p]=(0,r.useState)(["Emp ID","Employee Badge","Name","Nationality","Date of Joined","Department","Work Position","Contract Start Date","Contract End Date","Duration of Renewal Contract","Form"]),m=(e,t)=>{if(Array.isArray(e)){if(0===e.length)return"-";const a=e[e.length-1];return m(a,t)}if(!e)return"-";const a=new Date(e);if(isNaN(a.getTime()))return"-";const n=String(a.getDate()).padStart(2,"0"),r=String(a.getMonth()+1).padStart(2,"0"),s=a.getFullYear();return"".concat(n,"-").concat(r,"-").concat(s)},u=(e,t)=>{const a=new Date(e),n=new Date(t);return isNaN(a.getTime())||isNaN(n.getTime())?"-":12*(n.getFullYear()-a.getFullYear())+(n.getMonth()-a.getMonth())},x=e=>{const t=new Date,a=new Date(t.getFullYear(),t.getMonth()+1,1),n=new Date(t.getFullYear(),t.getMonth()+3,0);return e.filter((e=>{const t=e.contractEnd||[],r=t[t.length-1];if(!r)return!1;const s=new Date(r);return s>=a&&s<=n})).map((e=>{const t=e.contractEnd||[],a=t[t.length-1],n=e.contractStart||[],r=n[n.length-1],s=((e,t)=>{const a=new Date,n=u(e,t),r=u(e,a);if("string"===typeof n||"string"===typeof r)return"-";const s=n-r;return s>=0&&0!==s?"".concat(s," months"):"Few days more"})(r,a);return{empID:e.empID||"-",empBadgeNo:e.empBadgeNo||"-",name:e.name||"-",nationality:e.nationality||"-",doj:m(e.doj)||"-",department:e.department||"-",position:e.position||"-",contractStartDate:m(r)||"-",contractEndDate:m(a)||"-",balanceMonths:s}}))};(0,r.useEffect)((()=>{const e=x(a);o(e)}),[a]);const h=()=>{c(null)};console.log(a);return(0,i.jsxs)("div",{children:[(0,i.jsx)(ul,{tableBody:l,tableHead:p,title:s,allData:a,handleViewDetails:e=>{console.log("Person State:",e),c(e)}}),d&&(0,i.jsx)("div",{className:"fixed inset-0 center z-50 bg-black bg-opacity-50",children:(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-1/3",children:[(0,i.jsxs)("section",{className:"flex justify-between gap-10 items-center mb-5",children:[(0,i.jsx)("div",{className:"w-full flex-1  center",children:(0,i.jsx)("img",{className:"max-w-[200px] ",src:he.A,alt:"Logo"})}),(0,i.jsx)("button",{className:"text-[24px] rounded",onClick:h,children:(0,i.jsx)(b.RQJ,{})})]}),(0,i.jsx)("h2",{className:"text-xl font-semibold underline text-center mb-5",children:"Person Details"}),(0,i.jsxs)("p",{className:"flex justify-between mb-2",children:[(0,i.jsx)("strong",{children:"Name:"})," ",d.name]}),(0,i.jsxs)("p",{className:"flex justify-between mb-2",children:[(0,i.jsx)("strong",{children:"Emp ID:"})," ",d.empID]}),(0,i.jsxs)("p",{className:"flex justify-between mb-2",children:[(0,i.jsx)("strong",{children:"Emp Badge No:"})," ",d.empBadgeNo]}),(0,i.jsxs)("p",{className:"flex justify-between mb-2",children:[(0,i.jsx)("strong",{children:"Nationality:"})," ",d.nationality]}),(0,i.jsxs)("p",{className:"flex justify-between mb-2",children:[(0,i.jsx)("strong",{children:"Date of join:"})," ",d.doj]}),(0,i.jsxs)("p",{className:"flex justify-between mb-2",children:[(0,i.jsx)("strong",{children:"Position:"})," ",d.position]}),(0,i.jsxs)("p",{className:"flex justify-between mb-2",children:[(0,i.jsx)("strong",{children:"Department:"})," ",d.department]}),(0,i.jsx)("div",{className:"flex justify-evenly items-center p-3",children:(0,i.jsx)("button",{className:"mt-4 bg-green text-white px-4 py-2 rounded",onClick:()=>{h(),d&&e("/contractForms",{state:{employeeData:d}})},children:"Go to Contract Form"})})]})})]})},Ol=()=>{const e=(0,n.zy)(),{allData:t,title:a}=e.state||{},[s,l]=(0,r.useState)([]),[o,d]=(0,r.useState)([]),[c,p]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[x,h]=(0,r.useState)(["Emp ID","Employee Badge","Name","Nationality","Date of Join","Work Position","Department","Pass Expiry"]),g=e=>{if(!e)return"-";const t=new Date(e);if(isNaN(t.getTime()))return"-";const a=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();return"".concat(a,"-").concat(n,"-").concat(r)},f=e=>e.filter((e=>Array.isArray(e.empPassExp)&&e.empPassExp.length>0&&e.empPassExp.every((e=>e&&!isNaN(new Date(e).getTime()))))).filter((e=>(e=>{if(!e)return!1;const t=new Date(e),a=new Date,n=new Date(a.getFullYear(),a.getMonth()+1,1),r=new Date(a.getFullYear(),a.getMonth()+2,0);return t>=n&&t<=r})(e.empPassExp[e.empPassExp.length-1]))).map((e=>{const t=e.empPassExp[e.empPassExp.length-1];return{empID:e.empID||"-",empBadgeNo:e.empBadgeNo||"-",name:e.name||"-",nationality:e.nationality||"-",doj:g(e.doj)||"-",position:e.position||"-",department:e.department||"-",empPassExp:g(t)||"-"}}));(0,r.useEffect)((()=>{l(f(t))}),[t]);return(0,i.jsx)("div",{children:(0,i.jsx)(ul,{tableBody:o.length?o:s,tableHead:x,title:a,handleDate:(e,a)=>{const n=e.target.value;"startDate"===a&&p(n),"endDate"===a&&u(n);const r="startDate"===a?new Date(n):c?new Date(c):null,s="endDate"===a?new Date(n):m?new Date(m):null,i=t.filter((e=>{const t=e.empPassExp||[],a=t.length?new Date(t[t.length-1]):null;return!(!a||isNaN(a.getTime()))&&(r&&s?a>=r&&a<=s:r?a>=r:!s||a<=s)})).map((e=>{const t=e.empPassExp[e.empPassExp.length-1];return{empID:e.empID||"-",empBadgeNo:e.empBadgeNo||"-",name:e.name||"-",nationality:e.nationality||"-",doj:g(e.doj)||"-",position:e.position||"-",department:e.department||"-",empPassExp:g(t)||"-"}}));d(i)}})})},Ll=()=>{const e=(0,n.zy)(),{allData:t,title:a}=e.state||{},[s,l]=(0,r.useState)([]),[o,d]=(0,r.useState)([]),[c,p]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[x,h]=(0,r.useState)(["Name","Employee Badge","Nationality","Department","Position","Passport Expiry"]),g=e=>{if(!e)return"-";const t=new Date(e);if(isNaN(t.getTime()))return"-";const a=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();return"".concat(a,"-").concat(n,"-").concat(r)};(0,r.useEffect)((()=>{const e=(e=>{const t=new Date,a=t.getMonth(),n=t.getFullYear()+1;return e.filter((e=>{if(!Array.isArray(e.ppExpiry)||0===e.ppExpiry.length)return!1;const t=new Date(e.ppExpiry[e.ppExpiry.length-1]);if(isNaN(t.getTime()))return!1;const r=t.getMonth(),s=t.getFullYear();return r===a&&s===n}))})(t).map((e=>({name:e.name||"-",empBadgeNo:e.empBadgeNo||"-",nationality:e.nationality||"-",department:e.department||"-",position:e.position||"-",ppExpiry:g(e.ppExpiry[e.ppExpiry.length-1])})));l(e)}),[t]);return(0,i.jsx)("div",{children:(0,i.jsx)(ul,{tableBody:o.length?o:s,tableHead:x,title:a,handleDate:(e,a)=>{const n=e.target.value;"startDate"===a&&p(n),"endDate"===a&&u(n);const r="startDate"===a?new Date(n):c?new Date(c):null,s="endDate"===a?new Date(n):m?new Date(m):null,i=t.filter((e=>{const t=e.ppExpiry||[],a=t.length?new Date(t[t.length-1]):null;return!(!a||isNaN(a.getTime()))&&(r&&s?a>=r&&a<=s:r?a>=r:!s||a<=s)})).map((e=>({name:e.name||"-",empBadgeNo:e.empBadgeNo||"-",nationality:e.nationality||"-",department:e.department||"-",position:e.position||"-",ppExpiry:g(e.ppExpiry[e.ppExpiry.length-1])})));d(i)}})})},Fl=()=>{const e=(0,n.zy)(),{allData:t,title:a}=e.state||{},[s,l]=(0,r.useState)([]),[o,d]=(0,r.useState)([]),[c,p]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[x]=(0,r.useState)(["Emp ID","Employee Badge No","Name","Nationality","Position","Department","LD Approved","LD Expiry"]),h=(e,t)=>{if(Array.isArray(e)){if(0===e.length)return"-";const a=e[e.length-1];return h(a,t)}if(!e)return"-";const a=new Date(e);if(isNaN(a.getTime()))return"-";const n=String(a.getDate()).padStart(2,"0"),r=String(a.getMonth()+1).padStart(2,"0"),s=a.getFullYear();return"".concat(n,"-").concat(r,"-").concat(s)},g=e=>e.filter((e=>Array.isArray(e.nlmsEmpValid)&&e.nlmsEmpValid.length>0&&e.nlmsEmpValid.every((e=>e&&!isNaN(new Date(e).getTime()))))).filter((e=>(e=>{if(!e)return!1;const t=new Date(e),a=new Date,n=new Date(a.getFullYear(),a.getMonth()+1+1+1),r=new Date(a.getFullYear(),a.getMonth()+4,0);return t>=n&&t<=r})(e.nlmsEmpValid[e.nlmsEmpValid.length-1]))).map((e=>{const t=e.nlmsEmpValid[e.nlmsEmpValid.length-1];return{empID:e.empID||"-",empBadgeNo:e.empBadgeNo||"-",name:e.name||"-",nationality:e.nationality||"-",position:e.position||"-",department:e.department||"-",nlmsEmpApproval:Array.isArray(e.nlmsEmpApproval)?h(e.nlmsEmpApproval[e.nlmsEmpApproval.length-1]):"-",nlmsEmpValid:h(t)||"-"}}));(0,r.useEffect)((()=>{const e=g(t);l(e)}),[t]);return(0,i.jsx)("div",{children:(0,i.jsx)(ul,{tableBody:o.length?o:s,tableHead:x,title:a,handleDate:(e,a)=>{const n=e.target.value;"startDate"===a&&p(n),"endDate"===a&&u(n);const r="startDate"===a?new Date(n):c?new Date(c):null,s="endDate"===a?new Date(n):m?new Date(m):null,i=t.filter((e=>{const t=e.nlmsEmpValid||[],a=t.length?new Date(t[t.length-1]):null;return!(!a||isNaN(a.getTime()))&&(r&&s?a>=r&&a<=s:r?a>=r:!s||a<=s)})).map((e=>({empID:e.empID||"-",empBadgeNo:e.empBadgeNo||"-",name:e.name||"-",nationality:e.nationality||"-",position:e.position||"-",department:e.department||"-",nlmsEmpApproval:Array.isArray(e.nlmsEmpApproval)?h(e.nlmsEmpApproval[e.nlmsEmpApproval.length-1]):"-",nlmsEmpValid:h(e.nlmsEmpValid[e.nlmsEmpValid.length-1])})));d(i)}})})},Ml=()=>{const e=(0,n.zy)(),{allData:t,title:a}=e.state||{},[s,l]=(0,r.useState)([]),[o,d]=(0,r.useState)([]),[c,p]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[h]=(0,r.useState)(["Emp ID","Employee Badge","Name","Nationality","Work Position","Department","Medical Expiry"]);(0,r.useEffect)((()=>{const e=(e=>{const t=new Date,a=new Date(t.getFullYear(),t.getMonth()+3,1),n="".concat(a.getFullYear(),"-").concat((a.getMonth()+1).toString().padStart(2,"0"));return e.filter((e=>{var t;return(null===e||void 0===e||null===(t=e.bruneiME)||void 0===t?void 0:t.length)>0})).map((e=>{const t=null===e||void 0===e?void 0:e.bruneiME.some((e=>{const t=(e=>{const t=e.split("/");return 3===t.length&&2===t[0].length&&2===t[1].length&&4===t[2].length?"".concat(t[2],"-").concat(t[1],"-").concat(t[0]):e})(e),a=new Date(t);return isNaN(a)?(console.error("Invalid date: ".concat(t)),!1):"".concat(a.getFullYear(),"-").concat((a.getMonth()+1).toString().padStart(2,"0"))===n}));return(0,x.A)((0,x.A)({},e),{},{isDateExactMatch:t})})).filter((e=>e.isDateExactMatch))})(t).map((e=>({empID:null===e||void 0===e?void 0:e.empID,badgeNo:null===e||void 0===e?void 0:e.empBadgeNo,name:null===e||void 0===e?void 0:e.name,nationality:null===e||void 0===e?void 0:e.nationality,position:null===e||void 0===e?void 0:e.position,department:null===e||void 0===e?void 0:e.department,medical:null===e||void 0===e?void 0:e.bruneiME[(null===e||void 0===e?void 0:e.bruneiME.length)-1]})));l(e)}),[t]);return(0,i.jsx)("div",{children:(0,i.jsx)(ul,{tableBody:o.length?o:s,tableHead:h,title:a,handleDate:(e,a)=>{const n=e.target.value;"startDate"===a&&p(n),"endDate"===a&&u(n);const r="startDate"===a?new Date(n):c?new Date(c):null,s="endDate"===a?new Date(n):m?new Date(m):null,i=t.filter((e=>{const t=e.bruneiME||[],a=t.length?new Date(t[t.length-1]):null;return!(!a||isNaN(a.getTime()))&&(r&&s?a>=r&&a<=s:r?a>=r:!s||a<=s)})).map((e=>({empID:null===e||void 0===e?void 0:e.empID,badgeNo:null===e||void 0===e?void 0:e.empBadgeNo,name:null===e||void 0===e?void 0:e.name,nationality:null===e||void 0===e?void 0:e.nationality,position:null===e||void 0===e?void 0:e.position,department:null===e||void 0===e?void 0:e.department,medical:null===e||void 0===e?void 0:e.bruneiME[(null===e||void 0===e?void 0:e.bruneiME.length)-1]})));d(i)}})})},ql=()=>{const e=(0,n.zy)(),{allData:t,title:a}=e.state||{},[s,l]=(0,r.useState)([]),[o,d]=(0,r.useState)([]),[c,p]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[x,h]=(0,r.useState)(["Employee Badge","Name","Date of Joined","Gender","Date of Birth","Nationality","work Position","contactNo","Brunei I/C No","Passport No","Employee Pass Expiry","Department","Contract Start Date","Contract End Date","EDUCATION LEVEL","Previous Company Name"]),g=(e,t)=>{if(Array.isArray(e)){if(0===e.length)return"-";const a=e[e.length-1];return g(a,t)}if(!e)return"-";const a=new Date(e);if(isNaN(a.getTime()))return"-";const n=String(a.getDate()).padStart(2,"0"),r=String(a.getMonth()+1).padStart(2,"0"),s=a.getFullYear();return"".concat(n,"-").concat(r,"-").concat(s)},f=e=>e.filter((e=>(e=>{const t=new Date(e);if(isNaN(t.getTime()))return!1;const a=new Date;return t.getFullYear()===a.getFullYear()&&t.getMonth()===a.getMonth()})(e.doj))).map((e=>({empBadgeNo:e.empBadgeNo||"-",name:e.name||"-",doj:g(e.doj)||"-",gender:e.gender||"-",dob:g(e.dob)||"-",nationality:e.nationality||"-",position:e.position||"-",contactNo:e.contactNo||"-",bwnIcNo:e.bwnIcNo||"-",ppNo:e.ppNo||"-",ppExpiry:Array.isArray(e.ppExpiry)?g(e.ppExpiry[e.ppExpiry.length-1]):"-",department:e.department||"-",contractStart:Array.isArray(e.contractStart)?g(e.contractStart[e.contractStart.length-1]):"-",contractEnd:Array.isArray(e.contractEnd)?g(e.contractEnd[e.contractEnd.length-1]):"-",educLevel:e.educLevel||"-",preEmp:e.preEmp||"-"})));(0,r.useEffect)((()=>{l(f(t))}),[t]);return(0,i.jsx)("div",{children:(0,i.jsx)(ul,{tableBody:o.length?o:s,tableHead:x,title:a,handleDate:(e,a)=>{const n=e.target.value;"startDate"===a&&p(n),"endDate"===a&&u(n);const r="startDate"===a?new Date(n):c?new Date(c):null,s="endDate"===a?new Date(n):m?new Date(m):null,i=t.filter((e=>{const t=e.doj?new Date(e.doj):null;return!(!t||isNaN(t.getTime()))&&(r&&s?t>=r&&t<=s:r?t>=r:!s||t<=s)})).map((e=>({empBadgeNo:e.empBadgeNo||"-",name:e.name||"-",doj:g(e.doj)||"-",gender:e.gender||"-",dob:g(e.dob)||"-",nationality:e.nationality||"-",position:e.position||"-",contactNo:e.contactNo||"-",bwnIcNo:e.bwnIcNo||"-",ppNo:e.ppNo||"-",ppExpiry:Array.isArray(e.ppExpiry)?g(e.ppExpiry[e.ppExpiry.length-1]):"-",department:e.department||"-",contractStart:Array.isArray(e.contractStart)?g(e.contractStart[e.contractStart.length-1]):"-",contractEnd:Array.isArray(e.contractEnd)?g(e.contractEnd[e.contractEnd.length-1]):"-",educLevel:e.educLevel||"-",preEmp:e.preEmp||"-"})));d(i)}})})},Ul=()=>{const e=(0,n.zy)(),{allData:t,title:a}=e.state||{},[s,l]=(0,r.useState)([]),[o,d]=(0,r.useState)([]),[c,p]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[x,h]=(0,r.useState)(["Emp ID","Badge No","Name","MR No","PO No","CODE","COURSE / PROGRAMME","CONDUCTED BY","Course Fee","DIVISION","START DATE","END DATE","CERT. EXP","EXPIRED/VALID","Mandatory/ Supplementary","E-CERTS RECEIVED","ORIGINAL CERTS RECEIVED","REMARKS"]),g=e=>{if(!e)return"-";const t=new Date(e);if(isNaN(t.getTime()))return"-";const a=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();return"".concat(a,"-").concat(n,"-").concat(r)},f=e=>{if(!e)return"EXPIRED";return new Date(e)<new Date?"EXPIRED":"VALID"};(0,r.useEffect)((()=>{l(t.filter((e=>{const t=e.certifiExpiry||[],a=t[t.length-1];return!!a&&new Date(a)})).map((e=>({empID:e.empID||"-",empBadgeNo:e.empBadgeNo||"-",name:e.name||"-",MRNo:e.MRNo||"-",poNo:e.poNo||"-",courseCode:e.courseCode||"-",courseName:e.courseName||"-",company:e.company||"-",traineeCourseFee:e.traineeCourseFee||"-",DIVISION:e.DIVISION||"-",traineeSD:g(e.traineeSD)||"-",traineeED:g(e.traineeED)||"-",certifiExpiry:Array.isArray(e.certifiExpiry)?g(e.certifiExpiry[e.certifiExpiry.length-1]):"-",expAndValid:f(e.certifiExpiry),traineeStatus:e.traineeStatus||"-",eCertifiDate:Array.isArray(e.eCertifiDate)?g(e.eCertifiDate[e.eCertifiDate.length-1]):"-",orgiCertifiDate:Array.isArray(e.orgiCertifiDate)?g(e.orgiCertifiDate[e.orgiCertifiDate.length-1]):"-",remark:e.remark||"-"}))))}),[t]);return(0,i.jsx)("div",{children:(0,i.jsx)(ul,{tableBody:o.length?o:s,tableHead:x,title:a,handleDate:(e,a)=>{const n=e.target.value;"startDate"===a&&p(n),"endDate"===a&&u(n);const r="startDate"===a?new Date(n):c?new Date(c):null,s="endDate"===a?new Date(n):m?new Date(m):null,i=t.filter((e=>{const t=e.certifiExpiry||[],a=t.length?new Date(t[t.length-1]):null;return!(!a||isNaN(a.getTime()))&&(r&&s?a>=r&&a<=s:r?a>=r:!s||a<=s)})).map((e=>({empID:e.empID||"-",empBadgeNo:e.empBadgeNo||"-",name:e.name||"-",MRNo:e.MRNo||"-",poNo:e.poNo||"-",courseCode:e.courseCode||"-",courseName:e.courseName||"-",company:e.company||"-",traineeCourseFee:e.traineeCourseFee||"-",DIVISION:e.DIVISION||"-",traineeSD:g(e.traineeSD)||"-",traineeED:g(e.traineeED)||"-",certifiExpiry:Array.isArray(e.certifiExpiry)?g(e.certifiExpiry[e.certifiExpiry.length-1]):"-",expAndValid:f(e.certifiExpiry),traineeStatus:e.traineeStatus||"-",eCertifiDate:Array.isArray(e.eCertifiDate)?g(e.eCertifiDate[e.eCertifiDate.length-1]):"-",orgiCertifiDate:Array.isArray(e.orgiCertifiDate)?g(e.orgiCertifiDate[e.orgiCertifiDate.length-1]):"-",remark:e.remark||"-"})));d(i)}})})},Bl=()=>{const e=(0,n.zy)(),{allData:t,title:a}=e.state||{},[s,l]=(0,r.useState)([]),[o,d]=(0,r.useState)([]),[c,p]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[x]=(0,r.useState)(["Emp ID","Badge No","Name","Gender","Date of Birth","Date of Joined","Nationality","SKILL POOL","Position","Upgrade Position","contactNo","Brunei I/C No","Brunei IC Expiry","Malaysian IC Number","Passport No","IMMIGRATION REFERENCE NUMBER","Pass Expiry","EDUCATION LEVEL","CV RECEIVED FROM"]),h=(e,t)=>{if(Array.isArray(e)){if(0===e.length)return"-";const a=e[e.length-1];return h(a,t)}if(!e)return"-";const a=new Date(e);if(isNaN(a.getTime()))return"-";const n=String(a.getDate()).padStart(2,"0"),r=String(a.getMonth()+1).padStart(2,"0"),s=a.getFullYear();return"".concat(n,"-").concat(r,"-").concat(s)};(0,r.useEffect)((()=>{var e;l((e=t,console.log(e),e.filter((e=>e.doj)).map((e=>({empID:e.empID||"-",empBadgeNo:e.empBadgeNo||"-",name:e.name||"-",gender:e.gender||"-",dob:e.dob||"-",doj:e.doj||"-",nationality:e.nationality||"-",skillPool:e.skillPool||"-",position:e.position||"-",upgradePosition:Array.isArray(e.upgradePosition)?h(e.upgradePosition[e.upgradePosition.length-1]):"-",contactNo:e.contactNo||"-",bwnIcNo:e.bwnIcNo||"-",bwnIcExpiry:Array.isArray(e.bwnIcExpiry)?h(e.bwnIcExpiry[e.bwnIcExpiry.length-1]):"-",myIcNo:e.myIcNo||"-",ppNo:Array.isArray(e.ppNo)?h(e.ppNo[e.ppNo.length-1]):"-",immigRefNo:e.immigRefNo||"-",empPassExp:Array.isArray(e.empPassExp)?h(e.empPassExp[e.empPassExp.length-1]):"-",educLevel:e.educLevel||"-",agent:e.agent||"-"})))))}),[t]);return(0,i.jsx)("div",{children:(0,i.jsx)(ul,{tableBody:o.length?o:s,tableHead:x,title:a,handleDate:(e,a)=>{const n=e.target.value;"startDate"===a&&p(n),"endDate"===a&&u(n);const r="startDate"===a?new Date(n):c?new Date(c):null,s="endDate"===a?new Date(n):m?new Date(m):null,i=t.filter((e=>{const t=e.doj?new Date(e.doj):null;return!(!t||isNaN(t.getTime()))&&(r&&s?t>=r&&t<=s:r?t>=r:!s||t<=s)})).map((e=>({empID:e.empID||"-",empBadgeNo:e.empBadgeNo||"-",name:e.name||"-",gender:e.gender||"-",dob:e.dob||"-",doj:e.doj||"-",nationality:e.nationality||"-",skillPool:e.skillPool||"-",position:e.position||"-",upgradePosition:Array.isArray(e.upgradePosition)?h(e.upgradePosition[e.upgradePosition.length-1]):"-",contactNo:e.contactNo||"-",bwnIcNo:e.bwnIcNo||"-",bwnIcExpiry:Array.isArray(e.bwnIcExpiry)?h(e.bwnIcExpiry[e.bwnIcExpiry.length-1]):"-",myIcNo:e.myIcNo||"-",ppNo:Array.isArray(e.ppNo)?h(e.ppNo[e.ppNo.length-1]):"-",immigRefNo:e.immigRefNo||"-",empPassExp:Array.isArray(e.empPassExp)?h(e.empPassExp[e.empPassExp.length-1]):"-",educLevel:e.educLevel||"-",agent:e.agent||"-"})));d(i)}})})},Hl=()=>{const e=(0,n.zy)(),{allData:t,title:a}=e.state||{},[s,l]=(0,r.useState)([]),[o,d]=(0,r.useState)([]),[c,p]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[x,h]=(0,r.useState)(["Emp ID","Employee Badge","Name","Nationality","Department","Position","Group H&S Insurance","Group H&S Insurance Enrollment Effective Date","Group H&S Insurance Enrollment End Date"]),g=e=>{if(!e)return"-";const t=new Date(e);if(isNaN(t.getTime()))return"-";const a=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();return"".concat(a,"-").concat(n,"-").concat(r)};(0,r.useEffect)((()=>{l(t.filter((e=>Array.isArray(e.groupInsEffectDate)&&e.groupInsEffectDate.length>0&&e.groupInsEffectDate.every((e=>e&&!isNaN(new Date(e).getTime()))))).filter((e=>e.groupInsEffectDate[e.groupInsEffectDate.length-1])).map((e=>({empID:e.empID||"-",empBadgeNo:e.empBadgeNo||"-",name:e.name||"-",nationality:e.nationality||"-",department:e.department||"-",position:e.position||"-",groupIns:e.groupIns||"-",groupInsEffectDate:Array.isArray(e.groupInsEffectDate)?g(e.groupInsEffectDate[e.groupInsEffectDate.length-1]):"-",groupInsEndDate:Array.isArray(e.groupInsEndDate)?g(e.groupInsEndDate[e.groupInsEndDate.length-1]):"-"}))))}),[t]);return(0,i.jsx)("div",{children:(0,i.jsx)(ul,{tableBody:o.length?o:s,tableHead:x,title:a,handleDate:(e,a)=>{const n=e.target.value;"startDate"===a&&p(n),"endDate"===a&&u(n);const r="startDate"===a?new Date(n):c?new Date(c):null,s="endDate"===a?new Date(n):m?new Date(m):null,i=t.filter((e=>{const t=e.groupInsEffectDate||[],a=t.length?new Date(t[t.length-1]):null;return!(!a||isNaN(a.getTime()))&&(r&&s?a>=r&&a<=s:r?a>=r:!s||a<=s)})).map((e=>({empID:e.empID||"-",empBadgeNo:e.empBadgeNo||"-",name:e.name||"-",nationality:e.nationality||"-",department:e.department||"-",position:e.position||"-",groupIns:e.groupIns||"-",groupInsEffectDate:Array.isArray(e.groupInsEffectDate)?g(e.groupInsEffectDate[e.groupInsEffectDate.length-1]):"-",groupInsEndDate:Array.isArray(e.groupInsEndDate)?g(e.groupInsEndDate[e.groupInsEndDate.length-1]):"-"})));d(i)}})})},Wl=()=>{const e=(0,n.zy)(),{allData:t,title:a}=e.state||{},[s,l]=(0,r.useState)([]),[o,d]=(0,r.useState)([]),[c,p]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[x,h]=(0,r.useState)(["Emp ID","Employee Badge","Name","Date of Joined","Nationality","Position","Department","Contract Start Date","Contract End Date","LEAVE PASSAGE ENTITLEMENT","LEAVE PASSAGE DESTINATION"]),g=e=>{if(Array.isArray(e)){const t=e.filter((e=>!isNaN(new Date(e).getTime())));return 0===t.length?"-":g(t[t.length-1])}if(!e)return"-";const t=new Date(e);if(isNaN(t.getTime()))return"-";const a=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();return"".concat(a,"-").concat(n,"-").concat(r)};(0,r.useEffect)((()=>{l(t.filter((e=>(console.log(e.annualLeaveDate),Array.isArray(e.annualLeaveDate)&&e.annualLeaveDate.length>0&&e.annualLeaveDate.every((e=>e&&!isNaN(new Date(e).getTime())))))).filter((e=>e.annualLeaveDate[e.annualLeaveDate.length-1])).map((e=>({empID:e.empID||"-",empBadgeNo:e.empBadgeNo||"-",name:e.name||"-",doj:g(e.doj),nationality:e.nationality||"-",position:e.position||"-",department:e.department||"-",contractStart:g(e.contractStart),contractEnd:g(e.contractEnd),annualLeaveDate:g(e.annualLeaveDate),destinateLeavePass:e.destinateLeavePass||"-"}))))}),[t]);return(0,i.jsx)("div",{children:(0,i.jsx)(ul,{tableBody:o.length?o:s,tableHead:x,title:a,handleDate:(e,a)=>{const n=e.target.value;"startDate"===a&&p(n),"endDate"===a&&u(n);const r="startDate"===a?new Date(n):c?new Date(c):null,s="endDate"===a?new Date(n):m?new Date(m):null,i=t.filter((e=>{const t=e.annualLeaveDate||[],a=t.length?new Date(t[t.length-1]):null;return!(!a||isNaN(a.getTime()))&&(r&&s?a>=r&&a<=s:r?a>=r:!s||a<=s)})).map((e=>({empID:e.empID||"-",empBadgeNo:e.empBadgeNo||"-",name:e.name||"-",doj:g(e.doj),nationality:e.nationality||"-",position:e.position||"-",department:e.department||"-",contractStart:g(e.contractStart),contractEnd:g(e.contractEnd),annualLeaveDate:g(e.annualLeaveDate),destinateLeavePass:e.destinateLeavePass||"-"})));d(i)}})})},Yl=()=>{const e=(0,n.zy)(),{allData:t,title:a}=e.state||{},[s,l]=(0,r.useState)([]),[o,d]=(0,r.useState)([]),[c,p]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[x,h]=(0,r.useState)(["Emp ID","Employee Badge No","Name","Nationality","Date of Join","Department","Work Position","Contract Start Date ","Contract End Date"]),[g,f]=((0,r.useRef)(),(0,r.useState)(!0)),v=(e,t)=>{if(console.log(e,t),Array.isArray(e)){if(0===e.length)return"-";const a=e[e.length-1];return v(a,t)}if(!e)return"-";const a=new Date(e);if(isNaN(a.getTime()))return"-";const n=String(a.getDate()).padStart(2,"0"),r=String(a.getMonth()+1).padStart(2,"0"),s=a.getFullYear();return"".concat(n,"-").concat(r,"-").concat(s)};(0,r.useEffect)((()=>{l((e=>{const t=new Date,a=new Date(t.getFullYear(),t.getMonth()+1,1),n=new Date(t.getFullYear(),t.getMonth()+3,0);return e.filter((e=>{const t=e.contractEnd||[],r=t[t.length-1];if(!r)return!1;const s=new Date(r);return s>=a&&s<=n})).map((e=>{const t=e.contractEnd||[],a=t[t.length-1],n=e.contractStart||[],r=n[n.length-1];return{empID:e.empID||"-",empBadgeNo:e.empBadgeNo||"-",name:e.name||"-",nationality:e.nationality||"-",doj:v(e.doj)||"-",department:e.department||"-",position:e.position||"-",contractStartDate:v(r)||"-",contractEndDate:v(a)||"-"}}))})(t))}),[t]);const[y,b]=(0,r.useState)(null);return(0,i.jsxs)("div",{children:[(0,i.jsx)(ul,{tableBody:o.length?o:s,tableHead:x,title:a,handleDate:(e,a)=>{const n=e.target.value;"startDate"===a&&p(n),"endDate"===a&&u(n);const r="startDate"===a?new Date(n):c?new Date(c):null,s="endDate"===a?new Date(n):m?new Date(m):null,i=t.filter((e=>{const t=(null===e||void 0===e?void 0:e.contractEnd)||[],a=t.length?new Date(t[t.length-1]):null;return!(!a||isNaN(a.getTime()))&&(r&&s?a>=r&&a<=s:r?a>=r:!s||a<=s)})).map((e=>{const t=e.contractEnd||[],a=t[t.length-1],n=e.contractStart||[],r=n[n.length-1];return{empID:e.empID||"-",empBadgeNo:e.empBadgeNo||"-",name:e.name||"-",nationality:e.nationality||"-",doj:v(e.doj)||"-",department:e.department||"-",position:e.position||"-",contractStartDate:v(r)||"-",contractEndDate:v(a)||"-"}}));d(i)}}),(0,i.jsx)("div",{className:"vertical-center p-5 pt-9 ",children:(0,i.jsx)("button",{className:" bg-[#FEF116] text-dark_grey text_size_5 w-[126px] p-2 rounded",onClick:()=>{console.log("dnfnjdbf"),!0===g&&(()=>{const e=new ki.jsPDF("landscape");e.setFontSize(16),e.text("Contract Completion Form for the Month of January 2024",e.internal.pageSize.getWidth()/2,20,{align:"center"});const t=document.querySelector('input[type="text"]').value;e.setFontSize(12),e.text("Attn: ".concat(t),14,40),e.setDrawColor(0,0,0),e.line(25,40,100,40);const a=document.querySelectorAll("table thead tr"),n=Array.from(a).map((e=>{const t=e.querySelectorAll("th");return Array.from(t).map((e=>e.innerText))})),r=document.querySelectorAll("table tbody tr"),s=Array.from(r).map((e=>{const t=e.querySelectorAll("td");return Array.from(t).map((e=>e.querySelector("input")?e.querySelector("input").value:e.innerText))}));e.autoTable({head:n,body:s,startY:50,styles:{cellWidth:"auto",overflow:"linebreak"}}),e.setFontSize(11);const i=e.lastAutoTable.finalY+12;e.text("Notes: Deadline return to HRD after one week from the date received of Contract Completion Report",14,i),e.setFontSize(10);const l=i+25;e.text("Recommended By:",40,l),e.text("Acknowledged & Checked By:",130,l),e.text("Approved By:",230,l),e.line(30,l+10,85,l+10),e.line(120,l+10,190,l+10),e.line(220,l+10,265,l+10),e.setFontSize(11),e.text("Department Head",40,l+20),e.text("HRM",150,l+20),e.text("GM",238,l+20),e.save("contract_completion_form.pdf")})()},children:"Download"})})]})},Vl=()=>{const e=(0,n.zy)(),{allData:t,title:a}=e.state||{},[s,l]=(0,r.useState)([]),[o,d]=(0,r.useState)([]),[c,p]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[x]=(0,r.useState)(["Emp ID","Employee Badge No","Name","Nationality","Position","Department","UPGRADE POSITION","UPGRADE POSITION EFFECTIVE DATE"]),h=(e,t)=>{if(Array.isArray(e)){if(0===e.length)return"-";const a=e[e.length-1];return h(a,t)}if(!e)return"-";const a=new Date(e);if(isNaN(a.getTime()))return"-";const n=String(a.getDate()).padStart(2,"0"),r=String(a.getMonth()+1).padStart(2,"0"),s=a.getFullYear();return"".concat(n,"-").concat(r,"-").concat(s)};(0,r.useEffect)((()=>{const e=(e=>e.filter((e=>(console.log(e.upgradeDate),Array.isArray(e.upgradeDate)&&e.upgradeDate.length>0&&e.upgradeDate.every((e=>e&&!isNaN(new Date(e).getTime())))))).filter((e=>e.upgradeDate[e.upgradeDate.length-1])).map((e=>{const t=e.upgradeDate[e.upgradeDate.length-1];return{empID:e.empID||"-",empBadgeNo:e.empBadgeNo||"-",name:e.name||"-",nationality:e.nationality||"-",position:e.position||"-",department:e.department||"-",upgradePosition:Array.isArray(e.upgradePosition)?e.upgradePosition[e.upgradePosition.length-1]:"-",upgradeDate:h(t)||"-"}})))(t);l(e)}),[t]);return(0,i.jsx)("div",{children:(0,i.jsx)(ul,{tableBody:o.length?o:s,tableHead:x,title:a,handleDate:(e,a)=>{const n=e.target.value;"startDate"===a&&p(n),"endDate"===a&&u(n);const r="startDate"===a?new Date(n):c?new Date(c):null,s="endDate"===a?new Date(n):m?new Date(m):null,i=t.filter((e=>{const t=e.upgradeDate||[],a=t.length?new Date(t[t.length-1]):null;return!(!a||isNaN(a.getTime()))&&(r&&s?a>=r&&a<=s:r?a>=r:!s||a<=s)})).map((e=>({empID:e.empID||"-",empBadgeNo:e.empBadgeNo||"-",name:e.name||"-",nationality:e.nationality||"-",position:e.position||"-",department:e.department||"-",upgradePosition:Array.isArray(e.upgradePosition)?e.upgradePosition[e.upgradePosition.length-1]:"-",upgradeDate:h(e.upgradeDate[e.upgradeDate.length-1])})));d(i)}})})},zl=()=>{const{SRData:e}=(0,r.useContext)(s.Y),{SubmitWIData:t}=sr(),{WIUpdateData:a}=lr();console.log(e);return(0,i.jsxs)("div",{className:"flex flex-col gap-40",children:["ServiceRecordedMD",(0,i.jsx)("button",{onClick:async()=>{try{const n=await Wi.A.get("https://commonfiles.s3.ap-southeast-1.amazonaws.com/BulkDataFiles/ServiceRecord/ServiceRecord.csv",{responseType:"arraybuffer"}),r=new Uint8Array(n.data);console.log(r);const s=ws.LF(r,{type:"array"}),i=s.SheetNames[0],l=s.Sheets[i],o=ws.Wp.sheet_to_json(l,{header:1}),d=["doj","contractStart","contractEnd","probationEnd","probationStart","upgradeDate"],c=o.slice(1).map((e=>{let t={};return o[0].forEach(((a,n)=>{let r=e[n];d.includes(a)&&!isNaN(r)&&(r=(e=>{const t=new Date(Date.UTC(1900,0,1)),a=e-2;return new Date(t.getTime()+24*a*60*60*1e3)})(r).toISOString().split("T")[0]),t[a]=void 0!==r?String(r):r})),t}));for(const p of c){if(!p.empID)continue;p.empID&&(p.empID=String(p.empID)),console.log(p);const n=e.find((e=>e.empID===p.empID));if(n){console.log(p,"update");const e=(0,x.A)((0,x.A)({},p),{},{workInfoDataRecord:n});await a({workInfoUpValue:e})}else console.log(p,"create"),await t({workInfoValue:p})}}catch(n){console.error("Error fetching Excel file:",n)}},children:"Click Here"})]})},Jl=()=>{const{PPValidsData:e}=(0,r.useContext)(s.Y),{ImmigrationData:t}=ei(),{UpdateImmigraData:a}=ti();console.log(e);return(0,i.jsxs)("div",{className:"flex flex-col gap-40",children:["PassportValidMD",(0,i.jsx)("button",{onClick:async()=>{try{const n=await Wi.A.get("https://commonfiles.s3.ap-southeast-1.amazonaws.com/BulkDataFiles/PassportValid+Prod/PassportValid+1.csv",{responseType:"arraybuffer"}),r=new Uint8Array(n.data);console.log(r);const s=ws.LF(r,{type:"array"}),i=s.SheetNames[0],l=s.Sheets[i],o=ws.Wp.sheet_to_json(l,{header:1}),d=["empPassExp","immigApproval","ppSubmit"],c=o.slice(1).map((e=>{let t={};return o[0].forEach(((a,n)=>{let r=e[n];d.includes(a)&&!isNaN(r)&&(r=(e=>{const t=new Date(Date.UTC(1900,0,1)),a=e-2;return new Date(t.getTime()+24*a*60*60*1e3)})(r).toISOString().split("T")[0]),t[a]=void 0!==r?String(r):r})),t}));for(const p of c){if(!p.empID)continue;p.empID&&(p.empID=String(p.empID)),console.log(p);const n=e.find((e=>e.empID===p.empID));if(n){console.log(p,"update");const e=(0,x.A)((0,x.A)({},p),{},{id:n.id});await a({UpImmiValue:e})}else console.log(p,"create"),await t({ImmiValue:p})}}catch(n){console.error("Error fetching Excel file:",n)}},children:"Click Here"})]})},Gl=()=>{const{DNData:e}=(0,r.useContext)(s.Y),{uploadNlmsFun:t}=Js();console.log(e);return(0,i.jsxs)("div",{className:"flex flex-col gap-40",children:["NlmsMD",(0,i.jsx)("button",{onClick:async()=>{try{const a=await Wi.A.get("https://commonfiles.s3.ap-southeast-1.amazonaws.com/BulkDataFiles/DNDetails+Prod/DNDetails+2.csv",{responseType:"arraybuffer"}),n=new Uint8Array(a.data);console.log(n);const r=ws.LF(n,{type:"array"}),s=r.SheetNames[0],i=r.Sheets[s],l=ws.Wp.sheet_to_json(i,{header:1}),o=["nlmsEmpValid"],d=l.slice(1).map((e=>{let t={};return l[0].forEach(((a,n)=>{let r=e[n];o.includes(a)&&!isNaN(r)&&(r=(e=>{const t=new Date(Date.UTC(1900,0,1)),a=e-2;return new Date(t.getTime()+24*a*60*60*1e3)})(r).toISOString().split("T")[0]),t[a]=void 0!==r?String(r):r})),t}));for(const c of d){c.empID&&(c.empID=String(c.empID)),console.log(c);const a=e.find((e=>e.empID===c.empID));if(a){console.log("update");const e=(0,x.A)((0,x.A)({},c),{},{id:a.id});await t({DoeValue:e})}}}catch(a){console.error("Error fetching Excel file:",a)}},children:"Click Here"})]})},$l=()=>{const{LMIData:e}=(0,r.useContext)(s.Y),{SubmitMPData:t}=xr(),{updateMedicalSubmit:a}=hr();console.log(e);return(0,i.jsxs)("div",{className:"flex flex-col gap-40",children:["LabourMedicalInfoMD",(0,i.jsx)("button",{onClick:async()=>{try{const n=await Wi.A.get("https://commonfiles.s3.ap-southeast-1.amazonaws.com/BulkDataFiles/LabourMedicalInfo+Prod/LabourMedicalInfo+1.csv",{responseType:"arraybuffer"}),r=new Uint8Array(n.data);console.log(r);const s=ws.LF(r,{type:"array"}),i=s.SheetNames[0],l=s.Sheets[i],o=ws.Wp.sheet_to_json(l,{header:1}),d=["bruneiME"],c=o.slice(1).map((e=>{let t={};return o[0].forEach(((a,n)=>{let r=e[n];d.includes(a)&&!isNaN(r)&&(r=(e=>{const t=new Date(Date.UTC(1900,0,1)),a=e-2;return new Date(t.getTime()+24*a*60*60*1e3)})(r).toISOString().split("T")[0]),t[a]=void 0!==r?String(r):r})),t}));for(const p of c){if(!p.empID)continue;p.empID&&(p.empID=String(p.empID)),console.log(p);const n=e.find((e=>e.empID===p.empID));if(n){console.log(p,"update");const e=(0,x.A)((0,x.A)({},p),{},{id:n.id});await a({LabUpValue:e})}else console.log(p,"create"),await t({labValue:p})}}catch(n){console.error("Error fetching Excel file:",n)}},children:"Click Here"})]})},Kl=(0,ge.D)(),Ql=()=>{var e;const t=null===(e=localStorage.getItem("userID"))||void 0===e?void 0:e.toUpperCase(),[a,s]=(0,r.useState)([]),[l,o]=(0,r.useState)(null),[d,c]=(0,r.useState)(!0);(0,r.useEffect)((()=>{!async function(){try{var e,a;const n=localStorage.getItem("userType"),r=await Kl.graphql({query:fe.ZZ,variables:{filter:{and:[{empID:{eq:t}},{selectType:{eq:n}}]}}}),i=null===r||void 0===r||null===(e=r.data)||void 0===e||null===(a=e.listUsers)||void 0===a?void 0:a.items[0],l=null===i||void 0===i?void 0:i.setPermissions[0],d=p(l);s(d),o(m(d))}catch(n){console.error("Error fetching user data:",n)}finally{c(!1)}}()}),[]);const p=e=>{const t=/(\w+)=\[/g,a=[];let n;for(;null!==(n=t.exec(e));)a.push(n[1]);return a},m=e=>["Dashboard","User","Recruitment","Employee","Training","TimeSheet","Insurance","LeaveManagement","Notification","Report","BenefitsAndRewards"].find((t=>e.includes(t)));if(d)return(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"flex items-center justify-center h-[82vh]",children:(0,i.jsx)("p",{className:"text-sm font-semibold",children:"Loading..."})})});const u=a.filter((e=>["Dashboard","User","Recruitment","Employee","Training","TimeSheet","LeaveManagement","Insurance","Notification","Report","BenefitsAndRewards"].includes(e)));return(0,i.jsx)(gt,{children:(0,i.jsxs)(n.BV,{children:[(0,i.jsx)(n.qh,{path:"/changePassword",element:(0,i.jsx)(Or,{})}),(0,i.jsx)(n.qh,{path:"/migrationDataID",element:(0,i.jsx)(Nl,{})}),(0,i.jsx)(n.qh,{path:"/migrationDataEPI",element:(0,i.jsx)(jl,{})}),(0,i.jsx)(n.qh,{path:"/migrationDataWorkI",element:(0,i.jsx)(Dl,{})}),(0,i.jsx)(n.qh,{path:"/migrationDataService",element:(0,i.jsx)(zl,{})}),(0,i.jsx)(n.qh,{path:"/migrationDataEmpInsu",element:(0,i.jsx)(wl,{})}),(0,i.jsx)(n.qh,{path:"/migrationDataLeaveDetails",element:(0,i.jsx)(Al,{})}),(0,i.jsx)(n.qh,{path:"/migrationDataNLA",element:(0,i.jsx)(Sl,{})}),(0,i.jsx)(n.qh,{path:"/migrationDataDN",element:(0,i.jsx)(El,{})}),(0,i.jsx)(n.qh,{path:"/migrationDataTerminated",element:(0,i.jsx)(Il,{})}),(0,i.jsx)(n.qh,{path:"/migrationDataBJL",element:(0,i.jsx)(Cl,{})}),"        ",(0,i.jsx)(n.qh,{path:"/migrationPPValid",element:(0,i.jsx)(Jl,{})}),(0,i.jsx)(n.qh,{path:"/migrationLMInfo",element:(0,i.jsx)($l,{})}),(0,i.jsx)(n.qh,{path:"/migrationNlms",element:(0,i.jsx)(Gl,{})}),(0,i.jsx)(n.qh,{path:"/",element:(0,i.jsx)(n.C5,{to:"/".concat(null===l||void 0===l?void 0:l.toLowerCase())})}),(0,i.jsx)(n.qh,{path:"/personalInformation",element:(0,i.jsx)(qr,{})}),u.includes("Dashboard")&&(0,i.jsx)(n.qh,{path:"/dashboard",element:(0,i.jsx)(w,{})}),u.includes("User")&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.qh,{path:"/user",element:(0,i.jsx)(da,{})}),(0,i.jsx)(n.qh,{path:"/addNewForm",element:(0,i.jsx)(Hs,{})})]}),u.includes("Recruitment")&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.qh,{path:"/recruitment",Component:xe}),(0,i.jsxs)(n.qh,{path:"/recrutiles",Component:Ht,children:[(0,i.jsx)(n.qh,{path:"candidate",element:(0,i.jsx)(Vt,{})}),(0,i.jsx)(n.qh,{path:"applyemployreq",element:(0,i.jsx)(oi,{})}),(0,i.jsx)(n.qh,{path:"listofcandi",element:(0,i.jsx)(ii,{})}),(0,i.jsx)(n.qh,{path:"localcandi",element:(0,i.jsx)(na,{})}),(0,i.jsx)(n.qh,{path:"nonloccandi",element:(0,i.jsx)(ra,{})}),(0,i.jsx)(n.qh,{path:"employreq",element:(0,i.jsx)(ha,{})}),(0,i.jsx)(n.qh,{path:"status",element:(0,i.jsx)(Ya,{})}),(0,i.jsx)(n.qh,{path:"workpasstracking",element:(0,i.jsx)(sn,{})})]}),(0,i.jsx)(n.qh,{path:"/hiringJob",element:(0,i.jsx)(Vi,{})}),(0,i.jsx)(n.qh,{path:"/postJob",element:(0,i.jsx)(Yi,{})}),(0,i.jsxs)(n.qh,{path:"/addCandidates",Component:sa,children:[(0,i.jsx)(n.qh,{index:!0,element:(0,i.jsx)(Ot,{})}),(0,i.jsx)(n.qh,{path:"personalDetails",element:(0,i.jsx)(Mt,{})}),(0,i.jsx)(n.qh,{path:"educationDetails",element:(0,i.jsx)(qt,{})}),(0,i.jsx)(n.qh,{path:"otherDetails",element:(0,i.jsx)(Bt,{})})]})]}),u.includes("Employee")&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.qh,{path:"/insuranceAdd",Component:yr,children:[(0,i.jsx)(n.qh,{index:!0,element:(0,i.jsx)(Dr,{})}),(0,i.jsx)(n.qh,{path:"dependentInsurance",element:(0,i.jsx)(Sr,{})})]}),(0,i.jsxs)(n.qh,{path:"/sawp",Component:Er,children:[(0,i.jsx)(n.qh,{index:!0,element:(0,i.jsx)(Ws,{})}),(0,i.jsx)(n.qh,{path:"doe",element:(0,i.jsx)(zs,{})}),(0,i.jsx)(n.qh,{path:"nlms",element:(0,i.jsx)(Gs,{})}),(0,i.jsx)(n.qh,{path:"bankGuarantee",element:(0,i.jsx)(Qs,{})}),(0,i.jsx)(n.qh,{path:"jitpa",element:(0,i.jsx)(Zs,{})}),(0,i.jsx)(n.qh,{path:"labourDeposit",element:(0,i.jsx)(Xs,{})}),(0,i.jsx)(n.qh,{path:"immigration",element:(0,i.jsx)(ai,{})})]}),(0,i.jsx)(n.qh,{path:"/allempDetails",Component:yn}),(0,i.jsx)(n.qh,{path:"/employee",Component:T}),(0,i.jsx)(n.qh,{path:"/empRequistion",Component:vr}),(0,i.jsx)(n.qh,{path:"/employeeInfo",Component:rr}),(0,i.jsx)(n.qh,{path:"/workInfo",Component:pr}),(0,i.jsx)(n.qh,{path:"/workPass",Component:Er}),(0,i.jsx)(n.qh,{path:"/nonLocalAcco",Component:kr}),(0,i.jsx)(n.qh,{path:"/labourImmigration",Component:gr})]}),u.includes("Insurance")&&(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(n.qh,{path:"/insuranceHr",Component:_i,children:[(0,i.jsx)(n.qh,{index:!0,element:(0,i.jsx)(zi,{})}),(0,i.jsx)(n.qh,{path:"groupHS",element:(0,i.jsx)(Mi,{})}),(0,i.jsx)(n.qh,{path:"workmenComp",element:(0,i.jsx)(Ui,{})}),(0,i.jsx)(n.qh,{path:"travelling",element:(0,i.jsx)(Bi,{})}),(0,i.jsx)(n.qh,{path:"personalAcci",element:(0,i.jsx)(Hi,{})}),(0,i.jsx)(n.qh,{path:"insuranceClaim",element:(0,i.jsx)(Li,{})})]})}),u.includes("Training")&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.qh,{path:"/training",Component:F}),(0,i.jsx)(n.qh,{path:"/training/AcTc",Component:Fs}),(0,i.jsx)(n.qh,{path:"/training/trainingCertify",Component:bl}),(0,i.jsx)(n.qh,{path:"/trainingReq",Component:gl}),(0,i.jsx)(n.qh,{path:"/trainingReq/add",Component:Ms}),(0,i.jsx)(n.qh,{path:"/trainingReq/view",Component:Zi}),(0,i.jsx)(n.qh,{path:"/blngCertify",Component:fl}),(0,i.jsx)(n.qh,{path:"/omgCertify",Component:Xi}),(0,i.jsx)(n.qh,{path:"/training/hr",Component:vl}),(0,i.jsx)(n.qh,{path:"/training/tcView",Component:yl})]}),u.includes("TimeSheet")&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.qh,{path:"/timeSheet",element:(0,i.jsx)(W,{})}),(0,i.jsx)(n.qh,{path:"/timesheetHO",element:(0,i.jsx)(ni,{})}),(0,i.jsx)(n.qh,{path:"/timesheetSBW",element:(0,i.jsx)(ri,{})}),(0,i.jsx)(n.qh,{path:"/timesheetORMC",element:(0,i.jsx)(si,{})}),(0,i.jsx)(n.qh,{path:"/timesheetOffshore",element:(0,i.jsx)(Is,{})}),(0,i.jsx)(n.qh,{path:"/timesheetBlng",element:(0,i.jsx)(Cs,{})}),(0,i.jsx)(n.qh,{path:"/viewTimesheet",element:(0,i.jsx)(Ts,{})}),(0,i.jsx)(n.qh,{path:"/viewTSheetList",element:(0,i.jsx)(Rs,{})}),(0,i.jsx)(n.qh,{path:"/viewTsheetDetails",element:(0,i.jsx)(ml,{})}),(0,i.jsx)(n.qh,{path:"/viewSummary",element:(0,i.jsx)(Pi,{})})]}),u.includes("LeaveManagement")&&(0,i.jsxs)(n.qh,{path:"/leaveManagement",Component:We,children:[(0,i.jsx)(n.qh,{index:!0,element:(0,i.jsx)(al,{})}),(0,i.jsx)(n.qh,{path:"historyLeave",element:(0,i.jsx)(nl,{})}),(0,i.jsx)(n.qh,{path:"leaveBalance",element:(0,i.jsx)(sl,{})}),(0,i.jsx)(n.qh,{path:"requestTickets",element:(0,i.jsx)(il,{})})]}),u.includes("Notification")&&(0,i.jsx)(n.qh,{path:"/notifications",Component:rt}),u.includes("Report")&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.qh,{path:"/reports",Component:re}),(0,i.jsx)(n.qh,{path:"/probForm",Component:xi}),(0,i.jsx)(n.qh,{path:"/contractForms",Component:Pl}),(0,i.jsx)(n.qh,{path:"/rm",Component:xl}),(0,i.jsx)(n.qh,{path:"/filterTable",Component:ul}),(0,i.jsx)(n.qh,{path:"/resignation",Component:hl}),(0,i.jsx)(n.qh,{path:"/termination",Component:kl}),(0,i.jsx)(n.qh,{path:"/probationReview",Component:Rl}),(0,i.jsx)(n.qh,{path:"/contractReview",Component:_l}),(0,i.jsx)(n.qh,{path:"/empPassExpiry",Component:Ol}),(0,i.jsx)(n.qh,{path:"/ldExpiry",Component:Fl}),(0,i.jsx)(n.qh,{path:"/passportExpiry",Component:Ll}),(0,i.jsx)(n.qh,{path:"/empMedical",Component:Ml}),(0,i.jsx)(n.qh,{path:"/newRecruit",Component:ql}),(0,i.jsx)(n.qh,{path:"/trainingRC",Component:Ul}),(0,i.jsx)(n.qh,{path:"/lbdKpi",Component:Bl}),(0,i.jsx)(n.qh,{path:"/groupHS",Component:Hl}),(0,i.jsx)(n.qh,{path:"/leavePass",Component:Wl}),(0,i.jsx)(n.qh,{path:"/contractForms",Component:Yl}),(0,i.jsx)(n.qh,{path:"/promotion",Component:Vl})]}),u.includes("BenefitsAndRewards")&&(0,i.jsx)(n.qh,{path:"/benfitsAndrewards",Component:Ze}),(0,i.jsx)(n.qh,{path:"/logout",Component:st}),(0,i.jsx)(n.qh,{path:"*",element:(0,i.jsx)(n.C5,{to:"/".concat(null===l||void 0===l?void 0:l.toLowerCase())})})]})})}},2902:(e,t,a)=>{"use strict";a.d(t,{$A:()=>i,CF:()=>h,Fh:()=>x,Io:()=>j,M3:()=>p,Rr:()=>N,UB:()=>b,UQ:()=>o,Z2:()=>r,_K:()=>u,_j:()=>f,gO:()=>l,gm:()=>v,h4:()=>s,iR:()=>y,mB:()=>m,me:()=>c,s8:()=>g,uL:()=>d});var n=a(899);const r=n.Ik({userID:n.Yj().required("UserID is mandatory"),password:n.Yj().required("Password is Required")}),s=n.Ik({empID:n.Yj().required("Employee ID is required"),password:n.Yj().required("Temporary Password is required"),selectType:n.Yj().required("Please select a type"),officialEmail:n.Yj().required("OfficialEmail is required"),userID:n.Yj().required("User ID is mandatory"),name:n.Yj().required("Name is mandatory"),contactNo:n.Yj().required("Contact number is mandatory"),position:n.Yj().required("Position is mandatory"),department:n.Yj().required("Department is mandatory")}),i=n.Ik({userID:n.Yj().required("User ID is mandatory"),currentPassword:n.Yj().required("Current Password is mandatory"),password:n.Yj().min(8,"Password must be at least 8 characters").max(15,"Password cannot exceed 15 characters").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])/,"Password must contain at least one lowercase letter, one uppercase letter, one number, and one special character").required("Password is required"),confirmPassword:n.Yj().oneOf([n.KR("password"),null],"Passwords must match").required("Confirm password is required")}),l=n.Ik().shape({profilePhoto:n.gl().required("Upload Photo is mandatory").test("fileType","Profile photo must be a JPG or PNG file",(e=>!!e&&/\.(jpg|jpeg|png)$/.test(e.name))),agent:n.Yj().notRequired(),position:n.Yj().required("Position is mandatory"),contractType:n.Yj().required("Contract Type mandatory"),empType:n.Yj().required("Employee Type mandatory"),name:n.Yj().min(3,"Name must be at least 3 characters").required("Name is mandatory"),chinese:n.Yj().notRequired(),gender:n.Yj().required("Gender is mandatory"),dob:n.Yj().required("Date of Birth is mandatory"),age:n.ai().min(20,"Age must be at least 20").max(99,"Age cannot exceed 99").required("Age is required"),email:n.Yj().email("Please enter a valid email").required("Email is required"),cob:n.Yj().required("Country of Birth is mandatory"),nationality:n.Yj().required("Nationality is mandatory"),otherNation:n.Yj().when("nationality",{is:e=>e&&"other"===e.trim().toLowerCase(),then:()=>n.Yj().required("Other Nationality is required"),otherwise:()=>n.Yj()}),marital:n.Yj().required("Marital status is mandatory"),race:n.Yj().required("Race is mandatory"),otherRace:n.Yj().when("race",{is:e=>e&&"other"===e.trim().toLowerCase(),then:()=>n.Yj().required("Other Race is required"),otherwise:()=>n.Yj()}),religion:n.Yj().required("Religion is mandatory"),otherReligion:n.Yj().when("religion",{is:e=>e&&"other"===e.trim().toLowerCase(),then:()=>n.Yj().required("Other religion is required"),otherwise:()=>n.Yj()})}),o=e=>{console.log(e);const t=e&&("bruneian"===e.trim().toLowerCase()||"brunei pr"===e.trim().toLowerCase());return console.log(t),n.Ik({bwnIcNo:t?n.Yj().matches(/^\d{2}-\d{6}$/,"I/C Number must be in the format XX-XXXXXX, where X is a digit").required("I/C Number is mandatory for Bruneians"):n.Yj().notRequired(),bwnIcColour:t?n.Yj().required("I/C Colour is mandatory for Bruneians"):n.Yj().notRequired(),bwnIcExpiry:t?n.Yj().required("I/C Expiry is mandatory for Bruneians"):n.Yj().notRequired(),ppNo:t?n.Yj().notRequired():n.Yj().required("Passport Number is mandatory"),ppIssued:t?n.Yj().notRequired():n.Yj().required("Passport issued is mandatory"),ppExpiry:t?n.Yj().notRequired():n.Yj().required("Passport Expiry is mandatory"),ppDestinate:t?n.Yj().notRequired():n.Yj().required("Passport destination is mandatory"),alternateNo:n.Yj().notRequired(),contactNo:n.Yj().required("Contact Number is mandatory"),presentAddress:n.Yj().required("Present Address is mandatory"),permanentAddress:n.Yj().required("Permanent Address is mandatory"),driveLic:n.Yj().notRequired(),lang:n.Yj().required("Language is mandatory"),familyDetails:n.YO().of(n.Ik().shape({name:n.Yj().notRequired(),relationship:n.Yj().notRequired(),age:n.Yj().notRequired(),occupation:n.Yj().notRequired(),place:n.Yj().notRequired()})).notRequired(),eduDetails:n.YO().of(n.Ik().shape({university:n.Yj().required("University Name is mandatory "),fromDate:n.Yj().required("From Date is mandatory"),toDate:n.Yj().required("To Date is mandatory"),degree:n.Yj().required("Degree is mandatory")})).required("At least one education detail is mandatory"),workExperience:n.YO().of(n.Ik().shape({fromDate:n.Yj().notRequired(),toDate:n.Yj().notRequired(),companyAndAddress:n.Yj().notRequired(),position:n.Yj().notRequired(),salary:n.Yj().notRequired(),reasonLeaving:n.Yj().notRequired()}))})},d=n.Ik({referees:n.YO().of(n.Ik().shape({name:n.Yj().notRequired(),address:n.Yj().notRequired(),phoneNumber:n.Yj().notRequired(),profession:n.Yj().notRequired()})).notRequired(),relatives:n.YO().of(n.Ik().shape({name:n.Yj().notRequired(),position:n.Yj().notRequired(),relationship:n.Yj().notRequired()})).notRequired(),description:n.Yj().notRequired(),emgDetails:n.YO().of(n.Ik().shape({name:n.Yj().required("Name is mandatory"),relationship:n.Yj().required("Relationship is mandatory"),address:n.Yj().required("Address is mandatory"),phoneNumber:n.Yj().required("Phone Number is mandatory"),bloodGroup:n.Yj().notRequired()})).required("At least one emergency contact is mandatory"),disease:n.Yj().notRequired(),liquor:n.Yj().notRequired(),crime:n.Yj().notRequired(),diseaseDesc:n.Yj().when("disease",{is:e=>e&&"yes"===e.trim().toLowerCase(),then:()=>n.Yj().notRequired(),otherwise:()=>n.Yj()}),liquorDesc:n.Yj().when("liquor",{is:e=>e&&"yes"===e.trim().toLowerCase(),then:()=>n.Yj().notRequired(),otherwise:()=>n.Yj()}),crimeDesc:n.Yj().when("crime",{is:e=>e&&"yes"===e.trim().toLowerCase(),then:()=>n.Yj().notRequired(),otherwise:()=>n.Yj()})}),c=n.Ik().shape({salaryExpectation:n.Yj().notRequired(),noExperience:n.Yj().required("Experience is required"),noticePeriod:n.Yj().required("Notice period is required"),empStatement:n.Yj().required("Employee Statement is required"),perIS:n.Yj().required("Interview status is required"),perID:n.Yj().when("perInterviewStatus",{is:e=>e&&"yes"===e.trim().toLowerCase(),then:()=>n.Yj().notRequired(),otherwise:()=>n.Yj()}),supportInfo:n.Yj(),uploadResume:n.gl().required("Resume is required").test("fileType","Only PDF, Word, Excel, or image formats (JPEG, JPG, PNG, SVG) are allowed",(e=>e&&["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","image/jpeg","image/jpg","image/png","image/svg+xml"].includes(e.type))),uploadCertificate:n.gl().required("Certificate is required").test("fileType","Only PDF, Word, Excel, or image formats (JPEG, JPG, PNG, SVG) are allowed",(e=>e&&["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","image/jpeg","image/jpg","image/png","image/svg+xml"].includes(e.type))),uploadPp:n.gl().required("Passport is required").test("fileType","Only PDF, Word, Excel, or image formats (JPEG, JPG, PNG, SVG) are allowed",(e=>e&&["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","image/jpeg","image/jpg","image/png","image/svg+xml"].includes(e.type)))}),p=n.Ik().shape({nameReq:n.Yj().notRequired(),requestorID:n.Yj().notRequired(),approverID:n.Yj().notRequired(),department:n.Yj().required("Department is required"),project:n.Yj().required("Project is required"),position:n.Yj().required("Position is required"),quantity:n.ai().typeError("Quantity must be a number").required("Quantity is required"),reasonForReq:n.Yj().required("Reason for request is required"),justification:n.Yj().required("Justification is required"),replacementFor:n.Yj().notRequired(),qualification:n.Yj().required("State Qualification is required"),tentativeDate:n.p6().min(new Date,"Tentative date must be in the future").required("Tentative date is required").typeError("Please enter a valid date"),status:n.Yj().notRequired(),remarkReq:n.Yj().notRequired()}),m=n.Ik().shape({interDate:n.p6().required("Date is required").typeError("Date is required").min(new Date,"The selected date is in the past. Please choose a valid date."),interTime:n.Yj().required("Time is required").matches(/^(0[8-9]|1[0-5]):([0-5]\d)$/,"Please choose a time between 8:00 AM and 4:00 PM."),venue:n.Yj().required("Venue is required"),interType:n.Yj().notRequired(),empBadgeNo:n.Yj().notRequired("Badge Number is required"),manager:n.Yj().notRequired("Manager is required"),message:n.Yj().optional()}),u=n.Ik().shape({jobTitle:n.Yj().required("Job Title is required"),location:n.Yj().notRequired(),jobDesc:n.Yj().notRequired(),experience:n.Yj().required("Experience is required"),quantity:n.Yj().notRequired(),startDate:n.p6().nullable().transform(((e,t)=>""===t?null:e)).notRequired(),expiryDate:n.p6().nullable().transform(((e,t)=>""===t?null:e)).notRequired().test("is-future-date","Only Future Dates Allowed",(function(e){return!e||new Date(e)>new Date})),uploadJobDetails:n.Yj().notRequired()}),x=n.Ik().shape({tempID:n.Yj().required("Temporary ID is Required"),sawpLtrReq:n.p6().notRequired(),sawpLtrRece:n.p6().notRequired(),sawpFile:n.gl().nullable().notRequired().test("fileType","Only PDF files are allowed",(e=>!!e&&"application/pdf"===e.type))}),h=n.Ik().shape({tempID:n.Yj().required("Temporary ID is Required"),doeSubmit:n.p6().notRequired(),doeApproval:n.p6().notRequired(),doeValid:n.p6().notRequired(),doeRefNo:n.Yj().notRequired(),doeFile:n.gl().nullable().notRequired().test("fileType","Only PDF files are allowed",(e=>!!e&&"application/pdf"===e.type))}),g=n.Ik().shape({tempID:n.Yj().required("Temporary ID is Required"),nlmsSubmit:n.p6().notRequired(),nlmsSubmitRefNo:n.Yj().notRequired(),nlmsApproval:n.p6().notRequired(),nlmsValid:n.p6().notRequired(),ldRefNo:n.Yj().notRequired(),nlmsFile:n.gl().nullable().notRequired().test("fileType","Only PDF files are allowed",(e=>!!e&&"application/pdf"===e.type))}),f=n.Ik().shape({tempID:n.Yj().required("Temporary ID is Required"),bgSubmit:n.p6().notRequired(),bgRece:n.p6().notRequired(),bgValid:n.p6().notRequired(),bgRefNo:n.Yj().notRequired(),bgAmount:n.Yj().notRequired(),bgFile:n.gl().nullable().notRequired().test("fileType","Only PDF files are allowed",(e=>!!e&&"application/pdf"===e.type))}),v=n.Ik().shape({tempID:n.Yj().required("Temporary ID is Required"),jpTbaPurchase:n.p6().notRequired(),jpEndorsement:n.p6().notRequired(),jitpaValid:n.p6().notRequired(),jpAmount:n.Yj().notRequired(),jitpaFile:n.gl().nullable().notRequired().test("fileType","Only PDF files are allowed",(e=>!!e&&"application/pdf"===e.type))}),y=n.Ik().shape({tempID:n.Yj().required("Temporary ID is Required"),labDepReceiptNo:n.Yj().notRequired(),labDepAmount:n.Yj().notRequired(),labEndrose:n.p6().notRequired(),labDepFile:n.gl().nullable().notRequired().test("fileType","Only PDF files are allowed",(e=>!!e&&"application/pdf"===e.type))}),b=n.Ik().shape({tempID:n.Yj().required("Temporary ID is Required"),immbdNo:n.Yj().notRequired(),docSubmit:n.p6().notRequired(),visaApproval:n.p6().notRequired(),visaRefNo:n.Yj().notRequired(),visaFile:n.gl().nullable().notRequired().test("fileType","Only PDF files are allowed",(e=>!!e&&"application/pdf"===e.type))}),N=n.Ik().shape({tempID:n.Yj().required("Temporary ID is Required"),departure:n.p6().notRequired(),arrival:n.p6().notRequired(),cityName:n.Yj().notRequired(),airFare:n.Yj().notRequired(),airTktFile:n.gl().nullable().notRequired().test("fileType","Only PDF files are allowed",(e=>!!e&&"application/pdf"===e.type))}),j=n.Ik().shape({tempID:n.Yj().required("Temporary ID is Required"),mobSignDate:n.p6().notRequired(),agent:n.Yj().notRequired(),remarkNLMob:n.Yj().notRequired(),mobFile:n.gl().nullable().notRequired().test("fileType","Only PDF files are allowed",(e=>!!e&&"application/pdf"===e.type))})},4598:e=>{"use strict";e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxQHEBEREBIQDhAQEg8SGREQDRUQFxcTFREYGBQVExYYKCosGBolHhMVITEhJSkrMi4uFx8zODMsNygtLisBCgoKBQUFDgUFDisZExkrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrK//AABEIAOAA4QMBIgACEQEDEQH/xAAcAAEAAgMBAQEAAAAAAAAAAAAABgcBBQgEAgP/xAA+EAACAQEEBQcKBQMFAAAAAAAAAQIDBAURUQYSITGRBxNBYXGBsRQiMkJSYnKhwdEVIzNT4UOCskRzg8Lw/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/ALpAAAAAAAAAAAAAAeS8bypXZHWrTjTXRi9r7F0kLvTlGwxVmpY+/VfhFfVgT8FNWzS212vfWlBZU0oeBq6tuq1fSq1JfFUkwL5BQkbVOO1Tmn1TaPdZdI7VZfRr1eyUtdfMC7QVndvKJVo4KvTjWjnF6kvsyaXLpLZ742U56s/25+bLuz7gNwAAAAAAAAAAAAAyAAMAAAAAAAAAAAQ7SrTWN2t0rPhUrbU5b4w+7PNp3pW7NjZrO/P3Tmn6Pux6yuAP3ttrnbpudWUqk30yePDJH4AAAAAAAAynqvFbGulGABNdGNOZWVqnasalPYlU9aPxe0iyaFaNoipwalGSTUk8U0UCSXQ/SeVyz1Jtys83tXsv2o/VAW4D5pVFVipRalGSTTW5p7mj6AAAAAAAAAyAAMAAAAAAAAGh0yvz8Es+Mf1amMYLLOXcb4pvTO9fxW1zaeNOnjTj2J7X3sDRyk5ttvFtttvpb3mAAAAAAAAAAAAAAACf8m9/7fJKj2bXTbfGH1RYRQdmryss4zg8JQakn1pl4XRbleVCnWj/AFIp4ZPpXHED2AAAAAAAAyAAMAAAAAAAA1mklt/D7LWqLY1BpfE9i8SkS0uU2vzdkjH9yrFdyTf0KtAAAAAAAAAAAAAAAAAFlcl1u52jVov+nJSXwy/lFaku5Mq/N2yUeipSmu9NNeDAtMAAAAAAAGQABgAAAAAAAEG5VX+TZ/8Acn/iVuWdyo0tezUpezV8YsrEAAAAAAAAAAAAAAAAASPk+eFvpfDU/wASOEq5NqXOW5P2KdSXgvqBa4AAAAAAAMgADAAAAAAAANJpnY/LbFWitrjHXX9rxKZOgJRU009qaww6ij7/ALtd1WipSe6Mm4vOL2x+QGvAAAAAAAAAAAAAAAALB5K7Hhz9Z9OrTXjL6FfpY7FtbLq0Xu38KstKm/S1daXxS2v7dwG2AAAAAAABkAAYAAAAAAAAIdyi3H5dSVoprGpRT1klvp/x9yYmGsQOfwSvTfRh3TN1qSxoTe5L0JPofVkRQAAAAAAAAAAAABsbiued9VlSp9spYbIxzYG65Prj/Ea/PTX5VBp7V6U+hd28tY8l13fC66UKVNYRgsOtvpb62esAAAAAAAADIAAwAAAAAAAAAAPitSjXi4zSlGSaaaxTRWOlehc7vbq2dOpR2tw3yh90WiAOfgW7f2htC9sZR/Iqv1oLY370ekgl6aGWq78Woc9H2qW3jHeBHQfVSDpvCScWuhrB8D5AAAADa3bo7aby/TpS1faktSPFk1uTk+hZ8J2mXOy/bjsiu1+t8gIbo9o5Vv2XmLUpr0qslsXZm+otq5bop3NSVOku2T3yebPZRpRoRUYJRjFYKMVgkupH2AAAAAAAAAAAGQABgAAAAAANPpFpFSuKGM/PqNebTT2vreS6wNtUmqScpNRitrbeCXayK3np7Z7HLVpqVoeO1wwUUunBveQC/dIa19yxqSwh0U4vCK+762akC9rsvKnelNVKMlOL4p5SXQz1lE3beVS6569GbhLq3NZNdKLCuLT+nacI2lczP21tg+32QJoD86FaNoipQlGcX60WmvkfoB+NossLUsKkIVF70FLxNdU0YslTfZ6fcsPA24A00dFbJH/T0/me6y3XRsn6dGlB5qmseJ6wAAG4AfNSapJyk1GKWLbeCS6yP31pjZ7rxSlz9RepTeO3rl0Fc3/pLWvt4TepTxxVKL2d+bAsBad2XnXTbkorZzurjFvxw6yR2e0RtUVOnKM4vdKLxRQZ77ovirc89ajNxzi9sZdqAvIEe0Y0rp34tV4Uq6W2Dex5uD6ewkIAAAAABkAAYAAAA1ekd8xuOi6ktsnshDH0pfYDxaW6TRuKGrHCdea82OS9qXUVLa7TO2TlUqSc5yeLbM221zt1SVSo3Kc3i2/BdR+AAAAAAB6bDeFW73rUak6b92WCfaukk9g5QrRQwVWFOss/QfFfYh4Asyzco1Gf6lKrTfU1NfQ98NOrHLfOce2kypABbr05sa/qSf8AxSPJX5Q7NT9GNap2RUfEq0ATm28o9SeyjRhDrnNzfBYEavPSC0Xpsq1ZOL9SL1Y8FvNWAAAAAAD6p1HSalFuMovFNPBp9RaOhelivVKjWajXitkv3Ev+xVh9UqjoyUotxlFppremukC/wR/Q7SFX5Rwlgq1NJTWeU11MkAAAAZAAGAAB8zmqabbwSTbb6Et7Ka0rvt35aHPbzcMYwXu59rJrykXx5JRjZ4Pz62Ll1U1934MrAAAAAAAAAAAAAAAAAAAAAAAAAAAAPfcl5yuivCtD1djXtRe9Muuw2qNupwqweMKkVJd/QUKT7kyvnVcrLN7HjOGOfrR+vECwwABkAAYMSkopt7EtuPUZI9p3eH4fY54PCVX8td+/5YgVjpFebva01Kvqt4RWUFsj/wC6zWgAAAAAAAAAAAAAAAAAAAAAAAAAAAAP3sNqlYakKsPSpyUl3dB+AAvqwWpW6lTqx9GpGMl3rcfuQzkyvHn6E6Le2jLFfDL+cSZgZAAGCtuVK2c5Wo0VupwlN9sns+UfmWSUzpnafKbdXfRGWov7VgBpAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASXk9tnkltguirGVN9u9fNFuFD3bX8lrUqnsThLg9pe8XrJPNJgfQAAwURecnVr1pYPzqlR8ZMvcAc/6ryfAaryfA6AAHP+q8nwGq8nwOgABz/qvJ8BqvJ8DoAAc/6ryfAaryfA6AAHP+q8nwGq8nwOgABz/qvJ8BqvJ8DoAAc/6ryfAaryfA6AAHP+q8nwGq8nwOgABz/qvJ8BqvJ8DoAAc/6ryfAaryfA6AAHP+q8nwGq8nwOgABz/qvJ8BqvJ8DoAAc/6ryfAva6585Qoye+VKk+MEeoAZAAH/2Q=="},7843:()=>{},841:()=>{},1660:()=>{},9212:()=>{},1668:()=>{},180:()=>{},5755:()=>{},2993:()=>{},4698:()=>{},670:()=>{},7926:()=>{},7640:()=>{},5618:()=>{},7492:()=>{},1815:()=>{},6671:()=>{},2787:()=>{}}]);
//# sourceMappingURL=859.4c1bff6c.chunk.js.map