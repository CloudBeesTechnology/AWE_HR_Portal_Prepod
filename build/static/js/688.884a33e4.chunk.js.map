{"version":3,"file":"static/js/688.884a33e4.chunk.js","mappings":"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","sources":["pages/timeSheet/workers/pdfWorker.js"],"sourcesContent":["// // Web Worker for PDF generation\r\n// /* eslint-disable no-restricted-globals */\r\n// /* global importScripts */\r\n\r\n// // Use public folder files for jspdf in web worker\r\n// // Files in public folder are served statically\r\n// importScripts(\"/workers/libs/jspdf.umd.min.js\");\r\n// importScripts(\"/workers/libs/jspdf.plugin.autotable.js\");\r\n\r\n// // Access jspdf from the global scope\r\n// const { jsPDF } = self.jspdf;\r\n\r\n// // Base64 encoded checkmark image to avoid Unicode issues and performance problems\r\n// const CHECKMARK_BASE64 = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4QgEFg4aBjQ6EwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAO0lEQVQoz2NkYGD4z0ABwMjAQC7+9+/fK0ZGxvtA3H7u3Ll7586d+/fu3bsPDAwM94F4PRDfB2EAvzQS6cMW6ZoAAAAASUVORK5CYII=\";\r\n\r\n// // Helper functions\r\n// const buildTableHeaders = (dayCounts, startDate) => {\r\n//   const headers = [\"Employee Name\", \"PROJECT\"];\r\n\r\n//   // Add day headers\r\n//   for (let i = 0; i < dayCounts; i++) {\r\n//     const d = new Date(startDate);\r\n//     d.setDate(startDate.getDate() + i);\r\n//     headers.push(d.getDate());\r\n//   }\r\n\r\n//   // Add summary headers\r\n//   headers.push(\r\n//     \"NH\",\r\n//     \"ND\",\r\n//     \"PH\",\r\n//     \"PH-D\",\r\n//     \"AL/CL\",\r\n//     \"SL\",\r\n//     \"OFF\",\r\n//     \"A\",\r\n//     \"UAL\",\r\n//     \"OT\",\r\n//     \"Verified\",\r\n//     \"Updater\"\r\n//   );\r\n\r\n//   return headers;\r\n// };\r\n\r\n// const escapeHtml = (str = \"\") =>\r\n//   String(str)\r\n//     .replace(/&/g, \"&amp;\")\r\n//     .replace(/</g, \"&lt;\")\r\n//     .replace(/>/g, \"&gt;\")\r\n//     .replace(/\"/g, \"&quot;\")\r\n//     .replace(/'/g, \"&#039;\");\r\n\r\n// const buildTableBody = (rows, dayCounts, startDate) => {\r\n//   // We'll build an array of rows, with each employee taking multiple rows\r\n//   const tableRows = [];\r\n\r\n//   // Grand totals for footer\r\n//   let grandTotals = {\r\n//     totalHours: 0,\r\n//     normalDays: 0,\r\n//     PH: 0,\r\n//     PHD: 0,\r\n//     ALCL: 0,\r\n//     SL: 0,\r\n//     OFF: 0,\r\n//     ABS: 0,\r\n//     UAL: 0,\r\n//     OT: 0,\r\n//   };\r\n\r\n//   rows.forEach((emp, idx) => {\r\n//     // Accumulate grand totals\r\n//     grandTotals.totalHours += Number(emp.__totalHours || 0);\r\n//     grandTotals.normalDays += Number(emp.__NormalDays || 0);\r\n//     grandTotals.PH += Number(emp?.hollydayCounts?.PH || 0);\r\n//     grandTotals.PHD += Number(emp.__calculatedPHD || 0);\r\n//     grandTotals.ALCL += Number(emp.__totalOfALCL || 0);\r\n//     grandTotals.SL += Number(emp?.empLeaveCount?.SL || 0);\r\n//     grandTotals.OFF += Number(emp?.hollydayCounts?.OFF || 0);\r\n//     grandTotals.ABS += Number(emp.__roundedTotalAbsentiesHrs || 0);\r\n//     grandTotals.UAL += Number(emp?.empLeaveCount?.UAL || 0);\r\n//     grandTotals.OT += Number(emp.__totalOT || 0);\r\n\r\n//     // Build cells for working hours, OT, and verification\r\n//     let workingCells = [];\r\n//     let otCells = [];\r\n//     let verifiedCells = [];\r\n\r\n//     for (let i = 0; i < dayCounts; i++) {\r\n//       const currentDay = new Date(startDate);\r\n//       currentDay.setDate(startDate.getDate() + i);\r\n//       const key = `${currentDay.getDate()}-${\r\n//         currentDay.getMonth() + 1\r\n//       }-${currentDay.getFullYear()}`;\r\n\r\n//       const workVal = emp?.workingHrs?.[key] ?? \"\";\r\n//       const otVal = emp?.OVERTIMEHRS?.[key] ?? \"0\";\r\n//       const isChecked = Boolean(emp?.getVerify?.[key]);\r\n\r\n//       workingCells.push(escapeHtml(String(workVal)));\r\n//       otCells.push(escapeHtml(String(otVal)));\r\n//       // For verified cells, we use a special marker that will be replaced with checkbox image\r\n//       // Instead of whitespace, push a special token when checked.\r\n//       // We'll draw the checkbox image for cells with 'IMG_CHECKMARK'\r\n//       verifiedCells.push(isChecked ? \"\\u00A0\" : \"\");\r\n//     }\r\n\r\n//     // First row: Employee details and working hours (with rowspan for Employee Name, Project, Verified, and Updater)\r\n//     const firstRow = [];\r\n\r\n//     // Employee Name cell with rowspan (spans working hours and OT rows)\r\n//     const empNameContent = `${escapeHtml(emp.name || \"\")}\r\n// Badge# : ${escapeHtml(emp.empBadgeNo || \"\")} | SapID : ${escapeHtml(\r\n//       emp.sapNo || \"\"\r\n//     )}\r\n// Hours/Day: ${escapeHtml(\r\n//       String(\r\n//         Array.isArray(emp?.workHrs) && emp?.workHrs.length > 0\r\n//           ? emp.workHrs[emp.workHrs.length - 1]\r\n//           : emp?.workHrs || \"0\"\r\n//       )\r\n//     )}\r\n// Days/Month: ${escapeHtml(\r\n//       String(\r\n//         Array.isArray(emp?.workMonth) && emp?.workMonth.length > 0\r\n//           ? emp.workMonth[emp.workMonth.length - 1]\r\n//           : emp?.workMonth || \"0\"\r\n//       )\r\n//     )}\r\n// SalaryType: ${escapeHtml(\r\n//       (Array.isArray(emp?.salaryType) && emp?.salaryType.length > 0\r\n//         ? emp.salaryType[emp.salaryType.length - 1]\r\n//         : emp?.salaryType) || \"\"\r\n//     )}`;\r\n//     firstRow.push({\r\n//       content: empNameContent,\r\n//       rowSpan: 2, // Span across working hours and OT rows only\r\n//       styles: { valign: \"middle\" },\r\n//     });\r\n\r\n//     // Project cell with rowspan (spans working hours and OT rows)\r\n//     firstRow.push({\r\n//       content: escapeHtml(emp.jobcode || \"\"),\r\n//       rowSpan: 2, // Span across working hours and OT rows only\r\n//       styles: { valign: \"middle\" },\r\n//     });\r\n\r\n//     // Day cells (working hours)\r\n//     workingCells.forEach((cell) => {\r\n//       firstRow.push(cell);\r\n//     });\r\n\r\n//     // Summary cells\r\n//     firstRow.push(Number(emp.__totalHours || 0).toFixed(2));\r\n//     firstRow.push(Number(emp.__NormalDays || 0).toFixed(2));\r\n//     firstRow.push(emp?.hollydayCounts?.PH || 0);\r\n//     firstRow.push(emp.__calculatedPHD || 0);\r\n//     firstRow.push(emp.__totalOfALCL || 0);\r\n//     firstRow.push(emp?.empLeaveCount?.SL || 0);\r\n//     firstRow.push(emp?.hollydayCounts?.OFF || 0);\r\n//     firstRow.push(Number(emp.__roundedTotalAbsentiesHrs || 0).toFixed(2));\r\n//     firstRow.push(emp?.empLeaveCount?.UAL || 0);\r\n//     firstRow.push(Number(emp.__totalOT || 0).toFixed(2));\r\n//     firstRow.push({\r\n//       content: emp.__allFieldsYes ? \"Yes\" : \"\",\r\n//       rowSpan: 2, // Span across working hours and OT rows only\r\n//       styles: { valign: \"middle\" },\r\n//     });\r\n//     firstRow.push({\r\n//       content: escapeHtml(emp.__uniqueTimeKeeperName || \"\"),\r\n//       rowSpan: 2, // Span across working hours and OT rows only\r\n//       styles: { valign: \"middle\" },\r\n//     });\r\n\r\n//     tableRows.push(firstRow);\r\n\r\n//     // Second row: OT values (shares Employee Name, Project, Verified, and Updater columns via rowspan)\r\n//     const secondRow = [];\r\n\r\n//     // Day cells (OT values) - no Employee Name, Project, Verified, and Updater cells due to rowspan\r\n//     otCells.forEach((cell) => {\r\n//       secondRow.push(cell);\r\n//     });\r\n\r\n//     // Empty cells for summary columns (10 columns, excluding Verified and Updater which are spanned)\r\n//     for (let i = 0; i < 10; i++) {\r\n//       secondRow.push(\"\");\r\n//     }\r\n\r\n//     tableRows.push(secondRow);\r\n\r\n//     // Third row: Verification ticks (does NOT share Employee Name, Project, Verified, or Updater columns)\r\n//     const thirdRow = [];\r\n\r\n//     // Employee Name cell (separate cell, not shared)\r\n//     thirdRow.push(\"\");\r\n\r\n//     // Project cell (separate cell, not shared)\r\n//     thirdRow.push(\"\");\r\n\r\n//     // Day cells (verification ticks)\r\n//     verifiedCells.forEach((cell) => {\r\n//       thirdRow.push(cell);\r\n//     });\r\n\r\n//     // Empty cells for summary columns (10 columns, excluding Verified and Updater which are not shared)\r\n//     for (let i = 0; i < 10; i++) {\r\n//       thirdRow.push(\"\");\r\n//     }\r\n\r\n//     // Verified cell (separate cell, not shared)\r\n//     thirdRow.push(\"\");\r\n\r\n//     // Updater cell (separate cell, not shared)\r\n//     thirdRow.push(\"\");\r\n\r\n//     tableRows.push(thirdRow);\r\n\r\n//     // Fourth row: Totals for this employee (highlighted)\r\n//     const totalsRow = [];\r\n\r\n//     // Label cell with light grey color\r\n//     totalsRow.push({\r\n//       content: \"Total\",\r\n//       styles: { fillColor: [216, 211, 211] },\r\n//     });\r\n\r\n//     // Empty cell for project with light grey color\r\n//     totalsRow.push({ content: \"\", styles: { fillColor: [216, 211, 211] } });\r\n\r\n//     // Empty cells for day columns with colSpan\r\n//     totalsRow.push({\r\n//       content: \"\",\r\n//       colSpan: dayCounts,\r\n//       styles: { fillColor: [216, 211, 211] }, // Light grey color\r\n//     });\r\n\r\n//     // Summary totals for this employee\r\n//     totalsRow.push({\r\n//       content: Number(emp.__totalHours || 0).toFixed(2),\r\n//       styles: { fillColor: [216, 211, 211] },\r\n//     }); // NH\r\n//     totalsRow.push({\r\n//       content: Number(emp.__NormalDays || 0).toFixed(2),\r\n//       styles: { fillColor: [216, 211, 211] },\r\n//     }); // ND\r\n//     totalsRow.push({\r\n//       content: emp?.hollydayCounts?.PH || 0,\r\n//       styles: { fillColor: [216, 211, 211] },\r\n//     }); // PH\r\n//     totalsRow.push({\r\n//       content: emp.__calculatedPHD || 0,\r\n//       styles: { fillColor: [216, 211, 211] },\r\n//     }); // PH-D\r\n//     totalsRow.push({\r\n//       content: emp.__totalOfALCL || 0,\r\n//       styles: { fillColor: [216, 211, 211] },\r\n//     }); // AL/CL\r\n//     totalsRow.push({\r\n//       content: emp?.empLeaveCount?.SL || 0,\r\n//       styles: { fillColor: [216, 211, 211] },\r\n//     }); // SL\r\n//     totalsRow.push({\r\n//       content: emp?.hollydayCounts?.OFF || 0,\r\n//       styles: { fillColor: [216, 211, 211] },\r\n//     }); // OFF\r\n//     totalsRow.push({\r\n//       content: Number(emp.__roundedTotalAbsentiesHrs || 0).toFixed(2),\r\n//       styles: { fillColor: [216, 211, 211] },\r\n//     }); // A\r\n//     totalsRow.push({\r\n//       content: emp?.empLeaveCount?.UAL || 0,\r\n//       styles: { fillColor: [216, 211, 211] },\r\n//     }); // UAL\r\n//     totalsRow.push({\r\n//       content: Number(emp.__totalOT || 0).toFixed(2),\r\n//       styles: { fillColor: [216, 211, 211] },\r\n//     }); // OT\r\n//     totalsRow.push({ content: \"\", styles: { fillColor: [216, 211, 211] } }); // Verified\r\n//     totalsRow.push({ content: \"\", styles: { fillColor: [216, 211, 211] } }); // Updater\r\n\r\n//     tableRows.push(totalsRow);\r\n//   });\r\n\r\n//   // Add grand total row at the end (highlighted)\r\n//   const grandTotalRow = [];\r\n\r\n//   // Label cell with light grey color\r\n//   grandTotalRow.push({\r\n//     content: \"Grand Total\",\r\n//     styles: { fillColor: [216, 211, 211] },\r\n//   });\r\n\r\n//   // Empty cell for project with light grey color\r\n//   grandTotalRow.push({ content: \"\", styles: { fillColor: [216, 211, 211] } });\r\n\r\n//   // Empty cells for day columns with colSpan\r\n//   grandTotalRow.push({\r\n//     content: \"\",\r\n//     colSpan: dayCounts,\r\n//     styles: { fillColor: [216, 211, 211] }, // Light grey color\r\n//   });\r\n\r\n//   // Grand summary totals\r\n//   grandTotalRow.push({\r\n//     content: grandTotals.totalHours.toFixed(2),\r\n//     styles: { fillColor: [216, 211, 211] },\r\n//   }); // NH\r\n//   grandTotalRow.push({\r\n//     content: grandTotals.normalDays.toFixed(2),\r\n//     styles: { fillColor: [216, 211, 211] },\r\n//   }); // ND\r\n//   grandTotalRow.push({\r\n//     content: grandTotals.PH,\r\n//     styles: { fillColor: [216, 211, 211] },\r\n//   }); // PH\r\n//   grandTotalRow.push({\r\n//     content: grandTotals.PHD,\r\n//     styles: { fillColor: [216, 211, 211] },\r\n//   }); // PH-D\r\n//   grandTotalRow.push({\r\n//     content: grandTotals.ALCL.toFixed(2),\r\n//     styles: { fillColor: [216, 211, 211] },\r\n//   }); // AL/CL\r\n//   grandTotalRow.push({\r\n//     content: grandTotals.SL.toFixed(2),\r\n//     styles: { fillColor: [216, 211, 211] },\r\n//   }); // SL\r\n//   grandTotalRow.push({\r\n//     content: grandTotals.OFF,\r\n//     styles: { fillColor: [216, 211, 211] },\r\n//   }); // OFF\r\n//   grandTotalRow.push({\r\n//     content: grandTotals.ABS.toFixed(2),\r\n//     styles: { fillColor: [216, 211, 211] },\r\n//   }); // A\r\n//   grandTotalRow.push({\r\n//     content: grandTotals.UAL,\r\n//     styles: { fillColor: [216, 211, 211] },\r\n//   }); // UAL\r\n//   grandTotalRow.push({\r\n//     content: grandTotals.OT.toFixed(2),\r\n//     styles: { fillColor: [216, 211, 211] },\r\n//   }); // OT\r\n//   grandTotalRow.push({ content: \"\", styles: { fillColor: [216, 211, 211] } }); // Verified\r\n//   grandTotalRow.push({ content: \"\", styles: { fillColor: [216, 211, 211] } }); // Updater\r\n\r\n//   tableRows.push(grandTotalRow);\r\n\r\n//   return tableRows;\r\n// };\r\n\r\n// const getColumnStyles = (dayCounts) => {\r\n//   const columnStyles = {};\r\n\r\n//   columnStyles[0] = { cellWidth: 23 }; // Employee Name (increased for rowspan content)\r\n//   columnStyles[1] = { cellWidth: 13 }; // Project (increased for rowspan content)\r\n\r\n//   // Day columns\r\n//   for (let i = 2; i < 2 + dayCounts; i++) {\r\n//     columnStyles[i] = { cellWidth: 7 };\r\n//   }\r\n\r\n//   // Summary columns\r\n//   // NH, ND, PH, PH-D, AL/CL, SL, OFF, A, UAL, OT, Verified, Updater\r\n//   const summaryStartIndex = 2 + dayCounts;\r\n//   for (let i = 0; i < 10; i++) {\r\n//     // First 10 summary columns\r\n//     columnStyles[summaryStartIndex + i] = { cellWidth: 8 };\r\n//   }\r\n\r\n//   // Verified column\r\n//   columnStyles[summaryStartIndex + 10] = { cellWidth: \"auto\" }; // Verified column\r\n\r\n//   // Updater column\r\n//   columnStyles[summaryStartIndex + 11] = {\r\n//     cellWidth: 17,\r\n//     overflow: \"linebreak\",\r\n//   }; // Updater column (increased for rowspan content)\r\n\r\n//   return columnStyles;\r\n// };\r\n\r\n// const addPDFHeader = (doc, location, formattedStartDate, formattedEndDate, tableLogoBase64) => {\r\n//   if (tableLogoBase64) {\r\n//     const imgProps = doc.getImageProperties(tableLogoBase64);\r\n//     const imgWidth = 40;\r\n//     const imgHeight = (imgProps.height * imgWidth) / imgProps.width;\r\n//     doc.addImage(tableLogoBase64, \"PNG\", 5, 10, imgWidth, imgHeight);\r\n//   }\r\n\r\n//   const titleX = 5;\r\n//   const titleY = tableLogoBase64 ? 10 + 20 + 5 : 15;\r\n//   doc.setFontSize(10);\r\n//   doc.text(\r\n//     `TIMESHEET SUMMARY - ${location.toUpperCase()} DIVISION`,\r\n//     titleX,\r\n//     titleY\r\n//   );\r\n//   doc.text(\r\n//     `FOR THE PERIOD ${formattedStartDate} TO ${formattedEndDate}`,\r\n//     titleX,\r\n//     titleY + 5\r\n//   );\r\n//   return titleY + 10;\r\n// };\r\n\r\n// // Main function to generate PDF\r\n// const generatePDF = async (data) => {\r\n//   try {\r\n//     const {\r\n//       rows,\r\n//       dayCounts,\r\n//       startDate,\r\n//       formattedStartDate,\r\n//       formattedEndDate,\r\n//       location,\r\n//       tableLogoBase64,\r\n//       // Removed checkboxBase64 parameter to improve performance\r\n//     } = data;\r\n\r\n//     // Report progress\r\n//     self.postMessage({\r\n//       type: \"progress\",\r\n//       progress: 30,\r\n//       message: \"Generating PDF...\",\r\n//     });\r\n\r\n//     const doc = new jsPDF({\r\n//       orientation: \"landscape\",\r\n//       unit: \"mm\",\r\n//       format: \"a3\",\r\n//     });\r\n\r\n//     const headers = buildTableHeaders(dayCounts, new Date(startDate));\r\n//     const body = buildTableBody(rows, dayCounts, new Date(startDate));\r\n//     const columnStyles = getColumnStyles(dayCounts);\r\n\r\n//     // Add header\r\n//     const headerHeight = addPDFHeader(\r\n//       doc,\r\n//       location,\r\n//       formattedStartDate,\r\n//       formattedEndDate,\r\n//       tableLogoBase64\r\n//     );\r\n\r\n//     // Generate the PDF\r\n//     doc.autoTable({\r\n//       tableWidth: \"wrap\",\r\n//       head: [headers],\r\n//       body: body,\r\n//       foot: [],\r\n//       showFoot: \"never\",\r\n//       useCss: true,\r\n//       startY: headerHeight + 5,\r\n//       margin: { top: 5, right: 5, bottom: 10, left: 5 },\r\n//       styles: {\r\n//         fontSize: 8,\r\n//         cellPadding: 1,\r\n//         overflow: \"linebreak\",\r\n//         cellWidth: \"wrap\",\r\n//         lineColor: [0, 0, 0],\r\n//         lineWidth: 0.1,\r\n//       },\r\n//       columnStyles,\r\n//       headStyles: {\r\n//         fillColor: [120, 120, 120],\r\n//         textColor: [255, 255, 255],\r\n//         fontStyle: \"bold\",\r\n//         halign: \"center\",\r\n//       },\r\n//       alternateRowStyles: { fillColor: [255, 255, 255] },\r\n//       pageBreak: \"auto\",\r\n//       horizontalPageBreak: false,\r\n//       // didDrawCell is called for every cell after it's drawn — we'll draw the checkbox on top if token is present\r\n//       didDrawCell: (hookData) => {\r\n//         try {\r\n//           const cell = hookData.cell;\r\n//           // We only want to draw the image for day-level verified cells (which contain the token)\r\n//           // cell.raw holds original content (if set) — some versions use cell.text; check both\r\n//           const raw = cell.raw;\r\n//           const text = String(cell.text || \"\");\r\n\r\n//           console.log(\"1 IMG_CHECKMARK...\");\r\n//           // Check if this cell should have a checkbox\r\n//           if (text === \"\\u00A0\" || raw === \"\\u00A0\") {\r\n//             console.log(\"2 IMG_CHECKMARK...\");\r\n//             // compute image size (small)\r\n//             const imgProps = doc.getImageProperties(CHECKMARK_BASE64);\r\n//             const imgWidth = 4.5; // mm - adjust if you want bigger/smaller ticks\r\n//             const imgHeight = (imgProps.height * imgWidth) / imgProps.width;\r\n\r\n//             // center the image inside the cell\r\n//             const x = cell.x + (cell.width - imgWidth) / 2;\r\n//             const y = cell.y + (cell.height - imgHeight) / 2;\r\n\r\n//             // Draw image (PNG)\r\n//             doc.addImage(CHECKMARK_BASE64, \"PNG\", x, y, imgWidth, imgHeight);\r\n//           }\r\n//         } catch (e) {\r\n//           // swallow drawing errors so PDF generation continues\r\n//           // optionally report error:\r\n//           // console.warn('didDrawCell checkbox draw error', e);\r\n//         }\r\n//       },\r\n//       didDrawPage: (data) => {\r\n//         // Add footer on every page\r\n//         doc.setFontSize(8);\r\n//         doc.setTextColor(100);\r\n//         doc.text(\r\n//           `Page ${data.pageNumber}`,\r\n//           doc.internal.pageSize.width - 15,\r\n//           doc.internal.pageSize.height - 10,\r\n//           { align: \"right\" }\r\n//         );\r\n//         doc.text(\r\n//           `Generated on ${new Date().toLocaleDateString()}`,\r\n//           15,\r\n//           doc.internal.pageSize.height - 10,\r\n//           { align: \"left\" }\r\n//         );\r\n//       },\r\n//     });\r\n\r\n//     // Report progress\r\n//     self.postMessage({\r\n//       type: \"progress\",\r\n//       progress: 90,\r\n//       message: \"Preparing download...\",\r\n//     });\r\n\r\n//     // Convert PDF to array buffer\r\n//     const arrayBuffer = doc.output(\"arraybuffer\");\r\n\r\n//     // Send the array buffer back to main thread\r\n//     self.postMessage({\r\n//       type: \"complete\",\r\n//       arrayBuffer: arrayBuffer,\r\n//       filename: `TIMESHEET SUMMARY - ${location} DIVISION FOR THE PERIOD ${formattedStartDate} TO ${formattedEndDate}.pdf`,\r\n//     });\r\n//   } catch (error) {\r\n//     self.postMessage({ type: \"error\", error: error.message });\r\n//   }\r\n// };\r\n\r\n// // Listen for messages from main thread\r\n// self.addEventListener(\"message\", async (event) => {\r\n//   const { type, data } = event.data;\r\n\r\n//   switch (type) {\r\n//     case \"GENERATE_PDF\":\r\n//       await generatePDF(data);\r\n//       break;\r\n//     default:\r\n//       self.postMessage({ type: \"error\", error: \"Unknown message type\" });\r\n//   }\r\n// });\r\n// /* eslint-enable no-restricted-globals */\r\n\r\n// Web Worker for PDF generation\r\n/* eslint-disable no-restricted-globals */\r\n/* global importScripts */\r\n\r\n// Use public folder files for jspdf in web worker\r\n// Files in public folder are served statically\r\nimportScripts(\"/workers/libs/jspdf.umd.min.js\");\r\nimportScripts(\"/workers/libs/jspdf.plugin.autotable.js\");\r\n\r\n// Access jspdf from the global scope\r\nconst { jsPDF } = self.jspdf;\r\n\r\n// Base64 encoded checkmark image (small PNG)\r\nconst CHECKMARK_BASE64 =\r\n  \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4QgEFg4aBjQ6EwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAO0lEQVQoz2NkYGD4z0ABwMjAQC7+9+/fK0ZGxvtA3H7u3Ll7586d+/fu3bsPDAwM94F4PRDfB2EAvzQS6cMW6ZoAAAAASUVORK5CYII=\";\r\n\r\n// Token used in table cells to indicate a checked state (invisible marker)\r\nconst CHECK_TOKEN = \"\\u00A0\";\r\n\r\n// Font Awesome font for checkmarks\r\nlet FONT_AWESOME_BASE64 = null;\r\n\r\n// Function to load font and convert to base64\r\nfunction loadFontAsBase64(url) {\r\n  return new Promise((resolve, reject) => {\r\n    const xhr = new XMLHttpRequest();\r\n    xhr.onload = function () {\r\n      const reader = new FileReader();\r\n      reader.onloadend = function () {\r\n        resolve(reader.result);\r\n      };\r\n      reader.readAsDataURL(xhr.response);\r\n    };\r\n    xhr.onerror = reject;\r\n    xhr.open(\"GET\", url);\r\n    xhr.responseType = \"blob\";\r\n    xhr.send();\r\n  });\r\n}\r\n\r\n// Load the font when the worker starts\r\n(async function loadFontAwesome() {\r\n  try {\r\n    FONT_AWESOME_BASE64 = await loadFontAsBase64(\r\n      \"/fonts/fontawesome-webfont.ttf\"\r\n    );\r\n  } catch (error) {\r\n    // console.error('Failed to load Font Awesome:', error);\r\n  }\r\n})();\r\n\r\n// Helper functions\r\nconst buildTableHeaders = (dayCounts, startDate) => {\r\n  const headers = [\"Employee Name\", \"PROJECT\"];\r\n\r\n  // Add day headers\r\n  for (let i = 0; i < dayCounts; i++) {\r\n    const d = new Date(startDate);\r\n    // Advance d by i days relative to startDate\r\n    d.setDate(new Date(startDate).getDate() + i);\r\n    headers.push(d.getDate());\r\n  }\r\n\r\n  // Add summary headers\r\n  headers.push(\r\n    \"NH\",\r\n    \"ND\",\r\n    \"PH\",\r\n    \"PH-D\",\r\n    \"AL/CL\",\r\n    \"SL\",\r\n    \"OFF\",\r\n    \"A\",\r\n    \"UAL\",\r\n    \"OT\",\r\n    \"Verified\",\r\n    \"Updater\"\r\n  );\r\n\r\n  return headers;\r\n};\r\n\r\nconst escapeHtml = (str = \"\") =>\r\n  String(str)\r\n    .replace(/&/g, \"&amp;\")\r\n    .replace(/</g, \"&lt;\")\r\n    .replace(/>/g, \"&gt;\")\r\n    .replace(/\"/g, \"&quot;\")\r\n    .replace(/'/g, \"&#039;\");\r\n\r\nconst buildTableBody = (rows, dayCounts, startDate) => {\r\n  // We'll build an array of rows, with each employee taking multiple rows\r\n  const tableRows = [];\r\n\r\n  // Grand totals for footer\r\n  let grandTotals = {\r\n    totalHours: 0,\r\n    normalDays: 0,\r\n    PH: 0,\r\n    PHD: 0,\r\n    ALCL: 0,\r\n    SL: 0,\r\n    OFF: 0,\r\n    ABS: 0,\r\n    UAL: 0,\r\n    OT: 0,\r\n  };\r\n\r\n  rows.forEach((emp) => {\r\n    // Accumulate grand totals\r\n    grandTotals.totalHours += Number(emp.__totalHours || 0);\r\n    grandTotals.normalDays += Number(emp.__NormalDays || 0);\r\n    grandTotals.PH += Number(emp?.hollydayCounts?.PH || 0);\r\n    grandTotals.PHD += Number(emp.__calculatedPHD || 0);\r\n    grandTotals.ALCL += Number(emp.__totalOfALCL || 0);\r\n    grandTotals.SL += Number(emp?.empLeaveCount?.SL || 0);\r\n    grandTotals.OFF += Number(emp?.hollydayCounts?.OFF || 0);\r\n    grandTotals.ABS += Number(emp.__roundedTotalAbsentiesHrs || 0);\r\n    grandTotals.UAL += Number(emp?.empLeaveCount?.UAL || 0);\r\n    grandTotals.OT += Number(emp.__totalOT || 0);\r\n\r\n    // Build cells for working hours, OT, and verification\r\n    const workingCells = [];\r\n    const otCells = [];\r\n    const verifiedCells = [];\r\n\r\n    for (let i = 0; i < dayCounts; i++) {\r\n      const currentDay = new Date(startDate);\r\n      currentDay.setDate(new Date(startDate).getDate() + i);\r\n      const key = `${currentDay.getDate()}-${\r\n        currentDay.getMonth() + 1\r\n      }-${currentDay.getFullYear()}`;\r\n\r\n      const workVal = emp?.workingHrs?.[key] ?? \"\";\r\n      const otVal = emp?.OVERTIMEHRS?.[key] ?? \"0\";\r\n      const isChecked = Boolean(emp?.getVerify?.[key]);\r\n\r\n      workingCells.push(escapeHtml(String(workVal)));\r\n      otCells.push(escapeHtml(String(otVal)));\r\n      // Use CHECK_TOKEN for cells that should render the checkmark image\r\n      verifiedCells.push(isChecked ? CHECK_TOKEN : \"\");\r\n    }\r\n\r\n    // First row: Employee details and working hours (with rowspan for Employee Name, Project, Verified, and Updater)\r\n    const firstRow = [];\r\n\r\n    // Employee Name cell with rowspan (spans working hours and OT rows only)\r\n    const empNameContent = `${escapeHtml(emp.name || \"\")}\r\nBadge# : ${escapeHtml(emp.empBadgeNo || \"\")} | SapID : ${escapeHtml(\r\n      emp.sapNo || \"\"\r\n    )}\r\nHours/Day: ${escapeHtml(\r\n      String(\r\n        Array.isArray(emp?.workHrs) && emp?.workHrs.length > 0\r\n          ? emp.workHrs[emp.workHrs.length - 1]\r\n          : emp?.workHrs || \"0\"\r\n      )\r\n    )}\r\nDays/Month: ${escapeHtml(\r\n      String(\r\n        Array.isArray(emp?.workMonth) && emp?.workMonth.length > 0\r\n          ? emp.workMonth[emp.workMonth.length - 1]\r\n          : emp?.workMonth || \"0\"\r\n      )\r\n    )}\r\nSalaryType: ${escapeHtml(\r\n      (Array.isArray(emp?.salaryType) && emp?.salaryType.length > 0\r\n        ? emp.salaryType[emp.salaryType.length - 1]\r\n        : emp?.salaryType) || \"\"\r\n    )}`;\r\n    firstRow.push({\r\n      content: empNameContent,\r\n      rowSpan: 2, // Span across working hours and OT rows only\r\n      styles: { valign: \"middle\" },\r\n    });\r\n\r\n    // Project cell with rowspan (spans working hours and OT rows only)\r\n    firstRow.push({\r\n      content: escapeHtml(emp.jobcode || \"\"),\r\n      rowSpan: 2, // Span across working hours and OT rows only\r\n      styles: { valign: \"middle\" },\r\n    });\r\n\r\n    // Day cells (working hours)\r\n    workingCells.forEach((cell) => {\r\n      firstRow.push(cell);\r\n    });\r\n\r\n    // Summary cells\r\n    firstRow.push(Number(emp.__totalHours || 0).toFixed(2));\r\n    firstRow.push(Number(emp.__NormalDays || 0).toFixed(2));\r\n    firstRow.push(emp?.hollydayCounts?.PH || 0);\r\n    firstRow.push(emp.__calculatedPHD || 0);\r\n    firstRow.push(emp.__totalOfALCL || 0);\r\n    firstRow.push(emp?.empLeaveCount?.SL || 0);\r\n    firstRow.push(emp?.hollydayCounts?.OFF || 0);\r\n    firstRow.push(Number(emp.__roundedTotalAbsentiesHrs || 0).toFixed(2));\r\n    firstRow.push(emp?.empLeaveCount?.UAL || 0);\r\n    firstRow.push(Number(emp.__totalOT || 0).toFixed(2));\r\n    firstRow.push({\r\n      content: emp.__allFieldsYes ? \"Yes\" : \"\",\r\n      rowSpan: 2, // Span across working hours and OT rows only\r\n      styles: { valign: \"middle\" },\r\n    });\r\n    firstRow.push({\r\n      content: escapeHtml(emp.__uniqueTimeKeeperName || \"\"),\r\n      rowSpan: 2, // Span across working hours and OT rows only\r\n      styles: { valign: \"middle\" },\r\n    });\r\n\r\n    tableRows.push(firstRow);\r\n\r\n    // Second row: OT values (shares Employee Name, Project, Verified, and Updater columns via rowspan)\r\n    const secondRow = [];\r\n\r\n    // Day cells (OT values) - no Employee Name, Project, Verified, and Updater cells due to rowspan\r\n    otCells.forEach((cell) => {\r\n      secondRow.push(cell);\r\n    });\r\n\r\n    // Empty cells for summary columns (10 columns, excluding Verified and Updater which are spanned)\r\n    for (let i = 0; i < 10; i++) {\r\n      secondRow.push(\"\");\r\n    }\r\n\r\n    tableRows.push(secondRow);\r\n\r\n    // Third row: Verification ticks (does NOT share Employee Name, Project, Verified, or Updater columns)\r\n    const thirdRow = [];\r\n\r\n    // Employee Name cell (separate cell, not shared)\r\n    thirdRow.push(\"\");\r\n\r\n    // Project cell (separate cell, not shared)\r\n    thirdRow.push(\"\");\r\n\r\n    // Day cells (verification ticks)\r\n    verifiedCells.forEach((cell) => {\r\n      thirdRow.push(cell);\r\n    });\r\n\r\n    // Empty cells for summary columns (10 columns, excluding Verified and Updater which are not shared)\r\n    for (let i = 0; i < 10; i++) {\r\n      thirdRow.push(\"\");\r\n    }\r\n\r\n    // Verified cell (separate cell, not shared)\r\n    thirdRow.push(\"\");\r\n\r\n    // Updater cell (separate cell, not shared)\r\n    thirdRow.push(\"\");\r\n\r\n    tableRows.push(thirdRow);\r\n\r\n    // Fourth row: Totals for this employee (highlighted)\r\n    const totalsRow = [];\r\n\r\n    // Label cell with light grey color\r\n    totalsRow.push({\r\n      content: \"Total\",\r\n      styles: { fillColor: [216, 211, 211] },\r\n    });\r\n\r\n    // Empty cell for project with light grey color\r\n    totalsRow.push({ content: \"\", styles: { fillColor: [216, 211, 211] } });\r\n\r\n    // Empty cells for day columns with colSpan\r\n    totalsRow.push({\r\n      content: \"\",\r\n      colSpan: dayCounts,\r\n      styles: { fillColor: [216, 211, 211] }, // Light grey color\r\n    });\r\n\r\n    // Summary totals for this employee\r\n    totalsRow.push({\r\n      content: Number(emp.__totalHours || 0).toFixed(2),\r\n      styles: { fillColor: [216, 211, 211] },\r\n    }); // NH\r\n    totalsRow.push({\r\n      content: Number(emp.__NormalDays || 0).toFixed(2),\r\n      styles: { fillColor: [216, 211, 211] },\r\n    }); // ND\r\n    totalsRow.push({\r\n      content: emp?.hollydayCounts?.PH || 0,\r\n      styles: { fillColor: [216, 211, 211] },\r\n    }); // PH\r\n    totalsRow.push({\r\n      content: emp.__calculatedPHD || 0,\r\n      styles: { fillColor: [216, 211, 211] },\r\n    }); // PH-D\r\n    totalsRow.push({\r\n      content: emp.__totalOfALCL || 0,\r\n      styles: { fillColor: [216, 211, 211] },\r\n    }); // AL/CL\r\n    totalsRow.push({\r\n      content: emp?.empLeaveCount?.SL || 0,\r\n      styles: { fillColor: [216, 211, 211] },\r\n    }); // SL\r\n    totalsRow.push({\r\n      content: emp?.hollydayCounts?.OFF || 0,\r\n      styles: { fillColor: [216, 211, 211] },\r\n    }); // OFF\r\n    totalsRow.push({\r\n      content: Number(emp.__roundedTotalAbsentiesHrs || 0).toFixed(2),\r\n      styles: { fillColor: [216, 211, 211] },\r\n    }); // A\r\n    totalsRow.push({\r\n      content: emp?.empLeaveCount?.UAL || 0,\r\n      styles: { fillColor: [216, 211, 211] },\r\n    }); // UAL\r\n    totalsRow.push({\r\n      content: Number(emp.__totalOT || 0).toFixed(2),\r\n      styles: { fillColor: [216, 211, 211] },\r\n    }); // OT\r\n    totalsRow.push({ content: \"\", styles: { fillColor: [216, 211, 211] } }); // Verified\r\n    totalsRow.push({ content: \"\", styles: { fillColor: [216, 211, 211] } }); // Updater\r\n\r\n    tableRows.push(totalsRow);\r\n  });\r\n\r\n  // Add grand total row at the end (highlighted)\r\n  const grandTotalRow = [];\r\n\r\n  // Label cell with light grey color\r\n  grandTotalRow.push({\r\n    content: \"Grand Total\",\r\n    styles: { fillColor: [216, 211, 211] },\r\n  });\r\n\r\n  // Empty cell for project with light grey color\r\n  grandTotalRow.push({ content: \"\", styles: { fillColor: [216, 211, 211] } });\r\n\r\n  // Empty cells for day columns with colSpan\r\n  grandTotalRow.push({\r\n    content: \"\",\r\n    colSpan: dayCounts,\r\n    styles: { fillColor: [216, 211, 211] }, // Light grey color\r\n  });\r\n\r\n  // Grand summary totals\r\n  grandTotalRow.push({\r\n    content: grandTotals.totalHours.toFixed(2),\r\n    styles: { fillColor: [216, 211, 211] },\r\n  }); // NH\r\n  grandTotalRow.push({\r\n    content: grandTotals.normalDays.toFixed(2),\r\n    styles: { fillColor: [216, 211, 211] },\r\n  }); // ND\r\n  grandTotalRow.push({\r\n    content: grandTotals.PH,\r\n    styles: { fillColor: [216, 211, 211] },\r\n  }); // PH\r\n  grandTotalRow.push({\r\n    content: grandTotals.PHD,\r\n    styles: { fillColor: [216, 211, 211] },\r\n  }); // PH-D\r\n  grandTotalRow.push({\r\n    content: grandTotals.ALCL.toFixed(2),\r\n    styles: { fillColor: [216, 211, 211] },\r\n  }); // AL/CL\r\n  grandTotalRow.push({\r\n    content: grandTotals.SL.toFixed(2),\r\n    styles: { fillColor: [216, 211, 211] },\r\n  }); // SL\r\n  grandTotalRow.push({\r\n    content: grandTotals.OFF,\r\n    styles: { fillColor: [216, 211, 211] },\r\n  }); // OFF\r\n  grandTotalRow.push({\r\n    content: grandTotals.ABS.toFixed(2),\r\n    styles: { fillColor: [216, 211, 211] },\r\n  }); // A\r\n  grandTotalRow.push({\r\n    content: grandTotals.UAL,\r\n    styles: { fillColor: [216, 211, 211] },\r\n  }); // UAL\r\n  grandTotalRow.push({\r\n    content: grandTotals.OT.toFixed(2),\r\n    styles: { fillColor: [216, 211, 211] },\r\n  }); // OT\r\n  grandTotalRow.push({ content: \"\", styles: { fillColor: [216, 211, 211] } }); // Verified\r\n  grandTotalRow.push({ content: \"\", styles: { fillColor: [216, 211, 211] } }); // Updater\r\n\r\n  tableRows.push(grandTotalRow);\r\n\r\n  return tableRows;\r\n};\r\n\r\nconst getColumnStyles = (dayCounts) => {\r\n  const columnStyles = {};\r\n\r\n  columnStyles[0] = { cellWidth: 23 }; // Employee Name (increased for rowspan content)\r\n  columnStyles[1] = { cellWidth: 13 }; // Project (increased for rowspan content)\r\n\r\n  // Day columns\r\n  for (let i = 2; i < 2 + dayCounts; i++) {\r\n    columnStyles[i] = { cellWidth: 7 };\r\n  }\r\n\r\n  // Summary columns\r\n  // NH, ND, PH, PH-D, AL/CL, SL, OFF, A, UAL, OT, Verified, Updater\r\n  const summaryStartIndex = 2 + dayCounts;\r\n  for (let i = 0; i < 10; i++) {\r\n    // First 10 summary columns\r\n    columnStyles[summaryStartIndex + i] = { cellWidth: 8 };\r\n  }\r\n\r\n  // Verified column\r\n  columnStyles[summaryStartIndex + 10] = { cellWidth: \"auto\" }; // Verified column\r\n\r\n  // Updater column\r\n  columnStyles[summaryStartIndex + 11] = {\r\n    cellWidth: 17,\r\n    overflow: \"linebreak\",\r\n  }; // Updater column (increased for rowspan content)\r\n\r\n  return columnStyles;\r\n};\r\n\r\nconst addPDFHeader = (\r\n  doc,\r\n  location,\r\n  formattedStartDate,\r\n  formattedEndDate,\r\n  tableLogoBase64\r\n) => {\r\n  if (tableLogoBase64) {\r\n    const imgProps = doc.getImageProperties(tableLogoBase64);\r\n    const imgWidth = 40;\r\n    const imgHeight = (imgProps.height * imgWidth) / imgProps.width;\r\n    doc.addImage(tableLogoBase64, \"PNG\", 5, 10, imgWidth, imgHeight);\r\n  }\r\n\r\n  const titleX = 5;\r\n  const titleY = tableLogoBase64 ? 10 + 15 : 15;\r\n  doc.setFontSize(10);\r\n  doc.text(\r\n    `TIMESHEET SUMMARY - ${location.toUpperCase()} DIVISION`,\r\n    titleX,\r\n    titleY\r\n  );\r\n  doc.text(\r\n    `FOR THE PERIOD ${formattedStartDate} TO ${formattedEndDate}`,\r\n    titleX,\r\n    titleY + 5\r\n  );\r\n  return titleY + 7;\r\n};\r\n\r\n// Main function to generate PDF\r\nconst generatePDF = async (data) => {\r\n  try {\r\n    // Wait for the font to be loaded\r\n    let attempts = 0;\r\n    while (!FONT_AWESOME_BASE64 && attempts < 50) {\r\n      // Wait up to 5 seconds\r\n      await new Promise((resolve) => setTimeout(resolve, 100));\r\n      attempts++;\r\n    }\r\n\r\n    if (!FONT_AWESOME_BASE64) {\r\n      // console.warn('Font Awesome not loaded, continuing without it');\r\n    }\r\n    const {\r\n      rows,\r\n      dayCounts,\r\n      startDate,\r\n      formattedStartDate,\r\n      formattedEndDate,\r\n      location,\r\n      tableLogoBase64,\r\n      // no checkboxBase64 expected — using CHECKMARK_BASE64 constant\r\n    } = data;\r\n\r\n    // Report progress\r\n    self.postMessage({\r\n      type: \"progress\",\r\n      progress: 30,\r\n      message: \"Generating PDF...\",\r\n    });\r\n\r\n    const doc = new jsPDF({\r\n      orientation: \"landscape\",\r\n      unit: \"mm\",\r\n      format: \"a3\",\r\n    });\r\n\r\n    // Add Font Awesome font if loaded\r\n    if (FONT_AWESOME_BASE64) {\r\n      try {\r\n        // Extract the base64 data from the data URL\r\n        const base64Data = FONT_AWESOME_BASE64.split(\",\")[1];\r\n        doc.addFileToVFS(\"fontawesome-webfont.ttf\", base64Data);\r\n        doc.addFont(\"fontawesome-webfont.ttf\", \"FontAwesome\", \"normal\");\r\n      } catch (fontError) {\r\n        // console.error('Failed to add Font Awesome to PDF:', fontError);\r\n      }\r\n    }\r\n\r\n    const headers = buildTableHeaders(dayCounts, new Date(startDate));\r\n    const body = buildTableBody(rows, dayCounts, new Date(startDate));\r\n    const columnStyles = getColumnStyles(dayCounts);\r\n\r\n    // Add header\r\n    const headerHeight = addPDFHeader(\r\n      doc,\r\n      location,\r\n      formattedStartDate,\r\n      formattedEndDate,\r\n      tableLogoBase64\r\n    );\r\n\r\n    // Generate the PDF\r\n    doc.autoTable({\r\n      tableWidth: \"wrap\",\r\n      head: [headers],\r\n      body: body,\r\n      foot: [],\r\n      showFoot: \"never\",\r\n      useCss: true,\r\n      startY: headerHeight + 5,\r\n      margin: { top: 5, right: 5, bottom: 10, left: 5 },\r\n      styles: {\r\n        fontSize: 8,\r\n        cellPadding: 1,\r\n        overflow: \"linebreak\",\r\n        cellWidth: \"wrap\",\r\n        lineColor: [0, 0, 0],\r\n        lineWidth: 0.1,\r\n      },\r\n      columnStyles,\r\n      headStyles: {\r\n        fillColor: [120, 120, 120],\r\n        textColor: [255, 255, 255],\r\n        fontStyle: \"bold\",\r\n        halign: \"center\",\r\n      },\r\n      alternateRowStyles: { fillColor: [255, 255, 255] },\r\n      pageBreak: \"auto\",\r\n      horizontalPageBreak: false,\r\n      // didDrawCell is called for every cell after it's drawn — we'll draw the checkbox on top if token is present\r\n      didDrawCell: (hookData) => {\r\n        try {\r\n          const cell = hookData.cell;\r\n          const raw = cell.raw;\r\n          const text = String(cell.text || \"\");\r\n\r\n          // Draw checkmark using Font Awesome font when the CHECK_TOKEN is present in the cell\r\n          if (\r\n            (raw === CHECK_TOKEN || text === CHECK_TOKEN) &&\r\n            FONT_AWESOME_BASE64\r\n          ) {\r\n            // Save current font and style\r\n            const originalFont = doc.getFont();\r\n            const originalSize = doc.getFontSize();\r\n\r\n            // Set Font Awesome font\r\n            doc.setFont(\"FontAwesome\");\r\n            doc.setFontSize(8);\r\n\r\n            // Unicode for Font Awesome checkmark is \\uf00c\r\n            const checkmark = \"\\uf00c\";\r\n\r\n            // Center the text in the cell\r\n            const x = cell.x + cell.width / 2;\r\n            const y = cell.y + cell.height / 2; // +2 for better vertical alignment\r\n\r\n            // Draw the checkmark\r\n            doc.text(checkmark, x, y, { align: \"center\", baseline: \"middle\" });\r\n\r\n            // Restore original font and style\r\n            //   doc.setFont(originalFont);\r\n            //   doc.setFontSize(originalSize);\r\n          }\r\n        } catch (e) {\r\n          // swallow drawing errors so PDF generation continues\r\n          // console.log(\"ERROR : \", e);\r\n        }\r\n      },\r\n\r\n      didDrawPage: (data) => {\r\n        // Add footer on every page\r\n        doc.setFontSize(8);\r\n        doc.setTextColor(100);\r\n        doc.text(\r\n          `Page ${data.pageNumber}`,\r\n          doc.internal.pageSize.width - 15,\r\n          doc.internal.pageSize.height - 10,\r\n          { align: \"right\" }\r\n        );\r\n        doc.text(\r\n          `Generated on ${new Date().toLocaleDateString()}`,\r\n          15,\r\n          doc.internal.pageSize.height - 10,\r\n          { align: \"left\" }\r\n        );\r\n      },\r\n    });\r\n\r\n    // Report progress\r\n    self.postMessage({\r\n      type: \"progress\",\r\n      progress: 90,\r\n      message: \"Preparing download...\",\r\n    });\r\n\r\n    // Convert PDF to array buffer\r\n    const arrayBuffer = doc.output(\"arraybuffer\");\r\n\r\n    // Send the array buffer back to main thread\r\n    self.postMessage({\r\n      type: \"complete\",\r\n      arrayBuffer: arrayBuffer,\r\n      filename: `TIMESHEET SUMMARY - ${location} DIVISION FOR THE PERIOD ${formattedStartDate} TO ${formattedEndDate}.pdf`,\r\n    });\r\n  } catch (error) {\r\n    self.postMessage({ type: \"error\", error: error.message });\r\n  }\r\n};\r\n\r\n// Listen for messages from main thread\r\nself.addEventListener(\"message\", async (event) => {\r\n  const { type, data } = event.data;\r\n\r\n  switch (type) {\r\n    case \"GENERATE_PDF\":\r\n      await generatePDF(data);\r\n      break;\r\n    default:\r\n      self.postMessage({ type: \"error\", error: \"Unknown message type\" });\r\n  }\r\n});\r\n/* eslint-enable no-restricted-globals */\r\n"],"names":["importScripts","jsPDF","self","jspdf","FONT_AWESOME_BASE64","url","Promise","resolve","reject","xhr","XMLHttpRequest","onload","reader","FileReader","onloadend","result","readAsDataURL","response","onerror","open","responseType","send","error","escapeHtml","String","arguments","length","undefined","replace","generatePDF","async","attempts","setTimeout","rows","dayCounts","startDate","formattedStartDate","formattedEndDate","location","tableLogoBase64","data","postMessage","type","progress","message","doc","orientation","unit","format","base64Data","split","addFileToVFS","addFont","fontError","headers","buildTableHeaders","i","d","Date","setDate","getDate","push","body","buildTableBody","tableRows","grandTotals","totalHours","normalDays","PH","PHD","ALCL","SL","OFF","ABS","UAL","OT","forEach","emp","_emp$hollydayCounts","_emp$empLeaveCount","_emp$hollydayCounts2","_emp$empLeaveCount2","_emp$hollydayCounts3","_emp$empLeaveCount3","_emp$hollydayCounts4","_emp$empLeaveCount4","_emp$hollydayCounts5","_emp$empLeaveCount5","_emp$hollydayCounts6","_emp$empLeaveCount6","Number","__totalHours","__NormalDays","hollydayCounts","__calculatedPHD","__totalOfALCL","empLeaveCount","__roundedTotalAbsentiesHrs","__totalOT","workingCells","otCells","verifiedCells","_emp$workingHrs$key","_emp$workingHrs","_emp$OVERTIMEHRS$key","_emp$OVERTIMEHRS","_emp$getVerify","currentDay","key","concat","getMonth","getFullYear","workVal","workingHrs","otVal","OVERTIMEHRS","isChecked","Boolean","getVerify","firstRow","empNameContent","name","empBadgeNo","sapNo","Array","isArray","workHrs","workMonth","salaryType","content","rowSpan","styles","valign","jobcode","cell","toFixed","__allFieldsYes","__uniqueTimeKeeperName","secondRow","thirdRow","totalsRow","fillColor","colSpan","grandTotalRow","columnStyles","cellWidth","summaryStartIndex","overflow","getColumnStyles","headerHeight","addPDFHeader","imgProps","getImageProperties","imgWidth","imgHeight","height","width","addImage","titleY","setFontSize","text","toUpperCase","autoTable","tableWidth","head","foot","showFoot","useCss","startY","margin","top","right","bottom","left","fontSize","cellPadding","lineColor","lineWidth","headStyles","textColor","fontStyle","halign","alternateRowStyles","pageBreak","horizontalPageBreak","didDrawCell","hookData","raw","getFont","getFontSize","setFont","checkmark","x","y","align","baseline","e","didDrawPage","setTextColor","pageNumber","internal","pageSize","toLocaleDateString","arrayBuffer","output","filename","addEventListener","event"],"sourceRoot":""}