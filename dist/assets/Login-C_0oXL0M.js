import{az as lt,c as Ee,D as pe,a as he,b as xe,d as me,aA as k,aB as j,ag as y,aC as ut,aD as Et,h as b,aE as V,g as T,f as $,e as U,aF as st,A as O,i as g,I as pt,aG as Ae,ab as D,al as ht,ac as xt,ad as mt,aH as ft,aI as It,aJ as Y,w as Rt,r as Fe,C as Nt,l as f}from"./index-XU-YZIKh.js";import{g as Z,l as St,d as vt,e as yt}from"./logo-with-name-TLdizOyj.js";import{g as fe,m as we,a as F,A as w,u as Tt,o as gt,L as Ct}from"./Validation-CAnmLRVc.js";const At=async()=>{const{userAgentData:e}=navigator;if(!e)return navigator.userAgent;const{platform:t="",platformVersion:o="",model:n="",architecture:i="",fullVersionList:s=[]}=await e.getHighEntropyValues(["platform","platformVersion","architecture","model","fullVersionList"]),r=s.map(a=>`${a.brand}/${a.version}`).join(";");return[t,o,i,n,t,r].filter(a=>a).join(" ")};function Ft(){return lt().getRandomValues(new Uint32Array(1))[0]}function wt(e){const{words:t}=e,{sigBytes:o}=e,n=[];for(let i=0;i<o;i++){const s=t[i>>>2]>>>24-i%4*8&255;n.push((s>>>4).toString(16)),n.push((s&15).toString(16))}return n.join("")}class Ie{constructor(t,o){this.words=[];let n=t;n=this.words=n||[],o!==void 0?this.sigBytes=o:this.sigBytes=n.length*4}random(t){const o=[];for(let n=0;n<t;n+=4)o.push(Ft());return new Ie(o,t)}toString(){return wt(this)}}var Pe;(function(e){e.ConcurrentModificationException="ConcurrentModificationException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException"})(Pe||(Pe={}));var De;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(De||(De={}));var _e;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UsernameExistsException="UsernameExistsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(_e||(_e={}));var Me;(function(e){e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyFailedAttemptsException="TooManyFailedAttemptsException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Me||(Me={}));var be;(function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyFailedAttemptsException="TooManyFailedAttemptsException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"})(be||(be={}));var Ue;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Ue||(Ue={}));var Le;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Le||(Le={}));var Be;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Be||(Be={}));var qe;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"})(qe||(qe={}));var Oe;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Oe||(Oe={}));var He;(function(e){e.ExternalServiceException="ExternalServiceException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceConflictException="ResourceConflictException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException"})(He||(He={}));var ze;(function(e){e.ExternalServiceException="ExternalServiceException",e.InternalErrorException="InternalErrorException",e.InvalidIdentityPoolConfigurationException="InvalidIdentityPoolConfigurationException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceConflictException="ResourceConflictException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException"})(ze||(ze={}));var We;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(We||(We={}));var ke;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException"})(ke||(ke={}));var K;(function(e){e.PasswordResetRequiredException="PasswordResetRequiredException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(K||(K={}));var je;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"})(je||(je={}));var Ke;(function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.MFAMethodNotFoundException="MFAMethodNotFoundException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Ke||(Ke={}));var Ve;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Ve||(Ve={}));var $e;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UsernameExistsException="UsernameExistsException"})($e||($e={}));var Ye;(function(e){e.AliasExistsException="AliasExistsException",e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Ye||(Ye={}));var Ze;(function(e){e.CodeMismatchException="CodeMismatchException",e.EnableSoftwareTokenMFAException="EnableSoftwareTokenMFAException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Ze||(Ze={}));var Xe;(function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Xe||(Xe={}));var Je;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Je||(Je={}));var Qe;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Qe||(Qe={}));const Re=e=>Ee(me,xe("RespondToAuthChallenge"),he(),{...pe,...e}),Pt=e=>Ee(me,xe("AssociateSoftwareToken"),he(),{...pe,...e}),Dt=e=>Ee(me,xe("ConfirmDevice"),he(),{...pe,...e}),_t=(e,t)=>{switch(t.type){case"SET_SIGN_IN_SESSION":return{...e,signInSession:t.value};case"SET_SIGN_IN_STATE":return{...t.value};case"SET_CHALLENGE_NAME":return{...e,challengeName:t.value};case"SET_USERNAME":return{...e,username:t.value};case"SET_INITIAL_STATE":return it();default:return e}};function it(){return{username:void 0,challengeName:void 0,signInSession:void 0}}const Mt=e=>{let t=e(it(),{type:"SET_INITIAL_STATE"});return{getState:()=>t,dispatch:o=>{t=e(t,o)}}},_=Mt(_t);function X(e){_.dispatch({type:"SET_SIGN_IN_STATE",value:e})}function P(){_.dispatch({type:"SET_INITIAL_STATE"})}const z={convert(e){return new TextEncoder().encode(e)}};function l(e,t){e!=null&&this.fromString(e,t)}function N(){return new l(null,null)}let A;const bt=0xdeadbeefcafe,Ge=(bt&16777215)===15715070;function Ut(e,t,o,n,i,s){for(;--s>=0;){const r=t*this[e++]+o[n]+i;i=Math.floor(r/67108864),o[n++]=r&67108863}return i}function Lt(e,t,o,n,i,s){const r=t&32767,c=t>>15;for(;--s>=0;){let a=this[e]&32767;const d=this[e++]>>15,u=c*a+d*r;a=r*a+((u&32767)<<15)+o[n]+(i&1073741823),i=(a>>>30)+(u>>>15)+c*d+(i>>>30),o[n++]=a&1073741823}return i}function Bt(e,t,o,n,i,s){const r=t&16383,c=t>>14;for(;--s>=0;){let a=this[e]&16383;const d=this[e++]>>14,u=c*a+d*r;a=r*a+((u&16383)<<14)+o[n]+i,i=(a>>28)+(u>>14)+c*d,o[n++]=a&268435455}return i}const et=typeof navigator<"u";et&&Ge&&navigator.appName==="Microsoft Internet Explorer"?(l.prototype.am=Lt,A=30):et&&Ge&&navigator.appName!=="Netscape"?(l.prototype.am=Ut,A=26):(l.prototype.am=Bt,A=28);l.prototype.DB=A;l.prototype.DM=(1<<A)-1;l.prototype.DV=1<<A;const Ne=52;l.prototype.FV=Math.pow(2,Ne);l.prototype.F1=Ne-A;l.prototype.F2=2*A-Ne;const qt="0123456789abcdefghijklmnopqrstuvwxyz",J=[];let L,S;L=48;for(S=0;S<=9;++S)J[L++]=S;L=97;for(S=10;S<36;++S)J[L++]=S;L=65;for(S=10;S<36;++S)J[L++]=S;function tt(e){return qt.charAt(e)}function Ot(e,t){const o=J[e.charCodeAt(t)];return o??-1}function Ht(e){for(let t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function zt(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function Se(e){const t=N();return t.fromInt(e),t}function Wt(e,t){let o;if(t===16)o=4;else if(t===8)o=3;else if(t===2)o=1;else if(t===32)o=5;else if(t===4)o=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");this.t=0,this.s=0;let n=e.length,i=!1,s=0;for(;--n>=0;){const r=Ot(e,n);if(r<0){e.charAt(n)==="-"&&(i=!0);continue}i=!1,s===0?this[this.t++]=r:s+o>this.DB?(this[this.t-1]|=(r&(1<<this.DB-s)-1)<<s,this[this.t++]=r>>this.DB-s):this[this.t-1]|=r<<s,s+=o,s>=this.DB&&(s-=this.DB)}this.clamp(),i&&l.ZERO.subTo(this,this)}function kt(){const e=this.s&this.DM;for(;this.t>0&&this[this.t-1]==e;)--this.t}function jt(e){if(this.s<0)return"-"+this.negate().toString(e);let t;if(e==16)t=4;else if(e===8)t=3;else if(e===2)t=1;else if(e===32)t=5;else if(e===4)t=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");const o=(1<<t)-1;let n,i=!1,s="",r=this.t,c=this.DB-r*this.DB%t;if(r-- >0)for(c<this.DB&&(n=this[r]>>c)>0&&(i=!0,s=tt(n));r>=0;)c<t?(n=(this[r]&(1<<c)-1)<<t-c,n|=this[--r]>>(c+=this.DB-t)):(n=this[r]>>(c-=t)&o,c<=0&&(c+=this.DB,--r)),n>0&&(i=!0),i&&(s+=tt(n));return i?s:"0"}function Kt(){const e=N();return l.ZERO.subTo(this,e),e}function Vt(){return this.s<0?this.negate():this}function $t(e){let t=this.s-e.s;if(t!=0)return t;let o=this.t;if(t=o-e.t,t!=0)return this.s<0?-t:t;for(;--o>=0;)if((t=this[o]-e[o])!=0)return t;return 0}function ve(e){let t=1,o;return(o=e>>>16)!==0&&(e=o,t+=16),(o=e>>8)!==0&&(e=o,t+=8),(o=e>>4)!==0&&(e=o,t+=4),(o=e>>2)!==0&&(e=o,t+=2),(o=e>>1)!==0&&(e=o,t+=1),t}function Yt(){return this.t<=0?0:this.DB*(this.t-1)+ve(this[this.t-1]^this.s&this.DM)}function Zt(e,t){let o;for(o=this.t-1;o>=0;--o)t[o+e]=this[o];for(o=e-1;o>=0;--o)t[o]=0;t.t=this.t+e,t.s=this.s}function Xt(e,t){for(let o=e;o<this.t;++o)t[o-e]=this[o];t.t=Math.max(this.t-e,0),t.s=this.s}function Jt(e,t){const o=e%this.DB,n=this.DB-o,i=(1<<n)-1,s=Math.floor(e/this.DB);let r=this.s<<o&this.DM,c;for(c=this.t-1;c>=0;--c)t[c+s+1]=this[c]>>n|r,r=(this[c]&i)<<o;for(c=s-1;c>=0;--c)t[c]=0;t[s]=r,t.t=this.t+s+1,t.s=this.s,t.clamp()}function Qt(e,t){t.s=this.s;const o=Math.floor(e/this.DB);if(o>=this.t){t.t=0;return}const n=e%this.DB,i=this.DB-n,s=(1<<n)-1;t[0]=this[o]>>n;for(let r=o+1;r<this.t;++r)t[r-o-1]|=(this[r]&s)<<i,t[r-o]=this[r]>>n;n>0&&(t[this.t-o-1]|=(this.s&s)<<i),t.t=this.t-o,t.clamp()}function Gt(e,t){let o=0,n=0;const i=Math.min(e.t,this.t);for(;o<i;)n+=this[o]-e[o],t[o++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;o<this.t;)n+=this[o],t[o++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;o<e.t;)n-=e[o],t[o++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[o++]=this.DV+n:n>0&&(t[o++]=n),t.t=o,t.clamp()}function eo(e,t){const o=this.abs(),n=e.abs();let i=o.t;for(t.t=i+n.t;--i>=0;)t[i]=0;for(i=0;i<n.t;++i)t[i+o.t]=o.am(0,n[i],t,i,0,o.t);t.s=0,t.clamp(),this.s!==e.s&&l.ZERO.subTo(t,t)}function to(e){const t=this.abs();let o=e.t=2*t.t;for(;--o>=0;)e[o]=0;for(o=0;o<t.t-1;++o){const n=t.am(o,t[o],e,2*o,0,1);(e[o+t.t]+=t.am(o+1,2*t[o],e,2*o+1,n,t.t-o-1))>=t.DV&&(e[o+t.t]-=t.DV,e[o+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(o,t[o],e,2*o,0,1)),e.s=0,e.clamp()}function oo(e,t,o){const n=e.abs();if(n.t<=0)return;const i=this.abs();if(i.t<n.t){t!=null&&t.fromInt(0),o!=null&&this.copyTo(o);return}o===null&&(o=N());const s=N(),r=this.s,c=e.s,a=this.DB-ve(n[n.t-1]);a>0?(n.lShiftTo(a,s),i.lShiftTo(a,o)):(n.copyTo(s),i.copyTo(o));const d=s.t,u=s[d-1];if(u===0)return;const p=u*(1<<this.F1)+(d>1?s[d-2]>>this.F2:0),E=this.FV/p,h=(1<<this.F1)/p,x=1<<this.F2;let m=o.t,I=m-d;const R=t===null?N():t;for(s.dlShiftTo(I,R),o.compareTo(R)>=0&&(o[o.t++]=1,o.subTo(R,o)),l.ONE.dlShiftTo(d,R),R.subTo(s,s);s.t<d;)s[s.t++]=0;for(;--I>=0;){let C=o[--m]===u?this.DM:Math.floor(o[m]*E+(o[m-1]+x)*h);if((o[m]+=s.am(0,C,o,I,0,d))<C)for(s.dlShiftTo(I,R),o.subTo(R,o);o[m]<--C;)o.subTo(R,o)}t!==null&&(o.drShiftTo(d,t),r!==c&&l.ZERO.subTo(t,t)),o.t=d,o.clamp(),a>0&&o.rShiftTo(a,o),r<0&&l.ZERO.subTo(o,o)}function no(e){const t=N();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(l.ZERO)>0&&e.subTo(t,t),t}function so(){if(this.t<1)return 0;const e=this[0];if(!(e&1))return 0;let t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function io(e){return this.compareTo(e)===0}function ro(e,t){let o=0,n=0;const i=Math.min(e.t,this.t);for(;o<i;)n+=this[o]+e[o],t[o++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;o<this.t;)n+=this[o],t[o++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;o<e.t;)n+=e[o],t[o++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t[o++]=n:n<-1&&(t[o++]=this.DV+n),t.t=o,t.clamp()}function ao(e){const t=N();return this.addTo(e,t),t}function co(e){const t=N();return this.subTo(e,t),t}function lo(e){const t=N();return this.multiplyTo(e,t),t}function uo(e){const t=N();return this.divRemTo(e,t,null),t}function B(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function Eo(e){const t=N();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(l.ZERO)>0&&this.m.subTo(t,t),t}function po(e){const t=N();return e.copyTo(t),this.reduce(t),t}function ho(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(let t=0;t<this.m.t;++t){let o=e[t]&32767;const n=o*this.mpl+((o*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(o=t+this.m.t,e[o]+=this.m.am(0,n,e,t,0,this.m.t);e[o]>=e.DV;)e[o]-=e.DV,e[++o]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function xo(e,t){e.squareTo(t),this.reduce(t)}function mo(e,t,o){e.multiplyTo(t,o),this.reduce(o)}B.prototype.convert=Eo;B.prototype.revert=po;B.prototype.reduce=ho;B.prototype.mulTo=mo;B.prototype.sqrTo=xo;function fo(e,t,o){let n=e.bitLength(),i,s=Se(1);const r=new B(t);if(n<=0)return s;n<18?i=1:n<48?i=3:n<144?i=4:n<768?i=5:i=6;const c=[];let a=3;const d=i-1,u=(1<<i)-1;if(c[1]=r.convert(this),i>1){const R=N();for(r.sqrTo(c[1],R);a<=u;)c[a]=N(),r.mulTo(R,c[a-2],c[a]),a+=2}let p=e.t-1,E,h=!0,x=N(),m;for(n=ve(e[p])-1;p>=0;){for(n>=d?E=e[p]>>n-d&u:(E=(e[p]&(1<<n+1)-1)<<d-n,p>0&&(E|=e[p-1]>>this.DB+n-d)),a=i;!(E&1);)E>>=1,--a;if((n-=a)<0&&(n+=this.DB,--p),h)c[E].copyTo(s),h=!1;else{for(;a>1;)r.sqrTo(s,x),r.sqrTo(x,s),a-=2;a>0?r.sqrTo(s,x):(m=s,s=x,x=m),r.mulTo(x,c[E],s)}for(;p>=0&&!(e[p]&1<<n);)r.sqrTo(s,x),m=s,s=x,x=m,--n<0&&(n=this.DB-1,--p)}const I=r.revert(s);return o(null,I),I}l.prototype.copyTo=Ht;l.prototype.fromInt=zt;l.prototype.fromString=Wt;l.prototype.clamp=kt;l.prototype.dlShiftTo=Zt;l.prototype.drShiftTo=Xt;l.prototype.lShiftTo=Jt;l.prototype.rShiftTo=Qt;l.prototype.subTo=Gt;l.prototype.multiplyTo=eo;l.prototype.squareTo=to;l.prototype.divRemTo=oo;l.prototype.invDigit=so;l.prototype.addTo=ro;l.prototype.toString=jt;l.prototype.negate=Kt;l.prototype.abs=Vt;l.prototype.compareTo=$t;l.prototype.bitLength=Yt;l.prototype.mod=no;l.prototype.equals=io;l.prototype.add=ao;l.prototype.subtract=co;l.prototype.multiply=lo;l.prototype.divide=uo;l.prototype.modPow=fo;l.ZERO=Se(0);l.ONE=Se(1);const Io=async({a:e,g:t,k:o,x:n,B:i,N:s,U:r})=>new Promise((c,a)=>{t.modPow(n,s,(d,u)=>{if(d){a(d);return}i.subtract(o.multiply(u)).modPow(e.add(r.multiply(n)),s,(p,E)=>{if(p){a(p);return}c(E.mod(s))})})}),Ro="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",rt={},ce={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),rt[e]=t,ce[t]=e}const M=e=>{if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let o=0;o<e.length;o+=2){const n=e.slice(o,o+2).toLowerCase();if(n in ce)t[o/2]=ce[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t},ye=e=>{let t="";for(let o=0;o<e.byteLength;o++)t+=rt[e[o]];return t},de=e=>{const t=new k;t.update(e);const o=t.digestSync(),n=ye(o);return new Array(64-n.length).join("0")+n},W=e=>de(M(e)),No=/^[89a-f]/i,v=e=>{if(!(e instanceof l))throw new Error("Not a BigInteger");const t=e.compareTo(l.ZERO)<0;let o=e.abs().toString(16);if(o=o.length%2!==0?`0${o}`:o,o=No.test(o)?`00${o}`:o,t){const n=o.split("").map(s=>{const r=~parseInt(s,16)&15;return"0123456789ABCDEF".charAt(r)}).join("");o=new l(n,16).add(l.ONE).toString(16),o.toUpperCase().startsWith("FF8")&&(o=o.substring(2))}return o},So=({A:e,B:t})=>{const o=new l(W(v(e)+v(t)),16);if(o.equals(l.ZERO))throw new Error("U cannot be zero.");return o},vo=(e,t,o)=>{const n=new k(t);n.update(e);const i=n.digestSync(),s=new k(i);return s.update(o),s.digestSync().slice(0,16)},Te=e=>{const t=new Ie().random(e).toString();return M(t)},yo=()=>j.convert(Te(40));class To{constructor({userPoolName:t,a:o,g:n,A:i,N:s}){this.encoder=z,this.userPoolName=t,this.a=o,this.g=n,this.A=i,this.N=s,this.k=new l(W(`${v(s)}${v(n)}`),16)}getRandomPassword(){if(!this.randomPassword)throw new y({name:"EmptyBigIntegerRandomPassword",message:"random password is empty"});return this.randomPassword}getSaltToHashDevices(){if(!this.saltToHashDevices)throw new y({name:"EmptyBigIntegersaltToHashDevices",message:"saltToHashDevices is empty"});return this.saltToHashDevices}getVerifierDevices(){if(!this.verifierDevices)throw new y({name:"EmptyBigIntegerVerifierDevices",message:"verifyDevices is empty"});return this.verifierDevices}async generateHashDevice(t,o){this.randomPassword=yo();const n=`${t}${o}:${this.randomPassword}`,i=de(n),s=ye(Te(16));return this.saltToHashDevices=v(new l(s,16)),new Promise((r,c)=>{this.g.modPow(new l(W(this.saltToHashDevices+i),16),this.N,(a,d)=>{if(a){c(a);return}this.verifierDevices=v(d),r()})})}async getPasswordAuthenticationKey({username:t,password:o,serverBValue:n,salt:i}){if(n.mod(this.N).equals(l.ZERO))throw new Error("B cannot be zero.");const s=So({A:this.A,B:n}),r=`${this.userPoolName}${t}:${o}`,c=de(r),a=new l(W(v(i)+c),16),d=await Io({a:this.a,g:this.g,k:this.k,x:a,B:n,N:this.N,U:s}),u=this.encoder.convert("Caldera Derived Key"),p=this.encoder.convert(""),E=new Uint8Array(u.byteLength+p.byteLength);return E.set(u,0),E.set(p,u.byteLength),vo(M(v(d)),M(v(s)),E)}}const go=async({a:e,g:t,N:o})=>new Promise((n,i)=>{t.modPow(e,o,(s,r)=>{if(s){i(s);return}if(r.mod(o).equals(l.ZERO)){i(new Error("Illegal parameter. A mod N cannot be 0."));return}n(r)})}),Q=async e=>{const t=new l(Ro,16),o=new l("2",16),n=Co(),i=await go({a:n,g:o,N:t});return new To({userPoolName:e,a:n,g:o,A:i,N:t})},Co=()=>{const e=ye(Te(128));return new l(e,16)},Ao=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Fo=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],at=()=>{const e=new Date,t=Fo[e.getUTCDay()],o=Ao[e.getUTCMonth()],n=e.getUTCDate();let i=e.getUTCHours();i<10&&(i=`0${i}`);let s=e.getUTCMinutes();s<10&&(s=`0${s}`);let r=e.getUTCSeconds();r<10&&(r=`0${r}`);const c=e.getUTCFullYear();return`${t} ${o} ${n} ${i}:${s}:${r} UTC ${c}`},ct=({userPoolName:e,username:t,challengeParameters:o,dateNow:n,hkdf:i})=>{const s=z.convert(e),r=z.convert(t),c=wo(o.SECRET_BLOCK),a=z.convert(n),d=new Uint8Array(s.byteLength+r.byteLength+c.byteLength+a.byteLength);d.set(s,0),d.set(r,s.byteLength),d.set(c,s.byteLength+r.byteLength),d.set(a,s.byteLength+r.byteLength+c.byteLength);const u=new k(i);u.update(d);const p=u.digestSync();return j.convert(p)},wo=e=>{const t="=".repeat((4-e.length%4)%4),o=(e+t).replace(/-/g,"+").replace(/_/g,"/"),n=ut.convert(o),i=new Uint8Array(n.length);for(let s=0;s<n.length;++s)i[s]=n.charCodeAt(s);return i},ot="userAttributes.";async function Po(e,t,o,n,i){var m,I;const{userPoolClientId:s,userPoolId:r,userPoolEndpoint:c}=n,a={USERNAME:e,PASSWORD:t},d=await i.getDeviceMetadata(e);d&&d.deviceKey&&(a.DEVICE_KEY=d.deviceKey);const u=b({username:e,userPoolId:r,userPoolClientId:s}),p={AuthFlow:"USER_PASSWORD_AUTH",AuthParameters:a,ClientMetadata:o,ClientId:s,UserContextData:u},h=await V({endpointResolver:g({endpointOverride:c})})({region:T(r),userAgentValue:Z($.SignIn)},p),x=((m=h.ChallengeParameters)==null?void 0:m.USERNAME)??((I=h.ChallengeParameters)==null?void 0:I.USER_ID_FOR_SRP)??e;return ne(x),h.ChallengeName==="DEVICE_SRP_AUTH"?ge({username:x,config:n,clientMetadata:o,session:h.Session,tokenOrchestrator:i}):h}async function Do(e,t,o,n,i){const{userPoolId:s,userPoolClientId:r,userPoolEndpoint:c}=n,a=(s==null?void 0:s.split("_")[1])||"",d=await Q(a),u={USERNAME:e,SRP_A:d.A.toString(16)},p=b({username:e,userPoolId:s,userPoolClientId:r}),E={AuthFlow:"USER_SRP_AUTH",AuthParameters:u,ClientMetadata:o,ClientId:r,UserContextData:p},x=await V({endpointResolver:g({endpointOverride:c})})({region:T(s),userAgentValue:Z($.SignIn)},E),{ChallengeParameters:m,Session:I}=x,R=(m==null?void 0:m.USERNAME)??e;return ne(R),oe(dt,[t,m,o,I,d,n,i],R,i)}async function _o(e,t,o,n){var x;const{userPoolClientId:i,userPoolId:s,userPoolEndpoint:r}=o,c={USERNAME:e},a=await n.getDeviceMetadata(e);a&&a.deviceKey&&(c.DEVICE_KEY=a.deviceKey);const d=b({username:e,userPoolId:s,userPoolClientId:i}),u={AuthFlow:"CUSTOM_AUTH",AuthParameters:c,ClientMetadata:t,ClientId:i,UserContextData:d},E=await V({endpointResolver:g({endpointOverride:r})})({region:T(s),userAgentValue:Z($.SignIn)},u),h=((x=E.ChallengeParameters)==null?void 0:x.USERNAME)??e;return ne(h),E.ChallengeName==="DEVICE_SRP_AUTH"?ge({username:h,config:o,clientMetadata:t,session:E.Session,tokenOrchestrator:n}):E}async function Mo(e,t,o,n,i){U(n);const{userPoolId:s,userPoolClientId:r,userPoolEndpoint:c}=n,a=(s==null?void 0:s.split("_")[1])||"",d=await Q(a),u={USERNAME:e,SRP_A:d.A.toString(16),CHALLENGE_NAME:"SRP_A"},p=b({username:e,userPoolId:s,userPoolClientId:r}),E={AuthFlow:"CUSTOM_AUTH",AuthParameters:u,ClientMetadata:o,ClientId:r,UserContextData:p},h=V({endpointResolver:g({endpointOverride:c})}),{ChallengeParameters:x,Session:m}=await h({region:T(s),userAgentValue:Z($.SignIn)},E),I=(x==null?void 0:x.USERNAME)??e;return ne(I),oe(dt,[t,x,o,m,d,n,i],I,i)}async function ge({username:e,config:t,clientMetadata:o,session:n,tokenOrchestrator:i}){const{userPoolId:s,userPoolEndpoint:r}=t,c=t.userPoolClientId,a=await(i==null?void 0:i.getDeviceMetadata(e));st(a);const d=await Q(a.deviceGroupKey),u={USERNAME:e,SRP_A:d.A.toString(16),DEVICE_KEY:a.deviceKey},p={ChallengeName:"DEVICE_SRP_AUTH",ClientId:c,ChallengeResponses:u,ClientMetadata:o,Session:n},E=Re({endpointResolver:g({endpointOverride:r})}),{ChallengeParameters:h,Session:x}=await E({region:T(s)},p);return bo(e,h,o,x,d,t,i)}async function bo(e,t,o,n,i,{userPoolId:s,userPoolClientId:r,userPoolEndpoint:c},a){const d=await(a==null?void 0:a.getDeviceMetadata(e));st(d);const u=new l(t==null?void 0:t.SRP_B,16),p=new l(t==null?void 0:t.SALT,16),{deviceKey:E}=d,{deviceGroupKey:h}=d,x=await i.getPasswordAuthenticationKey({username:d.deviceKey,password:d.randomPassword,serverBValue:u,salt:p}),m=at(),I={USERNAME:(t==null?void 0:t.USERNAME)??e,PASSWORD_CLAIM_SECRET_BLOCK:t==null?void 0:t.SECRET_BLOCK,TIMESTAMP:m,PASSWORD_CLAIM_SIGNATURE:ct({username:E,userPoolName:h,challengeParameters:t,dateNow:m,hkdf:x}),DEVICE_KEY:E},R=b({username:e,userPoolId:s,userPoolClientId:r}),C={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:r,ChallengeResponses:I,Session:n,ClientMetadata:o,UserContextData:R};return Re({endpointResolver:g({endpointOverride:c})})({region:T(s)},C)}async function dt(e,t,o,n,i,s,r){const{userPoolId:c,userPoolClientId:a,userPoolEndpoint:d}=s,u=(c==null?void 0:c.split("_")[1])||"",p=new l(t==null?void 0:t.SRP_B,16),E=new l(t==null?void 0:t.SALT,16),h=t==null?void 0:t.USER_ID_FOR_SRP;if(!h)throw new y({name:"EmptyUserIdForSRPException",message:"USER_ID_FOR_SRP was not found in challengeParameters"});const x=await i.getPasswordAuthenticationKey({username:h,password:e,serverBValue:p,salt:E}),m=at(),I={USERNAME:h,PASSWORD_CLAIM_SECRET_BLOCK:t==null?void 0:t.SECRET_BLOCK,TIMESTAMP:m,PASSWORD_CLAIM_SIGNATURE:ct({username:h,userPoolName:u,challengeParameters:t,dateNow:m,hkdf:x})},R=await r.getDeviceMetadata(h);R&&R.deviceKey&&(I.DEVICE_KEY=R.deviceKey);const C=b({username:h,userPoolId:c,userPoolClientId:a}),ae={ChallengeName:"PASSWORD_VERIFIER",ChallengeResponses:I,ClientMetadata:o,Session:n,ClientId:a,UserContextData:C},q=await Re({endpointResolver:g({endpointOverride:d})})({region:T(c)},ae);return q.ChallengeName==="DEVICE_SRP_AUTH"?ge({username:h,config:s,clientMetadata:o,session:q.Session,tokenOrchestrator:r}):q}async function G(e){var i;const{challengeName:t,challengeParameters:o}=e,n=(i=O.getConfig().Auth)==null?void 0:i.Cognito;switch(U(n),t){case"CUSTOM_CHALLENGE":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_CUSTOM_CHALLENGE",additionalInfo:o}};case"MFA_SETUP":{const{signInSession:s,username:r}=_.getState();if(!qo(o,"TOTP"))throw new y({name:we.SignInException,message:`Cannot initiate MFA setup from available types: ${le(ue(o.MFAS_CAN_SETUP))}`});const c=Pt({endpointResolver:g({endpointOverride:n.userPoolEndpoint})}),{Session:a,SecretCode:d}=await c({region:T(n.userPoolId)},{Session:s});return _.dispatch({type:"SET_SIGN_IN_SESSION",value:a}),{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_TOTP_SETUP",totpSetupDetails:Uo(d,r)}}}case"NEW_PASSWORD_REQUIRED":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED",missingAttributes:Lo(o.requiredAttributes)}};case"SELECT_MFA_TYPE":return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_MFA_SELECTION",allowedMFATypes:le(ue(o.MFAS_CAN_CHOOSE))}};case"SMS_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_SMS_CODE",codeDeliveryDetails:{deliveryMedium:o.CODE_DELIVERY_DELIVERY_MEDIUM,destination:o.CODE_DELIVERY_DESTINATION}}};case"SOFTWARE_TOKEN_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_TOTP_CODE"}}}throw new y({name:we.SignInException,message:`An error occurred during the sign in process. ${t} challengeName returned by the underlying service was not addressed.`})}function Uo(e,t){return{sharedSecret:e,getSetupUri:(o,n)=>{const i=`otpauth://totp/${o}:${n??t}?secret=${e}&issuer=${o}`;return new pt(i)}}}function ee(e){if(e===K.PasswordResetRequiredException)return{isSignedIn:!1,nextStep:{signInStep:"RESET_PASSWORD"}};if(e===K.UserNotConfirmedException)return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_UP"}}}function Lo(e){return e?JSON.parse(e).map(o=>o.includes(ot)?o.replace(ot,""):o):[]}function Bo(e){if(e==="SMS_MFA")return"SMS";if(e==="SOFTWARE_TOKEN_MFA")return"TOTP"}function le(e){if(e)return e.map(Bo).filter(Boolean)}function ue(e){return e?JSON.parse(e):[]}function qo(e,t){const{MFAS_CAN_SETUP:o}=e,n=le(ue(o));return n?n.includes(t):!1}async function Oo(){let e;try{e=await fe()}catch{}if(e&&e.userId&&e.username)throw new y({name:Et,message:"There is already a signed in user.",recoverySuggestion:"Call signOut before calling signIn again."})}async function te({userPoolId:e,userPoolEndpoint:t,newDeviceMetadata:o,accessToken:n}){if(!o)return;const i=e.split("_")[1]||"",s=await Q(i),r=o==null?void 0:o.DeviceKey,c=o==null?void 0:o.DeviceGroupKey;try{await s.generateHashDevice(c??"",r??"")}catch{return}const a={Salt:j.convert(M(s.getSaltToHashDevices())),PasswordVerifier:j.convert(M(s.getVerifierDevices()))},d=s.getRandomPassword();try{return await Dt({endpointResolver:g({endpointOverride:t})})({region:T(e)},{AccessToken:n,DeviceName:await At(),DeviceKey:o==null?void 0:o.DeviceKey,DeviceSecretVerifierConfig:a}),{deviceKey:r,deviceGroupKey:c,randomPassword:d}}catch{return}}async function oe(e,t,o,n){try{return await e(...t)}catch(i){if(i instanceof y&&i.name==="ResourceNotFoundException"&&i.message.includes("Device does not exist."))return await n.clearDeviceMetadata(o),e(...t);throw i}}function ne(e){const{dispatch:t}=_;t({type:"SET_USERNAME",value:e})}function se(e){return _.getState().username??e}async function ie(e){if(e.AccessToken){const t=Ae(e.AccessToken),o=(t.payload.iat||0)*1e3,n=new Date().getTime(),i=o>0?o-n:0;let s,r,c;e.RefreshToken&&(r=e.RefreshToken),e.IdToken&&(s=Ae(e.IdToken)),e!=null&&e.NewDeviceMetadata&&(c=e.NewDeviceMetadata);const a={accessToken:t,idToken:s,refreshToken:r,clockDrift:i,deviceMetadata:c,username:e.username};e!=null&&e.signInDetails&&(a.signInDetails=e.signInDetails),await D.setTokens({tokens:a})}else throw new ht({message:"Invalid tokens",name:"InvalidTokens",recoverySuggestion:"Check Cognito UserPool settings"})}const Ho="Unable to get user session following successful sign-in.",re=async()=>{try{xt.dispatch("auth",{event:"signedIn",data:await fe()},"Auth",mt)}catch(e){throw e.name===ft?new y({name:It,message:Ho,recoverySuggestion:"This most likely is due to auth tokens not being persisted. If you are using cookie store, please ensure cookies can be correctly set from your server."}):e}};async function zo(e){var c;const t=(c=O.getConfig().Auth)==null?void 0:c.Cognito;U(t);const{username:o,password:n,options:i}=e,s={loginId:o,authFlowType:"CUSTOM_WITHOUT_SRP"},r=i==null?void 0:i.clientMetadata;F(!!o,w.EmptySignInUsername),F(!n,w.CustomAuthSignInPassword);try{const{ChallengeName:a,ChallengeParameters:d,AuthenticationResult:u,Session:p}=await oe(_o,[o,r,t,D],o,D),E=se(o);return X({signInSession:p,username:E,challengeName:a,signInDetails:s}),u?(P(),await ie({username:E,...u,NewDeviceMetadata:await te({userPoolId:t.userPoolId,userPoolEndpoint:t.userPoolEndpoint,newDeviceMetadata:u.NewDeviceMetadata,accessToken:u.AccessToken}),signInDetails:s}),await re(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):G({challengeName:a,challengeParameters:d})}catch(a){P(),Y(a);const d=ee(a.name);if(d)return d;throw a}}async function Wo(e){var c;const{username:t,password:o,options:n}=e,i={loginId:t,authFlowType:"CUSTOM_WITH_SRP"},s=(c=O.getConfig().Auth)==null?void 0:c.Cognito;U(s);const r=n==null?void 0:n.clientMetadata;F(!!t,w.EmptySignInUsername),F(!!o,w.EmptySignInPassword);try{const{ChallengeName:a,ChallengeParameters:d,AuthenticationResult:u,Session:p}=await Mo(t,o,r,s,D),E=se(t);return X({signInSession:p,username:E,challengeName:a,signInDetails:i}),u?(await ie({username:E,...u,NewDeviceMetadata:await te({userPoolId:s.userPoolId,userPoolEndpoint:s.userPoolEndpoint,newDeviceMetadata:u.NewDeviceMetadata,accessToken:u.AccessToken}),signInDetails:i}),P(),await re(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):G({challengeName:a,challengeParameters:d})}catch(a){P(),Y(a);const d=ee(a.name);if(d)return d;throw a}}async function nt(e){var r,c;const{username:t,password:o}=e,n=(r=O.getConfig().Auth)==null?void 0:r.Cognito,i={loginId:t,authFlowType:"USER_SRP_AUTH"};U(n);const s=(c=e.options)==null?void 0:c.clientMetadata;F(!!t,w.EmptySignInUsername),F(!!o,w.EmptySignInPassword);try{const{ChallengeName:a,ChallengeParameters:d,AuthenticationResult:u,Session:p}=await Do(t,o,s,n,D),E=se(t);return X({signInSession:p,username:E,challengeName:a,signInDetails:i}),u?(P(),await ie({username:E,...u,NewDeviceMetadata:await te({userPoolId:n.userPoolId,userPoolEndpoint:n.userPoolEndpoint,newDeviceMetadata:u.NewDeviceMetadata,accessToken:u.AccessToken}),signInDetails:i}),await re(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):G({challengeName:a,challengeParameters:d})}catch(a){P(),Y(a);const d=ee(a.name);if(d)return d;throw a}}async function ko(e){var c;const{username:t,password:o,options:n}=e,i=(c=O.getConfig().Auth)==null?void 0:c.Cognito,s={loginId:t,authFlowType:"USER_PASSWORD_AUTH"};U(i);const r=n==null?void 0:n.clientMetadata;F(!!t,w.EmptySignInUsername),F(!!o,w.EmptySignInPassword);try{const{ChallengeName:a,ChallengeParameters:d,AuthenticationResult:u,Session:p}=await oe(Po,[t,o,r,i,D],t,D),E=se(t);return X({signInSession:p,username:E,challengeName:a,signInDetails:s}),u?(await ie({...u,username:E,NewDeviceMetadata:await te({userPoolId:i.userPoolId,userPoolEndpoint:i.userPoolEndpoint,newDeviceMetadata:u.NewDeviceMetadata,accessToken:u.AccessToken}),signInDetails:s}),P(),await re(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):G({challengeName:a,challengeParameters:d})}catch(a){P(),Y(a);const d=ee(a.name);if(d)return d;throw a}}async function jo(e){var o;const t=(o=e.options)==null?void 0:o.authFlowType;switch(await Oo(),t){case"USER_SRP_AUTH":return nt(e);case"USER_PASSWORD_AUTH":return ko(e);case"CUSTOM_WITHOUT_SRP":return zo(e);case"CUSTOM_WITH_SRP":return Wo(e);default:return nt(e)}}const Ko="/assets/laptop-TDrEAxBI.svg",Vo=Rt(),Xo=()=>{var a,d;const[e,t]=Fe.useState(!1),{register:o,formState:{errors:n},handleSubmit:i}=Tt({resolver:gt(Ct)}),[s,r]=Fe.useState(""),c=i(async u=>{var p,E;try{const h=u.userID,x=await Vo.graphql({query:Nt}),m=(E=(p=x==null?void 0:x.data)==null?void 0:p.listUsers)==null?void 0:E.items.find(I=>I.empID===h.toUpperCase());if(m&&m.status==="Active"){const I=u.password,{isSignedIn:R,userId:C,nextStep:ae}=await jo({username:h,password:I}),H=await fe();if(R||H){const q=H?H.username:h;localStorage.setItem("userID",q);const Ce=m.selectType;Ce?(localStorage.setItem("userType",Ce),window.location.href="/dashboard"):(console.error("userType not found"),alert("Access denied: Your account is inactive. Please contact the administrator for assistance"))}}else console.error("User is not active"),alert("Access denied: Your account is inactive. Please contact the administrator for assistance")}catch(h){console.error("Error during sign-in process:",h),r(h.message)}});return f.jsxs("section",{className:"screen-size mx-auto flex h-screen",children:[f.jsx("div",{className:"flex-1 border-r-2  border-[#E9E9E9] center",children:f.jsx("img",{className:"w-full max-w-[450px]",src:Ko,alt:" Rightside Image not found"})}),f.jsxs("div",{className:"flex-1 flex items-center gap-8 py-20 flex-col w-full px-3",children:[f.jsxs("div",{children:[" ",f.jsx("img",{className:"w-full max-w-[450px]",src:St,alt:" Logo not found"})]}),f.jsxs("article",{className:"text-center space-y-2",children:[f.jsx("h1",{className:"text-dark_grey title",children:"Welcome Back"}),f.jsx("p",{className:"text-dark_grey text_size_8",children:"Hello again! Dive into your tasks and let's make today productive."})]}),s&&f.jsx("p",{className:"text-red",children:s}),f.jsxs("section",{className:" space-y-5",children:[f.jsxs("div",{className:"w-[400px] space-y-1",children:[f.jsx("label",{htmlFor:"userID",className:"text-dark_grey text_size_8",children:"Login ID"}),f.jsx("div",{className:"shadow-md shadow-[#00000040] border border-[#D3D3D3] overflow-hidden rounded-lg py-1 px-3 w-full",children:f.jsx("input",{className:"outline-none py-2 w-full",type:"text",placeholder:"",id:"userID",name:"userID",...o("userID")})}),f.jsx("p",{className:"text-[red] text-sm my-2 ml-5",children:(a=n.userID)==null?void 0:a.message})]}),f.jsxs("div",{className:"w-[400px] space-y-1",children:[f.jsx("label",{htmlFor:"password",className:"text-dark_grey text_size_8",children:"Password"}),f.jsxs("div",{className:"shadow-md shadow-[#00000040] border border-[#D3D3D3] overflow-hidden rounded-lg py-1 pl-3 pr-4 w-full center",children:[f.jsx("input",{className:"outline-none py-2 w-full",type:e?"text":"password",placeholder:"",id:"password",name:"password",...o("password")}),e?f.jsx(vt,{className:"text-2xl text-[#837E7E]",onClick:()=>t(!e)}):f.jsx(yt,{className:"text-2xl text-[#837E7E]",onClick:()=>t(!e)})]}),f.jsx("p",{className:"text-[red] text-sm my-2 ml-5",children:(d=n.password)==null?void 0:d.message})]}),f.jsx("div",{className:"center ",children:f.jsx("button",{className:"primary_btn text_size_4 my-5",onClick:c,children:"Login"})})]})]})]})};export{Xo as default};
