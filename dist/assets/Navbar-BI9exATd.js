import{l as e,L as d,v as C,r as a,x as M}from"./index-DDs92gNY.js";import{g as L,s as $,h as A,i as z,a as T,j as R}from"./index-B-aAmqxl.js";import{c as q,l as U}from"./logo-with-name-BBOTnW2p.js";const G=({setIsOpen:m,profilePhoto:r,name:g,email:x,contactNo:s})=>{const u=async()=>{try{await $(),localStorage.removeItem("userID"),localStorage.removeItem("userType"),window.location.href="/login"}catch(o){console.log("Error signing out",o)}};return e.jsxs("section",{children:[e.jsxs("div",{className:"center flex-col gap-2 py-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"max-w-10 h-10 w-full rounded-full relative overflow-hidden shadow-md shadow-[#00000033]",children:e.jsx("img",{className:"w-full object-cover",src:r,alt:"avatar not found"})}),e.jsx("p",{className:"absolute -right-2 bottom-0 h-5 w-5 rounded-full bg-[#D9D9D9] center",children:e.jsx(q,{className:"text-xs text-dark_grey"})})]}),e.jsx(d,{to:"/personalInformation",className:"text-xs text-dark_grey",onClick:()=>{m(!1)},children:"Personal Info Edit"}),e.jsx("div",{className:"h-1 w-full bg-[#AAAAAA]"})]}),e.jsxs("div",{className:"space-y-2 mb-3 px-4",children:[e.jsxs("div",{className:" space-y-1 text-[#4F4F4F] text-xs",children:[e.jsx("label",{htmlFor:"name",className:"font-medium ",children:"Name"}),e.jsx("div",{className:"border flex-1 rounded-md border-[#d4cfcf]  px-2 py-1 ",children:e.jsx("input",{id:"name",className:"outline-none w-full",type:"text",value:g,readOnly:!0})})]}),e.jsxs("div",{className:" space-y-1 text-[#4F4F4F] text-xs",children:[e.jsx("label",{htmlFor:"phoneNo",className:"font-medium ",children:"Phone Number"}),e.jsx("div",{className:"border rounded-md border-[#d4cfcf] text-[#4F4F4F] text-xs px-2 py-1 ",children:e.jsx("input",{id:"phoneNo",className:"outline-none w-full",type:"text",value:s,readOnly:!0})})]}),e.jsxs("div",{className:" space-y-1 text-[#4F4F4F] text-xs",children:[e.jsx("label",{htmlFor:"email",className:"font-medium ",children:"Email"}),e.jsx("div",{className:"border rounded-md border-[#d4cfcf] text-[#4F4F4F] text-xs px-2 py-1 ",children:e.jsx("input",{id:"email",className:"outline-none w-full",type:"text",value:x,readOnly:!0})})]}),e.jsxs("div",{className:"flex justify-between text-xs text-dark_grey font-semibold pt-3",children:[e.jsx(d,{to:"/changePassword",className:"py-1 px-2 border-2 rounded-md border-primary ",children:"Change Password"}),e.jsxs(d,{className:"flex items-center gap-1 py-1 px-2 bg-primary  rounded-md ",onClick:u,children:["Logout",e.jsx("span",{children:e.jsx(L,{className:"text-lg text-dark_grey"})})]})]})]})]})},H=C(),J=()=>{const[m,r]=a.useState(!1),[g,x]=a.useState(""),[s,u]=a.useState({profilePhoto:"",name:"",email:"",contactNo:""}),[o,b]=a.useState(""),N=()=>{r(t=>!t)},f=a.useRef(null),j=t=>{f.current&&!f.current.contains(t.target)&&r(!1)};a.useEffect(()=>{const t=localStorage.getItem("userType");return x(t),document.addEventListener("mousedown",j),()=>{document.removeEventListener("mousedown",j)}},[]);const n=new Date,I=n.getDate(),F=n.getMonth()+1,D=n.getFullYear(),P=`${I}/${F}/${D}`;let l=n.getHours();const h=n.getMinutes(),p=n.getSeconds(),k=l>=12?"PM":"AM";l=l%12,l=l||12;const _=h<10?"0"+h:h,E=p<10?"0"+p:p,O=`${l}:${_}:${E} ${k}`;return setInterval(()=>{},100),a.useEffect(()=>{const t=localStorage.getItem("userID");b(t)},[]),a.useEffect(()=>{o&&(async()=>{var v,y;try{const c=await H.graphql({query:M}),w=((y=(v=c==null?void 0:c.data)==null?void 0:v.listEmpPersonalInfos)==null?void 0:y.items)||[];if(w.length===0)return;const i=w.find(S=>S.empID.toLowerCase()===o.toLowerCase());i?u({profilePhoto:i.profilePhoto,name:i.name,email:i.email,contactNo:i.contactNo||""}):console.log(`No matching employee found for userID: ${o}`)}catch(c){console.log("Error fetching employee personal infos:",c)}})()},[o]),e.jsx("nav",{className:"center bg-medium_white h-28 fixed top-0 w-full z-50 shadow-sm",children:e.jsxs("div",{className:"screen-size flex justify-between items-center gap-10 py-7 px-3",children:[e.jsx("section",{className:"flex-initial",children:e.jsx("div",{className:"max-w-[250px] w-full",children:e.jsx("img",{className:"w-full",src:U,alt:"not found"})})}),e.jsxs("section",{className:"flex-initial flex item-center gap-5 ",children:[e.jsx("div",{className:"my-auto px-2",children:e.jsx("span",{children:e.jsx(A,{className:"text-2xl"})})}),e.jsx("div",{className:" my-auto",children:e.jsxs("p",{className:"relative",children:[e.jsxs(d,{to:"/notifications",children:[" ",e.jsx(z,{className:"text-2xl"})]}),e.jsxs("span",{className:"absolute -top-3 -right-3 rounded-full h-5 w-5 text-dark_grey bg-primary text-xs center",children:["1"," "]})]})}),e.jsxs("div",{className:"flex items-center gap-5 px-5",children:[e.jsxs("div",{className:"space-y-2 ",children:[e.jsxs("p",{className:"text-dark_grey text_size_5",children:[" Welcome ",s.name]}),e.jsxs("article",{className:"flex gap-5 text_size_7 text-dark_grey",children:[e.jsx("p",{children:P}),e.jsx("p",{children:O})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"max-w-10 h-10 w-full rounded-full relative overflow-hidden shadow-md shadow-[#00000033]",onClick:()=>N(),children:e.jsx("img",{className:"w-full object-cover",src:s.profilePhoto||T,alt:"avatar not found"})}),e.jsx("p",{className:"absolute -right-2 bottom-0 h-5 w-5 rounded-full bg-[#D9D9D9] center",onClick:()=>N(),children:e.jsx(R,{className:"text-xs text-dark_grey"})})]}),m&&e.jsx("div",{ref:f,className:"absolute top-12 -left-40 bg-white shadow-md  py-2 text-dark_grey text-[15px]  w-[250px]  flex flex-col",children:e.jsx(G,{setIsOpen:r,name:s.name,email:s.email,profilePhoto:s.profilePhoto,contactNo:s.contactNo})})]})]})]})]})})};export{J as default};
